(()=>{"use strict";var e,s,t,a={3423:(e,s,t)=>{var a={};t.r(a),t.d(a,{cn:()=>Be});var r={};t.r(r),t.d(r,{Alert:()=>We,AlertDescription:()=>Ge,AlertTitle:()=>Ye});var n={};t.r(n),t.d(n,{Button:()=>Ze,buttonVariants:()=>Ke});var i={};t.r(i),t.d(i,{Tooltip:()=>es,TooltipContent:()=>ts,TooltipProvider:()=>Qe,TooltipTrigger:()=>ss});var l={};t.r(l),t.d(l,{Input:()=>is});var o={};t.r(o),t.d(o,{Label:()=>ds});var c={};t.r(c),t.d(c,{RadioGroup:()=>hs,RadioGroupItem:()=>xs});var d={};t.r(d),t.d(d,{Select:()=>bs,SelectContent:()=>Ss,SelectGroup:()=>vs,SelectItem:()=>As,SelectLabel:()=>ks,SelectScrollDownButton:()=>Cs,SelectScrollUpButton:()=>ws,SelectSeparator:()=>_s,SelectTrigger:()=>Ns,SelectValue:()=>ys});var m={};t.r(m),t.d(m,{Badge:()=>Os,badgeVariants:()=>Rs});var u={};t.r(u),t.d(u,{Card:()=>Ds,CardContent:()=>Ms,CardDescription:()=>$s,CardFooter:()=>Fs,CardHeader:()=>Ls,CardTitle:()=>Us});var h={};t.r(h),t.d(h,{Separator:()=>Bs});var x={};t.r(x),t.d(x,{Avatar:()=>ot,AvatarFallback:()=>dt,AvatarImage:()=>ct});var p={};t.r(p),t.d(p,{Dialog:()=>jt,DialogClose:()=>yt,DialogContent:()=>wt,DialogDescription:()=>At,DialogFooter:()=>St,DialogHeader:()=>Ct,DialogOverlay:()=>Nt,DialogPortal:()=>vt,DialogTitle:()=>kt,DialogTrigger:()=>bt});var g={};t.r(g),t.d(g,{Table:()=>Wt,TableBody:()=>Gt,TableCaption:()=>Zt,TableCell:()=>Kt,TableFooter:()=>Ht,TableHead:()=>Jt,TableHeader:()=>Yt,TableRow:()=>Vt});var f={};t.r(f),t.d(f,{Textarea:()=>Na});var j={};t.r(j),t.d(j,{Tabs:()=>Ta,TabsContent:()=>Pa,TabsList:()=>Ea,TabsTrigger:()=>Ia});var b={};t.r(b),t.d(b,{DropdownMenu:()=>Ma,DropdownMenuCheckboxItem:()=>Ja,DropdownMenuContent:()=>Ha,DropdownMenuGroup:()=>za,DropdownMenuItem:()=>Va,DropdownMenuLabel:()=>Za,DropdownMenuPortal:()=>Ba,DropdownMenuRadioGroup:()=>Wa,DropdownMenuRadioItem:()=>Ka,DropdownMenuSeparator:()=>Xa,DropdownMenuShortcut:()=>Qa,DropdownMenuSub:()=>qa,DropdownMenuSubContent:()=>Ga,DropdownMenuSubTrigger:()=>Ya,DropdownMenuTrigger:()=>Fa});var v={};t.r(v),t.d(v,{Checkbox:()=>Nn});var y={};t.r(y),t.d(y,{ScrollArea:()=>Cn,ScrollBar:()=>Sn});var N={};t.r(N),t.d(N,{reducer:()=>$n,toast:()=>Bn,useToast:()=>qn});var w={};t.r(w),t.d(w,{Progress:()=>Gn});var C={};t.r(C),t.d(C,{HoverCard:()=>Vn,HoverCardContent:()=>Kn,HoverCardTrigger:()=>Jn});var S={};t.r(S),t.d(S,{Collapsible:()=>ni,CollapsibleContent:()=>li,CollapsibleTrigger:()=>ii});var k={};t.r(k),t.d(k,{Command:()=>ji,CommandDialog:()=>bi,CommandEmpty:()=>Ni,CommandGroup:()=>wi,CommandInput:()=>vi,CommandItem:()=>Si,CommandList:()=>yi,CommandSeparator:()=>Ci,CommandShortcut:()=>ki});var A={};t.r(A),t.d(A,{Calendar:()=>Ei});var _={};t.r(_),t.d(_,{Popover:()=>Ri,PopoverContent:()=>Di,PopoverTrigger:()=>Oi});var T={};t.r(T),t.d(T,{Sheet:()=>ll,SheetClose:()=>cl,SheetContent:()=>hl,SheetDescription:()=>fl,SheetFooter:()=>pl,SheetHeader:()=>xl,SheetOverlay:()=>ml,SheetPortal:()=>dl,SheetTitle:()=>gl,SheetTrigger:()=>ol});var E={};t.r(E),t.d(E,{Switch:()=>_l});var I={};t.r(I),t.d(I,{Toast:()=>So,ToastAction:()=>ko,ToastClose:()=>Ao,ToastDescription:()=>To,ToastProvider:()=>No,ToastTitle:()=>_o,ToastViewport:()=>wo});var P={};t.r(P),t.d(P,{Toaster:()=>Eo});var R={};t.r(R),t.d(R,{Skeleton:()=>qo});var O={};t.r(O),t.d(O,{AlertDialog:()=>Zo,AlertDialogAction:()=>ic,AlertDialogCancel:()=>lc,AlertDialogContent:()=>sc,AlertDialogDescription:()=>nc,AlertDialogFooter:()=>ac,AlertDialogHeader:()=>tc,AlertDialogOverlay:()=>ec,AlertDialogPortal:()=>Qo,AlertDialogTitle:()=>rc,AlertDialogTrigger:()=>Xo});var D={};t.r(D),t.d(D,{Accordion:()=>Ju,AccordionContent:()=>Xu,AccordionItem:()=>Ku,AccordionTrigger:()=>Zu});var L={};t.r(L),t.d(L,{AspectRatio:()=>Qu});var U={};t.r(U),t.d(U,{ContextMenu:()=>sh,ContextMenuCheckboxItem:()=>mh,ContextMenuContent:()=>ch,ContextMenuGroup:()=>ah,ContextMenuItem:()=>dh,ContextMenuLabel:()=>hh,ContextMenuPortal:()=>rh,ContextMenuRadioGroup:()=>ih,ContextMenuRadioItem:()=>uh,ContextMenuSeparator:()=>xh,ContextMenuShortcut:()=>ph,ContextMenuSub:()=>nh,ContextMenuSubContent:()=>oh,ContextMenuSubTrigger:()=>lh,ContextMenuTrigger:()=>th});var $={};t.r($),t.d($,{Form:()=>gh,FormControl:()=>wh,FormDescription:()=>Ch,FormField:()=>jh,FormItem:()=>yh,FormLabel:()=>Nh,FormMessage:()=>Sh,useFormField:()=>bh});var M={};t.r(M),t.d(M,{Menubar:()=>Ph,MenubarCheckboxItem:()=>$h,MenubarContent:()=>Lh,MenubarGroup:()=>_h,MenubarItem:()=>Uh,MenubarLabel:()=>Fh,MenubarMenu:()=>Ah,MenubarPortal:()=>Th,MenubarRadioGroup:()=>Ih,MenubarRadioItem:()=>Mh,MenubarSeparator:()=>zh,MenubarShortcut:()=>Bh,MenubarSub:()=>Eh,MenubarSubContent:()=>Dh,MenubarSubTrigger:()=>Oh,MenubarTrigger:()=>Rh});var F={};t.r(F),t.d(F,{NavigationMenu:()=>Wh,NavigationMenuContent:()=>Jh,NavigationMenuIndicator:()=>Xh,NavigationMenuItem:()=>Gh,NavigationMenuLink:()=>Kh,NavigationMenuList:()=>Yh,NavigationMenuTrigger:()=>Vh,NavigationMenuViewport:()=>Zh,navigationMenuTriggerStyle:()=>Hh});var z={};t.r(z),t.d(z,{Slider:()=>ex});var B={};t.r(B),t.d(B,{Toggle:()=>ax,toggleVariants:()=>tx});var q={};t.r(q),t.d(q,{Toaster:()=>nx});var W={};t.r(W),t.d(W,{Sidebar:()=>dx,SidebarContent:()=>jx,SidebarFooter:()=>gx,SidebarGroup:()=>bx,SidebarGroupAction:()=>yx,SidebarGroupContent:()=>Nx,SidebarGroupLabel:()=>vx,SidebarHeader:()=>px,SidebarInput:()=>xx,SidebarInset:()=>hx,SidebarMenu:()=>wx,SidebarMenuAction:()=>Ax,SidebarMenuBadge:()=>_x,SidebarMenuButton:()=>kx,SidebarMenuItem:()=>Cx,SidebarMenuSkeleton:()=>Tx,SidebarMenuSub:()=>Ex,SidebarMenuSubButton:()=>Px,SidebarMenuSubItem:()=>Ix,SidebarProvider:()=>cx,SidebarRail:()=>ux,SidebarSeparator:()=>fx,SidebarTrigger:()=>mx,useSidebar:()=>ox});var Y=t(9950),G=t(1352),H=t.t(G,2),V=t(42074),J=t(28429),K=t(29246),Z=t(41397),X=t.n(Z);const Q=()=>{const e=window.location.hostname;return"localhost"===e||e.endsWith(".localhost")?"http://localhost:8000":"app.base44.com"===e?"https://app.base44.com":"beta-base44.onrender.com"===e?"https://beta-base44.onrender.com":e.includes("base44.onrender.com")||e.includes("apper-test.onrender.com")?"https://"+e:"base44.app"===e||e.endsWith(".base44.app")?"https://base44.app":"base44.io"===e||e.endsWith(".base44.io")?"https://base44.io":"https://app.base44.com"};function ee(){return Q()+"/api"}function se(){return"localhost"===window.location.hostname||window.location.hostname.endsWith(".localhost")?"http://localhost:8000/api":"base44.io"===window.location.hostname||window.location.hostname.endsWith(".base44.io")?"https://base44.io/api":"https://app.base44.com/api"}var te=t(53705);const ae=new class{constructor(){this._roomToListeners=void 0,this.historicalSocketIds=void 0,this.socket=void 0,this._roomToListeners={},this.historicalSocketIds=[],this.socket=(0,te.io)(Q(),{path:"/ws/socket.io/",transports:["websocket"]}),this.socket.on("connect",(()=>{this.historicalSocketIds=X().uniq(this.historicalSocketIds.concat([this.socket.id])),this.reconnectAllRooms()})),this.socket.on("disconnect",(()=>{})),this.socket.on("update_model",(e=>this.onUpdateModel(e))),this.socket.on("user_joined",(e=>{})),this.socket.on("user_left",(e=>{})),this.socket.on("*",(e=>{}))}getSocketId(){return this.socket.id}reconnectAllRooms(){Object.keys(this._roomToListeners).forEach((e=>{this.joinRoom(e),Object.values(this._roomToListeners[e]).forEach((e=>{let{reconnectCallback:s}=e;s&&s()}))}))}hasListeners(e){return Object.keys(this._roomToListeners[e]||{}).length>0}joinRoom(e){this.socket.emit("join",e)}leaveRoom(e){this.socket.emit("leave",e)}addListener(e,s,t){this.hasListeners(e)||(this.joinRoom(e),this._roomToListeners[e]={});const a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var s=16*Math.random()|0;return("x"===e?s:3&s|8).toString(16)}));this._roomToListeners[e][a]={callback:s,reconnectCallback:t};const r=this;return()=>{r.removeListener(a)}}getListeners(e){return this._roomToListeners[e]}removeListener(e){Object.keys(this._roomToListeners).forEach((s=>{delete this._roomToListeners[s][e],this.hasListeners(s)||(delete this._roomToListeners[s],this.leaveRoom(s))}))}onUpdateModel(e){let{room:s,data:t,sender_sid:a}=e;this.historicalSocketIds.includes(a)||(t=JSON.parse(t),this.hasListeners(s)&&Object.keys(this._roomToListeners[s]).forEach((e=>{const{callback:a}=this._roomToListeners[s][e];a(t)})))}};var re=t(15255);let ne={};function ie(e,s){ne[e]=s}function le(e){delete ne[e]}let oe=[];function ce(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const n=K.A.create();let i;return i=e.startsWith("/")?ee()+e:e,n.defaults.baseURL=i,a&&(n.defaults.headers.common["Content-Type"]="application/json",n.defaults.headers.common.Accept="application/json"),Object.keys(s).forEach((e=>{n.defaults.headers.common[e]=s[e]})),n.interceptors.request.use((s=>{s.headers=X().merge(X().cloneDeep(ne),s.headers),s.headers["X-Socket-Id"]=ae.getSocketId(),s.headers["X-Origin-URL"]=window.location.href;const a=(0,re.A)();if(s.requestId=a,t)try{window.parent.postMessage({type:"api-request-start",requestId:a,data:{url:e+s.url,method:s.method,body:s.data instanceof FormData?"[FormData object]":s.data}},"*")}catch(r){}return s}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>{if(t)try{window.parent.postMessage({type:"api-request-end",requestId:e.config.requestId,data:{statusCode:e.status,response:e.data}},"*")}catch(s){}return a?e.data:e}),(e=>{var s,t,a,n,i;null!==(s=e.config)&&void 0!==s&&s.requestId&&window.parent.postMessage({type:"api-request-end",requestId:e.config.requestId,data:{statusCode:(null===(n=e.response)||void 0===n?void 0:n.status)||0,response:(null===(i=e.response)||void 0===i?void 0:i.data)||{error:e.message}}},"*");if(r)for(const r of oe)r(e);if(null!==(t=e.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.traceback);return Promise.reject(e)})),n}class de{constructor(){this.axios=this.getClient()}getBaseURL(){return"/"}getClient(){return ce(this.getBaseURL())}}class me extends de{parseInstance(e){return e}list(e,s,t,a){let r={};return e&&(r.sort=e),s&&(r.limit=s),t&&(r.skip=t),a&&(r.fields=a),this.axios.get("",{params:r}).then((e=>e.map(this.parseInstance)))}filter(e,s,t,a,r){let n={q:JSON.stringify(e)};return s&&(n.sort=s),t&&(n.limit=t),a&&(n.skip=a),r&&(n.fields=r),this.axios.get("",{params:n}).then((e=>e.map(this.parseInstance)))}get(e){return this.axios.get(`/${e}`).then(this.parseInstance)}async subscribe(e,s,t){const a=this;t(this.parseInstance(s));const r=this.getBaseURL()+"/"+e;return ae.addListener(r,(e=>{s={...s,...e},t(this.parseInstance(s),Object.keys(e))}),(async()=>{const s=await a.get(e);t(this.parseInstance(s),Object.keys(s))}))}async fetchAndSubscribe(e,s){let t=await this.get(e);return this.subscribe(e,t,s)}schema(){return this.axios.get("/schema")}create(e){return this.axios.post("",e).then(this.parseInstance)}update(e,s){return this.axios.put(`/${e}`,s).then(this.parseInstance).then((t=>{const a=ae.getListeners(this.getBaseURL()+"/"+e)||[];return Object.values(a).forEach((e=>e.callback(t,Object.keys(s)))),t}))}delete(e){return this.axios.delete(`/${e}`)}deleteMany(e){return this.axios.delete("",{data:e})}}const ue=new class extends me{getBaseURL(){return"/auth"}getCurrentUser(){return this.axios.get("/me")}regenerateApiKey(){return this.axios.post("/regenerate_api_key")}updateUser(e,s){return this.axios.post(`/${e}/update-user`,{...s})}listUsers(e){return this.axios.get("/list-users",{params:e})}};function he(e){const s=new URLSearchParams(window.location.search);s.delete(e);const t=window.location.pathname+(s.toString()?"?"+s.toString():"");window.history.replaceState({},"",t)}function xe(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const s=new URLSearchParams(window.location.search),t=s.get("access_token")||localStorage.getItem("token");return e&&s.has("access_token")&&he("access_token"),t}var pe=t(74925);const ge=[];function fe(e,s){pe.A.track(e,s)}const je=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pe.A.__loaded?fe(e,s):ge.push((()=>fe(e,s)))};var be=t(44414);const ve=(0,Y.createContext)(),ye=e=>{let{children:s}=e;const[t,a]=(0,Y.useState)(null),[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{const e=xe(!0);var s;e?(localStorage.setItem("token",e),ie("Authorization",`Bearer ${e}`),c()):l(!1),s=e=>{e.response&&401===e.response.status&&o()},oe.push(s)}),[]);const o=()=>{localStorage.removeItem("token"),le("Authorization"),a(null),n(!1),l(!1)},c=async()=>{try{l(!0);const e=await ue.getCurrentUser();return a(e),n(!0),l(!1),e}catch(e){l(!1),o()}};return(0,be.jsx)(ve.Provider,{value:{user:t,isAuthenticated:r,logout:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(o(),n(!1),a(null),e){const e=encodeURIComponent(window.location.href);window.location.href="/login?from_url="+e}},isLoadingAuth:i,updateUser:e=>{a(e)}},children:s})},Ne=()=>(0,Y.useContext)(ve);const we=new class extends me{getBaseURL(){return"/apps"}addMessage(e,s){return this.axios.post(`/${e}/chat/message`,s)}undoMessage(e,s){return this.axios.post(`/${e}/chat/message/${s}/undo`)}codePage(e,s){return this.axios.post(`/${e}/pages/${s}/generate-code`)}editPageCode(e,s,t,a){return this.axios.post(`/${e}/pages/${s}/edit-code`,{changes:t,image_as_url:a})}manualEditPageCode(e,s,t){return this.axios.post(`/${e}/pages/${s}/manual-edit-code`,{code:t})}inviteUser(e,s,t){return this.axios.post(`/${e}/users/invite-user`,{user_email:s,role:t})}remixApp(e,s){return this.axios.post(`/${e}/remix`,s)}remixAppRequirements(e){return this.axios.get(`/${e}/remix/requirements`)}updateLogo(e,s){return this.axios.post(`/${e}/metadata/update-logo`,s)}stopChat(e){return this.axios.post(`/${e}/chat/stop`)}getDomainAppId(e){return this.axios.get(`/public/prod/domain/${e}`)}getRuntimeAuthToken(e,s){return this.axios.get(`/${e}/auth/token`)}getLoginInfoBySlug(e){return this.axios.get(`/public/login-info/by-slug/${e}`)}getLoginInfoById(e){return this.axios.get(`/public/login-info/by-id/${e}`)}getSuggestions(e){return this.axios.post(`/${e}/chat/generate-suggestions`)}deployApp(e){return this.axios.post(`/${e}/deploy`)}installIntegration(e,s,t){return this.axios.post(`/${e}/install-integration/${s}/${t}`)}deleteIntegration(e,s,t){return this.axios.post(`/${e}/delete-integration/${s}/${t}`)}redeployFunction(e,s){return this.axios.post(`/${e}/coding/redeploy-function/${s}`)}},Ce=t.p+"static/media/logo_v3.c1b6fb94b09220cfe957.png";var Se=t(34700),ke=t(67143),Ae=t(42989),_e=t(61041),Te=t(52828),Ee=t(31115);const Ie=new class extends de{getBaseURL(){return"/files"}uploadFile(e){const s=new FormData;return s.append("file",e),this.axios.post("/",s,{headers:{"Content-Type":"multipart/form-data"}})}};var Pe=t(23198);function Re(e){let{onFileUploadClick:s,customButtomRight:t,customButtomLeft:a,variant:r="default"}=e;const[n,i]=(0,Y.useState)(!0),l=(0,Y.useRef)(null);(0,Y.useEffect)((()=>{const e=()=>{if(l.current){const e=l.current.getBoundingClientRect().width;i(e>400)}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const o="home"===r?"flex justify-between text-sm p-2 bg-gray-50/50 rounded-b-xl":"flex justify-between text-sm p-2",c="home"===r?"flex items-center gap-1 px-2 py-1 rounded-md text-xs text-cyan-700 hover:bg-cyan-50/80":"flex items-center gap-1 px-2 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-100",d=(0,be.jsxs)("button",{onClick:s,className:c,title:"Upload files",children:[(0,be.jsx)(Pe.A,{className:"h-3 w-3"}),n&&(0,be.jsx)("span",{children:"Upload"})]});return(0,be.jsxs)("div",{className:o,ref:l,children:[(0,be.jsx)("div",{className:"flex gap-1 items-center",children:a?a(d):d}),(0,be.jsx)("div",{className:"flex gap-1 items-center",children:t})]})}var Oe=t(59680);function De(e){let{files:s,uploadingFiles:t,onRemoveFile:a}=e;const[r,n]=(0,Y.useState)({});return 0===s.length&&0===t.length?null:(0,be.jsxs)("div",{className:"flex flex-wrap gap-4 p-4 border-b",children:[s.map(((e,s)=>(0,be.jsx)("div",{className:"relative",children:e.match(/\.(jpg|jpeg|png|gif)$/i)?(0,be.jsxs)("div",{className:"relative group",children:[!r[e]&&(0,be.jsx)("div",{className:"w-[120px] h-[120px] flex items-center justify-center bg-gray-100 rounded-lg",children:(0,be.jsx)(Oe.A,{className:"w-4 h-4 animate-spin text-gray-500"})}),(0,be.jsx)("img",{src:e,alt:"Attached content",className:"max-w-[120px] max-h-[120px] object-contain rounded-lg border border-gray-200 shadow-sm "+(r[e]?"":"hidden"),onLoad:()=>(e=>{n((s=>({...s,[e]:!0})))})(e)}),(0,be.jsx)("button",{onClick:()=>a(e),className:"absolute top-1 right-1 bg-white/80 text-gray-500 hover:text-gray-700 rounded-full p-1",children:"\xd7"})]}):(0,be.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 group relative",children:[(0,be.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[(0,be.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,be.jsx)("polyline",{points:"14 2 14 8 20 8"})]}),(0,be.jsx)("span",{className:"truncate max-w-[150px]",children:e.split("/").pop()}),(0,be.jsx)("button",{onClick:()=>a(e),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]})},s))),t.map(((e,s)=>(0,be.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200",children:[(0,be.jsx)(Oe.A,{className:"w-4 h-4 animate-spin text-gray-500"}),(0,be.jsxs)("span",{className:"truncate max-w-[150px] text-gray-500 text-sm",children:["Uploading ",e,"..."]})]},s)))]})}var Le=t(19900),Ue=t(2737);function $e(e){let{value:s,onValueChange:t,onKeyDown:a,onPaste:r,placeholder:n,disabled:i,isProcessing:l,onStop:o,onSend:c,variant:d="default"}=e;const m=(0,Y.useRef)(null);(0,Y.useEffect)((()=>{m.current&&"default"===d&&(m.current.style.height="auto",m.current.scrollHeight>400?m.current.style.height="400px":m.current.style.height=m.current.scrollHeight+"px")}),[s]);const u="home"===d?"w-full pl-4 pt-4 pr-16 text-base resize-none overflow-auto focus:outline-none bg-transparent placeholder:text-slate-400":"w-full pl-4 pt-4 pr-16 text-sm resize-none overflow-auto focus:outline-none bg-transparent rounded-t-lg",h="home"===d?"absolute flex justify-center items-center top-4 right-4 p-1 bg-orange-500 hover:bg-orange-600 text-white rounded-md w-[34px] h-[34px] transition-colors":"absolute flex justify-center items-center top-4 right-4 p-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md w-[34px] h-[34px] transition-colors";return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("textarea",{ref:m,value:s,onChange:e=>t(e.target.value),onKeyDown:a,onPaste:r,placeholder:n,disabled:i,className:u,style:{default:{height:"auto",minHeight:"90px",maxHeight:"400px"},home:{height:"110px",minHeight:"110px",maxHeight:"200px"}}[d],onInput:e=>{}}),(s||l)&&c&&(0,be.jsx)("button",{onClick:()=>{l?o&&o():c&&c()},className:h,children:l?(0,be.jsx)(Le.A,{className:"w-4 h-4"}):(0,be.jsx)(Ue.A,{className:"w-4 h-4"})})]})}var Me=t(94364),Fe=t(72004),ze=t(79800);function Be(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,ze.QP)((0,Fe.$)(s))}const qe=(0,Me.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),We=Y.forwardRef(((e,s)=>{let{className:t,variant:a,...r}=e;return(0,be.jsx)("div",{ref:s,role:"alert",className:Be(qe({variant:a}),t),...r})}));We.displayName="Alert";const Ye=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("h5",{ref:s,className:Be("mb-1 font-medium leading-none tracking-tight",t),...a})}));Ye.displayName="AlertTitle";const Ge=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,className:Be("text-sm [&_p]:leading-relaxed",t),...a})}));Ge.displayName="AlertDescription";var He=t(96479);function Ve(e){let{value:s,files:t=[],onSend:a,placeholder:r,disabled:n,isProcessing:i,onValueChange:l,onFilesChange:o,onStop:c,customButtomRight:d,customButtomLeft:m,variant:u="default"}=e;const h=(0,Y.useRef)(),x=(0,Ee.Ub)({maxWidth:767}),[p,g]=(0,Y.useState)([]),[f,j]=(0,Y.useState)(null),b=()=>{a&&(a({text:s,files:t}),l(""),o([]),j(null))},v=async e=>{try{const{valid:t,error:a}=function(e){const s="."+e.name.split(".").pop().toLowerCase();if(![".jpg",".jpeg",".png",".pdf",".txt",".html"].includes(s))return{valid:!1,error:`File type "${e.name.split(".").pop()}" is not supported. Supported types: jpg, jpeg, png, pdf, txt, html.`};const t=".pdf"===s,a=[".jpg",".jpeg",".png"].includes(s)?41943040:t?10485760:5242880;if(e.size>a){const s=a/1048576;return{valid:!1,error:`File "${e.name}" exceeds the maximum allowed size of ${s}MB.`}}return{valid:!0,error:null}}(e);if(!t)return j(a),null;let r=e;if(e.type.startsWith("image/")){g((s=>[...s,`${e.name} (processing...)`]));try{r=(await async function(e){if(!e.type.startsWith("image/"))return{file:e,mimeType:e.type};const s=1024,t=2097152,r="image/png"===e.type,n=r?"image/png":"image/jpeg",i=r?".png":".jpg";return new Promise(((l,o)=>{const c=new FileReader;c.readAsDataURL(e),c.onload=c=>{const d=new Image;d.src=c.target.result,d.onload=()=>{try{let{width:c,height:m}=d;const u=c>s||m>s;if(e.size<=t&&!u)return void l({file:e,mimeType:e.type});u&&(c>m?(m=Math.round(m*s/c),c=s):(c=Math.round(c*s/m),m=s));const h=document.createElement("canvas");h.width=c,h.height=m;const x=h.getContext("2d");r?x.clearRect(0,0,h.width,h.height):(x.fillStyle="white",x.fillRect(0,0,h.width,h.height)),x.drawImage(d,0,0,c,m);const p=s=>{try{h.toBlob((r=>{if(r)if(r.size<=t)try{const s=e.name,t=s.substring(0,s.lastIndexOf("."))||s,a=new File([r],t+i,{type:n,lastModified:Date.now()});l({file:a,mimeType:n})}catch(a){l({file:e,mimeType:e.type})}else if(s>.55)p(s-.1);else try{const s=e.name,t=s.substring(0,s.lastIndexOf("."))||s,a=new File([r],t+i,{type:n,lastModified:Date.now()});l({file:a,mimeType:n})}catch(a){l({file:e,mimeType:e.type})}else o(new Error("Failed to create image blob"))}),n,r?null:s)}catch(a){l({file:e,mimeType:e.type})}};p(.85)}catch(a){l({file:e,mimeType:e.type})}},d.onerror=s=>{l({file:e,mimeType:e.type})}},c.onerror=s=>{l({file:e,mimeType:e.type})}}))}(e)).file}catch(s){}}g((s=>s.filter((s=>s!==`${e.name} (processing...)`)))),g((s=>[...s,e.name]));const n=await Ie.uploadFile(r);return g((s=>s.filter((s=>s!==e.name)))),j(null),n.url}catch(t){return g((s=>s.filter((s=>s!==e.name)))),null}},y="home"===u?"w-full relative shadow-md border border-slate-200 rounded-xl bg-white/90 backdrop-blur":"w-full relative shadow-sm border border-gray-200 rounded-lg bg-white/80 backdrop-blur";return(0,be.jsxs)("div",{className:y,onDrop:async e=>{e.preventDefault();const s=Array.from(e.dataTransfer.files).map((e=>v(e))),a=(await Promise.all(s)).filter((e=>null!==e));a.length>0&&o([...t,...a])},onDragOver:e=>{e.preventDefault()},children:[(0,be.jsx)(De,{files:t,uploadingFiles:p,onRemoveFile:e=>o(t.filter((s=>s!==e)))}),f&&(0,be.jsx)("div",{className:"px-4 py-2",children:(0,be.jsxs)(We,{variant:"destructive",className:"flex items-center justify-between",children:[(0,be.jsxs)(Ge,{children:[f,(0,be.jsxs)("div",{className:"mt-1 text-xs",children:["Please request support for additional file types at ",(0,be.jsx)("a",{href:"https://feedback.base44.com",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-destructive-foreground/80",children:"feedback.base44.com"})]})]}),(0,be.jsx)("button",{onClick:()=>j(null),className:"ml-2 inline-flex h-5 w-5 items-center justify-center rounded-full bg-destructive/10 hover:bg-destructive/20",children:(0,be.jsx)(He.A,{className:"h-3 w-3"})})]})}),(0,be.jsx)($e,{value:s,onValueChange:l,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},onPaste:async e=>{var s,a;const r=null===(s=e.clipboardData||(null===(a=e.originalEvent)||void 0===a?void 0:a.clipboardData))||void 0===s?void 0:s.items;if(!r)return;const n=[];for(let t of r)if("file"===t.kind){const e=t.getAsFile();e&&n.push(v(e))}const i=(await Promise.all(n)).filter((e=>null!==e));i.length>0&&o([...t,...i])},placeholder:r,disabled:n,isProcessing:i,onStop:c,onSend:a?b:null,variant:u}),(0,be.jsx)("input",{ref:h,type:"file",id:"chat-file-upload",className:"hidden",multiple:!0,onChange:async e=>{const s=Array.from(e.target.files),a=[];for(let t of s){const e=await v(t);e&&a.push(e)}o([...t,...a]),h.current.value=""},accept:".jpg,.jpeg,.png,.pdf,.txt,.html"}),(0,be.jsx)(Re,{onFileUploadClick:()=>document.getElementById("chat-file-upload").click(),value:s,isMobile:x,customButtomLeft:m,customButtomRight:d,variant:u})]})}var Je=t(42678);const Ke=(0,Me.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ze=Y.forwardRef(((e,s)=>{let{className:t,variant:a,size:r,asChild:n=!1,...i}=e;const l=n?Je.DX:"button";return(0,be.jsx)(l,{className:Be(Ke({variant:a,size:r,className:t})),ref:s,...i})}));Ze.displayName="Button";var Xe=t(97894);const Qe=Xe.Kq,es=Xe.bL,ss=Xe.l9,ts=Y.forwardRef(((e,s)=>{let{className:t,sideOffset:a=4,...r}=e;return(0,be.jsx)(Xe.UC,{ref:s,sideOffset:a,className:Be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r})}));ts.displayName=Xe.UC.displayName;const as=[{id:"neo-brutalism",name:"Neo-Brutalism",description:'Bold colors, high contrast, thick borders, raw functionality, and intentionally "undesigned" aesthetics with rough edges.',features:["High contrast colors","Thick borders","Harsh shadows","Raw typography","Unconventional layouts"],brands:["Figma","Gumroad","Stripe Press"],color:"bg-yellow-400",textColor:"text-black",buttonColor:"bg-red-500",buttonTextColor:"text-white",borderColor:"border-black",prompt:'Use a Neo-Brutalism style with bold colors, high contrast, thick black borders (3-4px), and harsh drop shadows. Create an intentionally "undesigned" aesthetic with raw typography and slightly asymmetrical layouts. Buttons should have thick borders and strong color contrast. Avoid gradients and subtle shadows in favor of stark, bold design elements.'},{id:"neumorphism",name:"Neumorphism",description:"Soft, extruded UI elements that appear to push through the surface, using subtle shadows to create a physical, tactile feel.",features:["Subtle shadows","Soft UI","Monochromatic palette","Minimal depth","Light/dark versions"],brands:["Apple (iOS)","Tesla UI","Samsung One UI"],color:"bg-gray-200",textColor:"text-gray-700",buttonColor:"bg-gray-200",buttonTextColor:"text-gray-700",borderColor:"border-gray-300",prompt:"Create a Neumorphic UI with soft, extruded elements that appear to push through the surface. Use subtle dual shadows (both light and dark) to create a physical, tactile feel. Elements should use a monochromatic color palette with minimal depth and no hard borders. Buttons should have a soft pressed effect on interaction. The background should be a soft light gray (#e0e0e0) or very light color, and UI elements should appear to be carved from the same material as the background."},{id:"glassmorphism",name:"Glassmorphism",description:"Frosted glass effect with transparency, blur, and subtle borders that create depth and layering.",features:["Backdrop blur","Transparency","Subtle borders","Light reflections","Layered interfaces"],brands:["Apple (macOS)","Microsoft (Windows 11)","Spotify"],color:"bg-gradient-to-r from-purple-500 via-pink-500 to-red-500",textColor:"text-white",buttonColor:"bg-white/30",buttonTextColor:"text-white",borderColor:"border-white/50",prompt:"Design with a Glassmorphism style using frosted glass effects with transparency and backdrop blur. Elements should have subtle light borders (1px) and slight transparency. Create depth through layering of translucent elements. Use colorful backgrounds (gradients work well) with frosted glass UI elements on top. Apply backdrop-blur CSS properties and use RGBA colors with alpha transparency. Aim for a modern, clean aesthetic with subtle light reflections and shadows. The design should be unique, beautiful and detailed. the colors should work well together."},{id:"material-design",name:"Material Design",description:"Google's design language using grid-based layouts, responsive animations, padding, and depth effects like lighting and shadows.",features:["Paper metaphor","Bold colors","Grid system","Responsive animations","Elevation shadow system"],brands:["Google","Android","YouTube"],color:"bg-white",textColor:"text-gray-800",buttonColor:"bg-blue-500",buttonTextColor:"text-white",borderColor:"border-gray-200",prompt:"Follow Google's Material Design principles with paper-like cards, bold colors, and responsive animations. Use elevation shadows to indicate hierarchy and focus. Implement a consistent grid system with proper spacing and alignment. Buttons should be flat with hover effects and ripple animations on click. Use Google's typeface recommendations and follow Material color palette guidelines. Add subtle transitions between states and responsive micro-interactions."},{id:"claymorphism",name:"Claymorphism",description:"Soft, puffy, rounded UI elements that appear like clay, with soft shadows and pastel colors.",features:["Soft shadows","Rounded corners","Pastel colors","Puffy appearance","Playful feel"],brands:["Headspace","Duolingo","Clubhouse"],color:"bg-purple-100",textColor:"text-purple-700",buttonColor:"bg-purple-300",buttonTextColor:"text-purple-700",borderColor:"border-purple-200",prompt:"Design with Claymorphism using soft, puffy UI elements that appear like clay. Use large border radius (16-20px), soft inner and outer shadows, and pastel colors. Elements should look soft and squeezable with a playful feel. Implement soft shadows both inside and outside elements to create dimension. Use gentle pastel colors like lavender, mint green, and baby blue. Avoid hard edges and sharp contrasts in favor of soft, rounded corners and gentle color transitions. The design should be unique, beautiful and detailed. the colors should work well together."}];function rs(e){let{onSelectStyle:s}=e;const[t,a]=(0,Y.useState)({}),[r,n]=(0,Y.useState)({}),[i,l]=(0,Y.useState)(!0),o=e=>{n((s=>({...s,[e]:(s[e]||0)+1}))),a((s=>({...s,[e]:!0}))),setTimeout((()=>{a((s=>({...s,[e]:!1})))}),1e3)};return i?(0,be.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,be.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-11/12 max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,be.jsxs)("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center z-10",children:[(0,be.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Add styling instructions"}),(0,be.jsx)("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,be.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,be.jsx)("div",{className:"p-4",children:as.map((e=>(0,be.jsx)("section",{id:e.id,className:"mb-16 scroll-mt-32 rounded-xl overflow-hidden bg-white shadow-lg transition-colors duration-300",children:(0,be.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,be.jsxs)("div",{className:"md:w-1/3 p-6",children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-800",children:e.name}),(0,be.jsx)("p",{className:"mb-6 text-gray-600",children:e.description}),(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-800",children:"Key Features"}),(0,be.jsx)("ul",{className:"list-disc list-inside text-gray-600",children:e.features.map(((e,s)=>(0,be.jsx)("li",{className:"mb-1",children:e},s)))})]}),(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-800",children:"Used By"}),(0,be.jsx)("div",{className:"flex flex-wrap gap-2",children:e.brands.map(((e,s)=>(0,be.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:e},s)))})]}),(0,be.jsx)("button",{onClick:()=>{return t=e.id,s(t),void l(!1);var t},className:"w-full py-2 px-4 bg-gray-800 text-white font-medium rounded-lg hover:bg-black hover:shadow-sm transition-all duration-200 border border-transparent hover:border-gray-700",children:"Add Style Instructions"})]}),(0,be.jsx)("div",{className:"md:w-2/3",children:(0,be.jsx)("div",{className:`p-6 h-full flex items-center justify-center ${"neo-brutalism"===e.id?"bg-yellow-50":"neumorphism"===e.id?"bg-gray-100":"glassmorphism"===e.id?e.color:"material-design"===e.id?"bg-gray-50":"bg-purple-50"}`,children:(0,be.jsxs)("div",{className:"w-full max-w-lg",children:["neo-brutalism"===e.id&&(0,be.jsxs)("div",{className:"bg-yellow-400 p-6 border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] transform -rotate-1",children:[(0,be.jsx)("h3",{className:"text-xl font-bold mb-4 font-mono text-black",children:"Raw. Unfiltered. Brutal."}),(0,be.jsx)("p",{className:"mb-4 text-black",children:"Neo-Brutalism embraces imperfection and raw expression."}),(0,be.jsx)("button",{className:`bg-red-500 text-white font-bold py-2 px-4 border-4 border-black ${t[e.id]?"animate-bounce":""} hover:bg-red-600 transform hover:-translate-y-1 transition-transform`,onClick:()=>o(e.id),children:"CLICK ME"}),(0,be.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[(0,be.jsx)("div",{className:"bg-blue-500 border-4 border-black p-2",children:(0,be.jsx)("p",{className:"text-white text-sm font-bold",children:"Bold"})}),(0,be.jsx)("div",{className:"bg-green-500 border-4 border-black p-2",children:(0,be.jsx)("p",{className:"text-black text-sm font-bold",children:"Raw"})}),(0,be.jsx)("div",{className:"bg-purple-500 border-4 border-black p-2",children:(0,be.jsx)("p",{className:"text-white text-sm font-bold",children:"Expressive"})})]})]}),"neumorphism"===e.id&&(0,be.jsx)("div",{className:"bg-gray-200 p-6 rounded-xl",children:(0,be.jsxs)("div",{className:"bg-gray-200 p-6 rounded-xl shadow-[5px_5px_10px_rgba(0,0,0,0.1),_-5px_-5px_10px_rgba(255,255,255,0.8)]",children:[(0,be.jsx)("h3",{className:"text-xl font-medium mb-4 text-gray-700",children:"Soft & Tactile"}),(0,be.jsx)("p",{className:"mb-4 text-gray-600",children:"Neumorphism creates a soft UI that appears to extrude from the background."}),(0,be.jsx)("button",{className:`bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-xl ${t[e.id]?"shadow-[inset_5px_5px_10px_rgba(0,0,0,0.1),_inset_-5px_-5px_10px_rgba(255,255,255,0.8)]":"shadow-[5px_5px_10px_rgba(0,0,0,0.1),_-5px_-5px_10px_rgba(255,255,255,0.8)]"} hover:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.1),_inset_-5px_-5px_10px_rgba(255,255,255,0.8)] transition-shadow`,onClick:()=>o(e.id),children:"Soft Press"}),(0,be.jsx)("div",{className:"mt-4",children:(0,be.jsxs)("div",{className:"flex items-center justify-between bg-gray-200 p-3 rounded-xl shadow-[inset_3px_3px_6px_rgba(0,0,0,0.1),_inset_-3px_-3px_6px_rgba(255,255,255,0.8)]",children:[(0,be.jsx)("p",{className:"text-gray-700 font-medium",children:"Volume"}),(0,be.jsx)("div",{className:"w-32 h-4 bg-gray-200 rounded-full shadow-[inset_3px_3px_6px_rgba(0,0,0,0.1),_inset_-3px_-3px_6px_rgba(255,255,255,0.8)]",children:(0,be.jsx)("div",{className:"h-4 bg-blue-400 rounded-full transition-all duration-300",style:{width:10*(r[e.id]||0)+"%"}})})]})})]})}),"glassmorphism"===e.id&&(0,be.jsxs)("div",{className:"relative min-h-64 p-6 rounded-xl overflow-hidden",children:[(0,be.jsx)("div",{className:"absolute inset-0 flex justify-around items-center",children:[...Array(5)].map(((s,a)=>(0,be.jsx)("div",{className:"bg-white rounded-full w-16 h-16 opacity-20 "+(t[e.id]?"animate-pulse":"")},a)))}),(0,be.jsx)("div",{className:"relative z-10",children:(0,be.jsxs)("div",{className:"backdrop-blur-xl bg-white/30 p-6 rounded-xl border border-white/50 shadow-lg",children:[(0,be.jsx)("h3",{className:"text-xl font-medium mb-4 text-white",children:"Transparent & Blurred"}),(0,be.jsx)("p",{className:"mb-4 text-white/90",children:"Glassmorphism creates a frosted glass effect that adds depth and elegance."}),(0,be.jsx)("button",{className:"backdrop-blur-sm bg-white/30 text-white font-medium py-2 px-4 rounded-xl border border-white/50 hover:bg-white/40 transition-colors",onClick:()=>o(e.id),children:"See Through"}),(0,be.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,be.jsx)("div",{className:"backdrop-blur-xl bg-white/20 p-2 rounded-xl border border-white/50 shadow-lg flex-1 text-center",children:(0,be.jsx)("p",{className:"text-white text-sm font-medium",children:"Layer 1"})}),(0,be.jsx)("div",{className:"backdrop-blur-xl bg-white/30 p-2 rounded-xl border border-white/50 shadow-lg flex-1 text-center",children:(0,be.jsx)("p",{className:"text-white text-sm font-medium",children:"Layer 2"})}),(0,be.jsx)("div",{className:"backdrop-blur-xl bg-white/40 p-2 rounded-xl border border-white/50 shadow-lg flex-1 text-center",children:(0,be.jsx)("p",{className:"text-white text-sm font-medium",children:"Layer 3"})})]})]})})]}),"material-design"===e.id&&(0,be.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:(0,be.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,be.jsx)("h3",{className:"text-xl font-medium mb-4 text-gray-800",children:"Elevated & Structured"}),(0,be.jsx)("p",{className:"mb-4 text-gray-600",children:"Material Design uses physics-inspired animations and layered interfaces."}),(0,be.jsx)("button",{className:`bg-blue-500 text-white font-medium py-2 px-4 rounded shadow-md ${t[e.id]?"shadow-xl -translate-y-1":""} hover:shadow-lg hover:-translate-y-1 transition-all`,onClick:()=>o(e.id),children:"ELEVATE"}),(0,be.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,be.jsx)("div",{className:"bg-red-500 p-3 rounded shadow-md",children:(0,be.jsx)("p",{className:"text-white text-sm font-medium",children:"Cards"})}),(0,be.jsx)("div",{className:"bg-white p-3 rounded shadow-md",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("p",{className:"text-gray-700 text-sm font-medium",children:"Toggle"}),(0,be.jsx)("div",{className:`w-10 h-5 ${(r[e.id]||0)%2==0?"bg-gray-300":"bg-green-500"} rounded-full shadow-inner flex items-center transition-colors duration-300`,children:(0,be.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 "+((r[e.id]||0)%2==0?"translate-x-0":"translate-x-5")})})]})})]})]})}),"claymorphism"===e.id&&(0,be.jsx)("div",{className:"bg-purple-100 p-6 rounded-3xl shadow-lg",children:(0,be.jsxs)("div",{className:"bg-blue-100 p-6 rounded-3xl shadow-[6px_6px_12px_rgba(0,0,0,0.1),_-6px_-6px_12px_rgba(255,255,255,0.8),_inset_1px_1px_2px_rgba(255,255,255,0.8)]",children:[(0,be.jsx)("h3",{className:"text-xl font-medium mb-4 text-blue-700",children:"Soft & Puffy"}),(0,be.jsx)("p",{className:"mb-4 text-blue-600",children:"Claymorphism creates a soft, puffy, and playful interface that looks like clay."}),(0,be.jsx)("button",{className:`bg-purple-300 text-purple-700 font-medium py-2 px-4 rounded-2xl \n                                ${t[e.id]?"shadow-[inset_4px_4px_8px_rgba(0,0,0,0.1),_inset_-4px_-4px_8px_rgba(255,255,255,0.5)]":"shadow-[4px_4px_8px_rgba(0,0,0,0.1),_-4px_-4px_8px_rgba(255,255,255,0.5)]"} \n                                hover:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.1),_inset_-4px_-4px_8px_rgba(255,255,255,0.5)] transition-shadow`,onClick:()=>o(e.id),children:"Squish Me"}),(0,be.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[(0,be.jsx)("div",{className:"bg-green-100 p-2 rounded-2xl shadow-[6px_6px_12px_rgba(0,0,0,0.1),_-6px_-6px_12px_rgba(255,255,255,0.8),_inset_1px_1px_2px_rgba(255,255,255,0.8)]",children:(0,be.jsx)("p",{className:"text-green-600 text-sm font-medium text-center",children:"Soft"})}),(0,be.jsx)("div",{className:"bg-yellow-100 p-2 rounded-2xl shadow-[6px_6px_12px_rgba(0,0,0,0.1),_-6px_-6px_12px_rgba(255,255,255,0.8),_inset_1px_1px_2px_rgba(255,255,255,0.8)]",children:(0,be.jsx)("p",{className:"text-yellow-600 text-sm font-medium text-center",children:"Puffy"})}),(0,be.jsx)("div",{className:"bg-pink-100 p-2 rounded-2xl shadow-[6px_6px_12px_rgba(0,0,0,0.1),_-6px_-6px_12px_rgba(255,255,255,0.8),_inset_1px_1px_2px_rgba(255,255,255,0.8)]",children:(0,be.jsx)("p",{className:"text-pink-600 text-sm font-medium text-center",children:"Playful"})})]})]})})]})})})]})},e.id)))})]})}):null}const ns=new class extends me{getBaseURL(){return"/apps"}updateSecrets(e,s){return this.axios.post(`/${e}/secrets`,s)}deleteSecret(e,s){return this.axios.delete(`/${e}/secrets/${s}`)}getSecrets(e){return this.axios.get(`/${e}/secrets`)}getGeneralSecrets(e){return ce("/secrets").get(e)}},is=Y.forwardRef(((e,s)=>{let{className:t,type:a,...r}=e;return(0,be.jsx)("input",{type:a,className:Be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})}));is.displayName="Input";var ls=t(4321),os=t(84128);const cs=(0,Me.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ds=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(os.b,{ref:s,className:Be(cs(),t),...a})}));ds.displayName=os.b.displayName;var ms=t(5995),us=t(25675);const hs=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ms.bL,{className:Be("grid gap-2",t),...a,ref:s})}));hs.displayName=ms.bL.displayName;const xs=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ms.q7,{ref:s,className:Be("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,be.jsx)(ms.C1,{className:"flex items-center justify-center",children:(0,be.jsx)(us.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})}));xs.displayName=ms.q7.displayName;var ps=t(89942),gs=t(27453),fs=t(17684),js=t(86311);const bs=ps.bL,vs=ps.YJ,ys=ps.WT,Ns=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(ps.l9,{ref:s,className:Be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[a,(0,be.jsx)(ps.In,{asChild:!0,children:(0,be.jsx)(gs.A,{className:"h-4 w-4 opacity-50"})})]})}));Ns.displayName=ps.l9.displayName;const ws=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ps.PP,{ref:s,className:Be("flex cursor-default items-center justify-center py-1",t),...a,children:(0,be.jsx)(fs.A,{className:"h-4 w-4"})})}));ws.displayName=ps.PP.displayName;const Cs=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ps.wn,{ref:s,className:Be("flex cursor-default items-center justify-center py-1",t),...a,children:(0,be.jsx)(gs.A,{className:"h-4 w-4"})})}));Cs.displayName=ps.wn.displayName;const Ss=Y.forwardRef(((e,s)=>{let{className:t,children:a,position:r="popper",...n}=e;return(0,be.jsx)(ps.ZL,{children:(0,be.jsxs)(ps.UC,{ref:s,className:Be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,be.jsx)(ws,{}),(0,be.jsx)(ps.LM,{className:Be("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,be.jsx)(Cs,{})]})})}));Ss.displayName=ps.UC.displayName;const ks=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ps.JU,{ref:s,className:Be("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}));ks.displayName=ps.JU.displayName;const As=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(ps.q7,{ref:s,className:Be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(ps.VF,{children:(0,be.jsx)(js.A,{className:"h-4 w-4"})})}),(0,be.jsx)(ps.p4,{children:a})]})}));As.displayName=ps.q7.displayName;const _s=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ps.wv,{ref:s,className:Be("-mx-1 my-1 h-px bg-muted",t),...a})}));function Ts(e){let{secret:s,value:t,onChange:a}=e;const{name:r,description:n}=s,[i,l]=(0,Y.useState)([]),[o,c]=(0,Y.useState)(!0),[d,m]=(0,Y.useState)((null==t?void 0:t.type)||"value"),[u,h]=(0,Y.useState)((null==t?void 0:t.value)||""),[x,p]=(0,Y.useState)("clone"===(null==t?void 0:t.type)?t.value:"");(0,Y.useEffect)((()=>{(async()=>{try{const e=await ns.getGeneralSecrets(r);l(e||[])}catch(e){l([])}finally{c(!1)}})()}),[r]),(0,Y.useEffect)((()=>{"value"===d?a(r,{type:"value",value:u}):"clone"===d&&x&&a(r,{type:"clone",value:x})}),[d,u,x,r,a]);return(0,be.jsxs)("div",{className:"mb-8 pb-6 border-b border-gray-200 last:border-0 last:mb-0 last:pb-0",children:[(0,be.jsx)("div",{className:"flex items-center mb-4",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ls.A,{className:"h-4 w-4 text-gray-500"}),(0,be.jsx)(ds,{className:"text-sm font-medium",children:r})]})}),(0,be.jsxs)(hs,{value:d,onValueChange:m,className:"flex gap-8 mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(xs,{value:"value",id:`value-${r}`,className:"h-4 w-4"}),(0,be.jsx)(ds,{htmlFor:`value-${r}`,className:"text-xs cursor-pointer",children:"New value"})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(xs,{value:"clone",id:`clone-${r}`,className:"h-4 w-4"}),(0,be.jsx)(ds,{htmlFor:`clone-${r}`,className:"text-xs cursor-pointer",children:"Reuse existing"})]})]}),"value"===d?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(is,{type:"password",placeholder:`Enter ${r}`,value:u,onChange:e=>{h(e.target.value)},className:"h-9 text-sm mt-3 transition-all focus:ring-2 focus:ring-offset-1 focus:ring-blue-500"}),n&&(0,be.jsx)("p",{className:"text-xs text-gray-500 mt-2 ml-1",children:n})]}):(0,be.jsxs)(be.Fragment,{children:[o?(0,be.jsxs)("div",{className:"flex items-center h-9 text-xs text-gray-500 mt-3 bg-gray-50 rounded-md px-3",children:[(0,be.jsx)(Ae.A,{className:"h-4 w-4 animate-spin mr-2"}),"Loading existing secrets..."]}):i.length>0?(0,be.jsxs)(bs,{value:x,onValueChange:e=>{p(e)},children:[(0,be.jsx)(Ns,{className:"h-9 text-sm mt-3",children:(0,be.jsx)(ys,{placeholder:"Select an existing secret"})}),(0,be.jsx)(Ss,{className:"max-h-[200px] overflow-y-auto",children:i.map((e=>(0,be.jsxs)(As,{value:e.id,className:"text-xs py-3",children:[e.app_name||"Unnamed App"," (",e.secret_name,")"]},e.id)))})]}):(0,be.jsxs)("div",{className:"flex items-center h-9 text-xs text-gray-500 mt-3 bg-gray-50 rounded-md px-3",children:["No existing secrets found for ",r]}),n&&(0,be.jsx)("p",{className:"text-xs text-gray-500 mt-2 ml-1",children:n})]})]})}function Es(e){let{secretNames:s,value:t={},onChange:a}=e;const r=(e,s)=>{a({...t,[e]:s})};return(0,be.jsx)("div",{className:"text-sm px-5 py-7",children:s.map(((e,s)=>(0,be.jsx)("div",{className:"mb-6 last:mb-0",children:(0,be.jsx)(Ts,{secret:e,value:t[e.name],onChange:r})},s)))})}_s.displayName=ps.wv.displayName;const Is=new class extends me{getBaseURL(){return"/integration-catalog-items"}listCatalogItems(){return this.axios.get("/catalog")}getCatalogItem(e){return this.axios.get(`/catalog/${e}`)}submitItem(e){return this.axios.post("/catalog",e)}upvoteItem(e){return this.axios.post(`/catalog/${e}/upvote`)}approveItem(e){return this.axios.post(`/catalog/${e}/approve`)}archiveItem(e){return this.axios.post(`/catalog/${e}/archive`)}inviteAdmin(e,s){return this.axios.post(`/catalog/${e}/invite`,{email:s})}};const Ps=new class extends me{getBaseURL(){return"/usage-logs"}async getStats(){return await this.axios.get("/stats")}async getCurrentUsage(){return await this.axios.get("/current-usage")}getUserStats(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a={};return s&&t&&(a.start_date=s.toISOString(),a.end_date=t.toISOString()),this.axios.get(`/user-stats/${e}`,{params:a})}getCurrentIntegrationUsage(){return this.axios.get("/current-integration-usage")}},Rs=(0,Me.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Os(e){let{className:s,variant:t,...a}=e;return(0,be.jsx)("div",{className:Be(Rs({variant:t}),s),...a})}const Ds=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,className:Be("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})}));Ds.displayName="Card";const Ls=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,className:Be("flex flex-col space-y-1.5 p-6",t),...a})}));Ls.displayName="CardHeader";const Us=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("h3",{ref:s,className:Be("text-2xl font-semibold leading-none tracking-tight",t),...a})}));Us.displayName="CardTitle";const $s=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("p",{ref:s,className:Be("text-sm text-muted-foreground",t),...a})}));$s.displayName="CardDescription";const Ms=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,className:Be("p-6 pt-0",t),...a})}));Ms.displayName="CardContent";const Fs=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,className:Be("flex items-center p-6 pt-0",t),...a})}));Fs.displayName="CardFooter";var zs=t(22180);const Bs=Y.forwardRef(((e,s)=>{let{className:t,orientation:a="horizontal",decorative:r=!0,...n}=e;return(0,be.jsx)(zs.b,{ref:s,decorative:r,orientation:a,className:Be("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...n})}));Bs.displayName=zs.b.displayName;const qs=e=>{let{integration:s,secrets:t,onSecretsChange:a,onRemove:r}=e;const{item:n}=s,i=n.required_secrets&&n.required_secrets.length>0,l=!(!i||n.required_secrets.every((e=>{const s=t[e.name];return!!s&&!!("value"!==s.type||s.value&&""!==s.value.trim())&&!!("clone"!==s.type||s.value&&""!==s.value.trim())})));return(0,be.jsx)(Ds,{className:"mt-4 border-slate-200 overflow-hidden "+(l?"border-red-200":""),children:(0,be.jsxs)(Ms,{className:"p-0",children:[(0,be.jsx)("div",{className:"flex flex-col sm:flex-row",children:(0,be.jsxs)("div",{className:"flex-1 p-4",children:[(0,be.jsxs)("div",{className:"flex justify-between items-start",children:[(0,be.jsxs)("div",{className:"flex gap-3 items-center mb-2",children:[(0,be.jsx)("div",{className:"h-10 w-10 rounded-md border border-slate-200 flex-shrink-0 overflow-hidden bg-slate-50",children:n.image_url?(0,be.jsx)("img",{src:n.image_url,alt:n.name,className:"h-full w-full object-contain",onError:e=>{e.target.src="",e.target.parentElement.classList.add("bg-gradient-to-br","from-blue-100","to-teal-100"),e.target.parentElement.innerHTML=`<span class="text-teal-600 text-lg font-semibold flex h-full w-full items-center justify-center">${n.name.charAt(0).toUpperCase()}</span>`}}):(0,be.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-blue-100 to-teal-100 flex items-center justify-center",children:(0,be.jsx)("span",{className:"text-teal-600 text-lg font-semibold",children:n.name.charAt(0).toUpperCase()})})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"font-semibold text-slate-800",children:n.name}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[n.official&&(0,be.jsx)(Os,{className:"bg-blue-50 text-blue-700 border-blue-100 hover:bg-blue-100 text-xs",children:"Official"}),n.requires_backend_functions&&(0,be.jsx)("span",{className:"text-xs text-slate-500",children:"Requires backend functions"})]})]})]}),(0,be.jsx)("button",{className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 p-1.5 rounded-md transition-colors",onClick:()=>r(s.item.id),title:"Remove integration","aria-label":"Remove integration",children:(0,be.jsx)(He.A,{className:"h-4 w-4"})})]}),n.description&&(0,be.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:n.description})]})}),i&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Bs,{className:"my-1"}),(0,be.jsxs)("div",{className:"p-4 pt-3 bg-slate-50",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("h4",{className:"text-xs uppercase tracking-wide text-slate-500 font-medium mb-3",children:"Required API Keys"}),l&&(0,be.jsxs)("div",{className:"flex items-center text-red-500 text-xs mb-3",children:[(0,be.jsx)(Te.A,{className:"h-3 w-3 mr-1"}),(0,be.jsx)("span",{children:"Missing required keys"})]})]}),(0,be.jsx)(Es,{secretNames:n.required_secrets,value:t,onChange:a})]})]})]})})};var Ws=t(38554),Ys=t(77737),Gs=t(27304),Hs=t(19201),Vs=t(18635),Js=t(67637),Ks=t(99438),Zs=t(29126),Xs=t(68108);const Qs={CRM:[{title:"CRM for Artists",description:"Create a CRM for artists - should be tailored for visual artists to manage artworks, exhibitions, and clients. I want features to include saving images of sold artwork, custom fields for medium and price, inventory management for available pieces, exhibition schedules, and segmentation of client profiles."},{title:"CRM for Real Estate Agents",description:"Design a CRM for real estate agents - should manage property listings and client interactions. Include features like property images and descriptions, automatic reminders for contract renewals and viewings, integration with property portals, commission tracking, and geolocation mapping for properties."},{title:"CRM for Lawyers/Legal Practices",description:"Develop a CRM for law firms - should help manage cases, track billable hours, and store legal documents. Include features for case management, time tracking, legal workflows, team task delegation, client profiles with case history, and court date reminders."},{title:"CRM for Photographers",description:"Build a CRM for photographers - should handle client galleries and bookings. Include features for gallery management, photoshoot booking with reminders, file delivery systems, pricing packages, and client referral tracking for expanding the business."},{title:"CRM for Healthcare Practices",description:"Create a CRM for healthcare providers - should support clinics with patient management and compliance. Include features for medical history tracking, HIPAA-compliant communications, prescription tracking, billing integration with insurance claims, and patient satisfaction surveys."},{title:"CRM for Influencers/Content Creators",description:"Design a CRM for influencers - should help manage partnerships and content. Include features for campaign management, brand partnership tracking, content scheduling, revenue tracking from posts and merchandise, and audience segmentation by platform."},{title:"CRM for Wedding Planners",description:"Develop a CRM for wedding planners - should help manage tasks, budgets, and events. Include features for task management, client profiles segmented by couples and vendors, budget tracking, event timelines, and visual planning tools like seating arrangements."},{title:"CRM for Fitness Trainers/Gyms",description:"Build a CRM for fitness professionals - should track client progress and manage schedules. Include features for client progress tracking, integration with wearable devices, personalized workout plans, session reminders, and social tracking for referrals."},{title:"CRM for Musicians/Bands",description:"Create a CRM for musicians and bands - should handle events and fan interactions. Include features for event management, fan segmentation, music catalog management, collaboration tools, and tracking of streaming revenue and merchandise sales."},{title:"CRM for Construction Contractors",description:"Design a CRM for contractors - should manage projects, timelines, and resources. Include features for project milestones, resource tracking for materials and subcontractors, budget management, document storage for plans and permits, and client updates on project progress."}],"Dev productivity":[{title:"Online JSON Viewer",description:"Create an online JSON viewer - should allow users to view and format JSON data. Include features for syntax highlighting, collapsible tree structure, JSON validation, and the ability to upload or paste raw JSON for easy analysis."},{title:"Markdown to HTML Converter",description:"Develop a Markdown to HTML converter - should quickly convert Markdown text into HTML. Include features for live preview, support for common Markdown syntax (headings, links, code blocks), and export options to download the resulting HTML."},{title:"Regex Tester",description:"Build a regex tester tool - should help users test and refine regular expressions. Include features for real-time regex evaluation, examples, syntax highlighting, error notifications, and a library of commonly used regex patterns."},{title:"Code Diff Checker",description:"Create a code diff checker - should compare two code snippets side by side to highlight differences. Include features for line-by-line comparison, syntax highlighting for multiple programming languages, and exportable diff reports."},{title:"REST API Tester",description:"Design a REST API tester - should allow testing of API endpoints with customizable HTTP requests. Include features to set headers, body, and query parameters, store test cases, and view response details like headers and status codes."},{title:"Cron Expression Generator",description:"Develop a cron expression generator - should help create cron job expressions for scheduling tasks. Include an intuitive UI to select time intervals, a preview of the generated cron expression, and descriptions of each component of the expression."},{title:"Base64 Encoder/Decoder",description:"Build a Base64 encoder/decoder - should encode or decode text into Base64 format. Include support for large text blocks, file encoding/decoding, and one-click conversion between Base64 and plain text."},{title:"UUID Generator",description:"Create a UUID generator - should generate Universally Unique Identifiers (UUIDs) for use in applications. Include options for different UUID versions, batch generation, and the ability to copy or export UUIDs in bulk."},{title:"Color Palette Generator",description:"Design a color palette generator - should create and visualize color palettes for web design. Include hex and RGB code conversion, color harmonies (complementary, triadic), and the ability to save and export color schemes."}],Educational:[{title:"Interactive Flashcard Creator",description:"Develop an interactive flashcard creator - should allow users to create and study digital flashcards with spaced repetition algorithms for efficient learning."},{title:"Quiz Generator",description:"Build a quiz generator - should create quizzes from custom content or pre-existing question banks for various subjects."},{title:"Language Learning Games",description:"Design language learning games - should be fun and interactive, aimed at improving vocabulary, grammar, and pronunciation in foreign languages."},{title:"Math Problem Solver",description:"Create a math problem solver - should provide step-by-step solutions with explanations for various difficulty levels of math problems."},{title:"Historical Timeline Maker",description:"Develop a historical timeline maker - should allow users to create visual timelines of historical events with customizable layouts and multimedia integration."}],"Content Generation and Editing":[{title:"AI-Powered Writing Assistant",description:"Build an AI-powered writing assistant - should help improve writing with suggestions for grammar, style, and clarity using AI algorithms."},{title:"Social Media Post Generator",description:"Create a social media post generator - should produce engaging posts with customizable templates and trending hashtags."},{title:"Meme Creator",description:"Design an easy-to-use meme creator - should include a library of popular templates and a custom image upload option."},{title:"Infographic Maker",description:"Develop an infographic maker - should be a design tool for creating visually appealing infographics with pre-made templates and icons."},{title:"Resume Builder",description:"Build a resume builder - should craft professional resumes with industry-specific templates and content suggestions."}],"Personal Finance":[{title:"Budget Planner",description:"Create a budget planner - should help users create and manage personal or household budgets with customizable categories."},{title:"Expense Tracker",description:"Develop an expense tracker - should log and categorize expenses, providing insights and reports on spending habits."},{title:"Investment Calculator",description:"Build an investment calculator - should calculate potential returns on investments based on various parameters and market scenarios."},{title:"Debt Repayment Planner",description:"Design a debt repayment planner - should create strategies for efficient debt repayment, including snowball and avalanche methods."},{title:"Currency Converter",description:"Create a currency converter - should provide real-time currency conversion with historical rate charts and rate alerts."}],"Health and Wellness":[{title:"Meal Planner and Recipe Finder",description:"Develop a meal planner and recipe finder - should plan balanced meals and suggest recipes based on dietary preferences and restrictions."},{title:"Workout Routine Generator",description:"Build a workout routine generator - should create personalized workout plans based on fitness goals, equipment availability, and time constraints."},{title:"Meditation Timer and Guide",description:"Create a meditation timer and guide - should offer guided meditations and customizable meditation timers with ambient sounds."},{title:"Sleep Cycle Analyzer",description:"Design a sleep cycle analyzer - should track sleep patterns and provide insights for improving sleep quality."},{title:"Water Intake Tracker",description:"Develop a water intake tracker - should monitor daily water consumption and send reminders to stay hydrated."}],Productivity:[{title:"Pomodoro Timer",description:"Create a Pomodoro timer - should implement the Pomodoro Technique with customizable work and break intervals."},{title:"To-Do List Organizer",description:"Build a to-do list organizer - should manage tasks with priority levels, due dates, and collaboration features."},{title:"Mind Mapping Tool",description:"Design a mind mapping tool - should create visual mind maps for brainstorming and organizing ideas."},{title:"Goal Tracker",description:"Develop a goal tracker - should help set and track personal or professional goals with progress visualization."},{title:"Habit Formation Assistant",description:"Create a habit formation assistant - should help users build and maintain positive habits through reminders and streak tracking."}],"Travel Planning":[{title:"Itinerary Builder",description:"Build an itinerary builder - should create detailed travel itineraries with attractions, reservations, and transportation details."},{title:"Packing List Generator",description:"Develop a packing list generator - should generate customized packing lists based on destination, duration, and activities."},{title:"Flight Delay Predictor",description:"Create a flight delay predictor - should estimate the likelihood of flight delays based on historical data and current conditions."},{title:"Local Currency Converter",description:"Design a local currency converter - should convert currencies with offline support for travelers without constant internet access."},{title:"Travel Phrase Translator",description:"Build a travel phrase translator - should translate common travel phrases with audio pronunciation guides."}],Entertainment:[{title:"Movie Recommendation Engine",description:"Create a movie recommendation engine - should suggest movies based on user preferences, ratings, and viewing history."},{title:"Book Discovery Tool",description:"Develop a book discovery tool - should recommend books across genres based on reading preferences and past favorites."},{title:"Podcast Finder",description:"Build a podcast finder - should discover new podcasts based on topics of interest and listening habits."},{title:"TV Show Episode Tracker",description:"Design a TV show episode tracker - should keep track of watched episodes and provide notifications for new releases."},{title:"Random Activity Generator",description:"Create a random activity generator - should suggest random activities or hobbies to try when bored or looking for inspiration."}],Environmental:[{title:"Carbon Footprint Calculator",description:"Develop a carbon footprint calculator - should estimate personal or household carbon footprint and suggest reduction strategies."},{title:"Recycling Guide",description:"Build a recycling guide - should provide location-specific information on how to properly recycle various items."},{title:"Sustainable Product Finder",description:"Create a sustainable product finder - should help users find eco-friendly alternatives to common products."},{title:"Energy Usage Monitor",description:"Design an energy usage monitor - should track and analyze home energy consumption, offering tips for reduction."},{title:"Local Eco-Event Finder",description:"Develop a local eco-event finder - should locate and promote environmental events and volunteer opportunities in the user's area."}],"Home Management":[{title:"Home Inventory Tracker",description:"Create a home inventory tracker - should catalog household items for insurance purposes or organization."},{title:"Chore Scheduler",description:"Build a chore scheduler - should assign and rotate household chores among family members or roommates."},{title:"Plant Care Reminder",description:"Design a plant care reminder - should send reminders for watering and caring for house plants based on species and season."},{title:"DIY Project Planner",description:"Develop a DIY project planner - should help plan and track home improvement projects with material lists and tutorials."},{title:"Smart Home Device Dashboard",description:"Create a smart home device dashboard - should centralize control and monitoring of various smart home devices."}],"Creative Tools":[{title:"Color Scheme Generator",description:"Build a color scheme generator - should create harmonious color palettes for design projects with export options."},{title:"Font Pairing Assistant",description:"Design a font pairing assistant - should suggest complementary font combinations for typography projects."},{title:"Logo Maker",description:"Create a logo maker - should design simple logos using pre-made elements and customization options."},{title:"Music Chord Progression Generator",description:"Develop a music chord progression generator - should create chord progressions for songwriting inspiration across various genres."},{title:"Digital Art Sketchpad",description:"Build a digital art sketchpad - should provide a simple drawing interface with basic tools for digital sketching and doodling."}]};const et=new class extends de{getBaseURL(){return"/"}getAppSuggestions(){return this.axios.get("/app-suggestions")}},st={accentTealMuted:"text-cyan-600",accentTealBgLight:"bg-cyan-50 text-cyan-700 border-cyan-100"};function tt(e){let{onSetPrompt:s}=e;const[t,a]=(0,Y.useState)(null),[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{(async()=>{try{l(!0);const e=await et.getAppSuggestions();n(e)}catch(e){n(null)}finally{l(!1)}})()}),[]);const o=e=>{s(e)},c=()=>{a(null)},d=e=>({Business:(0,be.jsx)(Vs.A,{size:18,className:st.accentTealMuted}),Productivity:(0,be.jsx)(Ys.A,{size:18,className:st.accentTealMuted}),Entertainment:(0,be.jsx)(Gs.A,{size:18,className:st.accentTealMuted}),Finance:(0,be.jsx)(_e.A,{size:18,className:st.accentTealMuted}),Education:(0,be.jsx)(Js.A,{size:18,className:st.accentTealMuted}),"E-commerce":(0,be.jsx)(Ks.A,{size:18,className:st.accentTealMuted}),Social:(0,be.jsx)(Zs.A,{size:18,className:st.accentTealMuted})}[e]||(0,be.jsx)(Ws.A,{size:18,className:st.accentTealMuted}));return i?(0,be.jsx)("div",{className:"text-sm text-slate-500 mt-4",children:"Loading suggestions..."}):(0,be.jsxs)("div",{className:"mt-10",children:[(0,be.jsx)("h3",{className:"text-slate-700 text-sm font-medium mb-3",children:"Some ideas to get started:"}),r?(()=>{if(!r)return null;const e=[{title:r.app_suggestion_1.title,prompt:r.app_suggestion_1.prompt},{title:r.app_suggestion_2.title,prompt:r.app_suggestion_2.prompt},{title:r.app_suggestion_3.title,prompt:r.app_suggestion_3.prompt},{title:r.app_suggestion_4.title,prompt:r.app_suggestion_4.prompt},{title:r.app_suggestion_5.title,prompt:r.app_suggestion_5.prompt}];return(0,be.jsx)("div",{className:"flex flex-wrap gap-2.5",children:e.map(((e,s)=>(0,be.jsx)("button",{onClick:()=>o(e.prompt),className:`rounded-lg px-3.5 py-2 text-sm font-medium border flex items-center transition-all \n                            ${st.accentTealBgLight} hover:bg-cyan-100/70 bg-white/70 hover:shadow-sm`,children:e.title},s)))})})():t?(0,be.jsxs)("div",{children:[(0,be.jsxs)(Ze,{onClick:c,variant:"ghost",size:"sm",className:"mb-2 text-cyan-700 hover:text-cyan-800 hover:bg-cyan-50/50",children:[(0,be.jsx)(Xs.A,{className:"h-4 w-4 mr-2"}),"Back to categories"]}),(0,be.jsxs)("h3",{className:"text-slate-700 text-sm font-medium mb-3",children:[t," Ideas:"]}),(0,be.jsx)("div",{className:"flex flex-wrap gap-2.5",children:Qs[t].map(((e,s)=>(0,be.jsxs)("button",{onClick:()=>o(e.description),className:`rounded-lg px-3.5 py-2 text-sm font-medium border flex items-center transition-all \n                                ${st.accentTealBgLight} hover:bg-cyan-100/70 bg-white/70 hover:shadow-sm`,children:[(0,be.jsx)("span",{className:"mr-1.5",children:d(t)}),e.title]},s)))})]}):(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-slate-700 text-sm font-medium mb-3",children:"App Categories:"}),(0,be.jsx)("div",{className:"flex flex-wrap gap-2.5",children:Object.keys(Qs).map(((e,s)=>(0,be.jsxs)("button",{onClick:()=>(e=>{a(e)})(e),className:`rounded-lg px-3.5 py-2 text-sm font-medium border flex items-center transition-all \n                                ${st.accentTealBgLight} hover:bg-cyan-100/70 bg-white/70 hover:shadow-sm`,children:[(0,be.jsx)("span",{className:"mr-1.5",children:d(e)}),e]},s)))})]})]})}function at(e){let{onStart:s,loading:t}=e;const[a,r]=(0,Y.useState)(""),[n,i]=(0,Y.useState)([]),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(null),[h]=(0,V.useSearchParams)(),x=(0,J.Zp)(),[p,g]=(0,Y.useState)([]),[f,j]=(0,Y.useState)(!1),[b,v]=(0,Y.useState)({}),[y,N]=(0,Y.useState)(!1),[w,C]=(0,Y.useState)(!1),[S,k]=(0,Y.useState)(!1),[A,_]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{(async()=>{try{_(!0);const e=await Ps.getCurrentUsage();C(e.is_over_limit),k(e.past_due)}catch(e){}finally{_(!1)}})()}),[]),(0,Y.useEffect)((()=>{const e=h.get("integrations");if(e){const s=e.split(",");j(!0),Promise.all(s.map((e=>Is.getCatalogItem(e)))).then((e=>{const s=e.map((e=>e));g(s)})).catch((e=>{})).finally((()=>{j(!1)}))}}),[]);const T=()=>0===p.length||p.every((e=>{const s=e.item;return!s.required_secrets||0===s.required_secrets.length||s.required_secrets.every((e=>{const s=b[e.name];return!!s&&(!!("value"!==s.type||s.value&&""!==s.value.trim())&&!!("clone"!==s.type||s.value&&""!==s.value.trim()))}))})),E=e=>{if(1===p.length)return r(""),i([]),u(null),o(!1),g([]),v({}),N(!1),void x("/");const s=p.filter((s=>s.item.id!==e));g(s);const t=s.map((e=>e.item.id)).join(",");x(t?`/?integrations=${t}`:"/");const a={...b},n=p.find((s=>s.item.id===e));n&&n.item.required_secrets&&(n.item.required_secrets.forEach((e=>{delete a[e.name]})),v(a)),N(!1)},I=()=>{x("/billing")},P=e=>{if(v(e),y){T()&&N(!1)}},R=()=>{var e;const s=m?(null===(e=as.find((e=>e.id===m)))||void 0===e?void 0:e.name)||m:null;return(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center gap-1 px-2 py-1 rounded-md text-xs "+(m?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:[(0,be.jsx)(Se.A,{className:"h-3 w-3"}),(0,be.jsx)("span",{children:s?`Style: ${s}`:"Styling Instructions"})]})}),(0,be.jsx)(ts,{side:"top",className:"bg-slate-800 text-white p-3 rounded-lg border-0 shadow-xl max-w-[300px]",children:(0,be.jsx)("div",{className:"space-y-2",children:(0,be.jsx)("p",{className:"text-xs leading-relaxed",children:"Select a UI style for your application. This will influence the visual design and components."})})})]})})},O=()=>0===p.length?null:(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md text-xs bg-green-100 text-green-700",children:[(0,be.jsx)(ke.A,{className:"h-3 w-3"}),(0,be.jsxs)("span",{children:["Integrations: ",p.length]})]})}),(0,be.jsx)(ts,{side:"top",className:"bg-slate-800 text-white p-3 rounded-lg border-0 shadow-xl max-w-[300px]",children:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{className:"text-xs font-medium",children:"Selected Integrations:"}),(0,be.jsx)("div",{className:"flex flex-wrap gap-1",children:p.map((e=>(0,be.jsx)(Os,{className:"bg-green-700 text-xs",children:e.item.name},e.item.id)))})]})})]})});return(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"relative",children:[S&&(0,be.jsxs)("div",{className:"mb-3 p-4 bg-yellow-50 border border-yellow-200 rounded-md text-yellow-800 flex flex-col gap-3",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(_e.A,{className:"h-5 w-5 mr-2 flex-shrink-0"}),(0,be.jsx)("span",{className:"font-medium",children:"Subscription payment overdue"})]}),(0,be.jsx)("p",{className:"text-sm",children:"Your subscription payment is past due. You're currently limited to the Free plan usage. Please update your payment method to restore full access."}),(0,be.jsx)("div",{children:(0,be.jsx)(Ze,{onClick:I,className:"bg-amber-600 hover:bg-amber-700 text-white",size:"sm",children:"Go to Billing"})})]}),!S&&w&&(0,be.jsxs)("div",{className:"mb-3 p-4 bg-amber-50 border border-amber-200 rounded-md text-amber-800 flex flex-col gap-3",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(_e.A,{className:"h-5 w-5 mr-2 flex-shrink-0"}),(0,be.jsx)("span",{className:"font-medium",children:"You've reached your usage limit"})]}),(0,be.jsx)("p",{className:"text-sm",children:"You need to upgrade your plan to continue creating apps."}),(0,be.jsx)("div",{children:(0,be.jsx)(Ze,{onClick:I,className:"bg-amber-600 hover:bg-amber-700 text-white",size:"sm",children:"Go to Billing"})})]}),y&&(0,be.jsxs)("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm flex items-center",children:[(0,be.jsx)(Te.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,be.jsx)("span",{children:"Please fill in all required API keys before submitting."})]}),(0,be.jsx)(Ve,{value:a,files:n,onSend:()=>{const e=a.trim();if(e){if(w)return;if(!T())return void N(!0);s({text:e,files:n,deep_coding_mode:l,integrations:p.map((e=>e.item.id)),secrets:b}),r(""),i([]),u(null),N(!1)}},placeholder:"Describe the app you want to create...",disabled:t||w||A,isProcessing:t||A,onValueChange:r,onFilesChange:i,variant:"home",customButtomLeft:e=>(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[e,(0,be.jsx)(R,{}),(0,be.jsx)(O,{})]})})]}),f?(0,be.jsxs)("div",{className:"mt-4 flex items-center justify-center p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,be.jsx)(Ae.A,{className:"h-5 w-5 text-slate-400 animate-spin mr-3"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:"Loading integration..."})]}):p.length>0?(0,be.jsx)("div",{children:p.map(((e,s)=>(0,be.jsx)(qs,{integration:e,secrets:b,onSecretsChange:P,onRemove:E},s)))}):(0,be.jsx)(be.Fragment,{children:!w&&(0,be.jsx)(tt,{onSetPrompt:e=>{r(e)}})}),c&&(0,be.jsx)(rs,{onSelectStyle:e=>{u(e),d(!1);const s=as.find((s=>s.id===e));s&&r((e=>{const t=e.trim();return t?`${t}\n------\n${s.prompt}`:s.prompt}))}})]})}var rt=t(13052),nt=t(59051),it=t.n(nt),lt=t(33495);const ot=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(lt.bL,{ref:s,className:Be("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})}));ot.displayName=lt.bL.displayName;const ct=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(lt._V,{ref:s,className:Be("aspect-square h-full w-full",t),...a})}));ct.displayName=lt._V.displayName;const dt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(lt.H4,{ref:s,className:Be("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})}));dt.displayName=lt.H4.displayName;var mt=t(52257);const ut=function(e){let{app:s,linkToBuilder:t=!0}=e;const{user:a}=Ne(),r=t?`/apps/${s.id}/editor/preview`:`https://app--${s.slug}.base44.app`;return(0,be.jsx)(V.Link,{to:r,className:"block h-full",title:`Open ${s.name}`,children:(0,be.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden h-full border border-slate-200 hover:border-orange-200 hover:shadow-md transition-all duration-300 flex flex-col",children:[(0,be.jsxs)("div",{className:"p-4 pb-3 flex items-center gap-3",children:[(0,be.jsxs)(ot,{className:"h-12 w-12 rounded-lg shadow-sm",children:[(0,be.jsx)(ct,{src:s.logo_url,alt:`${s.name} Logo`}),(0,be.jsx)(dt,{className:"bg-gradient-to-br from-orange-100 to-orange-50 text-orange-500 rounded-lg",children:(e=>{if(!e)return"?";const s=e.trim().split(" ");return 1===s.length?e.charAt(0).toUpperCase():(s[0].charAt(0)+s[1].charAt(0)).toUpperCase()})(s.name)})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("h3",{className:"font-medium text-slate-800 truncate",children:s.name}),"platform_admin"===a.platform_role&&(0,be.jsxs)("p",{className:"text-xs text-slate-500 truncate",children:["by ",s.created_by]})]})]}),(0,be.jsx)("div",{className:"px-4 py-2 flex-1",children:(0,be.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2",children:s.user_description||"No description available"})}),(0,be.jsx)("div",{className:"px-4 py-3 bg-slate-50/50 border-t border-slate-100 mt-auto",children:(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsxs)("div",{className:"flex items-center text-xs text-slate-500",children:[(0,be.jsx)(Ys.A,{size:12,className:"mr-1 text-slate-400"}),(0,be.jsxs)("span",{children:["Updated ",(n=s.updated_date,it().utc(n,it().ISO_8601).fromNow())]})]}),(0,be.jsx)("span",{className:"text-orange-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,be.jsx)(mt.A,{size:16})})]})})]})});var n};const ht=function(){const[e,s]=(0,Y.useState)([]),[t,a]=(0,Y.useState)(!0),r=(0,J.Zp)();(0,Y.useEffect)((()=>{n()}),[]);const n=async()=>{a(!0);try{const e=await we.list("-updated_date",9,0,["id","name","user_description","status","updated_date","logo_url","created_date","created_by"].join(","));s(e)}catch(e){}finally{a(!1)}},i=()=>{r("/"),window.scrollTo({top:0,behavior:"smooth"})};return(0,be.jsxs)("div",{className:"fade-in",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"My Recent Apps"}),(0,be.jsx)("div",{className:"absolute -bottom-2.5 left-0 w-12 h-0.5 bg-orange-500 rounded-full"})]}),e.length>6&&(0,be.jsx)("button",{onClick:()=>{r("/apps")},className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all"})]}),t?(0,be.jsx)("div",{className:"flex justify-center py-12",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):e.length>0?(0,be.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-5 slide-up",children:[e.map(((e,s)=>(0,be.jsx)("div",{className:"animate-in",style:{animationDelay:80*s+"ms"},children:(0,be.jsx)(ut,{app:e})},e.id))),(0,be.jsx)("div",{className:"border-2 border-dashed border-slate-200 rounded-xl flex items-center justify-center h-[188px] hover:border-orange-300 transition-colors",children:(0,be.jsxs)("button",{onClick:i,className:"flex flex-col items-center text-slate-400 hover:text-orange-600 transition-colors p-4",children:[(0,be.jsx)(rt.A,{size:28,className:"mb-2.5"}),(0,be.jsx)("span",{className:"font-medium text-sm",children:"Create New App"})]})})]}):(0,be.jsxs)("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl fade-in p-8",children:[(0,be.jsx)("h3",{className:"text-xl mb-4 text-slate-800",children:"You haven't created any apps yet."}),(0,be.jsx)("p",{className:"text-slate-600 mb-6",children:"Create your first app using the form above!"}),(0,be.jsxs)("button",{onClick:i,className:"inline-flex items-center text-white bg-orange-500 hover:bg-orange-600 transition-colors px-4 py-2 rounded-lg font-medium",children:[(0,be.jsx)(rt.A,{size:18,className:"mr-2"}),"Create New App"]})]}),(0,be.jsx)("style",{jsx:!0,global:!0,children:"\n                .fade-in {\n                    animation: fadeIn 0.5s ease-out;\n                }\n                \n                .slide-up > * {\n                    opacity: 0;\n                    transform: translateY(15px);\n                }\n                \n                .animate-in {\n                    animation: slideUp 0.4s ease-out forwards;\n                }\n                \n                @keyframes fadeIn {\n                    from { opacity: 0; }\n                    to { opacity: 1; }\n                }\n                \n                @keyframes slideUp {\n                    from { \n                        opacity: 0;\n                        transform: translateY(15px);\n                    }\n                    to { \n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n            "})]})};var xt=t(6890);const pt=new class extends de{getBaseURL(){return"/app-logs"}fetchLogs(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.axios.get(`/${e}`,{params:s})}logUserInApp(e,s){return this.axios.post(`/${e}/log-user-in-app/${s}`)}getStats(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"all"===e?this.axios.get("/platform-admin/platform-stats",{params:s}):this.axios.get(`/${e}/stats`,{params:s})}getUserStats(e){return this.axios.get(`/user-stats/${e}`)}getTrendingApps(){return ce("/apps/public").get("/trending")}};function gt(){const[e,s]=(0,Y.useState)([]),[t,a]=(0,Y.useState)(!0);return(0,Y.useEffect)((()=>{(async()=>{try{const e=await pt.getTrendingApps();s(e.trending_apps.map((e=>({...e,created_by:"Community"}))))}catch(e){}finally{a(!1)}})()}),[]),t?(0,be.jsxs)("div",{className:"mt-12",children:[(0,be.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[(0,be.jsx)(xt.A,{className:"w-6 h-6 mr-2"}),"Trending Apps"]}),(0,be.jsx)("div",{className:"flex justify-center",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):e.length?(0,be.jsx)("div",{className:"mt-12",children:(0,be.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map((e=>(0,be.jsx)(ut,{app:e,linkToBuilder:!1},e.id)))})}):null}var ft=t(61219);const jt=ft.Root,bt=ft.Trigger,vt=ft.Portal,yt=ft.Close,Nt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ft.Overlay,{ref:s,className:Be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a})}));Nt.displayName=ft.Overlay.displayName;const wt=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(vt,{children:[(0,be.jsx)(Nt,{}),(0,be.jsxs)(ft.Content,{ref:s,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[a,(0,be.jsxs)(ft.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,be.jsx)(He.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));wt.displayName=ft.Content.displayName;const Ct=e=>{let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};Ct.displayName="DialogHeader";const St=e=>{let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};St.displayName="DialogFooter";const kt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ft.Title,{ref:s,className:Be("text-lg font-semibold leading-none tracking-tight",t),...a})}));kt.displayName=ft.Title.displayName;const At=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ft.Description,{ref:s,className:Be("text-sm text-muted-foreground",t),...a})}));At.displayName=ft.Description.displayName;var _t=t(68935),Tt=t(6285),Et=t(72916);const It=e=>{let{app:s,isOpen:t,onClose:a}=e;const r=e=>{const t=s?`I've built ${s.name} with @base_44!`:"Check out what I built with @base_44!",a=s?`https://app--${s.slug}.base44.app`:window.location.href;"twitter"===e?window.open(`https://x.com/intent/tweet?text=${encodeURIComponent(t)}`):"linkedin"===e&&window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`)};return(0,be.jsx)(jt,{open:t,onOpenChange:a,children:(0,be.jsxs)(wt,{className:"sm:max-w-[625px]",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)("div",{className:"flex justify-between items-center",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(_t.A,{className:"h-5 w-5 text-primary"}),(0,be.jsx)(kt,{className:"text-xl",children:s?`Share ${s.name}`:"Share Project"})]})}),(0,be.jsx)(At,{className:"text-sm text-muted-foreground",children:"Share your project and earn 20 free credits to keep building!"})]}),(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsxs)("div",{className:"bg-secondary/20 p-4 rounded-lg space-y-3 border border-border",children:[(0,be.jsx)("h3",{className:"font-medium text-sm",children:"Sharing Guidelines"}),(0,be.jsxs)("ul",{className:"space-y-2.5 text-sm text-muted-foreground",children:[(0,be.jsxs)("li",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/70"}),"Tag ",(0,be.jsx)("span",{className:"font-medium text-foreground",children:"@base_44"})]}),(0,be.jsxs)("li",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/70"}),"Write at least 200 characters about your experience building with Base44"]}),(0,be.jsxs)("li",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/70"}),"Account must have over 100 followers"]}),(0,be.jsxs)("li",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/70"}),"Add a screenshot or video of your project (optional)"]}),(0,be.jsxs)("li",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/70"}),"Add a link to your project (optional)"]}),(0,be.jsxs)("li",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/70"}),"Open a ticket, at ",(0,be.jsx)("button",{type:"button",onClick:()=>{const e=null!=s&&s.id?`/support?appId=${s.id}`:"/support";window.open(e,"_blank")},className:"underline text-primary hover:text-orange-500 transition-colors",children:"support system"}),", with the link to your post"]})]})]}),(0,be.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,be.jsxs)(Ze,{variant:"outline",className:"w-full justify-start gap-2 font-normal",onClick:()=>r("linkedin"),children:[(0,be.jsx)(Tt.A,{className:"h-4 w-4"}),"Share on LinkedIn"]}),(0,be.jsxs)(Ze,{variant:"outline",className:"w-full justify-start gap-2 font-normal",onClick:()=>r("twitter"),children:[(0,be.jsx)(Et.A,{className:"h-4 w-4"}),"Share on X (Twitter)"]})]})]})]})})};const Pt=function(){const[e,s]=(0,Y.useState)(!1),[t,a]=(0,Y.useState)("my-apps"),[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(!0),o=(0,J.Zp)();return(0,be.jsx)("div",{className:"min-h-screen",children:(0,be.jsxs)("main",{className:"relative z-10 max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-12",children:[(0,be.jsx)("div",{className:"flex justify-center mb-12 sm:mb-12",children:(0,be.jsx)("img",{src:Ce,alt:"Apper Logo",className:"h-10"})}),i&&(0,be.jsx)("div",{className:"mb-8 mx-auto max-w-4xl",children:(0,be.jsxs)("div",{className:"relative bg-gradient-to-r from-orange-50 to-teal-50 border border-orange-200/50 rounded-xl p-4 sm:p-6 shadow-sm",children:[(0,be.jsx)("button",{onClick:()=>l(!1),className:"absolute top-3 right-3 text-slate-400 hover:text-slate-600 transition-colors duration-200","aria-label":"Dismiss banner",children:(0,be.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,be.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,be.jsx)("div",{className:"flex-shrink-0",children:(0,be.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,be.jsx)("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-1",children:"We're experiencing higher than usual traffic"}),(0,be.jsxs)("p",{className:"text-sm text-slate-700 leading-relaxed",children:["You may experience slower response times or temporary delays while creating apps.",(0,be.jsx)("br",{}),"Thank you for your patience as we scale to meet demand."]})]})]})]})}),(0,be.jsxs)("div",{className:"mb-12 sm:mb-16 relative",children:[(0,be.jsxs)("div",{className:"max-w-3xl mx-auto text-center mb-8",children:[(0,be.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-slate-900 mb-3",children:"What would you build today?"}),(0,be.jsx)("p",{className:"text-slate-600 text-base sm:text-lg",children:"Describe your app idea below or get inspired by our templates."})]}),(0,be.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,be.jsx)(at,{onStart:async e=>{let{text:t,files:a,deep_coding_mode:r,integrations:n,secrets:i}=e;if(t.trim()){s(!0);try{const e=await we.create({deep_coding_mode:!!r,status:{state:"processing",details:"Starting conversation..."},integrations:n,secrets:i});we.addMessage(e.id,{content:t,file_urls:a}),o(`/apps/${e.id}/editor/preview`)}catch(l){alert("Failed to create app. Please try again.")}finally{s(!1)}}else alert("Please enter an app description")},loading:e})})]}),(0,be.jsxs)("div",{className:"transition-opacity duration-200 pb-12",children:["my-apps"===t&&(0,be.jsx)(ht,{}),"trending"===t&&(0,be.jsx)(gt,{})]}),(0,be.jsx)(It,{isOpen:r,onClose:()=>n(!1)})]})})};var Rt=t(35887),Ot=t(81830);const Dt=function(){const{user:e,updateUser:s}=Ne(),[t,a]=(0,Y.useState)(!1),[r,n]=(0,Y.useState)(e.full_name||""),[i,l]=(0,Y.useState)(e.phone_number);return(0,be.jsxs)("div",{className:"p-8 min-h-screen",children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-8 text-center",children:"User Settings"}),(0,be.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{children:"Account Information"})}),(0,be.jsx)(Ms,{children:(0,be.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{const t=await ue.updateUser(e.id,{full_name:r.length>0?r:null,phone_number:(i||"").length>0?i:null});s(t),Rt.default.success("User settings updated successfully!")}catch(n){Rt.default.error("Failed to update user settings: "+n.detail||0)}finally{a(!1)}},className:"space-y-6",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"username",children:"Username"}),(0,be.jsx)(is,{id:"username",type:"text",value:e.username,disabled:!0})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"email",children:"Email"}),(0,be.jsx)(is,{id:"email",type:"email",value:e.email,disabled:!0})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"phone",children:"Phone Number"}),(0,be.jsx)(is,{id:"phone",type:"text",value:i,onChange:e=>l(e.target.value)}),(0,be.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Optional: Enter phone number to receive SMS notifications.",(0,be.jsx)("br",{}),"By entering your phone number, you agree to receive SMS notifications from us.",(0,be.jsx)("br",{}),"You can opt out at any time - just remove the number."]})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"apikey",children:"API Key"}),(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsx)(is,{id:"apikey",type:"text",value:e.api_key,disabled:!0,className:"flex-grow"}),(0,be.jsx)(Ze,{variant:"outline",size:"icon",onClick:()=>{navigator.clipboard.writeText(e.api_key),Rt.default.success("API key copied to clipboard!")},children:(0,be.jsx)(Ot.A,{className:"h-4 w-4"})}),(0,be.jsx)(Ze,{onClick:async()=>{a(!0);try{const t=await ue.regenerateApiKey(e.id);s(t),Rt.default.success("API key regenerated successfully!")}catch(t){Rt.default.error("Failed to regenerate API key: "+t.detail)}finally{a(!1)}},disabled:t,children:"Regenerate"})]})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"fullname",children:"Full Name"}),(0,be.jsx)(is,{id:"fullname",type:"text",value:r,onChange:e=>n(e.target.value),required:!0})]}),(0,be.jsx)("div",{className:"flex justify-end",children:(0,be.jsx)(Ze,{type:"submit",disabled:t,children:"Save Changes"})})]})})]})})]})};var Lt=t(13147),Ut=t(2263),$t=t(82407),Mt=t(24990),Ft=t(46327),zt=t(12550),Bt=t(39193),qt=t(9072);const Wt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{className:"relative w-full overflow-auto",children:(0,be.jsx)("table",{ref:s,className:Be("w-full caption-bottom text-sm",t),...a})})}));Wt.displayName="Table";const Yt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("thead",{ref:s,className:Be("[&_tr]:border-b",t),...a})}));Yt.displayName="TableHeader";const Gt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("tbody",{ref:s,className:Be("[&_tr:last-child]:border-0",t),...a})}));Gt.displayName="TableBody";const Ht=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("tfoot",{ref:s,className:Be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}));Ht.displayName="TableFooter";const Vt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("tr",{ref:s,className:Be("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})}));Vt.displayName="TableRow";const Jt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("th",{ref:s,className:Be("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})}));Jt.displayName="TableHead";const Kt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("td",{ref:s,className:Be("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})}));Kt.displayName="TableCell";const Zt=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("caption",{ref:s,className:Be("mt-4 text-sm text-muted-foreground",t),...a})}));Zt.displayName="TableCaption";const Xt=function(){const{user:e}=Ne(),[s,t]=(0,Y.useState)([]),[a,r]=(0,Y.useState)(!0),[n,i]=(0,Y.useState)(""),[l,o]=(0,Y.useState)("desc"),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(1),[p,g]=(0,Y.useState)(!0),[f,j]=(0,Y.useState)("grid"),b="grid"===f?24:100;(0,J.Zp)(),(0,Y.useEffect)((()=>{v()}),[h,l,c,n,f]);const v=async()=>{try{const s="desc"===l?"-":"";let a={};c&&(a.created_by=e.email),n&&(a.$or=[{name:{$regex:n,$options:"i"}},{user_description:{$regex:n,$options:"i"}},{created_by:{$regex:n,$options:"i"}}]);const i=await we.filter(a,`${s}updated_date`,b,(h-1)*b,["id","name","logo_url","user_description","created_by","created_date","updated_date","is_starred"].join(","));t((e=>1===h?i:[...e,...i])),g(i.length===b),r(!1)}catch(s){r(!1)}},y=s.filter((e=>!m||e.is_starred));return a&&1===h?(0,be.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,be.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):(0,be.jsx)("div",{className:"p-6 min-h-full",children:(0,be.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,be.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold",children:"Your Apps"}),(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(Lt.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,be.jsx)(is,{type:"text",placeholder:"Search apps...",className:"pl-10 w-full sm:w-80",value:n,onChange:e=>{i(e.target.value),x(1),t([])}})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsx)(Ze,{variant:c?"default":"outline",onClick:()=>{d(!c),x(1),t([])},children:c?"My Apps":"All Apps"}),(0,be.jsx)(Ze,{variant:m?"default":"outline",onClick:()=>u(!m),children:(0,be.jsx)(Ut.A,{className:"h-4 w-4 "+(m?"fill-current":"")})}),(0,be.jsx)(Ze,{variant:"outline",onClick:()=>{o("desc"===l?"asc":"desc"),x(1),t([])},children:"desc"===l?(0,be.jsx)($t.A,{className:"h-4 w-4"}):(0,be.jsx)(Mt.A,{className:"h-4 w-4"})}),(0,be.jsx)(Ze,{variant:"outline",onClick:()=>{j((e=>"grid"===e?"table":"grid")),x(1),t([])},children:"grid"===f?(0,be.jsx)(Ft.A,{className:"h-4 w-4"}):(0,be.jsx)(zt.A,{className:"h-4 w-4"})})]})]})]}),"grid"===f?(0,be.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:y.map((e=>(0,be.jsx)(V.Link,{to:`/apps/${e.id}/editor/preview`,className:"block hover:shadow-lg transition-all duration-300",children:(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsxs)("div",{className:"flex items-center gap-4",children:[(0,be.jsx)(ot,{className:"h-12 w-12 rounded-xl",children:e.logo_url?(0,be.jsx)(ct,{src:e.logo_url,alt:`${e.name} logo`}):(0,be.jsx)(dt,{className:"bg-primary/10",children:(0,be.jsx)(Bt.A,{className:"h-6 w-6 text-primary"})})}),(0,be.jsx)("h3",{className:"font-semibold text-lg line-clamp-2",children:e.name})]})}),(0,be.jsxs)(Ms,{children:[(0,be.jsxs)("p",{className:"text-muted-foreground mb-3 line-clamp-2",children:[e.user_description||"No description",e.user_description&&e.user_description.length>100&&(0,be.jsx)(qt.A,{className:"inline ml-1 h-4 w-4"})]}),(0,be.jsxs)("div",{className:"text-xs text-muted-foreground flex flex-wrap gap-2",children:[(0,be.jsxs)("span",{children:["By ",e.created_by]}),(0,be.jsx)(Bs,{orientation:"vertical",className:"h-4"}),(0,be.jsxs)("span",{children:["Created ",it().utc(e.created_date).fromNow()]})]})]})]})},e.id)))}):(0,be.jsx)(Ds,{children:(0,be.jsx)(Ms,{className:"p-0",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Jt,{className:"w-16"})," ",(0,be.jsx)(Jt,{children:"Name"}),(0,be.jsx)(Jt,{children:"Description"}),(0,be.jsx)(Jt,{children:"Created By"}),(0,be.jsx)(Jt,{children:"Last Updated"}),(0,be.jsx)(Jt,{className:"text-right",children:"Actions"})]})}),(0,be.jsx)(Gt,{children:y.map((e=>(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Kt,{className:"p-2",children:(0,be.jsx)(ot,{className:"h-10 w-10 rounded-md",children:e.logo_url?(0,be.jsx)(ct,{src:e.logo_url,alt:`${e.name} logo`}):(0,be.jsx)(dt,{className:"bg-primary/10 rounded-md",children:(0,be.jsx)(Bt.A,{className:"h-5 w-5 text-primary"})})})}),(0,be.jsx)(Kt,{className:"font-medium py-2 pr-2",children:(0,be.jsx)(V.Link,{to:`/apps/${e.id}/editor/preview`,className:"hover:underline line-clamp-2",children:e.name})}),(0,be.jsx)(Kt,{className:"text-muted-foreground py-2 pr-2 line-clamp-2",children:e.user_description||"-"}),(0,be.jsx)(Kt,{className:"text-muted-foreground py-2 pr-2 whitespace-nowrap",children:e.created_by}),(0,be.jsx)(Kt,{className:"text-muted-foreground py-2 pr-2 whitespace-nowrap",children:it().utc(e.updated_date).fromNow()}),(0,be.jsx)(Kt,{className:"py-2 pl-2 text-right",children:(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),alert(`Actions for ${e.name}`)},children:(0,be.jsx)(qt.A,{className:"h-4 w-4"})})})]},e.id)))})]})})}),0===y.length&&!a&&(0,be.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No apps found matching your criteria"}),y.length>0&&(0,be.jsxs)("div",{className:"flex justify-center gap-2 mt-8",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>x((e=>Math.max(1,e-1))),disabled:1===h,children:"Previous"}),(0,be.jsx)(Ze,{variant:"outline",onClick:()=>x((e=>e+1)),disabled:!p,children:"Next"})]}),a&&h>1&&(0,be.jsx)("div",{className:"flex justify-center items-center py-4",children:(0,be.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})]})})};var Qt=t(32443),ea=t(86805),sa=t(74878),ta=t(40978),aa=t(52607),ra=t(89318),na=t(29975),ia=t(78419),la=t(65330);const oa=new class extends de{getBaseURL(){return"/apps"}write(e,s,t){return this.axios.post(`/${e}/coding/write`,{file_path:s,content:t})}exportToGithub(e){return this.axios.post(`/${e}/coding/export-to-github`)}updateGithubRepo(e){return this.axios.post(`/${e}/coding/update-github-repo`)}exportToZip(e){return this.axios.get(`/${e}/coding/export-to-zip`,{responseType:"blob"})}inviteCollaborator(e,s){return this.axios.post(`/${e}/coding/invite-collaborator`,{collaborator_username:s})}searchGithubUsers(e,s){return this.axios.post(`/${e}/coding/search-github-users`,{query:s})}};function ca(){const e=window.location.hostname;return"localhost"===e||e.endsWith(".localhost")?"http://localhost:8000/api":"base44.io"===e||e.endsWith(".base44.io")?"https://base44.io/api":"https://base44.app/api"}function da(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new class extends me{constructor(){super(),this.axios.interceptors.response.use((e=>e),(e=>{var a,r;const n=`error trying to call ${s.name} entity api: ${e.config.url}`;let i=e.config.data;try{"string"!=typeof i&&(i=JSON.stringify(i)),i&&i.length>1e3&&(i=i.substring(0,997)+"...")}catch(m){i=String(i)}let l="";try{var o;l=JSON.stringify(null===(o=e.response)||void 0===o?void 0:o.data),l&&l.length>1e3&&(l=l.substring(0,997)+"...")}catch(m){var c;l=String((null===(c=e.response)||void 0===c?void 0:c.data)||"")}const d=`When using the app, on url ${window.location.href} the following entity api call failed: \nentity: ${s.name}\nurl: ${e.config.baseURL}${e.config.url}\nmethod: ${e.config.method}\ndata: ${i}\nerror:${(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||e.message}\nfulljson:${l}`;return t(n,d),Promise.reject(e)}))}getBaseURL(){return ca()+`/apps/${e}/entities/${s.name}`}getClient(){return ce(this.getBaseURL(),a,!0,!0)}schema(){return s}bulkCreate(e){return this.axios.post("/bulk",e)}importEntities(e){const s=new FormData;return s.append("file",e,e.name),this.axios.post("/import",s,{headers:{"Content-Type":"multipart/form-data"}})}}}function ma(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r={};return Object.keys(e.entities).forEach((t=>{r[t]=da(e.id,e.entities[t],s,a)})),r.User=da(e.id,e.user_entity,s,a),r.User.updateMyUserData=async function(e){return await t.updateMyUserData(e)},r.User.me=async function(){return await t.getMyUserInfo()},r.User.logout=async function(){return await t.logout()},r.User.login=async function(){return await t.login()},r.User.isUserAuthenticated=function(){return t.isUserAuthenticated()},r}const ua=(0,Y.createContext)(),ha=e=>{let{children:s}=e;const{user:t}=Ne(),{appId:a,pageName:r}=(0,J.g)(),[n,i]=(0,Y.useState)(null),[l,o]=(0,Y.useState)(!0),[c,d]=(0,Y.useState)(null),[m,u]=(0,Y.useState)([]),[h,x]=(0,Y.useState)(null),[p,g]=(0,Y.useState)(null),[f,j]=(0,Y.useState)([]),[b,v]=(0,Y.useState)(null),[y,N]=(0,Y.useState)(!1),[w,C]=(0,Y.useState)(!1),[S,k]=(0,Y.useState)(null);(0,Y.useEffect)((()=>{(!n||a&&(null==n?void 0:n.id)!==a)&&(async()=>{try{o(!0);let e=a;await we.fetchAndSubscribe(e,((e,s)=>{if(s&&s.includes("_last_msg")){const s=(e=X().cloneDeep(e)).conversation.messages.findIndex((s=>s.id===e._last_msg.id));-1!==s?e.conversation.messages[s]=e._last_msg:e.conversation.messages.push(e._last_msg)}i(e),u([])}));const[s,r]=await Promise.all([Ps.getCurrentUsage(),we.getRuntimeAuthToken(a,t.api_key)]);g(s),T(e),_(e),v(r.token)}catch(s){var e;d("Failed to load app  : "+((null===(e=s.response.data)||void 0===e?void 0:e.message)||s.message))}finally{o(!1)}})()}),[a]);let A=null;r?A=null!=n&&n.pages[r]?{name:r,code:null==n?void 0:n.pages[r]}:null:null!=n&&n.pages&&(A={name:Object.keys(null==n?void 0:n.pages)[0],code:null==n?void 0:n.pages[Object.keys(null==n?void 0:n.pages)[0]]});const _=async e=>{const s=await ns.getSecrets(e);j(Object.keys(s))},T=async e=>{if(!window.location.href.includes("/editor/"))return;const s=await we.getSuggestions((null==n?void 0:n.id)||e);x(s)};let E=s;return l?E=(0,be.jsx)("div",{className:"fixed inset-0 flex justify-center items-center",children:(0,be.jsx)(Ae.A,{className:"h-8 w-8 animate-spin"})}):c?E=(0,be.jsx)("div",{className:"p-8",children:(0,be.jsx)(We,{variant:"destructive",children:(0,be.jsxs)(Ge,{children:[c,(0,be.jsx)("div",{className:"mt-2 text-sm",children:"Please try refreshing the page. If the problem persists, please contact our support team."}),(0,be.jsx)("button",{type:"button",onClick:()=>window.open("/support","_blank"),className:"underline text-primary hover:text-orange-500 transition-colors",children:"support system"})]})})}):n||(E=(0,be.jsx)(We,{variant:"destructive",children:(0,be.jsx)(Ge,{children:"App not found"})})),(0,be.jsx)(ua.Provider,{value:{app:n,setApp:i,updateApp:async e=>{const s=await we.update(n.id,e);u([]),i(s)},isLoading:l,error:c,getEntitiesSDK:function(e){return ma(n,e,null,{Authorization:`Bearer ${b}`})},appErrors:m,setAppErrors:u,onAppError:(e,s,t)=>{let a;a=X().isObject(e)?{title:e.title||e.message||e.toString(),details:e.details||e.stack||e.toString(),componentName:t||r}:{title:e,details:s,componentName:t||r},u((e=>{if(!e.some((e=>e.title===a.title)))return[...e,a];{const s=e.find((e=>e.title===a.title));s&&n&&(n.components&&n.components[a.componentName]&&!n.components[s.componentName]||n.pages&&n.pages[a.componentName]&&!n.pages[s.componentName]&&!n.components[s.componentName])&&(s.componentName=a.componentName)}return e}))},addChatMessage:async e=>{try{var s;S&&(e.custom_context=[{type:"element",data:{element_tag_name:S.tagName,filename:S.dataset.filename,linenumber:S.dataset.linenumber},message:`User has selected an element to edit, here's the element's code position: file: ${S.dataset.filename}, line number: ${S.dataset.linenumber}`}],k(null),C(!1)),e.additional_message_params=e.additional_message_params||{},A&&(e.additional_message_params.current_page=A.name),n.conversation.messages.push({...e,role:"user"});const t=await we.addMessage(a,e);i(t),"pending"!==n.app_stage&&T(),await(async()=>{const e=await Ps.getCurrentUsage();g(e)})(),je("Message Added",{app_id:a,convo_length:n.conversation.messages.length,has_files:(null===(s=e.file_urls)||void 0===s?void 0:s.length)>0})}catch(t){}},undoMessage:async e=>{try{const s=await we.undoMessage(a,e);i(s)}catch(r){var s,t;if(403===(null===(s=r.response)||void 0===s?void 0:s.status))d("You do not have access to this app");else d("Failed to undo message: "+((null===(t=r.response.data)||void 0===t?void 0:t.message)||r.message))}},currentPage:A,stopChat:async()=>{const e=await we.stopChat(n.id);i(e)},suggestions:h,currentUsage:p,isSelectingDivMode:y,setIsSelectingDivMode:N,isElementMode:w,setIsElementMode:C,selectedElement:S,setSelectedElement:k,writeCodeToFile:async(e,s)=>{const t=await oa.write(n.id,e,s);u([]),i(t)},existingSecretNames:f,updateSecrets:async e=>{await ns.updateSecrets(a,e),await _(a)},runtimeAuthToken:b},children:E})},xa=()=>(0,Y.useContext)(ua);var pa=t(79072),ga=t(24546),fa=t(17665),ja=t(10743),ba=t(70446);function va(e,s){const t=[];let a=0;const r=`<${s} `,n=`</${s}>`;for(;-1!==e.indexOf(r,a);){const s=e.indexOf(r,a);let i=e.indexOf(">",s)+1;0===i&&(i=e.length);const l=e.slice(s,i),o=e.indexOf(n,i);if(-1===o){t.push({openingTagIndex:s,closingTagIndex:null,openingTag:l,content:e.slice(i)});break}t.push({openingTagIndex:s,closingTagIndex:o,openingTag:l,content:e.slice(i,o)}),a=o+n.length}return t}function ya(e,s){const t=e.match(new RegExp(`${s}="([^"]*)"`,"i"));return t?t[1]:void 0}const Na=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("textarea",{className:Be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})}));Na.displayName="Textarea";const wa=new class extends de{getBaseURL(){return"/feedback"}create(e){return this.axios.post("",{feedback_url:e.feedback_url||window.location.href,...e})}},Ca=[{tag:"Deleted previously implemented features / sections",emoji:"\u{1f5d1}\ufe0f"},{tag:"Created an error",emoji:"\u26a0\ufe0f"},{tag:"Stuck in a loop",emoji:"\u{1f504}"},{tag:"UI/Styling issues",emoji:"\u{1f3a8}"},{tag:"Nothing wrong",emoji:"\u2728"},{tag:"Other",emoji:"\u{1f4ad}"}];function Sa(e){let{msgId:s,isOpen:t,onClose:a}=e;const[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)(""),[o,c]=(0,Y.useState)(!1);return(0,be.jsx)(jt,{open:t,onOpenChange:a,children:(0,be.jsxs)(wt,{className:"sm:max-w-[500px]",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Share Your Feedback"}),(0,be.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Rating chat actions helps us learn and improve Base44. We review every feedback carefully to make our AI better at helping you."})]}),(0,be.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"What happened with this action?"}),(0,be.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Ca.map((e=>{let{tag:s,emoji:t}=e;return(0,be.jsxs)("button",{onClick:()=>n(s),className:`\n                    flex items-center gap-2 p-3 rounded-lg border transition-all\n                    ${r===s?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}\n                  `,children:[(0,be.jsx)("span",{className:"text-xl",children:t}),(0,be.jsx)("span",{className:"text-sm font-medium",children:s})]},s)}))})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Additional details (optional)"}),(0,be.jsx)(Na,{value:i,onChange:e=>l(e.target.value),placeholder:"Help us understand what happened in more detail...",className:"h-24"})]})]}),(0,be.jsxs)(St,{children:[(0,be.jsx)(Ze,{variant:"outline",onClick:a,children:"Cancel"}),(0,be.jsx)(Ze,{onClick:async()=>{try{c(!0),await wa.create({feedback_url:window.location.href+"?msgId="+s,tag:r,feedback:i}),a()}catch(e){}finally{c(!1)}},disabled:!r||o,className:"bg-blue-600 hover:bg-blue-700",children:o?"Submitting...":"Submit Feedback"})]})]})})}const ka=new class extends de{getBaseURL(){return"/apps"}getCheckpointFileTree(e,s){return this.axios.get(`/${e}/app-checkpoints/${s}/file-tree`)}listCheckpoints(e){return this.axios.get(`/${e}/app-checkpoints`)}loadCheckpoint(e,s){return this.axios.post(`/${e}/app-checkpoints/${s}/load`)}};var Aa=t(35023),_a=t(37970);const Ta=_a.bL,Ea=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(_a.B8,{ref:s,className:Be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})}));Ea.displayName=_a.B8.displayName;const Ia=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(_a.l9,{ref:s,className:Be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})}));Ia.displayName=_a.l9.displayName;const Pa=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(_a.UC,{ref:s,className:Be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})}));Pa.displayName=_a.UC.displayName;const Ra=e=>{let{originalCode:s="",modifiedCode:t="",language:a="javascript",title:r="Code Comparison",diffViewStyle:n="default"}=e;const i={readOnly:!0,renderSideBySide:!0,wordWrap:"on",scrollBeyondLastLine:!1,minimap:{enabled:!1},lineNumbers:"on",diffWordWrap:"on"},l="github"===n?"light":"vs";return(0,be.jsxs)(Ds,{className:"w-full shadow-md",children:[(0,be.jsx)(Ls,{className:"pb-2",children:(0,be.jsx)(Us,{className:"text-lg font-medium",children:r})}),(0,be.jsx)(Ms,{children:(0,be.jsxs)(Ta,{defaultValue:"diff",className:"w-full",children:[(0,be.jsxs)(Ea,{className:"mb-2",children:[(0,be.jsx)(Ia,{value:"diff",children:"Diff View"}),(0,be.jsx)(Ia,{value:"original",children:"Original"}),(0,be.jsx)(Ia,{value:"modified",children:"Modified"})]}),(0,be.jsx)(Pa,{value:"diff",className:"w-full",children:(0,be.jsx)("div",{className:"h-[500px] border rounded-md overflow-hidden",children:(0,be.jsx)(Aa.zC,{height:"100%",language:a,original:s,modified:t,options:i,theme:l})})}),(0,be.jsx)(Pa,{value:"original",children:(0,be.jsx)("div",{className:"h-[500px] border rounded-md overflow-hidden",children:(0,be.jsx)(Aa.zC,{height:"100%",language:a,original:s,modified:s,options:{...i,renderSideBySide:!1},theme:l})})}),(0,be.jsx)(Pa,{value:"modified",children:(0,be.jsx)("div",{className:"h-[500px] border rounded-md overflow-hidden",children:(0,be.jsx)(Aa.zC,{height:"100%",language:a,original:t,modified:t,options:{...i,renderSideBySide:!1},theme:l})})})]})})]})};var Oa=t(61878),Da=t(31641);function La(e){let{msgId:s,isOpen:t,onClose:a}=e;const{user:r}=Ne(),{app:n}=xa(),[i,l]=(0,Y.useState)(null),[o,c]=(0,Y.useState)(!0),[d,m]=(0,Y.useState)("diff"),[u,h]=(0,Y.useState)(!1),x=n.conversation.messages.findIndex((e=>e.id===s)),p=n.conversation.messages[x],g=null!=p&&p.content?va(p.content,"action"):[],f=async e=>{try{return await ka.getCheckpointFileTree(n.id,e)}catch(s){return null}};(0,Y.useEffect)((()=>{(async()=>{c(!0);const e=n.conversation.messages.slice(0,x).reverse().find((e=>e.checkpoint_id));if(!p.checkpoint_id)return void c(!1);const s=await f(p.checkpoint_id);let t=null;e&&e.checkpoint_id&&(t=await f(e.checkpoint_id));const a={};s&&t?(Object.entries(s.files).forEach((e=>{let[s,r]=e;const n=t.files[s];n&&JSON.stringify(n)===JSON.stringify(r)||(a[s]={original:n?"string"==typeof n?n:JSON.stringify(n,null,2):"",modified:"string"==typeof r?r:JSON.stringify(r,null,2),type:n?"modified":"added"})})),Object.keys(t.files).forEach((e=>{if(!s.files[e]){const s=t.files[e];a[e]={original:"string"==typeof s?s:JSON.stringify(s,null,2),modified:"",type:"deleted"}}}))):s&&Object.entries(s.files).forEach((e=>{let[s,t]=e;a[s]={original:"",modified:"string"==typeof t?t:JSON.stringify(t,null,2),type:"added"}})),l(a),c(!1)})()}),[s,n.id,x]);const j=p.metadata.created_date,b=p.metadata.created_by_email,v=it().utc(j),y=v.clone().subtract(5,"minutes").format(),N=v.clone().add(5,"minutes").format(),w=`https://cloud.langfuse.com/project/cm23r6fre000rr9hhpjkrzoqx/traces?filter=${encodeURIComponent(`userId;string;;=;${b}`)},${encodeURIComponent(`timestamp;datetime;;>;${y},timestamp;datetime;;<;${N}`)}`,C=()=>{null!=p&&p.content&&(navigator.clipboard.writeText(p.content),h(!0),setTimeout((()=>h(!1)),2e3))};return(0,be.jsx)(jt,{open:t,onOpenChange:a,children:(0,be.jsxs)(wt,{className:"max-w-5xl max-h-[95vh] p-0 overflow-hidden flex flex-col border border-gray-200 rounded-md",children:[(0,be.jsx)(Ct,{className:"px-4 py-3 border-b border-gray-200 bg-gray-50 flex flex-row items-center justify-between",children:(0,be.jsx)(kt,{className:"text-base font-medium",children:"Message Details"})}),(0,be.jsxs)(Ta,{defaultValue:"diff",className:"flex-1 flex flex-col overflow-hidden",onValueChange:m,children:[(0,be.jsxs)(Ea,{className:"px-4 pt-2 bg-white border-b border-gray-200",children:[(0,be.jsxs)(Ia,{value:"diff",className:"flex items-center",children:[(0,be.jsx)(sa.A,{className:"h-4 w-4 mr-2"}),"Code Changes"]}),"platform_admin"===r.platform_role&&(0,be.jsxs)(Ia,{value:"info",className:"flex items-center",children:[(0,be.jsx)(Oa.A,{className:"h-4 w-4 mr-2"}),"Message Info"]})]}),(0,be.jsx)(Pa,{value:"diff",className:"flex-1 overflow-auto p-0 m-0",children:o?(0,be.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,be.jsx)(Ae.A,{className:"h-6 w-6 animate-spin text-gray-500"}),(0,be.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading changes..."})]}):i&&0!==Object.keys(i).length?(0,be.jsx)("div",{className:"divide-y divide-gray-200",children:Object.entries(i).map(((e,s)=>{let[t,a]=e;return(0,be.jsxs)("div",{className:"bg-white",children:[(0,be.jsxs)("div",{className:"flex items-center px-4 py-2 bg-gray-50 border-b border-gray-200",children:[(0,be.jsx)(Js.A,{className:"h-4 w-4 mr-2 text-gray-600"}),(0,be.jsx)("span",{className:"font-medium text-sm text-gray-700",children:t}),(0,be.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full "+("added"===a.type?"bg-green-50 text-green-600 border border-green-100":"deleted"===a.type?"bg-red-50 text-red-600 border border-red-100":"bg-blue-50 text-blue-600 border border-blue-100"),children:a.type})]}),(0,be.jsx)("div",{className:"px-0",children:(0,be.jsx)(Ra,{originalCode:a.original,modifiedCode:a.modified,language:t.endsWith(".css")?"css":"javascript",title:t,diffViewStyle:"github"})})]},s)}))}):(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,be.jsx)(Te.A,{className:"h-10 w-10 mb-3 text-gray-400"}),(0,be.jsx)("p",{children:"No file changes detected for this message."})]})}),"platform_admin"===r.platform_role&&(0,be.jsx)(Pa,{value:"info",className:"flex-1 overflow-auto p-0 m-0",children:p?p?(0,be.jsxs)("div",{className:"p-4 space-y-4",children:[(0,be.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[(0,be.jsxs)("div",{className:"bg-gray-50 p-3 border-b border-gray-200 flex justify-between items-center",children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Message Attributes"}),(0,be.jsx)("button",{onClick:C,className:"flex items-center text-xs text-gray-600 hover:text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 rounded px-2 py-1 transition-colors",children:u?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(js.A,{className:"h-3.5 w-3.5 mr-1"}),"Copied!"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ot.A,{className:"h-3.5 w-3.5 mr-1"}),"Copy Content"]})})]}),(0,be.jsx)("div",{className:"p-4 space-y-2",children:Object.entries(p).filter((e=>{let[s]=e;return"content"!==s})).map((e=>{let[s,t]=e;return(0,be.jsxs)("div",{className:"flex",children:[(0,be.jsxs)("span",{className:"font-medium text-gray-700 min-w-[120px]",children:[s,":"]}),(0,be.jsx)("span",{className:"text-gray-600 break-all",children:"object"==typeof t?JSON.stringify(t):String(t)})]},s)}))})]}),(0,be.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[(0,be.jsx)("div",{className:"bg-gray-50 p-3 border-b border-gray-200",children:(0,be.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Langfuse Trace"})}),(0,be.jsx)("div",{className:"p-4",children:(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)("span",{className:"text-gray-600",children:"View trace in Langfuse:"}),(0,be.jsxs)("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline flex items-center",children:[w.substring(0,60),"...",(0,be.jsx)(Da.A,{className:"h-4 w-4 ml-1"})]})]})})]}),(0,be.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white",children:[(0,be.jsx)("div",{className:"bg-gray-50 p-3 border-b border-gray-200",children:(0,be.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Actions (",g.length,")"]})}),(0,be.jsx)("div",{className:"divide-y divide-gray-200",children:0===g.length?(0,be.jsx)("div",{className:"p-4 text-gray-500 text-center",children:"No actions found in this message"}):g.map(((e,s)=>{const t=e.openingTag.match(/action-type="([^"]*)"/)||e.openingTag.match(/type="([^"]*)"/),a=t?t[1]:"Unknown";return(0,be.jsxs)("div",{className:"p-4",children:[(0,be.jsxs)("div",{className:"mb-2",children:[(0,be.jsxs)("span",{className:"font-medium text-gray-700",children:["Action ",s+1,":"]}),(0,be.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-blue-50 text-blue-600 border border-blue-100",children:a})]}),(0,be.jsxs)("div",{className:"mt-2",children:[(0,be.jsx)("div",{className:"font-medium text-sm text-gray-700 mb-1",children:"Content:"}),(0,be.jsx)("pre",{className:"bg-gray-50 p-2 rounded text-xs overflow-x-auto",children:e.content})]})]},s)}))})]})]}):null:(0,be.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,be.jsx)(Te.A,{className:"h-10 w-10 mb-3 text-gray-400"}),(0,be.jsx)("span",{className:"ml-2 text-gray-600",children:"Message not found"})]})})]})]})})}var Ua=t(73654),$a=t(90983);const Ma=Ua.bL,Fa=Ua.l9,za=Ua.YJ,Ba=Ua.ZL,qa=Ua.Pb,Wa=Ua.z6,Ya=Y.forwardRef(((e,s)=>{let{className:t,inset:a,children:r,...n}=e;return(0,be.jsxs)(Ua.ZP,{ref:s,className:Be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",t),...n,children:[r,(0,be.jsx)($a.A,{className:"ml-auto h-4 w-4"})]})}));Ya.displayName=Ua.ZP.displayName;const Ga=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ua.G5,{ref:s,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));Ga.displayName=Ua.G5.displayName;const Ha=Y.forwardRef(((e,s)=>{let{className:t,sideOffset:a=4,...r}=e;return(0,be.jsx)(Ua.ZL,{children:(0,be.jsx)(Ua.UC,{ref:s,sideOffset:a,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})}));Ha.displayName=Ua.UC.displayName;const Va=Y.forwardRef(((e,s)=>{let{className:t,inset:a,...r}=e;return(0,be.jsx)(Ua.q7,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...r})}));Va.displayName=Ua.q7.displayName;const Ja=Y.forwardRef(((e,s)=>{let{className:t,children:a,checked:r,...n}=e;return(0,be.jsxs)(Ua.H_,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(Ua.VF,{children:(0,be.jsx)(js.A,{className:"h-4 w-4"})})}),a]})}));Ja.displayName=Ua.H_.displayName;const Ka=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(Ua.hN,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(Ua.VF,{children:(0,be.jsx)(us.A,{className:"h-2 w-2 fill-current"})})}),a]})}));Ka.displayName=Ua.hN.displayName;const Za=Y.forwardRef(((e,s)=>{let{className:t,inset:a,...r}=e;return(0,be.jsx)(Ua.JU,{ref:s,className:Be("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...r})}));Za.displayName=Ua.JU.displayName;const Xa=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ua.wv,{ref:s,className:Be("-mx-1 my-1 h-px bg-muted",t),...a})}));Xa.displayName=Ua.wv.displayName;const Qa=e=>{let{className:s,...t}=e;return(0,be.jsx)("span",{className:Be("ml-auto text-xs tracking-widest opacity-60",s),...t})};Qa.displayName="DropdownMenuShortcut";let er=0;const sr=new Map,tr=e=>{if(sr.has(e))return;const s=setTimeout((()=>{sr.delete(e),ir({type:"REMOVE_TOAST",toastId:e})}),1e6);sr.set(e,s)},ar=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===s.toast.id?{...e,...s.toast}:e))};case"DISMISS_TOAST":{const{toastId:t}=s;return t?tr(t):e.toasts.forEach((e=>{tr(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===t||void 0===t?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===s.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==s.toastId))}}},rr=[];let nr={toasts:[]};function ir(e){nr=ar(nr,e),rr.forEach((e=>{e(nr)}))}function lr(e){let{...s}=e;const t=(er=(er+1)%Number.MAX_SAFE_INTEGER,er.toString()),a=()=>ir({type:"DISMISS_TOAST",toastId:t});return ir({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>ir({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function or(){const[e,s]=Y.useState(nr);return Y.useEffect((()=>(rr.push(s),()=>{const e=rr.indexOf(s);e>-1&&rr.splice(e,1)})),[e]),{...e,toast:lr,dismiss:e=>ir({type:"DISMISS_TOAST",toastId:e})}}var cr=t(22796);const dr=e=>{let{content:s}=e;const{updateSecrets:t,existingSecretNames:a,addChatMessage:r}=xa(),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)({}),[c,d]=(0,Y.useState)(!1),{toast:m}=or(),u=Array.isArray(s)?s:[],h=u.map((e=>e.secretName)).filter(Boolean),x=h.filter((e=>a&&a.includes(e))),p=x.length===h.length&&h.length>0,g=x.length>0&&x.length<h.length;if(!u.length)return null;return(0,be.jsxs)(jt,{open:n,onOpenChange:e=>{i(e),e||o({})},children:[(0,be.jsx)(bt,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",size:"sm",className:"flex items-center gap-2 "+(p?"text-teal-600 border-teal-200 hover:bg-teal-50 hover:text-teal-700":g?"text-amber-600 border-amber-200 hover:bg-amber-50 hover:text-amber-700":"text-blue-600 border-blue-200 hover:bg-blue-50 hover:text-blue-700"),children:[p?(0,be.jsx)(ba.A,{size:16}):(0,be.jsx)(cr.A,{size:16}),g&&(0,be.jsx)(Te.A,{size:16}),(()=>{const e=p?"Update":"Set";if(1===h.length){return`${a&&a.includes(h[0])?"Update":"Set"} ${h[0]} secret`}return`${e} secrets: ${h.join(", ")}`})(),g&&` (${x.length}/${h.length} set)`]})}),(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsxs)(kt,{className:"text-teal-700",children:[p?"Update":"Set"," ",h.length>1?"Secrets":`${h[0]} Secret`]}),(0,be.jsx)(At,{children:"Enter the values for the required secrets."})]}),(0,be.jsxs)("form",{onSubmit:async e=>{e.preventDefault();if(Object.values(l).some((e=>!e.trim())))m({variant:"destructive",title:"Secret values required",description:"Please enter values for all secrets"});else{d(!0);try{await t(l);const e=Object.keys(l).filter((e=>!a.includes(e)));if(e.length>0){const s=e.join(", ");r({role:"user",content:`I've added ${s} secrets`})}i(!1),o({}),m({title:"Secrets updated successfully",description:"The secrets have been set."})}catch(s){m({variant:"destructive",title:"Failed to set secrets",description:s.message||"An error occurred while setting the secrets"})}finally{d(!1)}}},children:[(0,be.jsx)("div",{className:"grid gap-6 py-4",children:u.map(((e,s)=>(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:`secret-${s}`,className:"block font-medium text-slate-700",children:e.secretName}),(0,be.jsx)(is,{id:`secret-${s}`,type:"password",value:l[e.secretName]||"",onChange:s=>{return t=e.secretName,a=s.target.value,void o((e=>({...e,[t]:a})));var t,a},className:"w-full",placeholder:e.description||`Enter ${e.secretName} value`,autoComplete:"off"}),e.description&&(0,be.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.description})]},s)))}),(0,be.jsxs)(St,{className:"gap-2 sm:gap-0",children:[(0,be.jsx)(Ze,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:c,className:"border-slate-300 text-slate-700",children:"Cancel"}),(0,be.jsx)(Ze,{type:"submit",disabled:c,className:"bg-teal-600 hover:bg-teal-700 text-white",children:c?"Saving...":"Save Secrets"})]})]})]})]})};function mr(e){let{msgId:s,title:t,children:a}=e;const[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(!1);return(0,be.jsxs)("div",{className:"action-component action-group bg-white rounded-lg shadow-sm border border-gray-200 p-4 my-4 cursor-pointer","data-title":t,children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4 pb-2 border-b border-gray-100",children:[(0,be.jsx)("h3",{className:"font-medium text-gray-800",children:t}),(0,be.jsx)("div",{className:"flex items-center",children:(0,be.jsxs)(Ma,{children:[(0,be.jsx)(Fa,{className:"flex items-center justify-center p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-md transition-colors",children:(0,be.jsx)(ja.A,{size:16})}),(0,be.jsxs)(Ha,{align:"end",children:[(0,be.jsxs)(Va,{onClick:e=>{e.stopPropagation(),l(!0)},className:"flex items-center gap-2 cursor-pointer",children:[(0,be.jsx)(Js.A,{size:14,className:"text-gray-400"}),(0,be.jsx)("span",{children:"View Changes"})]}),(0,be.jsxs)(Va,{onClick:e=>{e.stopPropagation(),n(!0)},className:"flex items-center gap-2 cursor-pointer",children:[(0,be.jsx)(Ut.A,{size:14,className:"text-gray-400"}),(0,be.jsx)("span",{children:"Rate"})]})]})]})})]}),(0,be.jsx)("div",{className:"space-y-3",children:a}),(0,be.jsx)(Sa,{msgId:s,isOpen:r,onClose:()=>n(!1)}),i&&(0,be.jsx)(La,{msgId:s,isOpen:i,onClose:e=>l(!1)})]})}function ur(e){let{title:s,details:t,componentName:a}=e;const[r,n]=Y.useState(!1),i=null==s?void 0:s.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&apos;/g,"'"),l=null==t?void 0:t.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&apos;/g,"'"),o=null==a?void 0:a.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&apos;/g,"'");return(0,be.jsxs)("div",{className:"my-4 rounded-lg border border-red-200 bg-red-50",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 p-4 cursor-pointer",onClick:()=>n(!r),children:[(0,be.jsx)("div",{className:"text-red-500",children:(0,be.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,be.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,be.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,be.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("h3",{className:"font-medium text-red-700",children:i}),o&&(0,be.jsxs)("p",{className:"text-sm text-red-600",children:["in ",o]})]}),(0,be.jsx)("div",{className:"transition-transform "+(r?"rotate-180":""),children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,be.jsx)("polyline",{points:"6 9 12 15 18 9"})})})]}),r&&l&&(0,be.jsx)("div",{className:"px-4 pb-4 pt-0",children:(0,be.jsx)("div",{className:"p-3 bg-white rounded border border-red-100 font-mono text-sm text-red-800 whitespace-pre-wrap",children:l})})]})}const hr=e=>{const s=e.split("/"),t=s[0];let a=s[s.length-1];return a.includes(".")&&(a=a.split(".").slice(0,-1).join(" ")),{name:a,artifactType:t}},xr=e=>{const{name:s,artifactType:t}=hr(e);return"components"===t?`${s} component`:"pages"===t?`${s} page`:"entities"===t?`${s} entity`:s.toLowerCase().includes("layout")?"Layout":`${t} - ${s}`};function pr(e){let{node:s}=e;const{app:t}=xa(),a=(0,J.Zp)(),r=s.properties["action-type"]||s.properties.type;if("requestsecrets"===(null==r?void 0:r.toLowerCase())){let e;try{e=JSON.parse(atob(s.properties.dataContent))}catch(m){e=[]}return(0,be.jsx)(dr,{content:e})}let n=(null==r?void 0:r.replace(/(_)/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))||"";"file"===r&&s.properties.filepath&&(n=xr(s.properties.filepath)),"insertentityrecords"===(null==r?void 0:r.toLowerCase())&&s.properties.dataInsertRecordsLength&&(n=`Insert ${s.properties.dataInsertRecordsLength} ${s.properties.dataEntityName} Records`);const i=!0===s.properties.dataIsComplete||"true"===s.properties.dataIsComplete,l=s.properties.dataContentLength;let o=i?100:0;if(!i&&"file"===r&&s.properties.filepath){var c,d;const e=s.properties.filepath,{name:a,artifactType:r}=hr(e),n=(null===(c=t[r])||void 0===c||null===(d=c[a])||void 0===d?void 0:d.length)||15e3;o=Math.round(l/n*100),o=o>100?100:o}return(0,be.jsxs)("div",{className:"action-component action-step flex flex-col px-3 py-2 rounded-md hover:bg-gray-100 transition-colors","data-type":s.properties.dataActionType,"data-title":s.properties.dataTitle,onClick:()=>{"file"===r&&s.properties.filepath&&a(`/apps/${t.id}/editor/workspace/code?filePath=${s.properties.filepath}`)},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[!0===i||"true"===i?(0,be.jsx)(ba.A,{className:"w-4 h-4 text-green-500"}):(0,be.jsx)("div",{className:"relative w-4 h-4",children:(0,be.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,be.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),(0,be.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:""+2*Math.PI*10,strokeDashoffset:""+2*Math.PI*10*(1-o/100),transform:"rotate(-90 12 12)",style:{transition:"stroke-dashoffset 0.3s ease"}})]})}),(0,be.jsx)("span",{className:"text-sm text-gray-700",children:s.properties.title||"Editing "+n})]}),"file"===r&&s.properties.filepath&&s.properties.filepath.startsWith("functions/")&&(0,be.jsx)("div",{className:"text-gray-400",children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,be.jsx)("path",{d:"m9 18 6-6-6-6"})})})]}),(0,be.jsx)("span",{className:"text-xs text-gray-400 ml-6",children:n})]})}function gr(e){let{content:s,msgId:t,role:a}=e;const{user:r}=Ne(),{app:n}=xa(),i=function(e){let s=e;const t=va(e,"action");for(let r=t.length-1;r>=0;r--){const e=t[r];let n=s.slice(0,e.openingTagIndex);if(e.closingTagIndex||e.openingTag.includes(">")){let t={"data-content-length":e.content.length,"data-is-complete":e.closingTagIndex?"true":"false"};const r=ya(e.openingTag,"action-type")||ya(e.openingTag,"type");if((null==r?void 0:r.toLowerCase())==="insertEntityRecords".toLowerCase()){if(t["data-entity-name"]=ya(e.openingTag,"entity-name"),t.title=`Insert ${t["data-entity-name"]} Records`,e.closingTagIndex)try{const s=JSON.parse(e.content);t["data-insert-records-length"]=s.length}catch(a){}}else if((null==r?void 0:r.toLowerCase())==="requestsecrets".toLowerCase())try{t["data-content"]=btoa(e.content)}catch(a){}e.openingTag.slice(0,-1).includes(">");const i=`${e.openingTag.slice(0,-1)} ${Object.entries(t).map((e=>{let[s,t]=e;return`${s}="${t}"`})).join(" ")}></action>`;s=n+i+(e.closingTagIndex?s.slice(e.closingTagIndex+9):"")}else s=n}return s=s.replace(/<action_group/g,'<div class="action-component action-group"'),s=s.replace(/<\/action_group>/g,"</div>"),s=s.replace(/<error/g,'<div class="error-component"'),s=s.replace(/<\/error>/g,"</div>"),s}(s),l={div:e=>{var s;let{node:a,...r}=e,n=(null===(s=a.properties)||void 0===s?void 0:s.className)||"";if(Array.isArray(n)&&(n=n.join(" ")),"string"==typeof n&&n.includes("action-component")){if(n.includes("action-group"))return(0,be.jsx)(mr,{msgId:t,title:a.properties.dataTitle,...r});if(n.includes("action-single"))return(0,be.jsx)(pr,{node:a,...r})}return n.includes("error-component")?(0,be.jsx)(ur,{...r}):(0,be.jsx)("div",{...r})},action:e=>{let{node:s,...t}=e;return(0,be.jsx)(pr,{node:s,...t})},diff:e=>{let{node:s,...t}=e;return(0,be.jsx)("code",{...t})}};return(0,be.jsx)("div",{className:"prose dark:prose-invert max-w-none base44-markdown relative",children:(0,be.jsx)(ga.o,{rehypePlugins:"user"!==a||s.includes("<error")?[fa.A]:[],remarkPlugins:"user"!==a||s.includes("<error")?[pa.A]:[],components:l,children:i.replace(/ref=/g,"ref__=")})})}function fr(e){let{title:s,children:t}=e;const[a,r]=(0,Y.useState)(!1);return(0,be.jsxs)("div",{className:"w-full max-w-md mx-auto border border-base-300 w-full p-4 bg-gray-50 rounded-lg hover:bg-gray-200 my-2",children:[(0,be.jsxs)("button",{className:"flex justify-between items-center transition-colors duration-200 w-full",onClick:()=>r(!a),children:[(0,be.jsx)("span",{className:"font-medium",children:s}),a?(0,be.jsx)(fs.A,{className:"h-5 w-5 text-gray-500"}):(0,be.jsx)(gs.A,{className:"h-5 w-5 text-gray-500"})]}),a&&(0,be.jsx)("div",{className:"mt-2 p-2 rounded-lg transition-all duration-300 ease-in-out overflow-hidden "+(a?"opacity-100":"max-h-0 opacity-0"),children:t})]})}var jr=t(40602);function br(e){let{toolCall:s}=e;return(0,be.jsx)(fr,{title:(0,be.jsxs)("div",{className:"font-small flex items-center",children:[(0,be.jsx)(jr.A,{className:"w-4 h-4 mr-2"}),(0,be.jsxs)("span",{className:"font-semibold",children:["Action: ",s.name]})]}),children:(0,be.jsx)("div",{className:"ml-2 text-gray-700",children:(t=s.arguments,"object"==typeof t&&null!==t?Object.entries(t).map((e=>{let[s,t]=e;const a="object"==typeof t?JSON.stringify(t):t.toString();return(0,be.jsxs)("div",{className:"mb-1 text-sm",children:[(0,be.jsxs)("span",{className:"font-semibold",children:[s,":"]})," ",a.split("\n").map(((e,s)=>(0,be.jsxs)("span",{children:[s>0&&(0,be.jsx)("br",{}),e]},s)))]},s)})):t)})});var t}function vr(e){let{toolResults:s}=e;const t=s.display_results;if(X().isObject(t)){const{widget:e,data:s}=t;if("table"===e)return(0,be.jsx)("div",{className:"overflow-x-auto",children:(0,be.jsxs)("table",{className:"table w-full bg-white",children:[(0,be.jsx)("thead",{children:(0,be.jsx)("tr",{children:s.columns.map(((e,s)=>(0,be.jsx)("th",{children:e},s)))})}),(0,be.jsx)("tbody",{children:s.rows.map(((e,t)=>(0,be.jsx)("tr",{children:s.columns.map(((s,t)=>(0,be.jsx)("td",{children:e[s]},t)))},t)))})]})})}return(0,be.jsx)(fr,{title:(0,be.jsx)("div",{className:"font-semibold",children:"Action Results"}),children:(0,be.jsxs)("div",{className:"text-gray-700",children:[(0,be.jsx)("p",{children:s.results}),(0,be.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"(This is the result of a tool execution, not the AI's response)"})]})})}const yr=function(e){let{message:s}=e;const[t,a]=(0,Y.useState)(!1);return(0,be.jsxs)("div",{className:"text-sm p-4 bg-white mx-auto mb-6 rounded-lg mb-6 border border-gray-300",children:[(0,be.jsxs)("div",{className:"text-gray-700",children:["Some errors were detected, base44 will try to fix them automatically."," ",(0,be.jsx)("div",{className:"mt-2",children:(0,be.jsx)("a",{className:"text-teal-900/70 hover:underline cursor-pointer",onClick:()=>a(!t),children:t?"hide errors":"see errors"})})]}),t&&(0,be.jsx)("div",{className:"mt-4",children:(0,be.jsx)(gr,{content:s.content})})]})};var Nr=t(50270),wr=t(78968),Cr=t(97820),Sr=t(26209);const kr={div:(0,be.jsx)(Nr.A,{className:"h-3 w-3"}),button:(0,be.jsx)(wr.A,{className:"h-3 w-3"}),p:(0,be.jsx)(Cr.A,{className:"h-3 w-3"}),h1:(0,be.jsx)(Sr.A,{className:"h-3 w-3"}),h2:(0,be.jsx)(Sr.A,{className:"h-3 w-3"}),h3:(0,be.jsx)(Sr.A,{className:"h-3 w-3"}),h4:(0,be.jsx)(Sr.A,{className:"h-3 w-3"}),h5:(0,be.jsx)(Sr.A,{className:"h-3 w-3"})};var Ar=t(21570);const _r=function(e){let{message:s}=e;const{app:t}=xa(),[a,r]=(0,Y.useState)(!1);return(0,be.jsxs)("div",{className:"text-sm p-4 bg-white mx-auto mb-6 rounded-lg mb-6 border border-gray-300 relative",children:[(0,be.jsxs)("div",{className:"text-gray-700",children:["Files have been manually edited."," ",(0,be.jsx)("div",{className:"mt-2",children:(0,be.jsx)("a",{className:"text-teal-900/70 hover:underline cursor-pointer",onClick:()=>r(!a),children:a?"hide details":"see details"})})]}),a&&(0,be.jsx)("div",{className:"mt-4",children:(0,be.jsx)(gr,{content:s.content})}),(0,be.jsx)("div",{className:"cursor-pointer absolute bottom-[-10px] right-0 bg-white border border-gray-200 rounded-md p-1 text-xs text-gray-400",children:(0,be.jsxs)("a",{onClick:async()=>{window.confirm("Are you sure you want to revert these manual edits? This will undo all changes made in this edit.")&&await we.undoMessage(t.id,s.id)},className:"flex items-center gap-1",children:[(0,be.jsx)(Ar.A,{className:"h-3 w-3"}),"Revert this"]})})]})},Tr=e=>{let{files:s}=e;const[t,a]=(0,Y.useState)(!1);if(!s||0===s.length)return null;const r=s.reduce(((e,s)=>(s.startsWith("entities/")?e.entities.push(s):s.startsWith("pages/")||s.startsWith("components/")||s.startsWith("layout")?e.code.push(s):e.other.push(s),e)),{entities:[],code:[],other:[]});return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"text-xs text-gray-400 cursor-pointer hover:underline",onClick:()=>a(!0),children:(0,be.jsxs)("span",{className:"flex items-center gap-1",children:[(0,be.jsx)(Js.A,{className:"h-3 w-3"}),"see context"]})}),t&&(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,be.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-2xl w-full max-h-[80vh] flex flex-col",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[(0,be.jsx)("h3",{className:"font-medium text-lg",children:"Files Selected for Context"}),(0,be.jsx)("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:(0,be.jsx)(He.A,{className:"h-5 w-5"})})]}),(0,be.jsxs)("div",{className:"p-5 overflow-y-auto flex-1",children:[(0,be.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-5",children:["In complex projects, for every user message, the platform automatically selects which code files ",(0,be.jsx)("b",{children:"might"})," be relevant for potential changes."]}),(0,be.jsxs)("p",{className:"text-sm text-teal-700 dark:text-teal-400 mb-5 border-l-2 border-teal-600 pl-3",children:[(0,be.jsx)("b",{children:"Important:"})," If you intended to modify a file that doesn't appear in this list, the AI might get confused and make changes in the wrong place or not make the changes at all. Consider mentioning the specific file path in your message for better results."]}),r.code.length>0&&(0,be.jsxs)("div",{className:"mb-5",children:[(0,be.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,be.jsx)(sa.A,{className:"h-4 w-4"}),"Code Files"]}),(0,be.jsx)("div",{className:"space-y-1 pl-2",children:r.code.map(((e,s)=>(0,be.jsx)("div",{className:"text-sm py-1.5 px-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-100 dark:border-blue-800 text-gray-800 dark:text-gray-200",children:e},s)))})]}),r.entities.length>0&&(0,be.jsxs)("div",{className:"mb-5",children:[(0,be.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,be.jsx)(Ut.A,{className:"h-4 w-4"}),"Entity Files"]}),(0,be.jsx)("div",{className:"space-y-1 pl-2",children:r.entities.map(((e,s)=>(0,be.jsx)("div",{className:"text-sm py-1.5 px-3 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-100 dark:border-purple-800 text-gray-800 dark:text-gray-200",children:e},s)))})]}),r.other.length>0&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,be.jsx)(Js.A,{className:"h-4 w-4"}),"Other Files"]}),(0,be.jsx)("div",{className:"space-y-1 pl-2",children:r.other.map(((e,s)=>(0,be.jsx)("div",{className:"text-sm py-1.5 px-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-100 dark:border-gray-600 text-gray-800 dark:text-gray-200",children:e},s)))})]})]}),(0,be.jsx)("div",{className:"p-4 border-t dark:border-gray-700 flex justify-end",children:(0,be.jsx)("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm font-medium transition-colors",children:"Close"})})]})})]})};function Er(e){var s,t,a,r,n;let{item:i,undoMessage:l,itemIndex:o}=e;if(null===(s=i.additional_message_params)||void 0===s?void 0:s.automated_fix)return(0,be.jsx)("div",{className:"mb-6 relative",children:(0,be.jsx)(yr,{message:i})});if(null===(t=i.additional_message_params)||void 0===t?void 0:t.diff_message)return(0,be.jsx)("div",{className:"mb-6 relative",children:(0,be.jsx)(_r,{message:i})});const c=null===(a=i.custom_context)||void 0===a?void 0:a.find((e=>{var s;return"files"===e.type&&(null===(s=e.data)||void 0===s?void 0:s.files)})),d=(null==c||null===(r=c.data)||void 0===r?void 0:r.files)||[],m="user"===i.role;return(0,be.jsxs)("div",{className:"mb-6 relative "+(m?"flex justify-end":""),children:["assistant"===i.role&&(0,be.jsxs)("div",{className:"flex items-center gap-2  mb-2",children:[(0,be.jsx)("img",{src:"https://base44.com/logo_v3.png",alt:"Base44 AI",className:"w-6 h-6 object-cover rounded-full opacity-75"}),(0,be.jsx)("span",{className:"text-xs text-gray-500",children:"Base44"})]}),(0,be.jsx)("div",{className:"text-sm ps-4 rounded-lg "+(m?"pr-4 bg-slate-200 max-w-[85%] py-4":"pl-8"),children:(0,be.jsxs)("div",{children:["tool"===i.role?i.tool_results.map(((e,s)=>(0,be.jsx)(vr,{toolResults:e},s))):(0,be.jsxs)(be.Fragment,{children:[i.custom_context&&i.custom_context.map(((e,s)=>{var t;if("element"===e.type&&null!==(t=e.data)&&void 0!==t&&t.element_tag_name){const t=e.data.element_tag_name.toLowerCase(),a=kr[t]||(0,be.jsx)(sa.A,{className:"h-3 w-3"});return(0,be.jsx)("div",{className:"mb-2 flex items-center gap-2 text-xs",children:(0,be.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-900 text-white rounded-md",children:[a,(0,be.jsx)("span",{children:t})]})},s)}return null})),i.file_urls&&i.file_urls.length>0&&(0,be.jsx)("div",{className:"mb-4 flex flex-wrap gap-4",children:i.file_urls.map(((e,s)=>(0,be.jsx)("div",{className:"relative",children:e.match(/\.(jpg|jpeg|png|gif)$/i)?(0,be.jsx)("img",{src:e,alt:"Attached content",className:"max-w-[300px] max-h-[300px] rounded-lg border border-gray-200 shadow-sm"}):(0,be.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200",children:[(0,be.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[(0,be.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,be.jsx)("polyline",{points:"14 2 14 8 20 8"})]}),(0,be.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Attached file"})]})},s)))}),(0,be.jsx)(gr,{content:i.content,msgId:i.id,role:i.role}),i.tool_calls&&i.tool_calls.map(((e,s)=>(0,be.jsx)(br,{toolCall:e},s)))]}),(null===(n=i.metadata)||void 0===n?void 0:n.created_date)&&(0,be.jsxs)("div",{className:"text-xs text-gray-400 mt-2 flex items-center",children:[it().utc(i.metadata.created_date,it().ISO_8601).fromNow(),"user"===i.role&&d.length>0&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,be.jsx)(Tr,{files:d})]})]})]})}),"user"===i.role&&o>0&&i.checkpoint_id&&(0,be.jsx)("div",{className:"cursor-pointer absolute bottom-[-10px] right-0 bg-white border border-gray-200 rounded-md p-1 text-xs text-gray-400",children:(0,be.jsxs)("a",{onClick:()=>{window.confirm("Are you sure you want to undo this message? This will load the state of the app before this message.")&&l(i.id)},className:"flex items-center gap-1",children:[(0,be.jsx)(Ar.A,{className:"h-3 w-3"}),"Revert this"]})})]})}class Ir extends Y.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){return this.state.hasError?(0,be.jsx)("div",{className:"mx-4 my-3 px-6 py-4 rounded-lg bg-slate-50 border border-slate-200 text-slate-600 text-base",children:(0,be.jsx)("p",{className:"text-sm",children:"Could not render this message. It might contain special characters."})}):this.props.children}}const Pr=e=>{let{messages:s,undoMessage:t}=e;const[a,r]=(0,Y.useState)(20),[n,i]=(0,Y.useState)(!0),l=(0,Y.useRef)(null);(0,Y.useEffect)((()=>{r(20),i(s.length>20)}),[s]),(0,Y.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("msgId");e&&setTimeout((()=>{const s=document.getElementById(`message-${e}`);s&&(s.scrollIntoView({behavior:"smooth"}),s.classList.add("border-2"),s.classList.add("border-black"),s.classList.add("font-medium"))}),1e3)}),[]);const o=s.slice(-a);return(0,be.jsxs)("div",{ref:l,className:"relative",children:[n&&(0,be.jsx)("div",{className:"flex justify-center py-2",children:(0,be.jsx)("button",{onClick:()=>{const e=l.current,t=e.scrollHeight-e.scrollTop;r(s.length),i(!1),setTimeout((()=>{e.scrollTop=e.scrollHeight-t}),0)},className:"text-sm text-blue-500 hover:text-blue-600 hover:underline",children:"Load entire conversation"})}),o.slice(0,o.length).map(((e,s)=>(0,be.jsx)("div",{id:`message-${e.id}`,children:(0,be.jsx)(Ir,{children:(0,be.jsx)(Er,{item:e,itemIndex:s,undoMessage:t})})},e.id||s)))]})};var Rr=t(53291),Or=t(52229);function Dr(e){let{status:s,typingSpeed:t=40,className:a=""}=e;const[r,n]=(0,Y.useState)(""),[i,l]=(0,Y.useState)(!0),[o,c]=(0,Y.useState)(0),d=(0,Y.useRef)(s||""),m=(0,Y.useRef)(null);return(0,Y.useEffect)((()=>{s===d.current&&i||(c((e=>e+1)),l(!0),n(""),d.current=s||"")}),[s]),(0,Y.useEffect)((()=>{if(i&&d.current&&r.length<d.current.length)return m.current&&clearTimeout(m.current),m.current=setTimeout((()=>{n(d.current.substring(0,r.length+1))}),t),()=>clearTimeout(m.current);i&&d.current&&r.length===d.current.length&&l(!1)}),[r,i,t]),(0,be.jsxs)("div",{className:"flex items-center h-[1.5em] sm:h-[2em]",children:[" ",(0,be.jsx)(Rr.N,{mode:"wait",children:(0,be.jsxs)(Or.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:`text-slate-700 tracking-normal ${a}`,children:[r,i?(0,be.jsx)(Or.P.span,{initial:{opacity:1},animate:{opacity:0},transition:{duration:.5,repeat:1/0,repeatType:"reverse"},className:"inline-block w-[2px] h-[1.1em] sm:h-[1.2em] bg-slate-600 ml-[1px] align-middle"}):(0,be.jsx)(Or.P.span,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1.2,repeat:1/0,ease:"easeInOut",delay:.2},className:"inline-block w-[0.5em] sm:w-[0.55em] h-[1em] sm:h-[1.1em] bg-slate-600 ml-[2px] align-[-0.1em] sm:align-[-0.15em]"})]},o)})]})}const Lr=e=>{let{status:s}=e;return(0,be.jsx)("div",{className:"mx-4 my-3 px-4 py-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm flex items-center",children:(0,be.jsx)("div",{className:"flex-1",children:s.details})})};function Ur(e){let{status:s,messages:t}=e;const[a,r]=(0,Y.useState)(new Date),[n,i]=(0,Y.useState)(window.innerWidth<=768);(0,Y.useEffect)((()=>{const e=()=>{i(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,Y.useEffect)((()=>{r(s.last_updated_date)}),[s.details]);const l=a<new Date(Date.now()-6e5)&&(null==t?void 0:t.length)>0,o=n||(null==t?void 0:t.length)>2;return(0,be.jsxs)("div",{children:["error"===s.state&&(0,be.jsx)(Lr,{status:s}),"processing"===s.state&&(0,be.jsxs)("div",{className:"",children:[l&&(0,be.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["This has been running for a while. It might be stuck.",(0,be.jsxs)("div",{className:"mt-1",children:["If this persists, try to stop the chat, *revert your last message* and try again, or ",(0,be.jsx)("button",{type:"button",onClick:()=>window.open("/support","_blank"),className:"underline text-primary hover:text-orange-500 transition-colors",children:"contact support"}),"."]})]}),o&&(0,be.jsxs)("div",{className:"text-gray-500 mt-2 flex items-center gap-2",children:[(0,be.jsx)("img",{src:Ce,alt:"Logo",className:"w-4 h-4 grayscale"}),(0,be.jsx)(Dr,{status:s.details,className:"text-xs"})]})]})]})}const $r=function(e){var s;let{chat:t,addMessage:a,undoMessage:r,status:n,onStop:i,suggestions:l=null,isDisabled:o=!1,customButtomRight:c=null,customButtomLeft:d=null,customMiddleComponent:m=null}=e;const{user:u}=Ne(),[h,x]=(0,Y.useState)(""),[p,g]=(0,Y.useState)([]),f=(0,Y.useRef)(null),[j,b]=(0,Y.useState)(!1),[v,y]=(0,Y.useState)(!0),N=null===(s=u.platform_role)||void 0===s?void 0:s.includes("admin"),w=()=>{f.current&&v&&(f.current.scrollTop=f.current.scrollHeight)},C=()=>{const e=(()=>{if(!f.current)return!0;const e=f.current;return e.scrollHeight-e.scrollTop-e.clientHeight<=100})();b(!e),y(e)};if((0,Y.useEffect)((()=>{new URLSearchParams(window.location.search).get("msgId")||j||w()}),[null==t?void 0:t.messages,j]),(0,Y.useEffect)((()=>{j||w()}),[n,j]),(0,Y.useEffect)((()=>{if(!f.current)return;const e=new MutationObserver((()=>{j||w()}));e.observe(f.current,{childList:!0,subtree:!0,characterData:!0});const s=f.current;return s.addEventListener("scroll",C),()=>{e.disconnect(),s.removeEventListener("scroll",C)}}),[j]),!t)return(0,be.jsx)("div",{className:"alert alert-warning m-4 text-sm",children:"No chat found"});const S=t.messages.filter((e=>!0!==e.hidden));return(0,be.jsxs)("div",{className:"flex flex-col h-full w-full sm:pr-2",children:[(0,be.jsx)("div",{ref:f,className:"flex-grow overflow-y-auto py-2 space-y-2 pb-4",children:(0,be.jsx)(Pr,{messages:S,undoMessage:r?e=>{const s=t.messages.find((s=>s.id===e));"user"===s.role&&(r(e),x(s.content))}:null})}),(0,be.jsx)(Ur,{status:n,messages:S}),m||("ready"===n.state&&l?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"text-[10px] text-gray-400 text-center mb-1",children:"Suggestions"}),(0,be.jsx)("div",{className:"flex justify-center gap-3 px-4 py-2 border-t border-gray-100",children:[l.suggestion_1,l.suggestion_2,l.suggestion_3].map(((e,s)=>(0,be.jsx)("span",{className:"text-xs text-gray-400 hover:text-gray-600 cursor-pointer transition-colors duration-200 hover:underline px-2 py-1 rounded-full hover:bg-gray-50",onClick:()=>(e=>{x(e.prompt)})(e),children:e.title},s)))})]}):null),(0,be.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,be.jsx)("div",{className:"join w-full",children:(0,be.jsx)(Ve,{value:h,onValueChange:x,files:p,onFilesChange:g,onSend:async()=>{if(h.trim()&&"processing"!==n.state)try{const e={content:h,file_urls:p};x(""),g([]),y(!0),b(!1),await a(e)}catch(e){Rt.toast.error("Failed to send message")}},onStop:i,placeholder:"What would you change?",disabled:"processing"===n.state||o,customButtomRight:c,customButtomLeft:d,isProcessing:"processing"===n.state})}),N&&(0,be.jsx)("div",{className:"text-xs text-gray-400 text-center opacity-0 hover:opacity-100 transition-opacity duration-200 absolute bottom-0 right-0",children:(0,be.jsxs)("a",{onClick:()=>{const e=t.messages.slice(-8).map((e=>`${e.role}:\n${e.content}`)).join("\n\n");navigator.clipboard.writeText(e)},className:"hover:underline inline-flex items-center gap-1",children:[(0,be.jsx)(Ot.A,{className:"w-3 h-3"}),"Copy"]})})]})]})};var Mr=t(36391);function Fr(){const{app:e}=xa();return(0,be.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 hover:text-gray-700 cursor-pointer",onClick:()=>{const s=null!=e&&e.id?`/support?appId=${e.id}`:"/support";window.open(s,"_blank")},children:[(0,be.jsx)(Mr.A,{className:"h-3 w-3"}),(0,be.jsx)("span",{children:"Need support?"})]})}function zr(e){let{isVisualEditMode:s,toggleVisualEditMode:t,isSaving:a}=e;return(0,be.jsxs)("button",{onClick:t,className:"flex items-center gap-1 px-2 py-1 rounded-md text-xs "+(s?"bg-gray-900 text-white hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),disabled:a,children:[(0,be.jsx)(ta.A,{className:"h-3 w-3"}),(0,be.jsx)("span",{children:"Visual Edit"})]})}var Br=t(71742),qr=t(17119),Wr=t.t(qr,2);const Yr=[{name:"Slate",prefix:"slate"},{name:"Gray",prefix:"gray"},{name:"Zinc",prefix:"zinc"},{name:"Neutral",prefix:"neutral"},{name:"Stone",prefix:"stone"},{name:"Red",prefix:"red"},{name:"Orange",prefix:"orange"},{name:"Amber",prefix:"amber"},{name:"Yellow",prefix:"yellow"},{name:"Lime",prefix:"lime"},{name:"Green",prefix:"green"},{name:"Emerald",prefix:"emerald"},{name:"Teal",prefix:"teal"},{name:"Cyan",prefix:"cyan"},{name:"Sky",prefix:"sky"},{name:"Blue",prefix:"blue"},{name:"Indigo",prefix:"indigo"},{name:"Violet",prefix:"violet"},{name:"Purple",prefix:"purple"},{name:"Fuchsia",prefix:"fuchsia"},{name:"Pink",prefix:"pink"},{name:"Rose",prefix:"rose"}],Gr=[50,100,200,300,400,500,600,700,800,900,950];const Hr=function(e){let{label:s,selectedColor:t,onChange:a}=e;const[r,n]=(0,Y.useState)(!1),i=(0,Y.useRef)(null),l=(0,Y.useRef)(null),[o,c]=(0,Y.useState)({top:0,left:0,width:0}),[d,m]=(0,Y.useState)(null),u=s.toLowerCase().includes("background")?"bg":"text";(0,Y.useEffect)((()=>{if(t){const{name:e,shade:s}=(e=>{if(!e)return{name:"None",shade:null};const s=e.match(/^(bg|text)-([a-z]+)-(\d+)$/);return s?{name:s[2],shade:parseInt(s[3])}:{name:"None",shade:null}})(t);m({name:e,shade:s})}else m(null)}),[t]),(0,Y.useEffect)((()=>{if(r&&l.current){const e=l.current.getBoundingClientRect();c({top:e.bottom+window.scrollY+4,left:e.left+window.scrollX,width:e.width})}}),[r]),(0,Y.useEffect)((()=>{const e=e=>{!i.current||i.current.contains(e.target)||document.getElementById("color-dropdown")&&document.getElementById("color-dropdown").contains(e.target)||n(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const h=(e,s)=>{m({name:e,shade:s});const t=((e,s)=>e&&s?`${u}-${e}-${s}`:null)(e,s);a(t),n(!1)},x=()=>{m(null),a(null),n(!1)},p=e=>e<500?"text-gray-900":"text-white";return(0,be.jsxs)("div",{ref:i,className:"relative",children:[(0,be.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:s})}),(0,be.jsxs)("button",{ref:l,type:"button",onClick:()=>n(!r),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,be.jsx)("div",{className:"flex items-center",children:d?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:`h-5 w-5 rounded-sm mr-2 ${g=d.name,f=d.shade,g&&f?`bg-${g}-${f}`:null}`}),(0,be.jsxs)("span",{className:"text-sm text-gray-700",children:[d.name.charAt(0).toUpperCase()+d.name.slice(1)," ",d.shade]})]}):(0,be.jsx)("span",{className:"text-sm text-gray-500",children:"None"})}),r?(0,be.jsx)(fs.A,{className:"h-4 w-4 text-gray-500"}):(0,be.jsx)(gs.A,{className:"h-4 w-4 text-gray-500"})]}),r?(0,qr.createPortal)((0,be.jsxs)("div",{id:"color-dropdown",className:"fixed z-50 bg-white shadow-lg rounded-md overflow-hidden border border-gray-200",style:{top:`${o.top}px`,left:`${o.left}px`,width:`${o.width}px`,maxHeight:"400px"},children:[(0,be.jsx)("div",{className:"p-1 border-b",children:(0,be.jsx)("button",{type:"button",onClick:x,className:"w-full text-left px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded",children:"None"})}),(0,be.jsx)("div",{className:"overflow-y-auto max-h-80 p-1",children:Yr.map((e=>(0,be.jsxs)("div",{className:"mb-3",children:[(0,be.jsx)("div",{className:"text-xs font-medium text-gray-900 px-2 mb-1",children:e.name}),(0,be.jsx)("div",{className:"grid grid-cols-6 gap-1",children:Gr.map((s=>{const t=`bg-${e.prefix}-${s}`,a=(null==d?void 0:d.name)===e.prefix&&(null==d?void 0:d.shade)===s;return(0,be.jsx)("button",{type:"button",className:`\n                        aspect-square rounded-sm flex items-center justify-center ${t} ${p(s)}\n                        ${a?"ring-2 ring-offset-1 ring-blue-500":""}\n                      `,onClick:()=>h(e.prefix,s),title:`${e.name} ${s}`,children:a&&(0,be.jsx)(js.A,{className:"h-3 w-3"})},s)}))})]},e.prefix)))})]}),document.body):null]});var g,f};var Vr=t(35694),Jr=t(72995),Kr=t(14703),Zr=t(53034),Xr=t(45462);const Qr=[0,1,2,3,4,5,6,8,10,12,16,20,24,32,40,48,64];const en=function(e){let{label:s,spacing:t,onChange:a}=e;const r=s.toLowerCase().startsWith("m")?"m":"p",[n,i]=(0,Y.useState)({all:0,t:0,r:0,b:0,l:0,x:0,y:0}),[l,o]=(0,Y.useState)("all"),[c,d]=(0,Y.useState)(!1),m=(0,Y.useRef)(null);(0,Y.useEffect)((()=>{const e={all:0,t:0,r:0,b:0,l:0,x:0,y:0};let s=!1,a=!1,n=!1,l=!1;const c=t||{},u=e=>{if(!e)return 0;if("mx-auto"===e)return s=!0,0;const t=e.match(new RegExp(`^${r}[ytrlbx]?-(\\d+)$`));if(!t)return 0;const a=parseInt(t[1]),n=Qr.indexOf(a);return-1!==n?n:0};c.all&&(e.all=u(c.all),e.t=e.all,e.r=e.all,e.b=e.all,e.l=e.all,a=!0),"mx-auto"===c.x?(s=!0,n=!0):(c.x&&(e.x=u(c.x),e.l=e.x,e.r=e.x,n=!0),c.y&&(e.y=u(c.y),e.t=e.y,e.b=e.y,n=!0)),c.t&&(e.t=u(c.t),l=!0),c.r&&(e.r=u(c.r),l=!0),c.b&&(e.b=u(c.b),l=!0),c.l&&(e.l=u(c.l),l=!0),i(e),d(s);let h=m.current;h||(h=n?"axes":l?"sides":"all"),o(h)}),[t,r]);const u=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;const n={};"all"===s?n.all=`${r}-${Qr[e.all]}`:"axes"===s?(t&&"m"===r?n.x="mx-auto":e.x>0&&(n.x=`${r}x-${Qr[e.x]}`),e.y>0&&(n.y=`${r}y-${Qr[e.y]}`)):(e.t>0&&(n.t=`${r}t-${Qr[e.t]}`),e.r>0&&(n.r=`${r}r-${Qr[e.r]}`),e.b>0&&(n.b=`${r}b-${Qr[e.b]}`),e.l>0&&(n.l=`${r}l-${Qr[e.l]}`)),a(n)},h=(e,s)=>{const t=Math.max(0,Math.min(s,Qr.length-1)),a={...n};a[e]=t,"all"===l?(a.t=t,a.r=t,a.b=t,a.l=t,a.x=t,a.y=t):"axes"===l&&("x"===e?(a.l=t,a.r=t):"y"===e&&(a.t=t,a.b=t)),t>0&&"x"===e&&c&&d(!1),i(a),u(a,l,"x"!==e&&c)},x=()=>{const e=!c;if(d(e),e){const e={...n,x:0,l:0,r:0};i(e),u(e,"axes",!0)}else u(n,l,!1)},p=e=>{o(e),m.current=e,"axes"!==e&&c?(d(!1),u(n,e,!1)):u(n,e,c)},g=(e,s)=>{const t=n[e];h(e,t+(s?1:-1))},f=e=>{let{label:s,icon:t,value:a,onChange:r}=e;return(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)("div",{className:"w-6 flex-shrink-0",children:t}),(0,be.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,be.jsxs)("div",{className:"relative flex-1 max-w-[120px]",children:[(0,be.jsx)("input",{type:"text",value:Qr[a],readOnly:!0,className:"w-full px-3 py-1.5 text-center border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),(0,be.jsxs)("div",{className:"absolute inset-y-0 right-0 flex flex-col pr-1",children:[(0,be.jsx)("button",{type:"button",onClick:()=>g(s.toLowerCase(),!0),disabled:a>=Qr.length-1,className:"flex-1 px-1 flex items-center justify-center hover:text-indigo-600 disabled:opacity-30 disabled:hover:text-gray-500",children:(0,be.jsx)(fs.A,{className:"h-3 w-3"})}),(0,be.jsx)("button",{type:"button",onClick:()=>g(s.toLowerCase(),!1),disabled:a<=0,className:"flex-1 px-1 flex items-center justify-center hover:text-indigo-600 disabled:opacity-30 disabled:hover:text-gray-500",children:(0,be.jsx)(gs.A,{className:"h-3 w-3"})})]})]}),(0,be.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"px"})]})]})};return(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:s}),(0,be.jsxs)("div",{className:"flex border rounded-md overflow-hidden divide-x border-gray-300",children:[(0,be.jsx)("button",{type:"button",className:"flex-1 text-xs py-1.5 px-2 "+("all"===l?"bg-indigo-50 text-indigo-700":"bg-white text-gray-700"),onClick:()=>p("all"),children:"All"}),(0,be.jsx)("button",{type:"button",className:"flex-1 text-xs py-1.5 px-2 "+("axes"===l?"bg-indigo-50 text-indigo-700":"bg-white text-gray-700"),onClick:()=>p("axes"),children:"X/Y"}),(0,be.jsx)("button",{type:"button",className:"flex-1 text-xs py-1.5 px-2 "+("sides"===l?"bg-indigo-50 text-indigo-700":"bg-white text-gray-700"),onClick:()=>p("sides"),children:"Sides"})]})]}),(0,be.jsxs)("div",{className:"space-y-3",children:["all"===l&&(0,be.jsx)(f,{label:"all",icon:(0,be.jsx)(Vr.A,{className:"h-4 w-4 text-gray-500"}),value:n.all,onChange:e=>h("all",e)}),"axes"===l&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)("div",{className:"w-6 flex-shrink-0",children:(0,be.jsx)(mt.A,{className:"h-4 w-4 text-gray-500"})}),"m"===r&&(0,be.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,be.jsx)("div",{className:"flex-1 flex",children:c?(0,be.jsxs)("button",{type:"button",onClick:x,className:"flex-1 flex items-center justify-center space-x-1 px-3 py-1.5 bg-indigo-50 border border-indigo-200 rounded-md",children:[(0,be.jsx)(Jr.A,{className:"h-4 w-4 text-indigo-500"}),(0,be.jsx)("span",{className:"text-xs text-indigo-700",children:"mx-auto"})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"relative flex-1 max-w-[120px]",children:[(0,be.jsx)("input",{type:"text",value:Qr[n.x],readOnly:!0,className:"w-full px-3 py-1.5 text-center border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm "+(c?"opacity-50":""),disabled:c}),(0,be.jsxs)("div",{className:"absolute inset-y-0 right-0 flex flex-col pr-1",children:[(0,be.jsx)("button",{type:"button",onClick:()=>g("x",!0),disabled:n.x>=Qr.length-1||c,className:"flex-1 px-1 flex items-center justify-center hover:text-indigo-600 disabled:opacity-30 disabled:hover:text-gray-500",children:(0,be.jsx)(fs.A,{className:"h-3 w-3"})}),(0,be.jsx)("button",{type:"button",onClick:()=>g("x",!1),disabled:n.x<=0||c,className:"flex-1 px-1 flex items-center justify-center hover:text-indigo-600 disabled:opacity-30 disabled:hover:text-gray-500",children:(0,be.jsx)(gs.A,{className:"h-3 w-3"})})]})]}),(0,be.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"px"})]})}),(0,be.jsx)("button",{type:"button",onClick:x,className:"px-2 py-1 rounded "+(c?"bg-white text-gray-500 border border-gray-300":"bg-gray-100 text-gray-700 border border-gray-300"),title:c?"Use numeric value":"Use mx-auto (center horizontally)",children:(0,be.jsx)(Jr.A,{className:"h-4 w-4"})})]}),"m"!==r&&(0,be.jsx)(f,{label:"x",icon:null,value:n.x,onChange:e=>h("x",e)})]}),(0,be.jsx)(f,{label:"y",icon:(0,be.jsx)(Kr.A,{className:"h-4 w-4 text-gray-500"}),value:n.y,onChange:e=>h("y",e)})]}),"sides"===l&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(f,{label:"t",icon:(0,be.jsx)(Zr.A,{className:"h-4 w-4 text-gray-500"}),value:n.t,onChange:e=>h("t",e)}),(0,be.jsx)(f,{label:"r",icon:(0,be.jsx)(mt.A,{className:"h-4 w-4 text-gray-500"}),value:n.r,onChange:e=>h("r",e)}),(0,be.jsx)(f,{label:"b",icon:(0,be.jsx)(Kr.A,{className:"h-4 w-4 text-gray-500"}),value:n.b,onChange:e=>h("b",e)}),(0,be.jsx)(f,{label:"l",icon:(0,be.jsx)(Xr.A,{className:"h-4 w-4 text-gray-500"}),value:n.l,onChange:e=>h("l",e)})]})]})]})};var sn=t(14666),tn=t(92530),an=t(54413),rn=t(69367),nn=t(94119),ln=t(66291),on=t(69386);const cn=[{label:"Extra Small",value:"text-xs",size:"xs"},{label:"Small",value:"text-sm",size:"sm"},{label:"Base",value:"text-base",size:"base"},{label:"Large",value:"text-lg",size:"lg"},{label:"Extra Large",value:"text-xl",size:"xl"},{label:"2XL",value:"text-2xl",size:"2xl"},{label:"3XL",value:"text-3xl",size:"3xl"},{label:"4XL",value:"text-4xl",size:"4xl"}],dn=[{label:"Thin",value:"font-thin",weight:100},{label:"Extra Light",value:"font-extralight",weight:200},{label:"Light",value:"font-light",weight:300},{label:"Normal",value:"font-normal",weight:400},{label:"Medium",value:"font-medium",weight:500},{label:"Semi Bold",value:"font-semibold",weight:600},{label:"Bold",value:"font-bold",weight:700},{label:"Extra Bold",value:"font-extrabold",weight:800},{label:"Black",value:"font-black",weight:900}],mn=[{label:"Left",value:"text-left",icon:(0,be.jsx)(sn.A,{className:"h-4 w-4"})},{label:"Center",value:"text-center",icon:(0,be.jsx)(tn.A,{className:"h-4 w-4"})},{label:"Right",value:"text-right",icon:(0,be.jsx)(an.A,{className:"h-4 w-4"})},{label:"Justify",value:"text-justify",icon:(0,be.jsx)(rn.A,{className:"h-4 w-4"})}],un=[{label:"None",value:"no-underline",icon:(0,be.jsx)(nn.A,{className:"h-4 w-4"})},{label:"Underline",value:"underline",icon:(0,be.jsx)(ln.A,{className:"h-4 w-4"})},{label:"Line Through",value:"line-through",icon:(0,be.jsx)("span",{className:"text-xs line-through",children:"abc"})}],hn=[{label:"Normal",value:"normal-case",icon:(0,be.jsx)("span",{className:"text-xs",children:"Aa"})},{label:"Uppercase",value:"uppercase",icon:(0,be.jsx)("span",{className:"text-xs",children:"AA"})},{label:"Lowercase",value:"lowercase",icon:(0,be.jsx)("span",{className:"text-xs",children:"aa"})},{label:"Capitalize",value:"capitalize",icon:(0,be.jsx)("span",{className:"text-xs",children:"Aa"})}];function xn(e){let{value:s,onChange:t}=e;const a=cn.findIndex((e=>e.value===s)),r=-1===a?2:a,n=cn[r];return(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Font Size"}),(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("button",{onClick:()=>{r>0&&t(cn[r-1].value)},disabled:0===r,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",title:"Decrease font size",children:(0,be.jsx)(on.A,{className:"h-4 w-4"})}),(0,be.jsxs)("div",{className:"flex-1 mx-2",children:[(0,be.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,be.jsx)("span",{children:"Smaller"}),(0,be.jsx)("span",{children:"Larger"})]}),(0,be.jsx)("input",{type:"range",min:"0",max:cn.length-1,value:r,onChange:e=>t(cn[parseInt(e.target.value)].value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,be.jsx)("button",{onClick:()=>{r<cn.length-1&&t(cn[r+1].value)},disabled:r===cn.length-1,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",title:"Increase font size",children:(0,be.jsx)(rt.A,{className:"h-4 w-4"})})]}),(0,be.jsx)("div",{className:"text-xs text-center text-gray-500",children:n.label})]})}function pn(e){let{value:s,onChange:t}=e;const a=dn.findIndex((e=>e.value===s)),r=-1===a?3:a,n=dn[r];return(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Font Weight"}),(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("button",{onClick:()=>{r>0&&t(dn[r-1].value)},disabled:0===r,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",title:"Decrease font weight",children:(0,be.jsx)(on.A,{className:"h-4 w-4"})}),(0,be.jsxs)("div",{className:"flex-1 mx-2",children:[(0,be.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,be.jsx)("span",{children:"Lighter"}),(0,be.jsx)("span",{children:"Bolder"})]}),(0,be.jsx)("input",{type:"range",min:"0",max:dn.length-1,value:r,onChange:e=>t(dn[parseInt(e.target.value)].value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,be.jsx)("button",{onClick:()=>{r<dn.length-1&&t(dn[r+1].value)},disabled:r===dn.length-1,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",title:"Increase font weight",children:(0,be.jsx)(rt.A,{className:"h-4 w-4"})})]}),(0,be.jsx)("div",{className:"text-xs text-center text-gray-500",children:n.label})]})}const gn=function(e){let{typography:s,onChange:t}=e;const[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(null),[l,o]=(0,Y.useState)(null),[c,d]=(0,Y.useState)(null),[m,u]=(0,Y.useState)(null);return(0,Y.useEffect)((()=>{r((null==s?void 0:s.size)||cn[2].value),i((null==s?void 0:s.weight)||dn[3].value),o((null==s?void 0:s.align)||mn[0].value),d((null==s?void 0:s.decoration)||un[0].value),u((null==s?void 0:s.transform)||hn[0].value)}),[s]),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsx)(xn,{value:a,onChange:e=>{r(e),t({...s,size:e})}}),(0,be.jsx)(pn,{value:n,onChange:e=>{i(e),t({...s,weight:e})}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Text Alignment"}),(0,be.jsx)("div",{className:"flex border rounded-md divide-x",children:mn.map((e=>(0,be.jsx)("button",{type:"button",className:"flex-1 flex justify-center py-1.5 "+(l===e.value?"bg-indigo-50 text-indigo-700":"bg-white text-gray-700 hover:bg-gray-50"),onClick:()=>{return a=e.value,o(a),void t({...s,align:a});var a},title:e.label,children:e.icon},e.value)))})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Text Decoration"}),(0,be.jsx)("div",{className:"flex border rounded-md divide-x",children:un.map((e=>(0,be.jsx)("button",{type:"button",className:"flex-1 flex justify-center py-1.5 "+(c===e.value?"bg-indigo-50 text-indigo-700":"bg-white text-gray-700 hover:bg-gray-50"),onClick:()=>{return a=e.value,d(a),void t({...s,decoration:a});var a},title:e.label,children:e.icon},e.value)))})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Text Transform"}),(0,be.jsx)("div",{className:"flex border rounded-md divide-x",children:hn.map((e=>(0,be.jsx)("button",{type:"button",className:"flex-1 flex justify-center py-1.5 "+(m===e.value?"bg-indigo-50 text-indigo-700":"bg-white text-gray-700 hover:bg-gray-50"),onClick:()=>{return a=e.value,u(a),void t({...s,transform:a});var a},title:e.label,children:e.icon},e.value)))})]})]}),(0,be.jsxs)("div",{className:"pt-2 border-t",children:[(0,be.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Preview:"}),(0,be.jsx)("div",{className:`p-2 border rounded-md text-center ${a} ${n} ${l} ${c} ${m}`,children:"Sample Text"})]})]})};function fn(e){const s={colors:{bg:null,text:null},spacing:{margin:{t:null,r:null,b:null,l:null,x:null,y:null,all:null},padding:{t:null,r:null,b:null,l:null,x:null,y:null,all:null}},typography:{size:null,weight:null,align:null,decoration:null,transform:null},other:[]};if(!e)return s;if("string"!=typeof e)return s;return e.trim().split(/\s+/).forEach((e=>{if(!e)return;let t=!1;e.startsWith("bg-")?(s.colors.bg=e,t=!0):!e.startsWith("text-")||e.startsWith("text-xs")||e.startsWith("text-sm")||e.startsWith("text-base")||e.startsWith("text-lg")||e.startsWith("text-xl")?e.startsWith("m-")?(s.spacing.margin.all=e,t=!0):e.startsWith("mt-")?(s.spacing.margin.t=e,t=!0):e.startsWith("mr-")?(s.spacing.margin.r=e,t=!0):e.startsWith("mb-")?(s.spacing.margin.b=e,t=!0):e.startsWith("ml-")?(s.spacing.margin.l=e,t=!0):e.startsWith("mx-")?(s.spacing.margin.x=e,t=!0):e.startsWith("my-")?(s.spacing.margin.y=e,t=!0):e.startsWith("p-")?(s.spacing.padding.all=e,t=!0):e.startsWith("pt-")?(s.spacing.padding.t=e,t=!0):e.startsWith("pr-")?(s.spacing.padding.r=e,t=!0):e.startsWith("pb-")?(s.spacing.padding.b=e,t=!0):e.startsWith("pl-")?(s.spacing.padding.l=e,t=!0):e.startsWith("px-")?(s.spacing.padding.x=e,t=!0):e.startsWith("py-")?(s.spacing.padding.y=e,t=!0):e.startsWith("text-xs")||e.startsWith("text-sm")||e.startsWith("text-base")||e.startsWith("text-lg")||e.startsWith("text-xl")||e.startsWith("text-2xl")||e.startsWith("text-3xl")||e.startsWith("text-4xl")?(s.typography.size=e,t=!0):e.startsWith("font-")?(s.typography.weight=e,t=!0):e.startsWith("text-left")||e.startsWith("text-center")||e.startsWith("text-right")||e.startsWith("text-justify")?(s.typography.align=e,t=!0):e.startsWith("underline")||e.startsWith("line-through")||e.startsWith("no-underline")?(s.typography.decoration=e,t=!0):(e.startsWith("uppercase")||e.startsWith("lowercase")||e.startsWith("capitalize")||e.startsWith("normal-case"))&&(s.typography.transform=e,t=!0):(s.colors.text=e,t=!0),t||s.other.push(e)})),s}function jn(e){const s=new Set;if(e.colors&&(e.colors.bg&&s.add(e.colors.bg),e.colors.text&&s.add(e.colors.text)),e.spacing&&e.spacing.margin){const t=e.spacing.margin;t.all?s.add(t.all):(t.t&&s.add(t.t),t.r&&s.add(t.r),t.b&&s.add(t.b),t.l&&s.add(t.l),t.x&&s.add(t.x),t.y&&s.add(t.y))}if(e.spacing&&e.spacing.padding){const t=e.spacing.padding;t.all?s.add(t.all):(t.t&&s.add(t.t),t.r&&s.add(t.r),t.b&&s.add(t.b),t.l&&s.add(t.l),t.x&&s.add(t.x),t.y&&s.add(t.y))}if(e.typography){const{size:t,weight:a,align:r,decoration:n,transform:i}=e.typography;t&&s.add(t),a&&s.add(a),r&&s.add(r),n&&s.add(n),i&&s.add(i)}return e.other&&Array.isArray(e.other)&&e.other.forEach((e=>{e&&s.add(e)})),Array.from(s).join(" ")}function bn(e){let{title:s,children:t,defaultOpen:a=!1}=e;const[r,n]=(0,Y.useState)(a);return(0,be.jsxs)("div",{className:"border border-gray-300 rounded-md mb-3",children:[(0,be.jsxs)("button",{type:"button",className:"w-full flex justify-between items-center px-3 py-2 bg-gray-100 text-sm font-medium text-gray-700 rounded-t-md",onClick:()=>n(!r),children:[s,r?(0,be.jsx)(fs.A,{className:"h-4 w-4 text-gray-500"}):(0,be.jsx)(gs.A,{className:"h-4 w-4 text-gray-500"})]}),r&&(0,be.jsx)("div",{className:"p-3",children:t})]})}function vn(e){var s;let{element:t,onChange:a,onClose:r,onSave:n,onDiscard:i,isSaving:l}=e;const[o,c]=(0,Y.useState)({colors:{},spacing:{},typography:{}}),[d,m]=(0,Y.useState)(""),[u,h]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{if(null!=t&&t.classes){m(t.classes);const e=fn(t.classes);c(e)}}),[t]);const x=(e,s)=>{const t={...o};t.colors[e]=s,c(t);const r=jn(t);m(r),a(r)},p=(e,s)=>{const t={...o};t.spacing[e]=s,c(t);const r=jn(t);m(r),a(r)},g=["p","h1","h2","h3","h4","h5","h6","span","a","label"].includes(null==t||null===(s=t.tagName)||void 0===s?void 0:s.toLowerCase());return(0,be.jsxs)("div",{className:"w-full max-h-[500px] overflow-y-auto px-4 py-2",children:[(0,be.jsxs)("div",{className:"controls space-y-3 w-full",children:[(0,be.jsxs)(bn,{title:"Colors",defaultOpen:!0,children:[(0,be.jsx)(Hr,{label:"Background Color",selectedColor:o.colors.bg,onChange:e=>x("bg",e)}),(0,be.jsx)("div",{className:"mt-3",children:(0,be.jsx)(Hr,{label:"Text Color",selectedColor:o.colors.text,onChange:e=>x("text",e)})})]}),g&&(0,be.jsx)(bn,{title:"Text & Font",defaultOpen:!0,children:(0,be.jsx)(gn,{typography:o.typography,onChange:e=>{const s={...o};s.typography={...s.typography,...e},c(s);const t=jn(s);m(t),a(t)}})}),(0,be.jsxs)(bn,{title:"Spacing",defaultOpen:!1,children:[(0,be.jsx)(en,{label:"Margin",spacing:o.spacing.margin||{},onChange:e=>p("margin",e)}),(0,be.jsx)("div",{className:"mt-3",children:(0,be.jsx)(en,{label:"Padding",spacing:o.spacing.padding||{},onChange:e=>p("padding",e)})})]}),(0,be.jsx)(bn,{title:"Advanced - Tailwind Classes",defaultOpen:!1,children:(0,be.jsx)("textarea",{className:"w-full p-2 rounded border border-gray-300 text-sm font-mono",rows:"5",value:d,onChange:e=>{const s=e.target.value;m(s);const t=fn(s);c(t),a(s)},placeholder:"Enter Tailwind classes..."})})]}),(0,be.jsxs)("div",{className:"flex justify-between mt-4 mb-2",children:[(0,be.jsxs)("button",{onClick:()=>{i&&i()},disabled:l,className:"flex items-center gap-1 px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-300 text-sm",children:[(0,be.jsx)(Ar.A,{className:"h-3 w-3"}),"Discard"]}),(0,be.jsxs)("button",{onClick:()=>{n&&n(t,d)},disabled:l,className:"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:[(0,be.jsx)(Br.A,{className:"h-3 w-3"}),l?"Saving...":"Save Changes"]})]})]})}var yn=t(20939);const Nn=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(yn.bL,{ref:s,className:Be("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,be.jsx)(yn.C1,{className:Be("flex items-center justify-center text-current"),children:(0,be.jsx)(js.A,{className:"h-4 w-4"})})})}));Nn.displayName=yn.bL.displayName;var wn=t(41443);const Cn=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(wn.bL,{ref:s,className:Be("relative overflow-hidden",t),...r,children:[(0,be.jsx)(wn.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,be.jsx)(Sn,{}),(0,be.jsx)(wn.OK,{})]})}));Cn.displayName=wn.bL.displayName;const Sn=Y.forwardRef(((e,s)=>{let{className:t,orientation:a="vertical",...r}=e;return(0,be.jsx)(wn.VM,{ref:s,orientation:a,className:Be("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:(0,be.jsx)(wn.lr,{className:"relative flex-1 rounded-full bg-border"})})}));Sn.displayName=wn.VM.displayName;var kn=t(88276),An=t(81745);function _n(e){let{isOpen:s,onClose:t}=e;const{app:a,updateApp:r}=xa(),[n,i]=(0,Y.useState)(""),[l,o]=(0,Y.useState)([]),[c,d]=(0,Y.useState)([]),[m,u]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{if(a){i(a.custom_instructions||""),o(a.frozen_files||[]);const e=[...Object.keys(a.pages||{}).map((e=>`pages/${e}`)),...Object.keys(a.components||{}).map((e=>`components/${e}`))];d(e)}}),[a,s]);const h=e=>{o(e?[...c]:[])};return(0,be.jsx)(jt,{open:s,onOpenChange:t,children:(0,be.jsxs)(wt,{className:"max-w-[90vw] sm:max-w-[500px] p-0 overflow-hidden rounded-lg shadow-lg border-0",children:[(0,be.jsx)(Ct,{className:"px-6 pt-5 pb-3 bg-gradient-to-r from-slate-50 to-gray-50",children:(0,be.jsxs)(kt,{className:"flex items-center gap-2 text-lg font-medium",children:[(0,be.jsx)(ra.A,{className:"h-5 w-5 text-gray-700"}),"AI Controls"]})}),(0,be.jsxs)("div",{className:"p-6 space-y-5 overflow-y-auto max-h-[70vh]",children:[(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)(ds,{htmlFor:"custom-instructions",className:"text-sm font-medium flex items-center",children:"Custom Instructions"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Provide additional instructions that will be included in every interaction with the AI. These can help guide the AI's behavior and responses."}),(0,be.jsx)(Na,{id:"custom-instructions",value:n,onChange:e=>i(e.target.value),placeholder:"e.g., Keep dark themes, always break down to small files, RTL...",className:"min-h-[100px] resize-none border-gray-200 focus:border-gray-300 transition-colors"})]}),(0,be.jsx)(Bs,{className:"my-5"}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsxs)(ds,{className:"text-sm font-medium flex items-center gap-2",children:[(0,be.jsx)(kn.A,{className:"h-4 w-4 text-gray-700"}),"Freeze Files",l.length>0&&(0,be.jsxs)(Os,{variant:"secondary",className:"ml-1 bg-blue-50 text-blue-700 hover:bg-blue-100",children:[l.length," frozen"]})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsx)(Ze,{variant:"outline",size:"sm",className:"h-8 text-xs border-gray-200 hover:bg-gray-50 hover:text-gray-900 transition-colors",onClick:()=>h(!0),children:"Freeze All"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",className:"h-8 text-xs border-gray-200 hover:bg-gray-50 hover:text-gray-900 transition-colors",onClick:()=>h(!1),children:"Unfreeze All"})]})]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select files that should be protected from AI edits. The AI will not modify frozen files."}),(0,be.jsx)(Cn,{className:"h-[200px] border border-gray-200 rounded-lg overflow-hidden",children:(0,be.jsx)("div",{className:"p-1",children:c.map((e=>{const s=l.includes(e);return(0,be.jsxs)("div",{className:"flex items-center p-2 rounded-md transition-colors "+(s?"bg-blue-50 text-blue-800":"hover:bg-gray-50"),children:[(0,be.jsx)(Nn,{id:`freeze-${e}`,checked:s,onCheckedChange:()=>(e=>{o((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))})(e),className:s?"border-blue-500 text-blue-600":""}),(0,be.jsxs)("div",{className:"flex-1 flex items-center ml-3",children:[(0,be.jsx)(ds,{htmlFor:`freeze-${e}`,className:"cursor-pointer text-sm font-normal flex-1",children:e}),s?(0,be.jsx)(kn.A,{className:"h-3.5 w-3.5 text-blue-500 ml-2"}):(0,be.jsx)(An.A,{className:"h-3.5 w-3.5 text-gray-300 ml-2"})]})]},e)}))})})]})]}),(0,be.jsx)(St,{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,be.jsxs)("div",{className:"flex w-full gap-3 sm:justify-end",children:[(0,be.jsx)(Ze,{type:"button",variant:"outline",onClick:t,disabled:m,className:"flex-1 sm:flex-initial border-gray-200",children:"Cancel"}),(0,be.jsx)(Ze,{type:"button",onClick:async()=>{try{u(!0),await r({custom_instructions:n,frozen_files:l}),t()}catch(e){}finally{u(!1)}},disabled:m,className:"flex-1 sm:flex-initial bg-[#2b3440] hover:bg-[#3a4555] text-white",children:m?(0,be.jsxs)("span",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Saving..."]}):(0,be.jsxs)("span",{className:"flex items-center gap-1",children:[(0,be.jsx)(js.A,{className:"h-4 w-4"}),"Save Changes"]})})]})})]})})}function Tn(e){let{app:s,writeCodeToFile:t,setContextSelectedElement:a}=e;const[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(null),[o,c]=(0,Y.useState)(!1),[d,m]=(0,Y.useState)({left:0,top:0}),[u,h]=(0,Y.useState)(!1),x=(0,Y.useRef)(null),p=(0,Y.useRef)(!1),g=(0,Y.useRef)(null),f=()=>!Object.keys(s.pages).length||!window.location.pathname.includes("preview")||window.innerWidth<768;(0,Y.useEffect)((()=>{if(f())return;const e=document.getElementById("preview-iframe");if(e){x.current=e;const s=()=>{e.getBoundingClientRect();m({left:0,top:-300})};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)}}),[window.location.pathname]),(0,Y.useEffect)((()=>{f()&&(n(!1),c(!1),l(null),a(null))}),[window.location.pathname]),(0,Y.useEffect)((()=>{if(f())return;const e=e=>{const s=e.data;switch(s.type){case"visual-edit-agent-ready":p.current=!0;break;case"element-selected":const e={tagName:s.tagName,classes:s.classes,linenumber:s.linenumber,filename:s.filename,visualSelectorId:s.visualSelectorId};l(e),g.current=s.visualSelectorId,c(!0),a({tagName:s.tagName,dataset:{filename:s.filename,linenumber:s.linenumber}})}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[a,window.location.pathname]),(0,Y.useEffect)((()=>{}),[o,i]);const j=e=>{g.current&&(l((s=>({...s,classes:e}))),x.current&&x.current.contentWindow.postMessage({type:"update-classes",data:{classes:e,visualSelectorId:g.current}},"*"))},b=()=>{c(!1),x.current&&x.current.contentWindow.postMessage({type:"unselect-element"},"*"),l(null),g.current=null,a(null)},v=async(e,a)=>{if(e&&e.filename&&e.linenumber)try{h(!0);let r=e.filename;r.endsWith(".js")&&(r=r.replace(".js",""));const i=(e=>{if(!e)return null;try{if("layout"===e)return s.layout;if(e.startsWith("pages/")){const t=e.split("pages/")[1];return s.pages[t]}if(e.startsWith("components/")){const t=e.split("components/")[1];return s.components[t]}}catch(t){}return null})(r);if(!i)return;const l=((e,s,t)=>{if(!e||!s)return null;const a=e.split("\n"),r=parseInt(s)-1;if(r<0||r>=a.length)return null;const n=a[r],i=[{regex:/className\s*=\s*"([^"]*)"/,replacement:(e,s)=>`className="${t}"`},{regex:/className\s*=\s*'([^']*)'/,replacement:(e,s)=>`className='${t}'`},{regex:/className\s*=\s*{\s*`([^`]*)`\s*}/,replacement:(e,s)=>`className={\`${t}\`}`},{regex:/className\s*=\s*{\s*"([^"]*)"\s*}/,replacement:(e,s)=>`className={"${t}"}`},{regex:/className\s*=\s*{\s*'([^']*)'\s*}/,replacement:(e,s)=>`className={'${t}'}`}];let l=null;for(const o of i)if(o.regex.test(n)){l=n.replace(o.regex,o.replacement);break}if(!l&&/className/.test(n)){if(/className\s*=/.test(n))return null;l=n.replace(/(<[^>]+)/,`$1 className="${t}"`)}return l?(a[r]=l,a.join("\n")):null})(i,e.linenumber,a);if(!l)return;await t(r,l),x.current&&x.current.contentWindow.postMessage({type:"refresh-page"},"*"),b(),n(!1)}catch(r){}finally{h(!1)}},y=()=>{x.current&&(x.current.contentWindow.postMessage({type:"refresh-page"},"*"),b(),n(!1))};return{isVisualEditMode:r,selectedElement:i,isFormVisible:o,formPosition:d,isSaving:u,shouldHideSelectElement:f(),toggleVisualEditMode:()=>{const e=!r;n(e),x.current&&p.current&&x.current.contentWindow.postMessage({type:"toggle-visual-edit-mode",data:{enabled:e}},"*"),e||(l(null),g.current=null,c(!1),a(null),x.current&&x.current.contentWindow.postMessage({type:"unselect-element"},"*"))},handleClassesChange:j,handleCloseForm:b,handleSave:v,handleDiscard:y,renderVisualEditsMiddleComponent:e=>o&&i&&!f()?(0,be.jsx)("div",{className:"w-full p-2",children:(0,be.jsxs)("div",{className:"w-full border border-gray-300 bg-gray-100 mb-2 flex flex-col shadow-xl rounded-lg overflow-hidden",children:[(0,be.jsxs)("div",{className:"p-2 bg-gray-50 text-xs text-gray-500 flex justify-between",children:[(0,be.jsxs)("span",{children:["Editing: ",i.tagName]}),(0,be.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),(0,be.jsx)("div",{className:"w-full flex-1 overflow-y-auto",style:{minHeight:"250px"},children:(0,be.jsx)(e,{element:i,onChange:j,onClose:()=>{b(),y()},onSave:v,onDiscard:y,isSaving:u})})]})}):null}}var En=t(69830),In=t(81946),Pn=t(51981),Rn=t(20088),On=t(51654);let Dn=0;const Ln=new Map,Un=e=>{if(Ln.has(e))return;const s=setTimeout((()=>{Ln.delete(e),zn({type:"REMOVE_TOAST",toastId:e})}),1e6);Ln.set(e,s)},$n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===s.toast.id?{...e,...s.toast}:e))};case"DISMISS_TOAST":{const{toastId:t}=s;return t?Un(t):e.toasts.forEach((e=>{Un(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===t||void 0===t?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===s.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==s.toastId))}}},Mn=[];let Fn={toasts:[]};function zn(e){Fn=$n(Fn,e),Mn.forEach((e=>{e(Fn)}))}function Bn(e){let{...s}=e;const t=(Dn=(Dn+1)%Number.MAX_SAFE_INTEGER,Dn.toString()),a=()=>zn({type:"DISMISS_TOAST",toastId:t});return zn({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>zn({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function qn(){const[e,s]=Y.useState(Fn);return Y.useEffect((()=>(Mn.push(s),()=>{const e=Mn.indexOf(s);e>-1&&Mn.splice(e,1)})),[e]),{...e,toast:Bn,dismiss:e=>zn({type:"DISMISS_TOAST",toastId:e})}}function Wn(e){let{appId:s,onOpenChatSettings:t,frozenFiles:a}=e;const r=(0,J.Zp)(),{app:n,updateApp:i}=xa(),{toast:l}=qn(),[o,c]=(0,Y.useState)(!1),[d,m]=(0,Y.useState)(!1),[u,h]=(0,Y.useState)(!1),[x,p]=(0,Y.useState)(!1),[g,f]=(0,Y.useState)(!1),j=(0,Y.useRef)(null);(0,Y.useEffect)((()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&(c(!1),m(!1),h(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const b=e=>{r(`/apps/${s}/editor/workspace/${e}`),c(!1)},v=async e=>{p(!0);try{await i({public_settings:e}),m(!1),c(!1),l({title:"App visibility updated",description:"Your app visibility settings have been updated"})}catch(s){l({title:"Error",description:"Failed to update app visibility",variant:"destructive"})}finally{p(!1)}},y=async e=>{f(!0);try{await i({model:e}),h(!1),c(!1),l({title:"AI model updated",description:"Your app is now using a different AI model"})}catch(s){l({title:"Error",description:"Failed to update AI model",variant:"destructive"})}finally{f(!1)}},N=(null==a?void 0:a.length)||0,w=(e=>{switch(e){case"claude_3_7":return"Claude 3.7";case"claude_sonnet_4":return"Claude Sonnet 4";case"gemini_2_5_pro":return"Gemini 2.5 Pro";default:return"Default"}})(n.model),C=(e=>{switch(e){case"private_with_login":return"Private (Login Required)";case"public_with_login":return"Public (Login Required)";case"public_without_login":return"Public (No Login)";default:return"Private"}})(n.public_settings);return(0,be.jsxs)("div",{className:"relative",ref:j,children:[(0,be.jsx)("button",{onClick:()=>c(!o),className:"flex items-center justify-center p-2 rounded-md hover:bg-gray-200 transition-colors","aria-label":"App Settings",children:(0,be.jsx)(ra.A,{className:"h-3 w-3 transition-transform duration-300 ease-in-out "+(o?"rotate-90":"")})}),o&&(0,be.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 w-52 bg-white rounded-md shadow-lg z-10 border border-gray-200 py-0.5",children:[(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("div",{className:"px-3 py-1.5 text-sm hover:bg-gray-50 cursor-pointer transition-colors "+(d?"bg-gray-50":""),onClick:()=>{m(!d),h(!1)},children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-3.5 h-3.5 text-gray-600"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"font-medium",children:"App Visibility"}),(0,be.jsx)("div",{className:"text-xs text-gray-500",children:C})]})]}),(0,be.jsx)($a.A,{className:"w-3 h-3 text-gray-400 transition-transform duration-200 "+(d?"rotate-90":"")})]})}),d&&(0,be.jsxs)("div",{className:"absolute left-full top-0 ml-0.5 w-64 bg-white rounded-md shadow-lg border border-gray-200 py-0.5 z-20",children:[(0,be.jsxs)("button",{onClick:()=>v("private_with_login"),disabled:x,className:"w-full px-3 py-1.5 text-sm text-left hover:bg-gray-50 flex items-center justify-between transition-colors "+("private_with_login"===n.public_settings?"bg-blue-50/70":""),children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(kn.A,{className:"w-3.5 h-3.5 text-orange-500"}),(0,be.jsx)("span",{children:"Private (Login Required)"})]}),"private_with_login"===n.public_settings&&(0,be.jsx)(js.A,{className:"w-3.5 h-3.5 text-blue-600"})]}),(0,be.jsxs)("button",{onClick:()=>v("public_with_login"),disabled:x,className:"w-full px-3 py-1.5 text-sm text-left hover:bg-gray-50 flex items-center justify-between transition-colors "+("public_with_login"===n.public_settings?"bg-blue-50/70":""),children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-3.5 h-3.5 text-blue-500"}),(0,be.jsx)("span",{children:"Public (Login Required)"})]}),"public_with_login"===n.public_settings&&(0,be.jsx)(js.A,{className:"w-3.5 h-3.5 text-blue-600"})]}),(0,be.jsxs)("button",{onClick:()=>v("public_without_login"),disabled:x,className:"w-full px-3 py-1.5 text-sm text-left hover:bg-gray-50 flex items-center justify-between transition-colors "+("public_without_login"===n.public_settings?"bg-blue-50/70":""),children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-3.5 h-3.5 text-green-500"}),(0,be.jsx)("span",{children:"Public (No Login)"})]}),"public_without_login"===n.public_settings&&(0,be.jsx)(js.A,{className:"w-3.5 h-3.5 text-blue-600"})]}),x&&(0,be.jsxs)("div",{className:"flex justify-center items-center py-1.5 text-xs text-gray-500 bg-gray-50 border-t border-gray-100",children:[(0,be.jsx)("div",{className:"animate-spin h-3 w-3 border-2 border-blue-500 border-t-transparent rounded-full mr-2"}),"Updating..."]})]})]}),(0,be.jsxs)("div",{className:"relative border-t border-gray-100",children:[(0,be.jsx)("div",{className:"px-3 py-1.5 text-sm hover:bg-gray-50 cursor-pointer transition-colors "+(u?"bg-gray-50":""),onClick:()=>{h(!u),m(!1)},children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(En.A,{className:"w-3.5 h-3.5 text-gray-600"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"font-medium",children:"AI Model"}),(0,be.jsx)("div",{className:"text-xs text-gray-500",children:w})]})]}),(0,be.jsx)($a.A,{className:"w-3 h-3 text-gray-400 transition-transform duration-200 "+(u?"rotate-90":"")})]})}),u&&(0,be.jsxs)("div",{className:"absolute left-full top-0 ml-0.5 w-56 bg-white rounded-md shadow-lg border border-gray-200 py-0.5 z-20",children:[(0,be.jsxs)("button",{onClick:()=>y("default"),disabled:g,className:"w-full px-3 py-1.5 text-sm text-left hover:bg-gray-50 flex items-center justify-between transition-colors "+("default"!==n.model&&n.model?"":"bg-blue-50/70"),children:[(0,be.jsxs)("div",{className:"flex flex-col items-start",children:[(0,be.jsx)("span",{children:"Default"}),(0,be.jsx)("span",{className:"text-[10px] text-gray-500 mt-0.5",children:"Automatically selects the best model for your app"})]}),("default"===n.model||!n.model)&&(0,be.jsx)(js.A,{className:"w-3.5 h-3.5 text-blue-600 ml-2 flex-shrink-0"})]}),(0,be.jsxs)("button",{onClick:()=>y("claude_sonnet_4"),disabled:g,className:"w-full px-3 py-1.5 text-sm text-left hover:bg-gray-50 flex items-center justify-between transition-colors "+("claude_sonnet_4"===n.model?"bg-blue-50/70":""),children:[(0,be.jsx)("span",{children:"Claude Sonnet 4"}),"claude_sonnet_4"===n.model&&(0,be.jsx)(js.A,{className:"w-3.5 h-3.5 text-blue-600"})]}),(0,be.jsxs)("button",{onClick:()=>y("gemini_2_5_pro"),disabled:g,className:"w-full px-3 py-1.5 text-sm text-left hover:bg-gray-50 flex items-center justify-between transition-colors "+("gemini_2_5_pro"===n.model?"bg-blue-50/70":""),children:[(0,be.jsx)("span",{children:"Gemini 2.5 Pro"}),"gemini_2_5_pro"===n.model&&(0,be.jsx)(js.A,{className:"w-3.5 h-3.5 text-blue-600"})]}),g&&(0,be.jsxs)("div",{className:"flex justify-center items-center py-1.5 text-xs text-gray-500 bg-gray-50 border-t border-gray-100",children:[(0,be.jsx)("div",{className:"animate-spin h-3 w-3 border-2 border-blue-500 border-t-transparent rounded-full mr-2"}),"Updating..."]})]})]}),(0,be.jsxs)("button",{onClick:()=>b("users"),className:"w-full px-3 py-1.5 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center border-t border-gray-100 transition-colors",children:[(0,be.jsx)(na.A,{size:13,className:"mr-2 text-gray-600"}),(0,be.jsx)("span",{className:"font-medium",children:"Users"})]}),(0,be.jsxs)("button",{onClick:()=>b("security"),className:"w-full px-3 py-1.5 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center border-t border-gray-100 transition-colors",children:[(0,be.jsx)(In.A,{size:13,className:"mr-2 text-gray-600"}),(0,be.jsx)("span",{className:"font-medium",children:"Security"})]}),(0,be.jsxs)("button",{onClick:()=>{c(!1),t()},className:"w-full px-3 py-1.5 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center justify-between border-t border-gray-100 transition-colors",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Pn.A,{size:13,className:"mr-2 text-gray-600"}),(0,be.jsx)("span",{className:"font-medium",children:"AI Controls"})]}),N>0&&(0,be.jsxs)("span",{className:"text-xs text-blue-600 font-medium bg-blue-50 px-1.5 py-0.5 rounded",children:[N," frozen"]})]}),(0,be.jsxs)("button",{onClick:()=>{r(`/apps/${s}/editor/workspace/app-settings`),c(!1)},className:"w-full px-3 py-1.5 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center border-t border-gray-100 transition-colors",children:[(0,be.jsx)(Rn.A,{size:13,className:"mr-2 text-gray-600"}),(0,be.jsx)("span",{className:"font-medium",children:"App Settings"})]}),n.is_remixable&&(0,be.jsxs)("button",{onClick:()=>{r(`/apps/${s}/editor/workspace/app-settings?selectedParam=platform-badge`),c(!1)},className:"w-full px-3 py-1.5 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center border-t border-gray-100 transition-colors",children:[(0,be.jsx)(On.A,{size:13,className:"mr-2 text-gray-600"}),(0,be.jsx)("span",{className:"font-medium",children:'Hide "Edit with Base44"'})]})]})]})}var Yn=t(62113);const Gn=Y.forwardRef(((e,s)=>{let{className:t,value:a,...r}=e;return(0,be.jsx)(Yn.bL,{ref:s,className:Be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,be.jsx)(Yn.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}));Gn.displayName=Yn.bL.displayName;var Hn=t(29037);const Vn=Hn.bL,Jn=Hn.l9,Kn=Y.forwardRef(((e,s)=>{let{className:t,align:a="center",sideOffset:r=4,...n}=e;return(0,be.jsx)(Hn.UC,{ref:s,align:a,sideOffset:r,className:Be("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));function Zn(e){let{currentUsage:s,isDisabled:t}=e;const{app:a}=xa();if(!s)return null;const r={...s,monthly_limit:s.monthly_limit||1e6,daily_limit:s.daily_limit||1e6},n=r.monthly_usage/r.monthly_limit*100,i=r.daily_usage/r.daily_limit*100,l=(r.monthly_limit||1e6)-r.monthly_usage,o=(r.daily_limit||1e6)-r.daily_usage;return t?(0,be.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-500",children:[(0,be.jsx)("span",{children:"Out of credits"}),(0,be.jsxs)(V.Link,{to:"/billing",className:"flex items-center gap-1 text-blue-500 hover:text-blue-600",children:[(0,be.jsx)(_e.A,{className:"h-3 w-3"}),"Upgrade"]})]}):l<1||o<1?(0,be.jsxs)(Vn,{children:[(0,be.jsx)(Jn,{asChild:!0,children:(0,be.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-500 cursor-pointer",children:(0,be.jsx)("span",{children:l<=o?`${l} messages left this month`:`${o} messages left today`})})}),(0,be.jsx)(Kn,{side:"top",align:"end",className:"w-80 z-50",children:(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("h4",{className:"text-sm font-semibold",children:"Usage Limits"}),(0,be.jsxs)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-full",children:[r.tier," tier"]})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,be.jsx)("span",{children:"Daily Usage"}),(0,be.jsxs)("span",{children:[r.daily_usage,"/",r.daily_limit]})]}),(0,be.jsx)(Gn,{value:i,className:"h-1"})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,be.jsx)("span",{children:"Monthly Usage"}),(0,be.jsxs)("span",{children:[r.monthly_usage,"/",r.monthly_limit]})]}),(0,be.jsx)(Gn,{value:n,className:"h-1"})]})]}),(0,be.jsxs)(V.Link,{to:"/billing",className:"flex items-center gap-2 text-xs text-blue-500 hover:text-blue-600 mt-2",children:[(0,be.jsx)(_e.A,{className:"h-3 w-3"}),"Upgrade Plan"]})]})})]}):void 0}Kn.displayName=Hn.UC.displayName;const Xn=e=>{let{isDiscussionMode:s,setIsDiscussionMode:t}=e;return(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("button",{onClick:()=>t(!s),className:`\n                    px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ease-in-out\n                    ${s?"bg-slate-900 text-white shadow-sm hover:bg-slate-800":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-700"}\n                `,children:"Discuss"})}),(0,be.jsx)(ts,{side:"top",align:"end",className:"max-w-[280px]",children:(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("p",{className:"font-medium",children:"Discussion Mode"}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground",children:"Chat with the AI about anything without making code changes. Uses 0.3 credits per request."})]})})]})};function Qn(){const[e,s]=(0,Y.useState)(!1),{app:t,addChatMessage:a,undoMessage:r,stopChat:n,suggestions:i,currentUsage:l,writeCodeToFile:o,setSelectedElement:c}=xa(),[d,m]=(0,Y.useState)(!1),{isVisualEditMode:u,isSaving:h,shouldHideSelectElement:x,toggleVisualEditMode:p,handleDiscard:g,renderVisualEditsMiddleComponent:f}=Tn({app:t,writeCodeToFile:o,setContextSelectedElement:c}),j=!!l&&(l.daily_usage>=(l.daily_limit||1e6)||l.monthly_usage>=(l.monthly_limit||1e6));return(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[(0,be.jsx)($r,{chat:t.conversation,addMessage:s=>(u&&g(),e&&(s.additional_message_params=s.additional_message_params||{},s.additional_message_params.discussion_mode=!0),a(s)),status:t.status,undoMessage:r,onStop:n,suggestions:i,isDisabled:j,customButtomRight:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Zn,{currentUsage:l,isDisabled:j}),!j&&(0,be.jsx)(Xn,{isDiscussionMode:e,setIsDiscussionMode:s})]}),customButtomLeft:s=>(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Wn,{appId:t.id,onOpenChatSettings:()=>m(!0),frozenFiles:t.frozen_files}),s,e?(0,be.jsx)(be.Fragment,{children:(0,be.jsx)(zr,{isVisualEditMode:u,toggleVisualEditMode:p,isSaving:h})}):!x&&(0,be.jsx)(zr,{isVisualEditMode:u,toggleVisualEditMode:p,isSaving:h})]}),customMiddleComponent:(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"flex justify-end mb-2 pr-2",children:(0,be.jsx)(Fr,{})}),f(vn)]})}),(0,be.jsx)(_n,{isOpen:d,onClose:()=>m(!1)})]})}const ei=e=>{let{option1:s,option2:t,selected:a,onChange:r}=e;return(0,be.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,be.jsx)("button",{onClick:()=>r(s),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+(a===s?"bg-slate-200 text-slate-800":"text-slate-500 hover:text-slate-600 hover:bg-slate-100"),children:s}),(0,be.jsx)("button",{onClick:()=>r(t),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+(a===t?"bg-slate-200 text-slate-800":"text-slate-500 hover:text-slate-600 hover:bg-slate-100"),children:t})]})};var si=t(24276),ti=t(18134),ai=t(16243),ri=t(80483);const ni=ri.bL,ii=ri.R6,li=ri.Ke,oi={overview:si.A,data:Js.A,users:na.A,analytics:ti.A,domains:Zs.A,security:ai.A,code:Ws.A,logs:Js.A,settings:ra.A,payments:_e.A,secrets:Js.A,api:Ws.A,logo:Js.A,"app-settings":ra.A},ci=e=>{const s=oi[e.id];return!s&&e.icon?(0,be.jsx)("div",{className:"min-w-[20px]",children:e.icon}):s?(0,be.jsx)(s,{className:"w-5 h-5"}):null},di=(e,s)=>e.id===s||!!e.subitems&&e.subitems.some((e=>di(e,s))),mi=e=>{let{item:s,selected:t,onSelect:a,searchTerm:r,level:n=0}=e;const i=t===s.id,l=s.subitems&&s.subitems.some((e=>t===e.id||!!e.subitems&&di(e,t)));return!r||s.label.toLowerCase().includes(r.toLowerCase())||s.subitems&&s.subitems.some((e=>e.label.toLowerCase().includes(r.toLowerCase())||e.subitems&&e.subitems.some((e=>e.label.toLowerCase().includes(r.toLowerCase())))))?s.subitems?(0,be.jsx)("div",{className:n>0?"ml-3":"",children:(0,be.jsxs)(ni,{defaultOpen:i||l,className:"group",children:[(0,be.jsxs)(ii,{className:Be("flex items-center w-full px-3 py-2.5 text-sm font-medium rounded-lg transition-colors","hover:bg-gray-100 dark:hover:bg-gray-800","focus:outline-none"),children:[(0,be.jsxs)("div",{className:"flex items-center flex-1",children:[(0,be.jsx)("div",{className:"w-6 h-6 flex items-center justify-center text-muted-foreground",children:ci(s)}),(0,be.jsx)("span",{className:"ml-3 truncate",children:s.label})]}),(0,be.jsx)(gs.A,{className:"h-4 w-4 transition-transform group-data-[state=open]:rotate-180 text-muted-foreground"})]}),(0,be.jsx)(li,{className:"space-y-1 mt-1 ml-2",children:s.subitems.map(((e,s)=>(0,be.jsx)(mi,{item:e,selected:t,onSelect:a,searchTerm:r,level:n+1},s)))})]})}):(0,be.jsxs)(Ze,{variant:"ghost",className:Be("w-full justify-start px-3 py-2.5 text-sm rounded-lg transition-colors",n>0?"ml-3":"",i?"bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary":"text-foreground hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>a(s.id),children:[(0,be.jsx)("div",{className:Be("w-6 h-6 flex items-center justify-center",i?"text-primary":"text-muted-foreground"),children:ci(s)}),(0,be.jsx)("span",{className:"ml-3 truncate",children:s.label})]}):null},ui=e=>{let{items:s,selected:t,onSelect:a,isOpen:r,onClose:n,title:i,showBackButton:l,onBack:o,showSearch:c=!1,style:d}=e;const[m,u]=(0,Y.useState)(""),[h,x]=(0,Y.useState)(!1);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity lg:hidden "+(r?"opacity-100 z-40":"opacity-0 pointer-events-none"),onClick:n}),(0,be.jsxs)("div",{className:`fixed lg:static inset-y-0 left-0 transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition duration-200 ease-in-out bg-white border-r z-50 lg:z-0 w-full h-full flex flex-col`,style:d,children:[(0,be.jsx)("div",{className:"p-2 flex justify-end lg:hidden",children:(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:n,children:(0,be.jsx)(He.A,{className:"h-4 w-4"})})}),l&&(0,be.jsxs)(Ze,{variant:"ghost",className:"justify-start mx-3 mb-2 px-4 text-sm",onClick:o,children:[(0,be.jsx)($a.A,{className:"h-4 w-4 mr-2 rotate-180"}),"Back to Editor"]}),c&&(0,be.jsx)("div",{className:"px-3 pt-2 pb-4",children:(0,be.jsxs)("div",{className:Be("relative flex items-center",h?"ring-2 ring-ring":""),children:[(0,be.jsx)(Lt.A,{className:"absolute left-3 h-4 w-4 text-muted-foreground"}),(0,be.jsx)("input",{type:"text",placeholder:"Search...",value:m,onChange:e=>u(e.target.value),className:Be("w-full py-2 pl-9 pr-3 bg-gray-100 rounded-lg text-sm","focus:outline-none transition-all","placeholder:text-muted-foreground","text-foreground"),onFocus:()=>x(!0),onBlur:()=>x(!1)})]})}),(0,be.jsx)("nav",{className:"flex-1 overflow-y-auto py-1 px-3 space-y-1 scrollbar-thin scrollbar-thumb-muted",children:s.map(((e,s)=>(0,be.jsx)(mi,{item:e,selected:t,onSelect:a,searchTerm:m},s)))})]})]})};var hi=t(58907),xi=t(27255),pi=t(80369),gi=t(98989);var fi=t(61741);const ji=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(fi.uB,{ref:s,className:Be("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a})}));ji.displayName=fi.uB.displayName;const bi=e=>{let{children:s,...t}=e;return(0,be.jsx)(jt,{...t,children:(0,be.jsx)(wt,{className:"overflow-hidden p-0 shadow-lg",children:(0,be.jsx)(ji,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:s})})})},vi=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,be.jsx)(Lt.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,be.jsx)(fi.uB.Input,{ref:s,className:Be("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]})}));vi.displayName=fi.uB.Input.displayName;const yi=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(fi.uB.List,{ref:s,className:Be("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a})}));yi.displayName=fi.uB.List.displayName;const Ni=Y.forwardRef(((e,s)=>(0,be.jsx)(fi.uB.Empty,{ref:s,className:"py-6 text-center text-sm",...e})));Ni.displayName=fi.uB.Empty.displayName;const wi=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(fi.uB.Group,{ref:s,className:Be("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a})}));wi.displayName=fi.uB.Group.displayName;const Ci=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(fi.uB.Separator,{ref:s,className:Be("-mx-1 h-px bg-border",t),...a})}));Ci.displayName=fi.uB.Separator.displayName;const Si=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(fi.uB.Item,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...a})}));Si.displayName=fi.uB.Item.displayName;const ki=e=>{let{className:s,...t}=e;return(0,be.jsx)("span",{className:Be("ml-auto text-xs tracking-widest text-muted-foreground",s),...t})};ki.displayName="CommandShortcut";const Ai=e=>{let{value:s,onChange:t,options:a,isMulti:r,placeholder:n,optionsNames:i=null}=e;const l=a.map(((e,s)=>null==e?{label:(null==i?void 0:i[s])||"null",value:null}:"object"==typeof e?{label:e.label||i[s],value:e.value}:{label:i?i[s]:e,value:e}));let o=[];if(s)if(r)o=s.map((e=>l.find((s=>s.value===e)))).filter(Boolean);else{const e=l.find((e=>e.value===s));e&&(o=[e])}const c=e=>{const s=o.filter((s=>s.value!==e.value));t(s.map((e=>e.value)))};var d;return r?(0,be.jsxs)(ji,{className:"border rounded-md",children:[(0,be.jsx)("div",{className:"flex gap-1 flex-wrap p-2",children:null===(d=o)||void 0===d?void 0:d.map((e=>(0,be.jsxs)(Os,{variant:"secondary",className:"max-w-[200px]",children:[(0,be.jsx)("span",{className:"truncate",children:e.label}),(0,be.jsx)("button",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:s=>{"Enter"===s.key&&c(e)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>c(e),children:(0,be.jsx)(He.A,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e.value)))}),(0,be.jsx)(vi,{placeholder:n||"Search...",className:"border-none focus:ring-0"}),(0,be.jsx)(wi,{className:"max-h-[200px] overflow-auto",children:0===(null==l?void 0:l.length)?(0,be.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No options available"}):null==l?void 0:l.map((e=>{var s;return(0,be.jsx)("div",{className:"cursor-pointer px-2 py-1.5 "+(null!==(s=o)&&void 0!==s&&s.some((s=>s.value===e.value))?"bg-muted":""),onClick:()=>(e=>{if(r){const s=o.some((s=>s.value===e.value))?o.filter((s=>s.value!==e.value)):[...o,e];t(s.map((e=>e.value)))}else t(e.value)})(e),children:e.label},e.value)}))})]}):(0,be.jsxs)(bs,{value:null==s?void 0:s.toString(),onValueChange:e=>t(e),children:[(0,be.jsx)(Ns,{children:(0,be.jsx)(ys,{placeholder:n})}),(0,be.jsx)(Ss,{children:(0,be.jsx)(vs,{children:0===l.length?(0,be.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No options available"}):l.map((e=>{var s;return(0,be.jsx)(As,{value:(null===(s=e.value)||void 0===s?void 0:s.toString())||null,children:e.label},e.value||"null")}))})})]})};function _i(e){let{value:s,onChange:t,name:a,itemSchema:r,isMulti:n=!1}=e;const{getEntitiesSDK:i}=xa(),[l,o]=(0,Y.useState)([]),[c,d]=(0,Y.useState)(!1),m=i();return(0,Y.useEffect)((()=>{d(!0);const e=r.$ref.split("/");if(4!==e.length||""!==e[0]||"entities"!==e[1]||"id"!==e[3])throw new Error(`Error in ${a} field. Invalid $ref format: ${r.$ref}. should be like /entities/EntityName/id`);const s=e[2];m[s].list().then((e=>{o(e.map((e=>{const t=m[s].schema();let a="id";for(const s in t.properties)if(s.toLowerCase().includes("name")||s.toLowerCase().includes("title")){a=s;break}return{label:e[a],value:e.id}}))),d(!1)}))}),[r.$ref]),c?(0,be.jsx)("div",{children:"Loading..."}):(0,be.jsx)(Ai,{options:l,onChange:t,isMulti:n,value:s})}var Ti=t(53938);function Ei(e){let{className:s,classNames:t,showOutsideDays:a=!0,...r}=e;return(0,be.jsx)(Ti.hv,{showOutsideDays:a,className:Be("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Be(Ke({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Be(Ke({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...s}=e;return(0,be.jsx)(Xs.A,{className:"h-4 w-4"})},IconRight:e=>{let{...s}=e;return(0,be.jsx)($a.A,{className:"h-4 w-4"})}},...r})}Ei.displayName="Calendar";var Ii=t(32264),Pi=t(78237);const Ri=Pi.bL,Oi=Pi.l9,Di=Y.forwardRef(((e,s)=>{let{className:t,align:a="center",sideOffset:r=4,...n}=e;return(0,be.jsx)(Pi.ZL,{children:(0,be.jsx)(Pi.UC,{ref:s,align:a,sideOffset:r,className:Be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})}));function Li(e){let{value:s,onChange:t,format:a="date",className:r}=e;const n=(e,s)=>{if(s){const[t,a]=s.split(":");e.setHours(parseInt(t)),e.setMinutes(parseInt(a))}t(e)};let i=s;return i=null==s||""===s?null:new Date(s),(0,be.jsxs)(Ri,{children:[(0,be.jsx)(Oi,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",className:Be("w-full justify-start text-left font-normal",!i&&"text-muted-foreground",r),children:[(0,be.jsx)(Hs.A,{className:"mr-2 h-4 w-4"}),i?"date"===a?(0,Ii.GP)(i,"PPP"):"date-time"===a?(0,Ii.GP)(i,"PPP HH:mm:ss"):(0,Ii.GP)(i,"HH:mm:ss"):(0,be.jsx)("span",{children:"Pick a date"})]})}),(0,be.jsx)(Di,{className:"w-auto p-0",style:{zIndex:9999,position:"relative",isolation:"isolate",pointerEvents:"auto"},onInteractOutside:e=>{e.target.closest('[role="dialog"]')&&e.preventDefault()},forceMount:!0,children:(0,be.jsxs)("div",{className:"p-3 bg-popover shadow-lg rounded-md border",style:{pointerEvents:"auto"},children:[(0,be.jsx)(Ei,{mode:"single",selected:i,onSelect:e=>n(e),initialFocus:!0,className:"pointer-events-auto"}),("date-time"===a||"time"===a)&&(0,be.jsx)("input",{type:"time",className:"mt-3 w-full px-3 py-2 border rounded pointer-events-auto",value:i?(0,Ii.GP)(i,"HH:mm"):"",onChange:e=>n(i||new Date,e.target.value)})]})})]})}Di.displayName=Pi.UC.displayName;var Ui=t(77834);function $i(e){let{value:s,onChange:t,isMulti:a}=e;const[r,n]=(0,Y.useState)([]),[i,l]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{if(s){n((a?s:[s]).map((e=>({name:e.split("/").pop(),url:e}))))}}),[s,a]);const o=(0,Y.useCallback)((async e=>{l(!0);try{const s=await Promise.all(e.map((async e=>{const s=await Ie.uploadFile(e);return{name:e.name,url:s.url}})));n((e=>{const t=a?[...e,...s]:s;return c(t),t}))}catch(s){}finally{l(!1)}}),[a,t]),c=e=>{t(a?e.map((e=>e.url)):e.length>0?e[0].url:null)};return(0,be.jsxs)("div",{className:"w-full",children:[(0,be.jsxs)("div",{className:Be("flex items-center justify-center w-full rounded-lg border border-dashed","border-muted-foreground/25 hover:border-primary transition-colors","p-4 cursor-pointer"),onClick:()=>{var e;return null===(e=document.getElementById("fileInput"))||void 0===e?void 0:e.click()},children:[i?(0,be.jsx)("div",{className:"loading loading-spinner"}):(0,be.jsx)(Ui.A,{className:"h-5 w-5 text-muted-foreground"}),(0,be.jsx)("input",{id:"fileInput",type:"file",multiple:a,className:"hidden",onChange:e=>o(Array.from(e.target.files||[])),disabled:i})]}),r.length>0&&(0,be.jsx)("div",{className:"mt-2 space-y-1",children:r.map(((e,s)=>(0,be.jsxs)("div",{className:"flex items-center justify-between bg-muted/50 p-1 rounded",children:[(0,be.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs hover:underline truncate",children:e.name}),(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:()=>{return s=e,void n((e=>{const t=e.filter((e=>e!==s));return c(t),t}));var s},className:"h-4 w-4 p-0",children:(0,be.jsx)(He.A,{className:"h-3 w-3"})})]},s)))})]})}const Mi=e=>{let{value:s,onChange:t}=e;return(0,be.jsx)(Nn,{checked:s,onCheckedChange:t})},Fi=e=>{let{value:s,onChange:t}=e;const[a,r]=(0,Y.useState)("");return(0,be.jsxs)("div",{className:"flex flex-wrap items-center border rounded-md p-1",children:[s&&s.map(((e,a)=>(0,be.jsxs)("span",{className:"bg-gray-200 rounded-md px-2 py-1 m-1 flex items-center",children:[e,(0,be.jsx)("button",{type:"button",onClick:()=>(e=>{const a=s.filter(((s,t)=>t!==e));t(a)})(a),className:"ml-1 text-gray-500 hover:text-gray-700 focus:outline-none",children:"\xd7"})]},a))),(0,be.jsx)("input",{type:"text",value:a,onChange:e=>{r(e.target.value)},onKeyDown:e=>{if("Enter"===e.key&&a.trim()){e.preventDefault();const n=[...s||[],a.trim()];t(n),r("")}else if("Backspace"===e.key&&!a&&s&&s.length>0){const e=s.slice(0,-1);t(e)}},className:"flex-grow outline-none px-2 py-1",placeholder:"enter values..."})]})};function zi(e){if(void 0!==e.default)return e.default;switch(e.type){case"string":return"";case"number":return 0;case"boolean":return!1;default:return null}}function Bi(e){let{path:s,schema:t,value:a,setValueAt:r,getValueAt:n,uiSchema:i,validationErrors:l}=e;const o=a||[];if("string"===t.items.type&&!t.items.$ref&&!t.items.enum&&!t.items.format)return(0,be.jsx)(Fi,{value:o,onChange:e=>r(s,e)});if("string"===t.items.type&&t.items.enum)return(0,be.jsx)(Ai,{options:t.items.enum,isMulti:!0,value:o,onChange:e=>r(s,e),optionsNames:t.items.enumNames});if("string"===t.items.type&&"file"===t.items.format)return(0,be.jsx)($i,{value:o,onChange:e=>r(s,e),isMulti:!0});if(t.items.$ref)return(0,be.jsx)(_i,{value:o,onChange:e=>r(s,e),name:s[s.length-1],itemSchema:t.items,isMulti:!0});const c=t.items.default||"object"===t.items.type?{}:null;if(!t.hasOwnProperty("items"))throw new Error(`Error in json schema for array: items is required. path: ${s.join(".")}`);return(0,be.jsxs)("div",{className:"space-y-4 ps-4 border-s-2 border-gray-200",children:[o.map(((e,a)=>(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("button",{className:"absolute top-0 right-0 p-1 text-gray-500 hover:text-gray-700",onClick:()=>(e=>{const t=[...o];t.splice(e,1),r(s,t)})(a),children:(0,be.jsx)(He.A,{size:16})}),(0,be.jsx)(Wi,{path:[...s,a],value:e,schema:t.items,setValueAt:r,getValueAt:n,uiSchema:i,validationErrors:l[a]||{}},a)]},a))),(0,be.jsx)("div",{className:"mt-2",children:(0,be.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),r([...s,o.length],c)},className:"btn btn-outline btn-sm",children:[(0,be.jsx)(aa.A,{size:16})," Add Item"]})})]})}function qi(e){let{path:s,schema:t,value:a,setValueAt:r,getValueAt:n,uiSchema:i,validationErrors:l,suppressLabel:o}=e;const c=a||{},[d,m]=Y.useState(""),[u,h]=Y.useState(zi(t.additionalProperties));return(0,be.jsxs)("div",{className:"space-y-2 ps-4 border-s-2 border-gray-200",children:[Object.entries(c).map((e=>{let[a,o]=e;return(0,be.jsx)("div",{children:(0,be.jsxs)("div",{className:"flex items-center gap-4 mb-1",children:[(0,be.jsx)("div",{className:"flex-1 mt-4",children:(0,be.jsx)(is,{type:"text",value:a,disabled:!0,className:"bg-gray-50"})}),(0,be.jsx)("div",{className:"flex-1",children:(0,be.jsx)(Wi,{path:[...s,a],value:o,schema:t.additionalProperties,setValueAt:r,getValueAt:n,uiSchema:i,validationErrors:l[a]||{},suppressLabel:!0})}),(0,be.jsx)("button",{className:"mt-4 p-1 text-gray-500 hover:text-gray-700",onClick:()=>(e=>{const t={...c};delete t[e],r(s,t)})(a),"aria-label":"Remove",children:(0,be.jsx)(He.A,{size:16})})]})},a)})),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center gap-4",children:[(0,be.jsx)("div",{className:"flex-1 mt-4",children:(0,be.jsx)(is,{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Key",className:"flex-1"})}),(0,be.jsx)("div",{className:"flex-1",children:(0,be.jsx)(Wi,{path:[...s,"new"],value:u,schema:t.additionalProperties,setValueAt:(e,s)=>h(s),getValueAt:()=>u,uiSchema:i,validationErrors:{},suppressLabel:!0})})]}),(0,be.jsx)("div",{className:"mt-2 flex",children:(0,be.jsx)("button",{type:"button",onClick:e=>{if(e.preventDefault(),!d)return;const a={...c};a[d]=u,r(s,a),m(""),h(zi(t.additionalProperties))},className:"btn btn-outline btn-sm",children:"+ Add"})})]})]})}function Wi(e){let{path:s,getValueAt:t,setValueAt:a,schema:r,uiSchema:n,validationErrors:i,suppressLabel:l}=e;if("hidden"===n["ui:widget"])return(0,be.jsx)(be.Fragment,{});if(!r)throw new Error(`Error in json schema: schema for the property is required. property path: ${s.join(".")}`);const o=void 0===t(s)?r.default||null:t(s);let c;if(!l)if(n["ui:title"])c=n["ui:title"];else if(r.title)c=r.title;else{const e=s[s.length-1];c="number"==typeof e?void 0:e}return(0,be.jsxs)("div",{className:"mt-4",children:[c&&(0,be.jsxs)("div",{className:"mb-2",children:[(0,be.jsx)("label",{htmlFor:s.join("__"),className:"text-sm font-medium text-gray-900",children:c}),r.description&&(0,be.jsx)("p",{className:"text-sm text-gray-500",children:r.description})]}),(()=>{if(X().isFunction(n["ui:widget"]))return n["ui:widget"]({value:o,onChange:e=>a(s,e),getValueAt:t,setValueAt:a,schema:r,uiSchema:n,path:s});if(r.enum&&"array"!==r.type&&"object"!==r.type)return(0,be.jsx)(Ai,{options:r.enum,optionsNames:r.enumNames,value:o,onChange:e=>a(s,e)});if(r.$ref)return(0,be.jsx)(_i,{value:o,onChange:e=>a(s,e),name:s[s.length-1],itemSchema:r});if("string"===r.type)return"date"===r.format||"date-time"===r.format||"time"===r.format?(0,be.jsx)(Li,{format:r.format,value:o,onChange:e=>a(s,e)}):"file"===r.format?(0,be.jsx)($i,{value:o,onChange:e=>a(s,e)}):"textarea"===n["ui:widget"]?(0,be.jsx)(Na,{value:o||"",onChange:e=>a(s,e.target.value)}):(0,be.jsx)(is,{type:"text",value:o||"",onChange:e=>a(s,e.target.value)});if("number"===r.type||"integer"===r.type)return(0,be.jsx)(is,{type:"number",value:o||"",onChange:e=>a(s,parseFloat(e.target.value)),min:r.minimum,max:r.maximum,step:"integer"===r.type?1:"any"});if("boolean"===r.type)return(0,be.jsx)(Mi,{value:o,onChange:e=>a(s,e)});if("array"===r.type)return(0,be.jsx)(Bi,{path:s,schema:r,value:o,setValueAt:a,getValueAt:t,uiSchema:n.hasOwnProperty("items")?n.items:n,validationErrors:i});if("object"===r.type){if(r.additionalProperties)return(0,be.jsx)(qi,{path:s,schema:r,value:o,setValueAt:a,getValueAt:t,uiSchema:n,validationErrors:i,suppressLabel:l});if(!r.properties)throw new Error(`Error in json schema: properties is required for object type. property path: ${s.join(".")}. if you need the user to insert a flexible object, JsonSchemaFrom might not be the right choice`);return(0,be.jsx)("div",{className:"space-y-4 ps-4 border-s-2 border-gray-200",children:Object.entries(r.properties).map((e=>{let[r,l]=e;return(0,be.jsx)(Wi,{path:[...s,r],getValueAt:t,setValueAt:a,schema:l,uiSchema:n[r]||{},validationErrors:i[r]||{}},r)}))})}})(),i&&X().isString(i)&&(0,be.jsx)("div",{style:{color:"red"},children:i})]})}function Yi(e,s,t){if(0===s.length)return t;const[a,...r]=s,n=X().isNumber(r[0]),i=X().isArray(e)?[...e]:{...e};return 0===r.length?i[a]=t:i[a]=Yi(n?i[a]||[]:i[a]||{},r,t),i}function Gi(e,s){if(X().isNil(e)||0===s.length)return e;const[t,...a]=s;return 0===a.length?e[t]:Gi(e[t],a)}const Hi=e=>{let{schema:s,onChange:t,onSubmit:a,initialValues:r,uiSchema:n}=e;const[i,l]=(0,Y.useState)(r||{}),[o,c]=(0,Y.useState)({});if(!s||X().isEmpty(s)||X().isEmpty(s.properties))throw new Error("Error In JsonSchemaForm: valid json schema is required, but got: "+JSON.stringify(s));const d=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a={};if("object"===e.type&&e.properties){Object.entries(e.properties).forEach((e=>{let[r,n]=e;const i=[...t,r],l=d(n,s,i);X().isEmpty(l)||(a[r]=l)}));const r=function(e){if(!e||(0,Z.isEmpty)(e))throw new Error("JSON Schema error is required, got: "+JSON.stringify(e));if((0,Z.isEmpty)(e.properties))throw new Error("JSON Schema error: properties are required in schema, got schema: "+JSON.stringify(e));return e.required||[]}(e)||[];r.forEach((r=>{const i=[...t,r],l=Gi(s,i)||e.properties[r].default,o=Gi(n,i),c="hidden"===(null==o?void 0:o["ui:widget"]);"boolean"===e.properties[r].type||null!=l&&""!==l||c||(a[r]="This field is required")}))}else if("array"===e.type&&e.items){(Gi(s,t)||[]).forEach(((r,n)=>{const i=[...t,n],l=d(e.items,s,i);X().isEmpty(l)||(a[n]=l)}))}return a},m=(e,s)=>{const a=Yi(i,e,s);l(a),t&&t(a)};if(X().isFunction(n)&&(n=n(i)),n&&"object"==typeof n){const e={};Object.entries(n).forEach((s=>{let[t,a]=s;const r=t.split(".");let n=e;for(let e=0;e<r.length-1;e++)n[r[e]]||(n[r[e]]={}),n=n[r[e]];n[r[r.length-1]]=a})),n=e}return(0,be.jsxs)("form",{className:"pt-4",children:[Object.entries(s.properties).map((e=>{let[s,t]=e;return(0,be.jsx)(Wi,{path:[s],value:i[s],setValueAt:m,getValueAt:e=>Gi(i,e),schema:t,uiSchema:(n||{})[s]||{},validationErrors:o[s]||{}},s)})),a&&(0,be.jsx)("div",{className:"mt-4",children:(0,be.jsx)(Ze,{onClick:e=>{e.preventDefault();(()=>{const e=d(s,i);return c(e),X().isEmpty(e)})()?a(i):(0,Rt.toast)("some fields are required: "+Object.keys(o).join(", "))},children:"Submit"})})]})},Vi=Hi,Ji=e=>{let{isOpen:s,onClose:t,title:a,children:r}=e;return s?(0,be.jsx)("div",{className:"modal modal-open",children:(0,be.jsxs)("div",{className:"modal-box",children:[(0,be.jsx)("h3",{className:"font-bold text-lg",children:a}),(0,be.jsx)("div",{className:"py-4",children:r}),(0,be.jsx)("div",{className:"modal-action",children:(0,be.jsx)("button",{className:"btn",onClick:t,children:"Close"})})]})}):null},Ki={type:"object",properties:{title:{type:"string",title:"Title",default:""},description:{type:"string",title:"Description",default:null},type:{type:"string",title:"Type",default:"string",enum:["string","number","boolean","object","array","binary"]}}};function Zi(e){let s=X().cloneDeep(Ki);return"array"===e.type&&(e.items?s.properties.items=Zi(e.items):s.properties.items=X().cloneDeep(Ki)),"string"===e.type&&(s.properties.format={type:"string",title:"Format",default:null,enum:["date","email","file","uri","date-time","ipv4","ipv6","regex"]},"file"!==e.format&&(s.properties.enum={type:"array",title:"Enum",default:null,items:{type:"string"}})),e.type,s}function Xi(e){let{value:s,onSubmit:t}=e;const[a,r]=(0,Y.useState)(s),n=Zi(a);return(0,be.jsx)(Vi,{schema:n,initialValues:a,onChange:e=>{r(e)},onSubmit:t})}var Qi=t(388),el=t(59807),sl=t(81807),tl=t(78541),al=t(14754);function rl(e,s){if(s.$ref)return(0,be.jsx)(Da.A,{size:16});switch(e){case"array":return(0,be.jsx)(Ft.A,{size:16});case"date-time":case"date":return(0,be.jsx)(Hs.A,{size:16});case"email":return(0,be.jsx)(Qi.A,{size:16});case"uri":case"url":return(0,be.jsx)(el.A,{size:16});case"number":return(0,be.jsx)(sl.A,{size:16});case"boolean":return(0,be.jsx)(tl.A,{size:16});case"object":return(0,be.jsx)(al.A,{size:16});default:return(0,be.jsx)(Js.A,{size:16})}}function nl(e){let{name:s,prop:t,schema:a,onEdit:r}=e;const n=Object.entries(t).filter((e=>{let[s]=e;return!["type","description","default","title","format","$ref","enum","items","properties","required"].includes(s)})),i=function(e){if("array"===e.type)return"array";if("string"===e.type){if("date-time"===e.format)return"date-time";if("date"===e.format)return"date";if("email"===e.format)return"email";if("uri"===e.format)return"uri";if("url"===e.format)return"url";if(e.$ref){const s=e.$ref.split("/");return s[s.length-2]}return"text"}return e.type}(t);return(0,be.jsx)("li",{className:"py-4",children:(0,be.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,be.jsx)("div",{className:"flex items-center justify-between",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("h5",{className:"font-semibold text-gray-900 me-2",children:t.title||s}),"  ("," ",rl(i,t),(0,be.jsx)("span",{className:"ml-1",children:i}),a.required&&a.required.includes(s)&&(0,be.jsx)("span",{className:"ml-2",children:", required"}),")"]})}),t.description&&(0,be.jsx)("p",{className:"text-sm text-gray-700",children:t.description}),void 0!==t.default&&(0,be.jsxs)("div",{className:"text-sm",children:[(0,be.jsx)("span",{className:"font-medium",children:"Default:"})," ",JSON.stringify(t.default)]}),t.enum&&(0,be.jsxs)("div",{className:"text-sm",children:[(0,be.jsx)("span",{className:"font-medium",children:"Options:"})," ",t.enum.join(", ")]}),t.items&&(0,be.jsx)("div",{className:"ps-6 border-s-4 border-gray-300",children:(0,be.jsx)(il,{schema:t.items})}),t.properties&&(0,be.jsx)("div",{className:"ps-6 border-s-4 border-gray-300",children:(0,be.jsx)(il,{schema:t})}),n.length>0&&(0,be.jsxs)("div",{className:"mt-2",children:[(0,be.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Additional Properties:"}),(0,be.jsx)("ul",{className:"mt-1 space-y-1",children:n.map((e=>{let[s,t]=e;return(0,be.jsxs)("li",{className:"text-sm text-gray-600",children:[(0,be.jsxs)("span",{className:"font-medium",children:[s,":"]})," ",JSON.stringify(t)]},s)}))})]})]})},s)}function il(e){let{schema:s,onEdit:t}=e;const[a,r]=(0,Y.useState)(null),n=(e,s)=>{r({name:e,prop:s})};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("ul",{className:"ps-4 border-s-4 border-gray-300",children:Object.entries(s.properties||{}).map((e=>{let[a,r]=e;return(0,be.jsx)(nl,{name:a,prop:r,schema:s,onEdit:t?n:null},a)}))}),a&&(0,be.jsx)(Ji,{isOpen:!!a,onClose:()=>{r(null)},title:`Edit ${a.name}`,children:(0,be.jsx)(Xi,{value:a.prop,onSubmit:e=>{t&&t(a.name,e),r(null)}})})]})}const ll=ft.Root,ol=ft.Trigger,cl=ft.Close,dl=ft.Portal,ml=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ft.Overlay,{className:Be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s})}));ml.displayName=ft.Overlay.displayName;const ul=(0,Me.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),hl=Y.forwardRef(((e,s)=>{let{side:t="right",className:a,children:r,...n}=e;return(0,be.jsxs)(dl,{children:[(0,be.jsx)(ml,{}),(0,be.jsxs)(ft.Content,{ref:s,className:Be(ul({side:t}),a),...n,children:[r,(0,be.jsxs)(ft.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,be.jsx)(He.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));hl.displayName=ft.Content.displayName;const xl=e=>{let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("flex flex-col space-y-2 text-center sm:text-left",s),...t})};xl.displayName="SheetHeader";const pl=e=>{let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};pl.displayName="SheetFooter";const gl=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ft.Title,{ref:s,className:Be("text-lg font-semibold text-foreground",t),...a})}));gl.displayName=ft.Title.displayName;const fl=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(ft.Description,{ref:s,className:Be("text-sm text-muted-foreground",t),...a})}));function jl(e){let{entity:s}=e;const{app:t,updateApp:a}=xa();return(0,be.jsx)(il,{schema:s,onEdit:(e,r)=>{s.properties[e]=r,t.entities[s.name]=s,a({entities:t.entities})}})}fl.displayName=ft.Description.displayName;const bl=function(e){let{entity:s}=e;const{app:t,getEntitiesSDK:a}=xa(),{toast:r}=qn(),[n,i]=(0,Y.useState)([]),[l,o]=(0,Y.useState)(!0),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(null),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(!1),[b,v]=(0,Y.useState)(!1),y=a(),N=async()=>{o(!0);try{const e=await y[s.name].list();i(e)}catch(e){r({title:"Error",description:"Failed to load records",variant:"destructive"})}finally{o(!1)}};return(0,Y.useEffect)((()=>{N()}),[s]),(0,be.jsxs)("div",{className:"p-4 max-w-[1200px] mx-auto",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-2xl font-bold",children:s.name}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:s.description})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsxs)(Ze,{size:"sm",onClick:()=>{x(null),d(!0)},children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Add"]}),(0,be.jsx)(is,{type:"file",accept:".csv",className:"hidden",id:"csv-upload",onChange:async e=>{const t=e.target.files[0];if(t){g(!0);try{const e=await y[s.name].importEntities(t);"success"===e.status&&(r({title:"Import Successful",description:`Successfully imported ${e.n_entities_created} ${s.name} records`}),N())}catch(i){var a,n;r({title:"Import Failed",description:(null===(a=i.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||i.message,variant:"destructive"})}finally{g(!1),e.target.value=""}}},disabled:p}),(0,be.jsxs)(Ma,{children:[(0,be.jsx)(Fa,{asChild:!0,children:(0,be.jsxs)(Ze,{size:"sm",variant:"outline",children:[(0,be.jsx)(qt.A,{className:"h-4 w-4"}),"Actions"]})}),(0,be.jsxs)(Ha,{align:"end",children:[(0,be.jsxs)(Va,{onClick:()=>document.getElementById("csv-upload").click(),disabled:p,children:[p?(0,be.jsx)(Ae.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,be.jsx)(hi.A,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,be.jsxs)(Va,{onClick:async()=>{j(!0);try{const e=await y[s.name].list(),t=Object.keys(e[0]||{}),a=[t.join(","),...Object.values(e).map((e=>t.map((s=>{const t=e[s],a="object"==typeof t?JSON.stringify(t).replace(/"/g,'""'):t;return`"${String(a).replace(/"/g,'""')}"`})).join(",")))],n=a.join("\n"),i=new Blob([n],{type:"text/csv"}),l=window.URL.createObjectURL(i),o=document.createElement("a");o.href=l,o.download=`${s.name}_export.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l),r({title:"Export Successful",description:"Successfully exported entities to CSV"})}catch(a){var e,t;r({title:"Export Failed",description:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message,variant:"destructive"})}finally{j(!1)}},disabled:f,children:[f?(0,be.jsx)(Ae.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,be.jsx)(xi.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,be.jsxs)(Va,{onClick:()=>u(!0),children:[(0,be.jsx)(pi.A,{className:"h-4 w-4 mr-2"}),"Schema"]}),(0,be.jsxs)(Va,{onClick:async()=>{if(window.confirm("Are you sure you want to delete all records? This cannot be undone.")){v(!0);try{await y[s.name].deleteMany({}),i([]),r({title:"Success",description:"All records deleted successfully"})}catch(a){var e,t;r({title:"Error",description:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message,variant:"destructive"})}finally{v(!1)}}},disabled:b||0===n.length,className:"text-red-500 hover:text-red-600 focus:text-red-600",children:[b?(0,be.jsx)(Ae.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,be.jsx)(gi.A,{className:"h-4 w-4 mr-2"}),"Delete All"]})]})]})]})]}),(0,be.jsx)("div",{className:"border rounded-md",children:(0,be.jsx)(Cn,{className:"h-[600px]",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[Object.keys(s.properties).map((e=>(0,be.jsx)(Jt,{className:"text-xs whitespace-nowrap",children:s.properties[e].title||e},e))),(0,be.jsx)(Jt,{className:"text-xs",children:"Actions"})]})}),(0,be.jsx)(Gt,{children:l?(0,be.jsx)(Vt,{children:(0,be.jsxs)(Kt,{colSpan:Object.keys(s.properties).length+1,className:"text-center py-4",children:[(0,be.jsx)(Ae.A,{className:"h-6 w-6 animate-spin mx-auto"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading records..."})]})}):0===n.length?(0,be.jsx)(Vt,{children:(0,be.jsxs)(Kt,{colSpan:Object.keys(s.properties).length+1,className:"text-center py-8",children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"No records found"}),(0,be.jsxs)(Ze,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{x(null),d(!0)},children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Add your first record"]})]})}):n.map((e=>(0,be.jsxs)(Vt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>{x(e),d(!0)},children:[Object.keys(s.properties).map((s=>(0,be.jsx)(Kt,{className:"text-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"200px"},children:"object"==typeof e[s]?JSON.stringify(e[s]):String(e[s]||"")},s))),(0,be.jsx)(Kt,{className:"whitespace-nowrap",children:(0,be.jsx)("div",{className:"flex gap-1",children:(0,be.jsx)(Ze,{size:"xs",variant:"ghost",onClick:t=>{t.stopPropagation(),(async e=>{try{await y[s.name].delete(e.id),i(n.filter((s=>s.id!==e.id))),r({title:"Success",description:"Item deleted successfully"})}catch(l){var t,a;r({title:"Error",description:(null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||l.message,variant:"destructive"})}})(e)},className:"text-red-500 hover:text-red-600",children:(0,be.jsx)(gi.A,{className:"h-3 w-3"})})})})]},e.id)))})]})})}),(0,be.jsx)(ll,{open:c,onOpenChange:d,children:(0,be.jsxs)(hl,{className:"w-[400px] overflow-y-auto",children:[(0,be.jsx)(xl,{children:(0,be.jsx)(gl,{children:h?`Edit ${s.name}`:`Add New ${s.name}`})}),(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)(Vi,{schema:s,onSubmit:h?async e=>{try{const t=await y[s.name].update(h.id,e);i(n.map((e=>e.id===h.id?t:e))),d(!1),x(null),r({title:"Success",description:"Item updated successfully"})}catch(l){var t,a;r({title:"Error",description:(null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||l.message,variant:"destructive"})}}:async e=>{try{const t=await y[s.name].create(e);i([...n,t]),d(!1),r({title:"Success",description:"New item created successfully"})}catch(l){var t,a;r({title:"Error",description:(null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||l.message,variant:"destructive"})}},initialValues:h})})]})}),(0,be.jsx)(ll,{open:m,onOpenChange:u,children:(0,be.jsxs)(hl,{className:"w-[600px] overflow-y-auto",children:[(0,be.jsx)(xl,{children:(0,be.jsx)(gl,{children:"Schema Editor"})}),(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)(jl,{entity:s})})]})})]})},vl=e=>{let{isVisible:s,onCancel:t,onInviteSuccess:a}=e;const{user:r}=Ne(),{app:n}=xa(),{toast:i}=or(),[l,o]=(0,Y.useState)(""),[c,d]=(0,Y.useState)("user"),[m,u]=(0,Y.useState)(""),[h,x]=(0,Y.useState)(!1),p=`https://app--${n.slug}.base44.app`,g="free"===(null==r?void 0:r.subscription_tier);return(0,be.jsx)(jt,{open:s,onOpenChange:t,children:(0,be.jsxs)(wt,{className:"sm:max-w-[520px] p-0 overflow-hidden",children:[(0,be.jsx)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100/50 px-6 py-8",children:(0,be.jsx)(Ct,{className:"space-y-3",children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-2 bg-orange-100 rounded-xl",children:(0,be.jsx)(_t.A,{className:"w-5 h-5 text-orange-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)(kt,{className:"text-2xl font-semibold text-slate-900",children:"Share Your App"}),(0,be.jsxs)(At,{className:"text-slate-600 mt-1",children:["Give others access to ",n.name]})]})]})})}),(0,be.jsxs)("div",{className:"px-6 pb-6 space-y-8",children:[(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,be.jsx)(Zs.A,{className:"w-4 h-4 text-slate-500"}),(0,be.jsx)("h3",{className:"font-medium text-slate-900",children:"Public Access"})]}),(0,be.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,be.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Share URL"}),(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(p),i({title:"URL Copied",description:"App URL has been copied to clipboard"})},className:"h-8 px-3 text-xs text-slate-600 hover:text-orange-600 hover:bg-orange-50",children:[(0,be.jsx)(Ot.A,{className:"h-3 w-3 mr-1.5"}),"Copy"]})]}),(0,be.jsx)(is,{readOnly:!0,value:p,className:"bg-white border-slate-200 font-mono text-sm text-slate-600 focus:ring-orange-500 focus:border-orange-500"}),(0,be.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Anyone with this link can access your app"})]})]}),(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,be.jsx)(Bs,{className:"w-full"})}),(0,be.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,be.jsx)("span",{className:"bg-white px-3 text-slate-500 font-medium",children:"or"})})]}),(0,be.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u(""),l){x(!0);try{await we.inviteUser(n.id,l,c),i({title:"Success",description:"Invitation sent successfully"}),a(),t()}catch(m){var s,r;const t=(null===(s=m.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.detail)||m.message||"Failed to send invitation";u(t)}finally{x(!1)}}else u("Please enter an email address")},className:"space-y-6",children:[(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,be.jsx)(Qi.A,{className:"w-4 h-4 text-slate-500"}),(0,be.jsx)("h3",{className:"font-medium text-slate-900",children:"Send Invitation"})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"email",className:"text-sm font-medium text-slate-700",children:"Email address"}),(0,be.jsx)(is,{id:"email",type:"email",placeholder:"colleague@company.com",value:l,onChange:e=>o(e.target.value),className:"h-11 border-slate-200 focus:ring-orange-500 focus:border-orange-500"})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"role",className:"text-sm font-medium text-slate-700",children:"Access level"}),(0,be.jsxs)(bs,{value:c,onValueChange:d,children:[(0,be.jsx)(Ns,{id:"role",className:"h-11 border-slate-200 focus:ring-orange-500 focus:border-orange-500",children:(0,be.jsx)(ys,{placeholder:"Select access level"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"user",className:"py-3",children:(0,be.jsxs)("div",{className:"flex flex-col",children:[(0,be.jsx)("span",{className:"font-medium",children:"User"}),(0,be.jsx)("span",{className:"text-xs text-slate-500",children:"Can use the app"})]})}),(0,be.jsx)(As,{value:"admin",disabled:g,className:"py-3",children:(0,be.jsxs)("div",{className:"flex flex-col",children:[(0,be.jsx)("span",{className:"font-medium",children:"Admin"}),(0,be.jsxs)("span",{className:"text-xs text-slate-500",children:["Can manage users and settings ",g&&"\u2022 Paid plans only"]})]})})]})]}),g&&(0,be.jsxs)("div",{className:"flex items-start gap-3 mt-3 p-4 bg-gradient-to-r from-orange-50 to-orange-50/50 border border-orange-200 rounded-xl",children:[(0,be.jsx)("div",{className:"p-1 bg-orange-100 rounded-full",children:(0,be.jsx)(Te.A,{className:"h-3 w-3 text-orange-600"})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("p",{className:"text-sm text-orange-800 font-medium",children:"Admin access requires a paid plan"}),(0,be.jsx)(V.Link,{to:"/billing",className:"text-sm text-orange-600 hover:text-orange-700 font-medium hover:underline inline-flex items-center gap-1 mt-1",children:"Upgrade now \u2192"})]})]})]}),m&&(0,be.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,be.jsx)("div",{className:"p-1 bg-red-100 rounded-full",children:(0,be.jsx)(Te.A,{className:"h-3 w-3 text-red-600"})}),(0,be.jsx)("p",{className:"text-sm text-red-800 font-medium",children:m})]})]})]}),(0,be.jsxs)(St,{className:"gap-3 pt-2",children:[(0,be.jsx)(Ze,{variant:"outline",type:"button",onClick:t,className:"h-11 px-6 border-slate-200 text-slate-700 hover:bg-slate-50",children:"Cancel"}),(0,be.jsx)(Ze,{type:"submit",disabled:h,className:"h-11 px-6 bg-orange-600 hover:bg-orange-700 text-white font-medium",children:h?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Sending..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ue.A,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})})]})]})]})]})})};function yl(e){let{entity:s}=e;const{app:t,updateApp:a}=xa();return(0,be.jsx)(il,{schema:s,onEdit:(e,r)=>{s.properties[e]=r,t.user_entity=s,a({user_entity:t.user_entity})}})}function Nl(){const{user:e}=Ne(),{app:s,getEntitiesSDK:t}=xa(),{toast:a}=qn(),r=(0,J.Zp)(),[n,i]=(0,Y.useState)([]),[l,o]=(0,Y.useState)(!0),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(!1),[p,g]=(0,Y.useState)(null),f=t(),j=async()=>{o(!0);try{let e=await f.User.list();e=e.filter((e=>!e.email.includes("@base44.com"))),i(e)}catch(e){a({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{o(!1)}};(0,Y.useEffect)((()=>{j()}),[]);return(0,be.jsxs)("div",{className:"p-4 max-w-[1200px] mx-auto",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-2xl font-bold",children:"Users"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage users and their roles"})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsxs)(Ze,{size:"sm",onClick:()=>x(!0),children:[(0,be.jsx)(aa.A,{className:"h-4 w-4"}),"Invite User"]}),(0,be.jsxs)(Ze,{size:"sm",variant:"outline",onClick:()=>u(!0),children:[(0,be.jsx)(pi.A,{className:"h-4 w-4 mr-2"}),"Schema"]})]})]}),(0,be.jsx)("div",{className:"border rounded-md",children:(0,be.jsx)(Cn,{className:"h-[600px]",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[Object.keys(s.user_entity.properties).map((e=>(0,be.jsx)(Jt,{className:"text-xs whitespace-nowrap",children:s.user_entity.properties[e].title||e},e))),(0,be.jsx)(Jt,{className:"text-xs",children:"Actions"})]})}),(0,be.jsx)(Gt,{children:l?(0,be.jsx)(Vt,{children:(0,be.jsxs)(Kt,{colSpan:Object.keys(s.user_entity.properties).length+1,className:"text-center py-4",children:[(0,be.jsx)(Ae.A,{className:"h-6 w-6 animate-spin mx-auto"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading users..."})]})}):0===n.length?(0,be.jsx)(Vt,{children:(0,be.jsxs)(Kt,{colSpan:Object.keys(s.user_entity.properties).length+1,className:"text-center py-8",children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"No users found"}),(0,be.jsxs)(Ze,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>x(!0),children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Invite your first user"]})]})}):n.map((e=>(0,be.jsxs)(Vt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>{g(e),d(!0)},children:[Object.keys(s.user_entity.properties).map((s=>(0,be.jsx)(Kt,{className:"text-xs whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"200px"},children:"object"==typeof e[s]?JSON.stringify(e[s]):String(e[s]||"")},s))),(0,be.jsx)(Kt,{className:"whitespace-nowrap",children:(0,be.jsx)("div",{className:"flex gap-1",children:(0,be.jsx)(Ze,{size:"xs",variant:"ghost",onClick:s=>{s.stopPropagation(),(async e=>{try{await f.User.delete(e.id),i(n.filter((s=>s.id!==e.id))),a({title:"Success",description:"User removed successfully"})}catch(r){var s,t;a({title:"Error",description:(null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||r.message,variant:"destructive"})}})(e)},className:"text-red-500 hover:text-red-600",children:(0,be.jsx)(gi.A,{className:"h-3 w-3"})})})})]},e.id)))})]})})}),(0,be.jsx)(ll,{open:c,onOpenChange:d,children:(0,be.jsxs)(hl,{className:"w-[400px] overflow-y-auto",children:[(0,be.jsx)(xl,{children:(0,be.jsx)(gl,{children:"Edit User"})}),(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)(Vi,{schema:s.user_entity,onSubmit:async s=>{try{if("admin"===s.role&&"admin"!==p.role&&"free"===e.subscription_tier)return void a({title:"Subscription Required",description:(0,be.jsxs)("div",{children:["Only paying users can make other users admins.",(0,be.jsx)(Ze,{variant:"link",className:"p-0 h-auto font-semibold underline",onClick:()=>r("/billing"),children:"Upgrade your subscription"}),"to continue."]}),variant:"destructive"});const t=await f.User.update(p.id,s);i(n.map((e=>e.id===p.id?t:e))),d(!1),g(null),a({title:"Success",description:"User updated successfully"})}catch(o){var t,l;a({title:"Error",description:(null===(t=o.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||o.message,variant:"destructive"})}},initialValues:p,uiSchema:{email:{"ui:widget":"hidden"},full_name:{"ui:widget":"hidden"}}})})]})}),(0,be.jsx)(vl,{isVisible:h,onCancel:()=>x(!1),onInviteSuccess:j}),(0,be.jsx)(ll,{open:m,onOpenChange:u,children:(0,be.jsxs)(hl,{className:"w-[600px] overflow-y-auto",children:[(0,be.jsx)(xl,{children:(0,be.jsx)(gl,{children:"User Schema Editor"})}),(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)(yl,{entity:s.user_entity})})]})})]})}function wl(){const{app:e}=xa(),{toast:s}=qn(),[t,a]=(0,Y.useState)(!1),[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(e.logo_prompt||"A modern, minimalist logo for a business app");return(0,be.jsxs)("div",{className:"p-8 space-y-8",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"App Logo"}),(0,be.jsxs)("div",{className:"space-y-6",children:[e.logo_url&&(0,be.jsx)("div",{className:"flex justify-center",children:(0,be.jsx)(Ds,{className:"w-32 h-32 overflow-hidden",children:(0,be.jsx)("img",{src:e.logo_url,alt:"App Logo",className:"w-full h-full object-cover"})})}),(0,be.jsxs)(Ta,{defaultValue:"upload",className:"w-full",children:[(0,be.jsxs)(Ea,{className:"grid w-full grid-cols-2",children:[(0,be.jsx)(Ia,{value:"upload",children:"Upload Logo"}),(0,be.jsx)(Ia,{value:"generate",children:"Generate Logo"})]}),(0,be.jsxs)(Pa,{value:"upload",className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg p-8 hover:border-primary/50 transition-colors",children:[(0,be.jsx)("input",{type:"file",id:"logo-upload",className:"hidden",accept:"image/*",onChange:async t=>{const a=t.target.files[0];if(a)try{n(!0);const t=(await Ie.uploadFile(a)).url;await we.updateLogo(e.id,{logo_url:t}),s({title:"Success",description:"Logo uploaded successfully"})}catch(r){s({title:"Error",description:"Failed to upload logo",variant:"destructive"})}finally{n(!1)}}}),(0,be.jsxs)("label",{htmlFor:"logo-upload",className:"cursor-pointer text-center",children:[(0,be.jsx)(Ui.A,{className:"h-8 w-8 mb-2 mx-auto text-muted-foreground"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG up to 5MB"})]})]}),(0,be.jsx)(Ze,{disabled:r,className:"w-full",onClick:()=>document.getElementById("logo-upload").click(),children:r?"Uploading...":"Select Image"})]}),(0,be.jsxs)(Pa,{value:"generate",className:"space-y-4",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"logo-prompt",children:"Logo Generation Prompt"}),(0,be.jsx)(Na,{id:"logo-prompt",value:i,onChange:e=>l(e.target.value),className:"min-h-[100px]",placeholder:"Describe how you want your logo to look"})]}),(0,be.jsxs)(Ze,{onClick:async()=>{try{a(!0),await we.updateLogo(e.id,{prompt:i}),s({title:"Success",description:"Logo regenerated successfully"})}catch(t){s({title:"Error",description:"Failed to regenerate logo",variant:"destructive"})}finally{a(!1)}},disabled:t,className:"w-full",children:[(0,be.jsx)(Pe.A,{className:"mr-2 h-4 w-4"}),t?"Generating...":"Generate New Logo"]})]})]})]})]})}var Cl=t(15924),Sl=t(84814),kl=t(85354),Al=t(59222);const _l=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Al.bL,{className:Be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:s,children:(0,be.jsx)(Al.zi,{className:Be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})}));_l.displayName=Al.bL.displayName;const Tl=new class extends de{getBaseURL(){return"/apps"}activateBackendFunctions(e){return this.axios.post(`/${e}/activate-backend-functions`)}getBackendFunctionsLogs(e,s,t){return this.axios.get(`/${e}/functions/${s}/logs`,{params:t})}};function El(){var e;const{user:s}=Ne(),{app:t,updateApp:a}=xa(),r=(0,J.Zp)(),n=(0,J.zy)(),{toast:i}=qn(),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(!1),[p,g]=(0,Y.useState)(null),f=(0,Y.useRef)(null),j=(0,Y.useRef)(null),b=(0,Y.useRef)(null),v=(0,Y.useRef)(null),y=(0,Y.useRef)(null),N=(0,Y.useRef)(null),w=(0,Y.useRef)(null),C=(0,Y.useRef)(null),S=s.subscription_tier&&!["free","starter"].includes(s.subscription_tier);(0,Y.useEffect)((()=>{const e=new URLSearchParams(n.search).get("selectedParam");if(e){g(e);let s=null;switch(e){case"main-page":s=f;break;case"visibility":s=j;break;case"branding-badge":s=b;break;case"hide-created-by":s=v;break;case"clone-app":s=y;break;case"backend-functions":s=N;break;case"delete-app":s=w;break;case"admin-controls":s=C}s&&s.current&&setTimeout((()=>{s.current.scrollIntoView({behavior:"smooth",block:"center"})}),300)}}),[n.search]);const k=async()=>{try{await we.delete(t.id),i({title:"Success",description:"App deleted successfully"}),r("/")}catch(e){i({title:"Error",description:"Failed to delete app",variant:"destructive"})}},A=e=>p===e?"selected-section p-4 rounded-md":"";return(0,be.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[(0,be.jsx)("style",{jsx:!0,global:!0,children:"\n                    .selected-section {\n        position: relative;\n        border-left: 4px solid #334155;\n        background-color: rgba(241, 245, 249, 0.7);\n        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n        transition: all 0.4s ease;\n        padding-left: 16px !important;\n        padding-top: 14px !important;\n        padding-bottom: 14px !important;\n        margin: 4px 0 !important;\n        border-radius: 4px;\n    }\n\n    /* Left border with animated glow */\n    .selected-section::before {\n        content: '';\n        position: absolute;\n        left: -4px;\n        top: 0;\n        width: 4px;\n        height: 100%;\n        background: linear-gradient(to bottom, #0f766e, #334155);\n        box-shadow: 0 0 12px rgba(15, 118, 110, 0.5);\n        animation: border-pulse 2.5s infinite ease-in-out;\n        z-index: 1;\n    }\n    \n    /* Light effect */\n    .selected-section::after {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 100%;\n        width: 100%;\n        background: linear-gradient(to right, rgba(15, 118, 110, 0.08), transparent 50%);\n        animation: light-pulse 2.5s infinite ease-in-out;\n        pointer-events: none;\n        border-radius: 4px;\n    }\n    \n    @keyframes border-pulse {\n        0%, 100% {\n            box-shadow: 0 0 8px rgba(15, 118, 110, 0.4);\n        }\n        50% {\n            box-shadow: 0 0 20px rgba(15, 118, 110, 0.7);\n        }\n    }\n    \n    @keyframes light-pulse {\n        0%, 100% {\n            opacity: 0.3;\n            background: linear-gradient(to right, rgba(15, 118, 110, 0.05), transparent 50%);\n        }\n        50% {\n            opacity: 0.7;\n            background: linear-gradient(to right, rgba(15, 118, 110, 0.12), transparent 60%);\n        }\n    }\n            "}),(0,be.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"App Settings"}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{className:"border-b border-gray-100",children:(0,be.jsx)(Us,{className:"text-gray-800",children:"General Settings"})}),(0,be.jsxs)(Ms,{className:"space-y-6 pt-6",children:[(0,be.jsxs)("div",{ref:f,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("main-page")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Main Page"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Set the default landing page for your app"})]}),(0,be.jsx)("div",{className:"w-full sm:w-64",children:(0,be.jsxs)(bs,{value:t.main_page||"",onValueChange:async e=>{try{await we.update(t.id,{main_page:e}),a({main_page:e}),i({title:"Success",description:"Main page updated successfully"})}catch(s){i({title:"Error",description:"Failed to update main page",variant:"destructive"})}},children:[(0,be.jsx)(Ns,{children:(0,be.jsx)(ys,{placeholder:"Select main page"})}),(0,be.jsx)(Ss,{children:Object.keys(t.pages||{}).map((e=>(0,be.jsx)(As,{value:e,children:e},e)))})]})})]}),(0,be.jsx)(Bs,{}),(0,be.jsxs)("div",{ref:j,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("visibility")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"App Visibility"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Control who can access your application"})]}),(0,be.jsxs)("div",{className:"w-full sm:w-64",children:[(0,be.jsxs)(bs,{value:t.public_settings,onValueChange:async e=>{d(!0);try{await a({public_settings:e}),i({title:"Success",description:"App visibility updated successfully"})}catch(s){i({title:"Error",description:"Failed to update app visibility",variant:"destructive"})}finally{d(!1)}},disabled:c,children:[(0,be.jsx)(Ns,{children:(0,be.jsx)(ys,{placeholder:"Select visibility"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"private_with_login",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(kn.A,{className:"w-4 h-4 text-gray-600"}),(0,be.jsx)("span",{children:"Private (Login Required)"})]})}),(0,be.jsx)(As,{value:"public_with_login",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-4 h-4 text-gray-600"}),(0,be.jsx)("span",{children:"Public (Login Required)"})]})}),(0,be.jsx)(As,{value:"public_without_login",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-4 h-4 text-gray-600"}),(0,be.jsx)("span",{children:"Public (No Login)"})]})})]})]}),(0,be.jsx)("div",{className:"mt-2",children:"public_without_login"===t.public_settings?(0,be.jsx)("span",{className:"text-xs text-gray-600",children:"Anyone can access without logging in"}):"public_with_login"===t.public_settings?(0,be.jsx)("span",{className:"text-xs text-gray-600",children:"Anyone can access but must log in first"}):(0,be.jsx)("span",{className:"text-xs text-gray-600",children:"Only invited users can access after logging in"})})]})]}),(0,be.jsx)(Bs,{}),(0,be.jsxs)("div",{ref:b,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("platform-badge")}`,children:[(0,be.jsxs)("div",{className:"flex-grow space-y-1",children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Platform Badge"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:'Show or hide the "Edit with Base44" badge on your app.'}),"free"===s.subscription_tier&&(0,be.jsxs)("p",{className:"text-xs text-orange-500 pt-1",children:[(0,be.jsx)(kn.A,{className:"h-3 w-3 inline-block mr-1 relative -top-px"}),"Available only for paying users.",(0,be.jsx)("a",{href:"/billing",className:"ml-1 underline font-medium hover:text-orange-700",children:"Upgrade now"})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0 mt-2 sm:mt-0",children:[(0,be.jsx)(_l,{id:"platform-badge-switch",checked:!0===t.is_remixable,onCheckedChange:async e=>{u(!0);try{await we.update(t.id,{is_remixable:e}),a({is_remixable:e}),i({title:"Success",description:`Platform badge will be ${e?"visible":"hidden"}.`})}catch(s){i({title:"Error",description:"Failed to update platform badge visibility.",variant:"destructive"})}finally{u(!1)}},disabled:"free"===s.subscription_tier||m,"aria-label":"Toggle platform badge visibility"}),(0,be.jsx)(ds,{htmlFor:"platform-badge-switch",className:"text-sm text-muted-foreground",children:!0===t.is_remixable?"Visible":"Hidden"})]})]}),(0,be.jsx)(Bs,{}),(0,be.jsxs)("div",{ref:v,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("hide-created-by")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Hide Entity Creator"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:'Hide who created each record in your app\'s data tables. When enabled, the "created by" field will not be shown to users.'})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0 mt-2 sm:mt-0",children:[(0,be.jsx)(_l,{id:"hide-created-by-switch",checked:!0===t.hide_entity_created_by,onCheckedChange:async e=>{x(!0);try{await we.update(t.id,{hide_entity_created_by:e}),a({hide_entity_created_by:e}),i({title:"Success",description:`Entity creator information will be ${e?"hidden":"visible"} in your app.`})}catch(s){i({title:"Error",description:"Failed to update entity creator visibility.",variant:"destructive"})}finally{x(!1)}},disabled:h,"aria-label":"Toggle hide entity creator"}),(0,be.jsx)(ds,{htmlFor:"hide-created-by-switch",className:"text-sm text-muted-foreground",children:!0===t.hide_entity_created_by?"Hidden":"Visible"})]})]}),(0,be.jsx)(Bs,{}),(0,be.jsxs)("div",{ref:y,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("clone-app")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Clone App"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create a duplicate of this app"})]}),(0,be.jsxs)(Ze,{onClick:async()=>{window.open(`/remix-app/${t.id}?clone_history=true`,"_blank")},variant:"outline",className:"flex items-center border-gray-200 hover:bg-gray-50 hover:text-gray-700",children:[(0,be.jsx)(Ot.A,{className:"mr-2 h-4 w-4"}),"Create Copy"]})]}),(0,be.jsx)(Bs,{}),(0,be.jsxs)("div",{ref:N,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("backend-functions")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Backend Functions"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enable server-side functionality (Alpha)"})]}),S?(0,be.jsxs)(Ze,{onClick:async()=>{try{o(!0),await Tl.activateBackendFunctions(t.id),i({title:"Success",description:"Backend functions activated successfully. Prompt the chat to build your backend functions."})}catch(e){i({title:"Error",description:"Failed to activate backend functions",variant:"destructive"})}finally{o(!1)}},disabled:l||!!t.has_backend_functions_enabled,variant:"outline",className:"flex items-center border-gray-200 hover:bg-gray-50 hover:text-gray-700",children:[(0,be.jsx)(sa.A,{className:"mr-2 h-4 w-4"}),l?"Activating...":t.has_backend_functions_enabled?"Activated":"Activate"]}):(0,be.jsxs)(Ze,{variant:"outline",className:"flex items-center text-gray-500 border-gray-200 hover:bg-gray-50",onClick:()=>r("/billing"),children:[(0,be.jsx)(Da.A,{className:"mr-2 h-4 w-4"}),"Upgrade Plan"]})]}),S?!t.has_backend_functions_enabled&&(0,be.jsxs)(We,{variant:"warning",className:"bg-gray-50 border-gray-200",children:[(0,be.jsx)(Cl.A,{className:"h-4 w-4 text-gray-500"}),(0,be.jsx)(Ye,{className:"text-gray-800",children:"Backend Functions - Alpha Feature"}),(0,be.jsx)(Ge,{className:"text-gray-600",children:"This feature is currently in alpha and may be unstable. It is recommended only for developers at this time. Use with caution."})]}):(0,be.jsxs)(We,{variant:"warning",className:"bg-gray-50 border-gray-200",children:[(0,be.jsx)(Cl.A,{className:"h-4 w-4 text-gray-500"}),(0,be.jsx)(Ye,{className:"text-gray-800",children:"Premium Feature"}),(0,be.jsxs)(Ge,{className:"text-gray-600",children:["Backend functions are available only for Builder tier and above.",(0,be.jsx)("a",{href:"/billing",className:"ml-1 underline font-medium text-gray-700 hover:text-gray-900",children:"Upgrade your plan"})," to unlock this feature."]})]})]})]}),(0,be.jsxs)(Ds,{className:"border-gray-200",children:[(0,be.jsxs)(Ls,{className:"border-b border-gray-100",children:[(0,be.jsx)(Us,{className:"text-gray-800",children:"Danger Zone"}),(0,be.jsx)($s,{className:"text-gray-600",children:"Irreversible actions that affect your app"})]}),(0,be.jsxs)(Ms,{className:"space-y-6",children:[(0,be.jsxs)("div",{ref:w,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("delete-app")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Delete App"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently remove this app and all its data"})]}),(0,be.jsxs)(Ze,{onClick:()=>{window.confirm("Are you sure you want to delete this app? This action cannot be undone.")&&k()},variant:"destructive",className:"flex items-center bg-red-500/90 hover:bg-red-600 text-white",children:[(0,be.jsx)(Sl.A,{className:"mr-2 h-4 w-4"}),"Delete App"]})]}),(null===(e=s.platform_role)||void 0===e?void 0:e.includes("admin"))&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Bs,{}),(0,be.jsxs)("div",{ref:C,className:`flex flex-col sm:flex-row justify-between sm:items-center gap-2 ${A("admin-controls")}`,children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Admin Controls"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage app availability"})]}),(0,be.jsxs)(Ze,{onClick:async()=>{try{await we.update(t.id,{is_blocked:!t.is_blocked}),a({is_blocked:!t.is_blocked}),i({title:"Success",description:`App ${t.is_blocked?"unblocked":"blocked"} successfully`})}catch(e){i({title:"Error",description:`Failed to ${t.is_blocked?"unblock":"block"} app`,variant:"destructive"})}},variant:"outline",className:"flex items-center border-gray-200 hover:bg-gray-50 hover:text-gray-700",children:[(0,be.jsx)(kl.A,{className:"mr-2 h-4 w-4"}),t.is_blocked?"Unblock App":"Block App"]})]})]})]})]})]})}const Il=e=>{let{value:s,onChange:t,language:a="javascript",readOnly:r=!1,height:n,className:i,style:l,isSaving:o,...c}=e;const d={};return n&&(d.height=n),(0,be.jsxs)("div",{className:"relative h-full",children:[(0,be.jsx)(Aa.KE,{defaultLanguage:a,value:s,onChange:e=>{t&&!r&&t(e)},options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,readOnly:r},...d,...c}),o&&(0,be.jsx)("div",{className:"absolute top-2 right-2 bg-gray-700 text-white text-xs px-2 py-1 rounded opacity-70",children:"Saving..."})]})};const Pl=function(){var e;const{user:s}=Ne(),{app:t}=xa(),[a,r]=(0,Y.useState)(!1),[n,i]=(0,Y.useState)(Object.keys(t.entities)[0]||"EntityName"),[l,o]=(0,Y.useState)("javascript"),c=(null===(e=t.entities[n])||void 0===e?void 0:e.properties)||{},d=Object.keys(c).join(", "),m=`// JavaScript Example: Reading Entities\n// Filterable fields: ${d}\nasync function fetch${n}Entities() {\n    const response = await fetch(\`${ee()}/apps/${t.id}/entities/${n}\`, {\n        headers: {\n            'api_key': '${s.api_key}', // or use await User.me() to get the API key\n            'Content-Type': 'application/json'\n        }\n    });\n    const data = await response.json();\n    console.log(data);\n}\n\n// JavaScript Example: Updating an Entity\n// Filterable fields: ${d}\nasync function update${n}Entity(entityId, updateData) {\n    const response = await fetch(\`${ee()}/apps/${t.id}/entities/${n}/\${entityId}\`, {\n        method: 'PUT',\n        headers: {\n            'api_key': '${s.api_key}', // or use await User.me() to get the API key\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updateData)\n    });\n    const data = await response.json();\n    console.log(data);\n}`,u=`# Python Example: Reading Entities\n# Filterable fields: ${d}\nimport requests\n\ndef make_api_request(api_path, method='GET', data=None):\n    url = f'${ee()}/{api_path}'\n    headers = {\n        'api_key': '${s.api_key}',\n        'Content-Type': 'application/json'\n    }\n    if method.upper() == 'GET':\n        response = requests.request(method, url, headers=headers, params=data)\n    else:\n        response = requests.request(method, url, headers=headers, json=data)\n    response.raise_for_status()\n    return response.json()\n\nentities = make_api_request(f'apps/${t.id}/entities/${n}')\nprint(entities)\n\n# Python Example: Updating an Entity\n# Filterable fields: ${d}\ndef update_entity(entity_id, update_data):\n    response = requests.put(\n        f'${ee()}/apps/${t.id}/entities/${n}/{entity_id}',\n        headers={\n            'api_key': '${s.api_key}',\n            'Content-Type': 'application/json'\n        },\n        json=update_data\n    )\n    response.raise_for_status()\n    return response.json()`;return(0,be.jsxs)("div",{className:"p-8",children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\u{1f680} API Integration Made Easy"}),(0,be.jsx)("h3",{className:"text-xl mb-2",children:"Example: API Operations"}),(0,be.jsx)("p",{className:"mb-4",children:"Select an entity to generate code examples for reading and updating:"}),(0,be.jsx)("select",{value:n,onChange:e=>i(e.target.value),className:"mb-4 p-2 border rounded",children:Object.keys(t.entities).map((e=>(0,be.jsx)("option",{value:e,children:e},e)))}),(0,be.jsxs)("div",{className:"mb-4",children:[(0,be.jsx)("button",{onClick:()=>o("javascript"),className:"mr-2 "+("javascript"===l?"font-bold":""),children:"JavaScript"}),(0,be.jsx)("button",{onClick:()=>o("python"),className:""+("python"===l?"font-bold":""),children:"Python"})]}),(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(Il,{value:"javascript"===l?m:u,language:l,readOnly:!0,height:"600px"}),(0,be.jsxs)("button",{onClick:()=>(e=>{navigator.clipboard.writeText(e),r(!0),setTimeout((()=>r(!1)),2e3)})("javascript"===l?m:u),className:"btn btn-sm btn-outline absolute top-2 right-2",children:[(0,be.jsx)(Ot.A,{className:"w-4 h-4 mr-2"}),a?"Copied!":"Copy"]})]})]})};function Rl(e){let{initialText:s,onChange:t,className:a=""}=e;const[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(s),o=(0,Y.useRef)(null);(0,Y.useEffect)((()=>{r&&o.current&&o.current.focus()}),[r]),(0,Y.useEffect)((()=>{l(s)}),[s]);return(0,be.jsx)("div",{className:"inline-block",children:r?(0,be.jsx)(is,{ref:o,type:"text",value:i,onChange:e=>{l(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(n(!1),t(i))},onBlur:()=>{n(!1),t(i)},className:`w-auto ${a}`,style:{width:.8*i.length+"ch"}}):(0,be.jsx)("div",{onClick:()=>{n(!0)},className:`cursor-pointer hover:bg-gray-100 rounded transition-colors ${a}`,children:i})})}function Ol(){const{app:e}=xa(),[s,t]=(0,Y.useState)(!1),a=Object.values(e.entities),r=a.length>0&&a.some((e=>!e.rls)),n="public_without_login"===e.public_settings,i=`security-warning-dismissed-${e.id}`;(0,Y.useEffect)((()=>{"true"===localStorage.getItem(i)&&t(!0)}),[i]);const l=()=>{localStorage.setItem(i,"true"),t(!0)};return r&&n&&!s?(0,be.jsxs)(We,{variant:"destructive",className:"border-orange-200 bg-orange-50 text-orange-800 py-3",children:[(0,be.jsx)(Cl.A,{className:"h-4 w-4"}),(0,be.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("div",{className:"font-semibold text-orange-900 text-sm mb-1",children:"Warning"}),(0,be.jsx)(Ge,{className:"text-orange-700 text-xs leading-relaxed",children:"Your public app has entities without access rules. Anyone can view, create, edit, or delete data. Go to the Security Dashboard to set access rules."})]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",className:"text-orange-600 hover:text-orange-800 hover:bg-orange-100 ml-2 h-6 w-6 p-0 flex-shrink-0",onClick:l,children:(0,be.jsx)(He.A,{className:"h-3 w-3"})})]})]}):null}function Dl(){var e,s;const{app:t,updateApp:a}=xa(),r=(0,J.Zp)(),{toast:n}=qn(),[i,l]=(0,Y.useState)(!1),[o,c]=(0,Y.useState)(!1),[d,m]=(0,Y.useState)(!1),[u,h]=(0,Y.useState)(!1),[x,p]=(0,Y.useState)(!1),[g,f]=(0,Y.useState)(""),j=`https://app--${t.slug}.base44.app`;(0,Y.useEffect)((()=>{t.user_description&&f(t.user_description)}),[t.user_description]);return(0,be.jsxs)("div",{className:"h-full bg-gray-50 p-4 sm:p-6",children:[(0,be.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,be.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-start sm:items-center",children:[(0,be.jsx)("div",{className:"shrink-0 w-16 sm:w-20 h-16 sm:h-20 rounded-xl bg-white shadow p-3 flex items-center justify-center",children:t.logo_url?(0,be.jsx)("img",{src:t.logo_url,alt:`${t.name} logo`,className:"w-12 h-12 object-contain"}):(0,be.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,be.jsx)("span",{className:"text-xl font-bold text-gray-400",children:(null===(e=t.name)||void 0===e||null===(s=e[0])||void 0===s?void 0:s.toUpperCase())||"A"})})}),(0,be.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,be.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:(0,be.jsx)(Rl,{initialText:t.name||"untitled",onChange:async e=>{var s;"ready"===(null===(s=t.status)||void 0===s?void 0:s.state)?0!==e.length?a({name:e}):n({title:"Error",description:"App name cannot be empty",variant:"destructive"}):n({title:"Error",description:"App is still loading... name not updated",variant:"destructive"})}})}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{a({is_starred:!t.is_starred}),n({title:t.is_starred?"Removed from favorites":"Added to favorites",description:t.is_starred?"App removed from your starred list":"App added to your starred list"})},className:"hover:bg-yellow-100 transition-colors "+(t.is_starred?"text-yellow-500":"text-gray-400"),children:(0,be.jsx)(Ut.A,{className:"h-4 w-4 "+(t.is_starred?"fill-current":"")})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:t.user_description}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{f(t.user_description||""),p(!0)},className:"mt-1 p-1 h-auto",children:(0,be.jsx)(ta.A,{className:"h-3 w-3 text-gray-400"})})]}),(0,be.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Created ",it().utc(t.created_date).fromNow()]})]})]}),(0,be.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>{r(`/apps/${t.id}/editor/preview/${Object.keys(t.pages)[0]}`)},className:"gap-1.5 w-36 h-10",children:[(0,be.jsx)(Da.A,{className:"w-4 h-4"}),"Open App"]}),(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>m(!0),className:"gap-1.5 w-36 h-10",children:[(0,be.jsx)(_t.A,{className:"w-4 h-4 ml-[-8px]"}),(0,be.jsxs)("div",{className:"flex flex-col items-start",children:[(0,be.jsx)("span",{className:"mb-[-6px]",children:"Share App"}),(0,be.jsx)("span",{className:"text-[9px] mb-[-3px] text-gray-500",children:"win free credits!"})]})]})]})]}),(0,be.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,be.jsx)(Ds,{children:(0,be.jsxs)(Ms,{className:"p-4",children:[(0,be.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-base font-semibold",children:"App Visibility"}),(0,be.jsx)("p",{className:"text-gray-600 text-xs mt-1",children:"Control who can access your application"})]})}),(0,be.jsxs)("div",{children:[(0,be.jsxs)(bs,{value:t.public_settings,onValueChange:async e=>{l(!0);try{await a({public_settings:e})}finally{l(!1)}},disabled:i,children:[(0,be.jsx)(Ns,{className:"w-full",children:(0,be.jsx)(ys,{placeholder:"Select visibility"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"private_with_login",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(kn.A,{className:"w-4 h-4 text-orange-500"}),(0,be.jsx)("span",{children:"Private (Login Required)"})]})}),(0,be.jsx)(As,{value:"public_with_login",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-4 h-4 text-blue-500"}),(0,be.jsx)("span",{children:"Public (Login Required)"})]})}),(0,be.jsx)(As,{value:"public_without_login",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Zs.A,{className:"w-4 h-4 text-green-500"}),(0,be.jsx)("span",{children:"Public (No Login)"})]})})]})]}),(0,be.jsx)("div",{className:"px-4 text-gray-200 mb-2",children:"public_without_login"===t.public_settings?(0,be.jsx)(be.Fragment,{children:(0,be.jsx)("span",{className:"text-xs text-gray-600",children:"Anyone can access without logging in"})}):"public_with_login"===t.public_settings?(0,be.jsx)(be.Fragment,{children:(0,be.jsx)("span",{className:"text-xs text-gray-600",children:"Anyone can access but must log in first"})}):(0,be.jsx)(be.Fragment,{children:(0,be.jsx)("span",{className:"text-xs text-gray-600",children:"Only invited users can access after logging in"})})}),(0,be.jsx)(Ol,{})]})]})}),(0,be.jsx)(Ds,{children:(0,be.jsxs)(Ms,{className:"p-4",children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-base font-semibold mb-1",children:"Invite Users"}),(0,be.jsx)("p",{className:"text-gray-600 text-xs",children:"Grow your user base by inviting others"})]}),(0,be.jsx)(na.A,{className:"w-4 h-4 text-gray-400"})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsxs)(Ze,{variant:"outline",className:"w-full h-10 text-sm",onClick:()=>{return e=j,navigator.clipboard.writeText(e),h(!0),void setTimeout((()=>h(!1)),2e3);var e},children:[(0,be.jsx)(Ot.A,{className:"w-3 h-3 mr-1"}),u?"Copied!":"Copy Link"]}),(0,be.jsx)(Ze,{className:"w-full h-10 text-sm bg-blue-600 hover:bg-blue-700",onClick:()=>c(!0),children:"Send Invites"})]})]})})]}),!0===t.is_remixable&&(0,be.jsx)(Ds,{className:"mt-4",children:(0,be.jsx)(Ms,{className:"p-4",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-base font-semibold",children:"Platform Badge"}),(0,be.jsx)("p",{className:"text-gray-600 text-xs mt-1",children:'The "Edit with Base44" badge is currently visible on your app.'})]}),(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{r(`/apps/${t.id}/editor/workspace/app-settings?selectedParam=platform-badge`)},className:"gap-1.5",children:[(0,be.jsx)(On.A,{className:"w-3.5 h-3.5"}),"Hide Badge"]})]})})})]}),(0,be.jsx)(vl,{isVisible:o,onCancel:()=>c(!1),onInviteSuccess:()=>c(!1)}),(0,be.jsx)(It,{app:t,isOpen:d,onClose:()=>m(!1)}),(0,be.jsx)(jt,{open:x,onOpenChange:p,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Edit App Description"}),(0,be.jsx)(At,{children:"Provide a brief description of your app's purpose and functionality."})]}),(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)(Na,{value:g,onChange:e=>f(e.target.value),placeholder:"Describe your app...",className:"min-h-[100px]"})}),(0,be.jsxs)(St,{children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,be.jsx)(Ze,{onClick:async()=>{try{await a({user_description:g}),p(!1),n({title:"Description updated",description:"Your app description has been updated successfully"})}catch(e){n({title:"Error",description:"Failed to update app description",variant:"destructive"})}},children:"Save"})]})]})})]})}var Ll=t(45833),Ul=t(16859),$l=t(66987);const Ml=function(){const{app:e}=xa(),[s,t]=(0,Y.useState)([]),[a,r]=(0,Y.useState)(1),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(null),[c,d]=(0,Y.useState)({userEmail:"",showFailuresOnly:!1,logType:"all"}),m=async()=>{i(!0);try{let s={};c.userEmail&&(s.user_email=c.userEmail),c.showFailuresOnly&&(s.status="error"),"all"!==c.logType&&(s.log_type=c.logType);const r=await pt.fetchLogs(e.id,{sort:"-created_date",q:s,skip:50*(a-1),limit:50});t(r)}catch(s){}i(!1)};(0,Y.useEffect)((()=>{null!=e&&e.id&&m()}),[null==e?void 0:e.id,a,c]);const u=e=>{switch(e){case"error":return(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("div",{children:(0,be.jsx)(Te.A,{className:"text-destructive",size:16})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Error"})})]})});case"success":return(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("div",{children:(0,be.jsx)(Ll.A,{className:"text-success",size:16})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Success"})})]})});default:return(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("div",{children:(0,be.jsx)(Ul.A,{className:"text-primary",size:16})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Info"})})]})})}},h=[...new Set(s.map((e=>e.log_type)))];return(0,be.jsxs)("div",{className:"space-y-4 p-4",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("h2",{className:"text-xl font-semibold",children:"Logs Explorer"}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{m()},children:[(0,be.jsx)($l.A,{className:"h-4 w-4 mr-1"}),"Refresh"]}),(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)(Ze,{variant:"outline",size:"sm",children:(0,be.jsx)(xi.A,{className:"h-4 w-4"})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Export logs"})})]})})]})]}),(0,be.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-md border bg-card p-2",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Lt.A,{className:"h-4 w-4 text-muted-foreground"}),(0,be.jsx)(is,{placeholder:"Filter by email...",className:"h-8 w-44 bg-transparent",value:c.userEmail,onChange:e=>d((s=>({...s,userEmail:e.target.value})))})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Nn,{id:"showFailures",checked:c.showFailuresOnly,onCheckedChange:e=>d((s=>({...s,showFailuresOnly:!!e})))}),(0,be.jsx)("label",{htmlFor:"showFailures",className:"text-sm cursor-pointer",children:"Errors only"})]}),(0,be.jsxs)(bs,{value:c.logType,onValueChange:e=>d((s=>({...s,logType:e}))),children:[(0,be.jsx)(Ns,{className:"h-8 w-36",children:(0,be.jsx)(ys,{placeholder:"Log type"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"all",children:"All types"}),h.map((e=>(0,be.jsx)(As,{value:e,children:e},e)))]})]}),(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",onClick:()=>d({userEmail:"",showFailuresOnly:!1,logType:"all"}),children:[(0,be.jsx)(He.A,{className:"h-3.5 w-3.5 mr-1"}),"Clear"]})]}),n?(0,be.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,be.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):(0,be.jsx)("div",{className:"rounded-md border bg-card",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Jt,{className:"w-12"}),(0,be.jsx)(Jt,{children:"Type"}),(0,be.jsx)(Jt,{children:"User"}),(0,be.jsx)(Jt,{children:"Timestamp"}),(0,be.jsx)(Jt,{className:"w-10"})]})}),(0,be.jsx)(Gt,{children:0===s.length?(0,be.jsx)(Vt,{children:(0,be.jsx)(Kt,{colSpan:5,className:"h-32 text-center text-muted-foreground",children:"No logs found"})}):s.map(((e,s)=>{return(0,be.jsxs)(Y.Fragment,{children:[(0,be.jsxs)(Vt,{className:(null==l?void 0:l.created_date)===e.created_date?"bg-muted/50":"",children:[(0,be.jsx)(Kt,{className:"pr-0",children:u(e.status)}),(0,be.jsx)(Kt,{className:"font-medium",children:e.object_name||e.log_type}),(0,be.jsx)(Kt,{className:"text-sm text-muted-foreground",children:e.user_email}),(0,be.jsx)(Kt,{className:"text-sm text-muted-foreground",children:(t=e.created_date,new Date(t).toLocaleString())}),(0,be.jsx)(Kt,{className:"text-right",children:(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>o((null==l?void 0:l.created_date)===e.created_date?null:e),children:(null==l?void 0:l.created_date)===e.created_date?(0,be.jsx)(fs.A,{size:16}):(0,be.jsx)(gs.A,{size:16})})})]}),(null==l?void 0:l.created_date)===e.created_date&&(0,be.jsx)(Vt,{children:(0,be.jsx)(Kt,{colSpan:5,className:"p-0",children:(0,be.jsx)("div",{className:"bg-muted/30 px-6 py-3",children:(0,be.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"mb-2 text-sm font-semibold",children:"Inputs"}),(0,be.jsx)("pre",{className:"max-h-60 overflow-auto rounded bg-card p-2 text-xs",children:JSON.stringify(e.inputs,null,2)})]}),e.outputs&&(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"mb-2 text-sm font-semibold",children:"Outputs"}),(0,be.jsx)("pre",{className:"max-h-60 overflow-auto rounded bg-card p-2 text-xs",children:JSON.stringify(e.outputs,null,2)})]}),e.error&&(0,be.jsxs)("div",{className:e.outputs?"col-span-2":"",children:[(0,be.jsx)("h4",{className:"mb-2 text-sm font-semibold text-destructive",children:"Error"}),(0,be.jsx)("pre",{className:"max-h-60 overflow-auto rounded bg-destructive/10 p-2 text-xs text-destructive-foreground",children:e.error})]})]})})})})]},s);var t}))})]})}),(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)(Ze,{variant:"outline",size:"sm",disabled:1===a,onClick:()=>r((e=>Math.max(1,e-1))),children:"Previous"}),(0,be.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",a]}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",disabled:s.length<50,onClick:()=>r((e=>e+1)),children:"Next"})]})]})};var Fl=t(45403),zl=t(81095),Bl=t(68354),ql=t(93245),Wl=t(60158),Yl=t(44813),Gl=t(40992),Hl=t(10734),Vl=t(81850);const Jl=e=>{let{data:s,title:t="Bar Chart",barColor:a="#14b8a6",maxWidth:r="800px",maxLabelWidth:n="40%",backgroundColor:i="white",textColor:l="#1f2937",renderLabel:o=e=>e.name,renderValue:c=e=>e.value}=e;const d=Math.max(...s.map((e=>e.value))),m=s.length,u=m<=5?"40px":m<=10?"32px":m<=20?"24px":"16px",h=m<=5?"14px":m<=10?"12px":m<=20?"10px":"8px";return(0,be.jsxs)("div",{style:{width:"100%",maxWidth:r,margin:"0 auto",padding:"24px",backgroundColor:i,borderRadius:"8px",overflow:"hidden"},children:[t&&(0,be.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"24px",color:l,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t}),(0,be.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.map(((e,s)=>{const t=e.value/d*100;return(0,be.jsxs)("div",{style:{position:"relative",height:u,marginBottom:"8px",overflow:"hidden"},children:[(0,be.jsx)("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${t}%`,backgroundColor:a,borderRadius:"4px",transition:"width 0.5s ease-in-out"}}),(0,be.jsx)("div",{style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",fontSize:h,fontWeight:"500",color:l,zIndex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:n},children:o(e)}),(0,be.jsx)("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",fontSize:h,fontWeight:"500",color:l,overflow:"hidden",textOverflow:"ellipsis"},children:c(e)})]},s)}))})]})};function Kl(e){var s;let{appId:t,pageNames:a}=e;const[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)({from:void 0,to:void 0}),[o,c]=(0,Y.useState)("all"),[d,m]=(0,Y.useState)(null),[u,h]=(0,Y.useState)(!0),[x,p]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{(async()=>{h(!0);try{const e={};null!=i&&i.from&&(e.date_from=(0,Ii.GP)(i.from,"yyyy-MM-dd")),null!=i&&i.to&&(e.date_to=(0,Ii.GP)(i.to,"yyyy-MM-dd")),"all"!==o&&(e.page_name=o),d&&(e.user_email=d);const s=await pt.getStats(t,e);n(s)}catch(e){}finally{h(!1)}})()}),[t,i,o,d]);const g=(r?"all"===o?r.top_pages:r.top_pages.filter((e=>e.url===o)):[]).map((e=>({name:e.page_name,value:e.visits}))),f=null!=r&&r.top_users?x?r.top_users:r.top_users.slice(0,5):[],j=(null==r||null===(s=r.top_users)||void 0===s?void 0:s.length)>5;return u&&!r?(0,be.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,be.jsx)(Ae.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,be.jsxs)("div",{className:"space-y-4 p-4",children:[(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,be.jsxs)(Ri,{children:[(0,be.jsx)(Oi,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",className:Be("w-full sm:w-[240px] justify-start text-left font-normal",!i&&"text-muted-foreground"),children:[(0,be.jsx)(Hs.A,{className:"mr-2 h-4 w-4"}),null!=i&&i.from?i.to?(0,be.jsxs)(be.Fragment,{children:[(0,Ii.GP)(i.from,"LLL dd, y")," - ",(0,Ii.GP)(i.to,"LLL dd, y")]}):(0,Ii.GP)(i.from,"LLL dd, y"):(0,be.jsx)("span",{children:"Pick a date range"})]})}),(0,be.jsx)(Di,{className:"w-auto p-0",align:"start",children:(0,be.jsx)(Ei,{initialFocus:!0,mode:"range",defaultMonth:null==i?void 0:i.from,selected:i,onSelect:l,numberOfMonths:1})})]}),(0,be.jsxs)(bs,{value:o,onValueChange:c,children:[(0,be.jsx)(Ns,{className:"w-full sm:w-[240px]",children:(0,be.jsx)(ys,{placeholder:"Filter by page"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"all",children:"All Pages"}),null==a?void 0:a.map((e=>(0,be.jsx)(As,{value:e,children:e},e)))]})]}),d&&(0,be.jsxs)("div",{className:"flex items-center gap-2 bg-muted px-3 py-2 rounded-md",children:[(0,be.jsxs)("span",{className:"text-sm",children:["Filtered by user: ",d]}),(0,be.jsx)("button",{onClick:()=>m(null),className:"text-muted-foreground hover:text-foreground",children:(0,be.jsx)(Vl.A,{className:"h-4 w-4"})})]}),u&&(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Ae.A,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,be.jsx)("span",{className:"text-sm text-muted-foreground",children:"Updating..."})]})]}),(0,be.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{className:"pb-2",children:(0,be.jsx)(Us,{className:"text-lg",children:"Total Unique Users"})}),(0,be.jsx)(Ms,{children:(0,be.jsx)("div",{className:"text-3xl font-bold",children:(null==r?void 0:r.unique_users_count)||0})})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{className:"pb-2",children:(0,be.jsx)(Us,{className:"text-lg",children:"Top Users"})}),(0,be.jsx)(Ms,{children:(0,be.jsxs)("div",{className:"space-y-2",children:[f.map(((e,s)=>(0,be.jsxs)("div",{className:"flex justify-between items-center text-sm cursor-pointer hover:bg-muted p-2 rounded-md",onClick:()=>m(e.email),children:[(0,be.jsx)("span",{className:"truncate max-w-[180px]",children:e.email}),(0,be.jsxs)("span",{className:"font-semibold",children:[e.visits," visits"]})]},s))),j&&(0,be.jsx)(Ze,{variant:"ghost",className:"w-full mt-2 text-sm text-muted-foreground hover:text-foreground",onClick:()=>p(!x),children:x?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(fs.A,{className:"h-4 w-4 mr-2"})," Show Less"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(gs.A,{className:"h-4 w-4 mr-2"})," Show More Users"]})})]})})]})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{className:"text-lg",children:"Top Pages"})}),(0,be.jsxs)(Ms,{children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Shows the most visited pages in your app and their total visit count"}),(0,be.jsx)(Jl,{data:g,title:"",maxWidth:"100%",maxLabelWidth:"60%",backgroundColor:"transparent",renderLabel:e=>"all"===t?(0,be.jsx)(V.Link,{to:`/apps/${e.name}`,target:"_blank",className:"hover:underline",children:e.name}):e.name})]})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{className:"text-lg",children:"Unique Users Over Time"})}),(0,be.jsxs)(Ms,{children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Tracks the number of distinct users accessing your app each day"}),(null==r?void 0:r.users_per_date.length)<=1?(0,be.jsx)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"Not enough data to show trends"}):(0,be.jsx)("div",{className:"h-[300px]",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Bl.Q,{data:r.users_per_date,margin:{top:10,right:10,left:0,bottom:0},children:[(0,be.jsx)(ql.d,{strokeDasharray:"3 3"}),(0,be.jsx)(Wl.W,{dataKey:"date"}),(0,be.jsx)(Yl.h,{}),(0,be.jsx)(Gl.m,{}),(0,be.jsx)(Hl.G,{type:"monotone",dataKey:"unique_users",stroke:"#8884d8",fill:"#8884d8",name:"Unique Users"})]})})})]})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{className:"text-lg",children:"Total Usage Over Time"})}),(0,be.jsxs)(Ms,{children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Shows the total number of visits to your app, including repeat visits from the same users"}),(null==r?void 0:r.users_per_date.length)<=1?(0,be.jsx)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"Not enough data to show trends"}):(0,be.jsx)("div",{className:"h-[300px]",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Bl.Q,{data:r.users_per_date,margin:{top:10,right:10,left:0,bottom:0},children:[(0,be.jsx)(ql.d,{strokeDasharray:"3 3"}),(0,be.jsx)(Wl.W,{dataKey:"date"}),(0,be.jsx)(Yl.h,{}),(0,be.jsx)(Gl.m,{}),(0,be.jsx)(Hl.G,{type:"monotone",dataKey:"total_visits",stroke:"#82ca9d",fill:"#82ca9d",name:"Total Visits"})]})})})]})]})]})}const Zl=function(){const{app:e}=xa();return(0,be.jsx)(Kl,{appId:e.id,pageNames:Object.keys(e.pages)})};function Xl(e){let{isSaving:s,hasEditorErrors:t,onDiscard:a,onSave:r,onSaveAndRedeploy:n,hasUnsavedChanges:i,isFunction:l}=e;return i?(0,be.jsxs)("div",{className:"fixed bottom-6 right-6 flex flex-col gap-2 w-56 z-[200]",children:[t&&(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-1 px-2 py-1 bg-red-50 border border-red-200 text-red-700 text-xs rounded shadow",children:[(0,be.jsx)(Te.A,{className:"w-4 h-4 text-red-500"}),(0,be.jsx)("span",{children:"Editor has errors"})]}),(0,be.jsxs)(Ze,{variant:"outline",size:"lg",className:"rounded-full shadow-lg w-full",onClick:a,disabled:s,children:[(0,be.jsx)(Ar.A,{className:"w-4 h-4 mr-2"}),"Discard"]}),l?(0,be.jsxs)(Ze,{size:"lg",className:"relative rounded-full shadow-lg bg-gray-900 text-white hover:bg-gray-800 w-full justify-center",onClick:n,disabled:s,children:[s?(0,be.jsx)($l.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,be.jsx)($l.A,{className:"w-4 h-4 mr-2"}),"Save & Redeploy"]}):(0,be.jsxs)(Ze,{size:"lg",className:"rounded-full shadow-lg bg-gray-900 text-white hover:bg-gray-800 w-full",onClick:r,disabled:s,children:[s?(0,be.jsx)(Br.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,be.jsx)(Br.A,{className:"w-4 h-4 mr-2"}),"Save"]})]}):null}function Ql(e){let{filepath:s,selectedLine:t,onEdit:a,onSaveOrDiscard:r,isFunction:n,onRedeployFunction:i}=e;const{user:l}=Ne(),{app:o,writeCodeToFile:c}=xa(),[d,m]=(0,Y.useState)(!1),[u,h]=(0,Y.useState)(""),[x,p]=(0,Y.useState)(!1),[g,f]=(0,Y.useState)(!1),j=(0,Y.useRef)(null),b=(0,Y.useRef)(null),v="free"===(null==l?void 0:l.subscription_tier),y=(0,Y.useRef)(null),N=(0,Y.useRef)(""),w=(0,Y.useRef)(s),[C,S]=(0,Y.useState)(!0),k=()=>{if(j.current&&b.current){const e=j.current.getModel(),s=b.current;if(e&&s){const t=s.editor.getModelMarkers({resource:e.uri}).some((e=>e.severity===s.MarkerSeverity.Error));S(t)}}};(0,Y.useEffect)((()=>{if(!s||!o)return;f(!1);let e="";if("layout"===s)e=o.layout;else if(s.startsWith("pages/")){const t=s.split("pages/")[1];e=o.pages[t]}else if(s.startsWith("components/")){const t=s.split("components/")[1];e=o.components[t]}else if(s.startsWith("functions/")){const t=s.split("functions/")[1];e=o.functions[t]}else if(s.startsWith("entities/")){const t=s.split("entities/")[1];e=JSON.stringify(o.entities[t],null,2)}if(h(e),N.current=e,w.current=s,f(!0),j.current&&(y.current=j.current.saveViewState()),j.current){const e=j.current.getModel();if(e){const s=e.onDidChangeDecorations((()=>{k(),s&&s.dispose&&s.dispose()}))}}}),[s,o]),(0,Y.useEffect)((()=>{j.current&&y.current&&(j.current.restoreViewState(y.current),j.current.focus(),y.current=null)}),[u,x]),(0,Y.useEffect)((()=>{t&&x&&g&&u&&(()=>{if(!(j.current&&t&&x&&g))return;const e=j.current,s=e.getModel();if(!s)return;const a=parseInt(t,10);if(isNaN(a)||a<=0)return;const r=s.getLineCount(),n=Math.min(a,r);requestAnimationFrame((()=>{try{e.revealLineInCenter(n),e.setPosition({lineNumber:n,column:1}),e.setSelection({startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:s.getLineMaxColumn(n)}),e.focus()}catch(t){}}))})()}),[t,x,g,u]),(0,Y.useEffect)((()=>{if(!j.current||!b.current)return;const e=j.current.getModel(),s=b.current;if(!e||!s)return;const t=s.editor.onDidChangeMarkers((s=>{s.some((s=>s.toString()===e.uri.toString()))&&k()}));return k(),()=>{t&&t.dispose&&t.dispose()}}),[x,u]);const A=async e=>{v||(m(!0),await c(s,e),m(!1))},_=u!==N.current;return(0,be.jsxs)("div",{className:"h-full relative",children:[(0,be.jsx)(Xl,{isSaving:d,hasEditorErrors:C,onDiscard:()=>{h(N.current),j.current&&y.current&&(j.current.restoreViewState(y.current),j.current.focus()),r&&r()},onSave:async()=>{m(!0),await A(u),m(!1),r&&r()},onSaveAndRedeploy:async()=>{if(m(!0),m(!1),r&&r(),i)try{await i(A,u)}catch(e){}},hasUnsavedChanges:_,isFunction:n}),(0,be.jsx)(Aa.KE,{defaultLanguage:"javascript",value:u,onChange:e=>{v||(h(e),j.current&&(y.current=j.current.saveViewState()),a&&a())},onMount:(e,s)=>{j.current=e,b.current=s,p(!0);const t=e.getModel();t&&t.onDidChangeContent((()=>{f(!0)}))},options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,readOnly:v,padding:{top:v?40:0}},height:"100%"}),v&&(0,be.jsxs)("div",{className:"absolute top-0 left-0 right-0 bg-amber-50 border-b border-amber-200 p-3 z-10 text-sm text-amber-800",children:["Code editing is only available on paid plans.",(0,be.jsx)(V.Link,{to:"/billing",className:"ml-2 text-blue-600 hover:underline",children:"Upgrade your plan"})]}),d&&(0,be.jsx)("div",{className:"absolute top-10 right-2 bg-gray-700 text-white text-xs px-2 py-1 rounded opacity-70"})]})}function eo(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=ce(ca()+`/apps/${e.id}/functions`,t,!0,!1,!1);s=s||(e=>{}),a.interceptors.response.use((e=>e),(e=>{const t=`error trying to call function: ${e.config.url}`;let a=e.config.data;try{"string"!=typeof a&&(a=JSON.stringify(a)),a&&a.length>1e3&&(a=a.substring(0,997)+"...")}catch(l){a=String(a)}let r="";try{var n;null!==(n=e.response)&&void 0!==n&&n.data?(r="object"==typeof e.response.data?JSON.stringify(e.response.data):String(e.response.data),r.length>1e3&&(r=r.substring(0,997)+"...")):r=e.message||"Unknown error"}catch(l){r=String(e)||"Unknown error"}const i=`When using the app, on url ${window.location.href} the following function call failed: \nurl: ${e.config.baseURL}${e.config.url}\nmethod: ${e.config.method}\ndata: ${a}\nerror: ${r}`;return s(t,i),Promise.reject(e)}));let r={};return(e.function_names||Object.keys(e.functions||{})).forEach((e=>{r[e]=async s=>await a.post(`/${e}`,s||{})})),r}var so=t(25692),to=t(7838),ao=t(30621),ro=t(5487);const no=(0,Y.forwardRef)(((e,s)=>{let{functionName:t,hasUnsavedChanges:a}=e;const{user:r}=Ne(),{app:n,runtimeAuthToken:i}=xa(),[l,o]=(0,Y.useState)(null),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(!1),[p,g]=(0,Y.useState)("{\n  \n}"),[f,j]=(0,Y.useState)(null),[b,v]=(0,Y.useState)(!1),[y,N]=(0,Y.useState)(null),[w,C]=(0,Y.useState)(null),[S,k]=(0,Y.useState)(!1),[A,_]=(0,Y.useState)(!1),[T,E]=(0,Y.useState)(!1),[I,P]=(0,Y.useState)([]),[R,O]=(0,Y.useState)(!1),[D,L]=(0,Y.useState)(null),[U,$]=(0,Y.useState)(0),[M]=(0,Y.useState)(50),[F,z]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{o(eo(n,(()=>{}),{Authorization:`Bearer ${i}`}))}),[null==n?void 0:n.id,null==n?void 0:n.functions]);const B=async()=>{if(null!=n&&n.id&&t){N(null);try{await we.redeployFunction(n.id,t)}catch(e){N(e.message||"An error occurred while redeploying the function")}}};(0,Y.useImperativeHandle)(s,(()=>({handleRedeployFunction:B})));const q=async(e,s)=>{try{await navigator.clipboard.writeText(e),"url"===s?(k(!0),setTimeout((()=>k(!1)),2e3)):"headers"===s?(_(!0),setTimeout((()=>_(!1)),2e3)):"curl"===s&&(E(!0),setTimeout((()=>E(!1)),2e3))}catch(t){}},W=()=>null!=n&&n.slug&&null!=n&&n.id&&t?`https://app--${n.slug}.base44.app/api/apps/${n.id}/functions/${t}`:"",G=()=>{const e={"Content-Type":"application/json"};return null!=r&&r.api_key&&(e.api_key=r.api_key),e},H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=n&&n.id&&t){O(!0),L(null);try{const a=await Tl.getBackendFunctionsLogs(n.id,t,{limit:M,offset:e});P(s||0===e?a:e=>[...e,...a]),z(a.length===M),$(e)}catch(i){var a,r;L((null===(a=i.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||i.message||"Failed to fetch logs")}finally{O(!1)}}},V=e=>{try{return new Date(e).toLocaleString()}catch(s){return e}},J=e=>{switch(null==e?void 0:e.toLowerCase()){case"error":return"text-red-600 bg-red-50 border-red-200";case"warn":case"warning":return"text-amber-600 bg-amber-50 border-amber-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";case"debug":return"text-purple-600 bg-purple-50 border-purple-200";default:return"text-slate-600 bg-slate-50 border-slate-200"}};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed bottom-6 right-6",children:!a&&(0,be.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm border border-slate-200 rounded-2xl shadow-2xl p-2 flex items-center gap-1",children:[(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",className:"rounded-xl text-slate-600 hover:text-slate-800 hover:bg-slate-100 transition-all duration-200",onClick:()=>d(!0),children:[(0,be.jsx)(so.A,{className:"h-4 w-4 mr-2"}),"Test Function"]}),(0,be.jsx)("div",{className:"w-px h-6 bg-slate-300 mx-1"}),(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",className:"rounded-xl text-slate-600 hover:text-slate-800 hover:bg-slate-100 transition-all duration-200",onClick:()=>{x(!0),0===I.length&&H(0,!0)},children:[(0,be.jsx)(to.A,{className:"h-4 w-4 mr-2"}),"Logs"]}),(0,be.jsx)("div",{className:"w-px h-6 bg-slate-300 mx-1"}),(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",className:"rounded-xl text-slate-600 hover:text-slate-800 hover:bg-slate-100 transition-all duration-200",onClick:()=>u(!0),children:[(0,be.jsx)(sa.A,{className:"h-4 w-4 mr-2"}),"API"]})]})}),(0,be.jsx)(ll,{open:h&&!a,onOpenChange:x,children:(0,be.jsxs)(hl,{className:"sm:max-w-3xl md:max-w-5xl w-[96vw]",children:[(0,be.jsx)(xl,{className:"pb-3",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(to.A,{className:"h-5 w-5 text-teal-600"}),(0,be.jsx)(gl,{className:"text-slate-800 text-lg",children:"Logs"})]}),(0,be.jsx)("div",{className:"text-sm text-slate-500 font-mono bg-slate-100 px-2 py-1 rounded",children:t})]}),(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{H(0,!0)},disabled:R,className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50 border-teal-200",children:[(0,be.jsx)($l.A,{className:"h-4 w-4 mr-1 "+(R?"animate-spin":"")}),"Refresh"]})]})}),(0,be.jsxs)("div",{className:"space-y-3",children:[D&&(0,be.jsxs)(We,{variant:"destructive",className:"mb-4",children:[(0,be.jsx)(ro.A,{className:"h-4 w-4"}),(0,be.jsx)(Ye,{children:"Error"}),(0,be.jsx)(Ge,{children:D})]}),0===I.length&&!R&&!D&&(0,be.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,be.jsx)(Js.A,{className:"h-8 w-8 mx-auto mb-3 text-slate-400"}),(0,be.jsx)("p",{className:"font-medium mb-1",children:"No logs found"}),(0,be.jsx)("p",{className:"text-xs text-slate-400",children:"This function hasn't generated any logs yet."})]}),I.length>0&&(0,be.jsx)("div",{className:"max-h-[70vh] overflow-y-auto border border-slate-200 rounded-lg",children:(0,be.jsx)("div",{className:"divide-y divide-slate-100",children:I.map(((e,s)=>{return(0,be.jsxs)("div",{className:"px-3 py-2 hover:bg-slate-50/50 transition-colors "+(J(e.level).includes("red")?"bg-red-50/30":J(e.level).includes("amber")?"bg-amber-50/30":J(e.level).includes("blue")?"bg-blue-50/30":J(e.level).includes("purple")?"bg-purple-50/30":""),children:[(0,be.jsx)("div",{className:"flex items-start gap-3 mb-1",children:(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.level&&(0,be.jsx)("span",{className:"text-xs font-medium uppercase px-1.5 py-0.5 rounded-sm "+("error"===e.level.toLowerCase()?"bg-red-100 text-red-700 border border-red-200":"warn"===e.level.toLowerCase()||"warning"===e.level.toLowerCase()?"bg-amber-100 text-amber-700 border border-amber-200":"info"===e.level.toLowerCase()?"bg-blue-100 text-blue-700 border border-blue-200":"debug"===e.level.toLowerCase()?"bg-purple-100 text-purple-700 border border-purple-200":"bg-slate-100 text-slate-700 border border-slate-200"),children:e.level}),(0,be.jsx)("span",{className:"text-xs text-slate-400 font-mono min-w-0",children:V(e.time).split(", ")[1]}),e.region&&(0,be.jsx)("span",{className:"text-xs text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded-sm font-mono",children:e.region.replace("gcp-","")})]})}),(0,be.jsx)("div",{className:"font-mono text-xs leading-relaxed text-slate-700 whitespace-pre-wrap break-words pl-1",children:"string"==typeof e.message?(t=e.message.trim(),"string"!=typeof t?t:t.replace(/\u001b\[[0-9;]*m/g,"")):JSON.stringify(e.message,null,2)})]},`${e.time}-${s}`);var t}))})}),F&&I.length>0&&(0,be.jsx)("div",{className:"flex justify-center pt-2",children:(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>{!R&&F&&H(U+M)},disabled:R,className:"text-slate-600 hover:text-slate-800 text-xs",children:R?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-1 h-3 w-3 animate-spin"}),"Loading..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($a.A,{className:"mr-1 h-3 w-3"}),"Load More"]})})}),R&&0===I.length&&(0,be.jsx)("div",{className:"flex justify-center py-8",children:(0,be.jsxs)("div",{className:"flex items-center text-slate-500 text-sm",children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading logs..."]})})]})]})}),(0,be.jsx)(ll,{open:m&&!a,onOpenChange:u,children:(0,be.jsxs)(hl,{className:"sm:max-w-md md:max-w-lg w-[90vw] flex flex-col",children:[(0,be.jsxs)(xl,{className:"pb-4 flex-shrink-0",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(sa.A,{className:"h-5 w-5 text-teal-600"}),(0,be.jsx)(gl,{className:"text-slate-800 text-lg",children:"API Information"})]}),(0,be.jsx)("div",{className:"text-sm text-slate-500 font-mono bg-slate-100 px-2 py-1 rounded w-fit",children:t})]}),(0,be.jsxs)("div",{className:"flex-1 overflow-y-auto mt-6 space-y-6 pr-2",children:[(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wider",children:"Function URL"}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>q(W(),"url"),className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:S?(0,be.jsx)(js.A,{className:"h-4 w-4"}):(0,be.jsx)(Ot.A,{className:"h-4 w-4"})})]}),(0,be.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:(0,be.jsx)("code",{className:"text-sm font-mono text-slate-800 break-all",children:W()})}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"Make POST requests to this endpoint with your function payload."})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wider",children:"Headers"}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>q(JSON.stringify(G(),null,2),"headers"),className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:A?(0,be.jsx)(js.A,{className:"h-4 w-4"}):(0,be.jsx)(Ot.A,{className:"h-4 w-4"})})]}),(0,be.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:(0,be.jsx)("pre",{className:"text-sm font-mono text-slate-800 whitespace-pre-wrap",children:JSON.stringify(G(),null,2)})}),(0,be.jsxs)("div",{className:"text-xs text-slate-500 space-y-1",children:[(0,be.jsxs)("p",{children:[(0,be.jsx)("strong",{children:"Content-Type:"})," Always required for JSON payloads."]}),null!=r&&r.api_key?(0,be.jsxs)("p",{children:[(0,be.jsx)("strong",{children:"api_key:"})," Your personal API key - only include this if your function requires authentication. Keep it secure and don't expose it publicly."]}):(0,be.jsxs)("p",{className:"text-amber-600",children:[(0,be.jsx)("strong",{children:"api_key:"})," Not found. Include your personal API key here only if your function requires authentication."]})]})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wider",children:"Request Body"}),(0,be.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:(0,be.jsx)("pre",{className:"text-sm font-mono text-slate-800 whitespace-pre-wrap",children:'{\n  "param1": "value1",\n  "param2": "value2"\n}'})}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"Send a JSON object in the request body with any parameters your function requires. The structure depends on what your function expects to receive."})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wider",children:"Usage Example (cURL)"}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>q(`curl -X POST "${W()}" \\\n  -H "Content-Type: application/json" ${null!=r&&r.api_key?`\\\n  -H "api_key: ${r.api_key}" `:""}\\\n  -d '{"param1": "value1", "param2": "value2"}'`,"curl"),className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:T?(0,be.jsx)(js.A,{className:"h-4 w-4"}):(0,be.jsx)(Ot.A,{className:"h-4 w-4"})})]}),(0,be.jsx)("div",{className:"bg-slate-900 rounded-lg p-4",children:(0,be.jsx)("pre",{className:"text-sm font-mono text-green-400 whitespace-pre-wrap break-all",children:`curl -X POST "${W()}" \\\n  -H "Content-Type: application/json" ${null!=r&&r.api_key?`\\\n  -H "api_key: ${r.api_key}" `:""}\\\n  -d '{"param1": "value1", "param2": "value2"}'`})})]})]})]})}),(0,be.jsx)(ll,{open:c&&!a,onOpenChange:d,children:(0,be.jsxs)(hl,{className:"sm:max-w-md md:max-w-lg w-[90vw]",children:[(0,be.jsxs)(xl,{className:"pb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(so.A,{className:"h-5 w-5 text-orange-600"}),(0,be.jsx)(gl,{className:"text-slate-800 text-lg",children:"Test Function"})]}),(0,be.jsx)("div",{className:"text-sm text-slate-500 font-mono bg-slate-100 px-2 py-1 rounded w-fit",children:t})]}),(0,be.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Payload"}),(0,be.jsx)(Na,{value:p,onChange:e=>g(e.target.value),className:"font-mono h-40",placeholder:"Enter JSON payload"})]}),(0,be.jsx)(Ze,{onClick:async()=>{if(l&&t){v(!0),N(null),j(null);try{const e=JSON.parse(p),s=await l[t](e);j(s)}catch(i){var e,s,a,r,n;N((null===(e=i.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error)||(null===(a=i.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||i.message||"An error occurred while executing the function"),C((null===(n=i.response)||void 0===n?void 0:n.data)||"")}finally{v(!1)}}},disabled:b,className:"w-full",children:b?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Running..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ao.A,{className:"mr-2 h-4 w-4"}),"Run Function"]})}),y&&(0,be.jsxs)(We,{variant:"destructive",children:[(0,be.jsx)(ro.A,{className:"h-4 w-4"}),(0,be.jsx)(Ye,{children:"Error"}),(0,be.jsxs)(Ge,{className:"font-mono text-sm whitespace-pre-wrap break-all",children:[y,w&&(0,be.jsxs)("div",{className:"mt-2 pt-2 border-t border-red-300 dark:border-red-700",children:[(0,be.jsx)("h4",{className:"text-xs font-semibold mb-1 uppercase tracking-wider text-red-700 dark:text-red-300",children:"Technical Details (JSON RESPONSE):"}),(0,be.jsx)("div",{className:"bg-red-50 dark:bg-red-900/30 p-2 rounded-md overflow-auto max-h-40",children:(0,be.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap break-all",children:"string"==typeof w?w:JSON.stringify(w,null,2)})})]})]})]}),f&&(0,be.jsxs)("div",{className:"mt-4",children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Result"}),(0,be.jsxs)(Ta,{defaultValue:"formatted",children:[(0,be.jsxs)(Ea,{className:"mb-2",children:[(0,be.jsx)(Ia,{value:"formatted",children:"Formatted"}),(0,be.jsx)(Ia,{value:"raw",children:"Raw"})]}),(0,be.jsx)(Pa,{value:"formatted",children:(0,be.jsx)("div",{className:"bg-gray-50 p-4 rounded-md overflow-auto max-h-60",children:(0,be.jsx)("pre",{className:"text-sm font-mono whitespace-pre-wrap",children:(e=>{try{return JSON.stringify(e,null,2)}catch(s){return String(e)}})(f)})})}),(0,be.jsx)(Pa,{value:"raw",children:(0,be.jsx)("div",{className:"bg-gray-50 p-4 rounded-md overflow-auto max-h-60",children:(0,be.jsx)("pre",{className:"text-sm font-mono whitespace-pre-wrap",children:JSON.stringify(f)})})})]})]})]})]})})]})})),io=no;var lo=t(53270),oo=t(57543),co=t(15939),mo=t(1323);const uo=e=>{let{selectedFile:s,onFileSelect:t,onBack:a,app:r,width:n,hasUnsavedChanges:i=!1}=e;const[l,o]=(0,Y.useState)(""),[c,d]=(0,Y.useState)([]),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)({}),p=e=>{const s={};return Object.keys(e||{}).forEach((e=>{const t=e.split("/");let a=s;for(let s=0;s<t.length;s++){const e=t[s],r=s===t.length-1,n=t.slice(0,s+1).join("/");a[e]||(a[e]=r?{isFile:!0,path:n}:{isFile:!1,children:{},path:n}),r||(a=a[e].children||{})}})),s},g=(e,s,t)=>Object.entries(e).map((e=>{let[a,r]=e;const n=s?`${s}/${a}`:`${t}:${a}`;if(r.isFile){return{id:n,label:a,icon:"entities"===t?(0,be.jsx)(lo.A,{className:"w-4 h-4"}):(0,be.jsx)(oo.A,{className:"w-4 h-4"})}}{const e=g(r.children,n,t);return{id:n,label:a,icon:(0,be.jsx)(co.A,{className:"w-4 h-4"}),subitems:e}}}));(0,Y.useEffect)((()=>{if(l.length<2||!m)return void d([]);const e=[],s=(s,t)=>{t&&Object.entries(t).forEach((t=>{let[a,r]=t;const n=r.toString().split("\n").map(((e,s)=>({line:e,idx:s+1}))).filter((e=>{let{line:s}=e;return s.toLowerCase().includes(l.toLowerCase())}));n.length>0&&e.push({type:s,key:a,matches:n.map((e=>{let{line:s,idx:t}=e;return{lineNumber:t,content:s,preview:s.trim()}}))})}))};if(s("pages",r.pages),s("components",r.components),s("entities",r.entities),s("functions",r.functions),r.layout){const s=r.layout.toString().split("\n").map(((e,s)=>({line:e,idx:s+1}))).filter((e=>{let{line:s}=e;return s.toLowerCase().includes(l.toLowerCase())}));s.length>0&&e.push({type:"layout",key:"main",matches:s.map((e=>{let{line:s,idx:t}=e;return{lineNumber:t,content:s,preview:s.trim()}}))})}d(e)}),[l,r,m]);const f=e=>{let{item:s,selected:t,onSelect:a}=e;const r=h[s.id]||!1,n=r?s.matches:s.matches.slice(0,3),l=s.matches.length>3;return(0,be.jsxs)("div",{className:"pl-2 mb-2",children:[(0,be.jsxs)(Ze,{variant:t===s.id?"secondary":"ghost",className:`w-full justify-start text-left ${t===s.id?"bg-primary/10 text-primary hover:bg-primary/20":"hover:bg-gray-100"} ${i?"pointer-events-none opacity-60 cursor-not-allowed":""}`,onClick:()=>{i||a(s.id)},title:i?"You have unsaved changes. Save or discard to jump to a line.":"",children:[s.icon,(0,be.jsx)("span",{className:"ml-2 truncate max-w-[250px] inline-block",children:s.label})]}),(0,be.jsxs)("div",{className:"pl-4 mt-1 text-xs",children:[n.map(((e,t)=>(0,be.jsxs)("div",{className:"text-gray-600 bg-gray-100 rounded p-1 mb-1 overflow-hidden cursor-pointer hover:bg-gray-200 "+(i?"pointer-events-none opacity-60 cursor-not-allowed":""),onClick:()=>{return t=e.lineNumber,void(i||a(s.id,t));var t},title:i?"You have unsaved changes. Save or discard to jump to a line.":"",children:[(0,be.jsxs)("span",{className:"text-gray-500",children:[e.lineNumber,": "]}),(0,be.jsx)("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis inline-block max-w-[180px]",children:e.preview})]},t))),l&&(0,be.jsxs)("div",{className:"text-gray-500 italic pl-1 flex items-center cursor-pointer hover:text-gray-700",onClick:e=>{e.stopPropagation(),x((e=>({...e,[s.id]:!r})))},children:[(0,be.jsx)("span",{className:"mr-1 inline-block w-4 h-4 text-center leading-4 bg-gray-200 rounded-full",children:r?"\u2212":"+"}),r?"Collapse matches":s.matches.length-3+" more matches"]})]})]})};return(0,be.jsxs)("div",{className:"flex flex-col h-full bg-gray-100 border-r",style:{width:"100%"},children:[(0,be.jsx)("div",{className:"border-b p-2 bg-gray-50",children:(0,be.jsxs)(Ze,{variant:"ghost",className:"w-full justify-start text-sm",onClick:a,children:[(0,be.jsx)(Xs.A,{className:"h-4 w-4 mr-2"}),"Back to Editor"]})}),(0,be.jsx)("div",{className:"p-3 border-b",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(is,{type:"text",placeholder:"Search files...",value:l,onChange:e=>{o(e.target.value),u(e.target.value.length>=2)},className:"text-sm w-full"}),l&&(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:()=>{o(""),u(!1)},children:(0,be.jsx)(mo.MKb,{className:"h-4 w-4"})})]})}),m&&c.length>0?(0,be.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,be.jsxs)("div",{className:"p-2 text-xs text-gray-500",children:[c.length," result",1!==c.length?"s":""," in ",c.length," file",1!==c.length?"s":""]}),(0,be.jsx)("div",{className:"space-y-1",children:c.map((e=>({id:`${e.type}:${e.key}`,label:e.key,icon:"entities"===e.type?(0,be.jsx)(lo.A,{className:"w-4 h-4"}):"layout"===e.type?(0,be.jsx)(Nr.A,{className:"w-4 h-4"}):(0,be.jsx)(oo.A,{className:"w-4 h-4"}),matches:e.matches}))).map(((e,a)=>(0,be.jsx)(f,{item:e,selected:s?`${s.type}:${s.key}`:null,onSelect:t},a)))})]}):(0,be.jsx)(ui,{items:(()=>{const e=[];if(r.pages&&Object.keys(r.pages).length>0){const s=p(r.pages);e.push({id:"pages",label:"Pages",icon:(0,be.jsx)(co.A,{className:"w-4 h-4"}),subitems:g(s,null,"pages")})}if(r.components&&Object.keys(r.components).length>0){const s=p(r.components);e.push({id:"components",label:"Components",icon:(0,be.jsx)(co.A,{className:"w-4 h-4"}),subitems:g(s,null,"components")})}if(r.entities&&Object.keys(r.entities).length>0){const s=p(r.entities);e.push({id:"entities",label:"Entities",icon:(0,be.jsx)(co.A,{className:"w-4 h-4"}),subitems:g(s,null,"entities")})}if(r.layout&&e.push({id:"layout:main",label:"Layout.js",icon:(0,be.jsx)(Nr.A,{className:"w-4 h-4"})}),r.has_backend_functions_enabled&&r.functions){const s=p(r.functions);e.push({id:"functions",label:"Functions",icon:(0,be.jsx)(co.A,{className:"w-4 h-4"}),subitems:g(s,null,"functions")})}return e})(),selected:s?`${s.type}:${s.key}`:null,onSelect:e=>{if(e.includes("/")){const[s,a]=(e=>{if(-1!==e.indexOf(":"))return e.split(":");const s=e.split("/"),t=s[0];return 1===s.length?[t,""]:[t,s.slice(1).join("/")]})(e);let n=!1;("pages"===s&&r.pages&&r.pages[a]||"components"===s&&r.components&&r.components[a]||"functions"===s&&r.functions&&r.functions[a]||"entities"===s&&r.entities&&r.entities[a])&&(n=!0),n&&t(`${s}:${a}`)}else t(e)},title:"Files",showBackButton:!1,onBack:a,showSearch:!1,style:{width:"100%"}})]})};var ho=t(81646),xo=t(13129);const po=e=>{let{className:s,...t}=e;return(0,be.jsx)(xo.YZ,{className:Be("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",s),...t})},go=xo.Zk,fo=e=>{let{withHandle:s,className:t,...a}=e;return(0,be.jsx)(xo.TW,{className:Be("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...a,children:s&&(0,be.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,be.jsx)(ho.A,{className:"h-2.5 w-2.5"})})})},jo=()=>{const{app:e}=xa(),[s,t]=(0,Y.useState)(null),[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(!1),l=(0,Y.useRef)(null),o=(0,J.Zp)(),c=(0,J.zy)();(0,Y.useEffect)((()=>{const s=new URLSearchParams(c.search),a=s.get("filePath"),n=s.get("line");if(r(n?parseInt(n,10):null),a&&e){const s=a.replace(/\.\w+$/,"").split("/");if(s.length>=2){const a=s[0],r=s.slice(1).join("/");let n=!1;("pages"===a&&e.pages&&e.pages[r]||"components"===a&&e.components&&e.components[r]||"functions"===a&&e.functions&&e.functions[r]||"entities"===a&&e.entities&&e.entities[r]||"layout"===a&&e.layout)&&(n=!0),n&&t({type:a,key:r})}}}),[e,c.search]);const d=(()=>{if(!s)return null;switch(s.type){case"pages":return`pages/${s.key}`;case"components":return`components/${s.key}`;case"functions":return`functions/${s.key}`;case"entities":return`entities/${s.key}`;case"layout":return"layout";default:return null}})(),m="functions"===(null==s?void 0:s.type);return(0,be.jsx)("div",{className:"h-full w-full border rounded-lg overflow-hidden bg-white shadow-sm",children:(0,be.jsxs)(po,{direction:"horizontal",children:[(0,be.jsx)(go,{defaultSize:33,minSize:20,maxSize:40,className:"h-full overflow-hidden",children:(0,be.jsx)(uo,{selectedFile:s,onFileSelect:function(s){let a,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(s.includes(":"))[a,n]=s.split(":");else{if(!s.includes("/"))return a=s,void(n="");{const t=s.split("/");a=t[0],n=t.slice(1).join("/");let r=!1;if(("pages"===a&&e.pages&&e.pages[n]||"components"===a&&e.components&&e.components[n]||"functions"===a&&e.functions&&e.functions[n]||"entities"===a&&e.entities&&e.entities[n])&&(r=!0),!r)return}}t({type:a,key:n}),r(i);const l="layout"===a?"layout/main":`${a}/${n}`,c=new URLSearchParams;c.set("filePath",l),i&&c.set("line",i),o(`?${c.toString()}`,{replace:!0})},onBack:()=>{o(`/apps/${e.id}/editor/workspace/overview`)},app:e})}),(0,be.jsx)(fo,{withHandle:!0,className:"group transition-opacity opacity-0 hover:opacity-100 focus:opacity-100"}),(0,be.jsx)(go,{defaultSize:75,className:"flex-1 overflow-x-auto",children:d?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ql,{filepath:d,selectedLine:a,onEdit:()=>{if(i(!0),null!==a){r(null);const e=new URLSearchParams(c.search);e.delete("line"),o(`?${e.toString()}`,{replace:!0})}},onSaveOrDiscard:()=>{i(!1)},isFunction:m,onRedeployFunction:async(e,s)=>{i(!0),l.current&&(await e(s),i(!1))}}),m&&(0,be.jsx)(io,{ref:l,functionName:s.key,hasUnsavedChanges:n})]}):(0,be.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500",children:"Select a file to view code"})})]})})};const bo=new class extends me{getBaseURL(){return"/custom-domains"}refreshStatus(e){return this.axios.post(`/${e}/status`)}verify(e){return this.axios.post(`/${e}/verify`)}unlink(e){return this.axios.post(`/${e}/unlink`)}link(e){return this.axios.post(`/${e}/link`)}getEntriToken(e){let{appId:s,appName:t}=e;return ce("/apps/buy_domain").post("/start",{appId:s,appName:t})}};function vo(e){let{appId:s,appName:t}=e;const[a,r]=(0,Y.useState)(!1),{toast:n}=or(),[i,l]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{(async()=>{if(!window.entri)return new Promise((e=>{const s=document.createElement("script");s.src="https://cdn.goentri.com/entri.js",s.async=!0,s.onload=()=>{l(!0),e()},document.body.appendChild(s)}));l(!0)})()}),[]);return(0,be.jsx)(Ze,{variant:"default",onClick:async()=>{if(i){r(!0);try{const e={...(await bo.getEntriToken({appId:s,appName:t})).config};await window.entri.purchaseDomain(e),je("Domain - Buy",{})}catch(l){var e,a;n({variant:"destructive",title:"Error",description:(null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to get purchase config",duration:3e3})}r(!1)}else n({variant:"destructive",title:"Error",description:"Entri is not ready yet. Please try again in a moment.",duration:3e3})},disabled:a||!i,className:"w-full h-10 text-base font-semibold bg-black hover:bg-gray-800",children:a||i?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ks.A,{className:"h-3 w-3 mr-2"}),"Buy Domain"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($l.A,{className:"h-3 w-3 mr-2 animate-spin"}),"Loading Entri..."]})})}var yo=t(39181);const No=yo.Provider,wo=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(yo.Viewport,{ref:s,className:Be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...a})}));wo.displayName=yo.Viewport.displayName;const Co=(0,Me.cva)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),So=Y.forwardRef(((e,s)=>{let{className:t,variant:a,...r}=e;return(0,be.jsx)(yo.Root,{ref:s,className:Be(Co({variant:a}),t),...r})}));So.displayName=yo.Root.displayName;const ko=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(yo.Action,{ref:s,className:Be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...a})}));ko.displayName=yo.Action.displayName;const Ao=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(yo.Close,{ref:s,className:Be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...a,children:(0,be.jsx)(He.A,{className:"h-4 w-4"})})}));Ao.displayName=yo.Close.displayName;const _o=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(yo.Title,{ref:s,className:Be("text-sm font-semibold",t),...a})}));_o.displayName=yo.Title.displayName;const To=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(yo.Description,{ref:s,className:Be("text-sm opacity-90",t),...a})}));function Eo(){const{toasts:e}=qn();return(0,be.jsxs)(No,{children:[e.map((function(e){let{id:s,title:t,description:a,action:r,...n}=e;return(0,be.jsxs)(So,{...n,children:[(0,be.jsxs)("div",{className:"grid gap-1",children:[t&&(0,be.jsx)(_o,{children:t}),a&&(0,be.jsx)(To,{children:a})]}),r,(0,be.jsx)(Ao,{})]},s)})),(0,be.jsx)(wo,{})]})}To.displayName=yo.Description.displayName;const Io=1e4,Po=e=>{let{isLoading:s,loadingText:t,children:a,...r}=e;return(0,be.jsx)(Ze,{...r,children:s?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($l.A,{className:"h-4 w-4 mr-2 animate-spin"}),t]}):a})},Ro=e=>{let{open:s,onOpenChange:t,title:a,description:r,isLoading:n,loadingText:i,confirmText:l,onConfirm:o,variant:c="destructive"}=e;return(0,be.jsx)(jt,{open:s,onOpenChange:t,children:(0,be.jsxs)(wt,{children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:a}),(0,be.jsx)(At,{children:r})]}),(0,be.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,be.jsx)(Po,{variant:c,onClick:o,disabled:n,isLoading:n,loadingText:i,children:l})]})]})})},Oo=e=>{var s,t;let{domain:a}=e;const r=void 0!==(null===(s=a.purchase_info)||void 0===s?void 0:s.purchase_time);return!0===(null===(t=a.purchase_info)||void 0===t?void 0:t.blocked)?(0,be.jsx)("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:"Blocked"}):r?(0,be.jsx)("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:"Base44 Domain"}):null},Do=e=>{let{status:s,lastChecked:t,lastPollingTime:a,isBoughtDomain:r,isActive:n,isUnlinked:i}=e;return i?(0,be.jsx)("p",{className:"text-sm text-gray-500",children:s}):(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("p",{className:"text-sm text-gray-500",children:s}),!r&&t&&(0,be.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:(0,be.jsxs)("span",{children:["Last checked: ",it().utc(t).fromNow()]})}),r&&!n&&a&&(0,be.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:(0,be.jsxs)("span",{children:["Last checked: ",it()(a).format("HH:mm:ss")]})})]})},Lo=e=>{var s,t,a,r;let{domain:n,isChecking:i,isVerifying:l,isUnlinking:o,onCheck:c,onVerify:d,onUnlink:m}=e;const[u,h]=(0,Y.useState)(!1),{toast:x}=qn(),p=void 0!==(null===(s=n.purchase_info)||void 0===s?void 0:s.purchase_time),g=!0===(null===(t=n.purchase_info)||void 0===t?void 0:t.unlinked),f=(null===(a=n.purchase_info)||void 0===a?void 0:a.purchase_time)&&(null===(r=n.purchase_info)||void 0===r?void 0:r.propagation_status),j=async()=>{h(!0);try{await bo.link(n.id),x({title:"Domain linked",description:"Domain has been linked to your project",duration:3e3}),c()}catch(t){var e,s;x({variant:"destructive",title:"Error linking domain",description:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Something went wrong",duration:3e3})}h(!1)};return g?(0,be.jsx)("div",{className:"flex items-center gap-2 justify-end",children:(0,be.jsx)(Po,{variant:"outline",size:"sm",onClick:j,disabled:u,isLoading:u,loadingText:"Linking...",children:"Link Domain"})}):(0,be.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[!f&&(0,be.jsxs)(Po,{variant:"ghost",size:"sm",onClick:c,className:"text-gray-500",disabled:i,isLoading:i,loadingText:"Checking...",children:[(0,be.jsx)($l.A,{className:"h-4 w-4 mr-2"}),"Check Status"]}),!p&&(0,be.jsx)(Po,{variant:"outline",size:"sm",onClick:d,disabled:l,isLoading:l,loadingText:"Verifying...",children:"Verify Domain"}),p&&!g&&(0,be.jsx)(Po,{variant:"outline",size:"sm",onClick:m,disabled:o,isLoading:o,loadingText:"Unlinking...",children:"Unlink Domain"})]})},Uo=e=>{var s,t,a,r;let{domain:n,onUpdate:i,lastPollingTime:l}=e;const{toast:o}=qn(),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(!1),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(!1),[b,v]=(0,Y.useState)(!1),y=void 0!==(null===(s=n.purchase_info)||void 0===s?void 0:s.purchase_time),N=!0===(null===(t=n.purchase_info)||void 0===t?void 0:t.unlinked),w=null!==(C=n.purchase_info)&&void 0!==C&&C.unlinked?"Unlinked":null!==(S=n.purchase_info)&&void 0!==S&&S.purchase_time&&null!==(k=n.purchase_info)&&void 0!==k&&k.propagation_status?"Domain Active":null===(A=n.purchase_info)||void 0===A||!A.purchase_time||null!==(_=n.purchase_info)&&void 0!==_&&_.blocked?"verified"===(null===(T=n.last_status_payload)||void 0===T?void 0:T.verificationStatus)?"Verified":"error"===(null===(E=n.last_status_payload)||void 0===E?void 0:E.verificationStatus)?"Error":"Pending":"Waiting for DNS Propagation";var C,S,k,A,_,T,E;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ro,{open:f,onOpenChange:j,title:"Delete Domain",description:"Are you sure you want to delete?",isLoading:m,loadingText:"Deleting...",confirmText:"Delete Domain",onConfirm:async()=>{u(!0);try{await bo.delete(n.id),o({title:"Domain deleted",duration:3e3}),i()}catch(t){var e,s;o({variant:"destructive",title:"Error deleting domain",description:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Something went wrong",duration:3e3})}u(!1),j(!1)}}),(0,be.jsx)(Ro,{open:b,onOpenChange:v,variant:"default",title:"Unlink Domain",description:"This domain was purchased through Base44.\n\nIt will remain listed under your domains but will no longer be connected to your project.",isLoading:p,loadingText:"Unlinking...",confirmText:"Unlink Domain",onConfirm:async()=>{g(!0);try{await bo.unlink(n.id),o({title:"Domain unlinked",description:"Domain has been unlinked from your project",duration:3e3}),i()}catch(t){var e,s;o({variant:"destructive",title:"Error unlinking domain",description:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Something went wrong",duration:3e3})}g(!1),v(!1)}}),(0,be.jsx)(Ds,{className:"hover:bg-gray-50 transition-colors "+(N?"opacity-60":""),children:(0,be.jsx)(Ms,{className:"p-4",children:(0,be.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:["Domain Active"===w||"Verified"===w?(0,be.jsx)(ba.A,{className:"h-5 w-5 text-green-500"}):(0,be.jsx)(Te.A,{className:"h-5 w-5 text-yellow-500"}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("a",{href:`https://${n.domain}`,target:"_blank",children:(0,be.jsx)("p",{className:"font-medium",children:n.domain})}),(0,be.jsx)(Oo,{domain:n})]}),(0,be.jsx)(Do,{status:w,lastChecked:n.last_status_check,lastPollingTime:l,isUnlinked:N,isBoughtDomain:y,isActive:(null===(a=n.purchase_info)||void 0===a?void 0:a.purchase_time)&&(null===(r=n.purchase_info)||void 0===r?void 0:r.propagation_status)})]})]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>j(!0),className:"text-red-500 hover:text-red-600 hover:bg-red-50",disabled:m||y&&!N,children:(0,be.jsx)(Sl.A,{className:"h-4 w-4 "+(m?"animate-spin":"")})})]}),(0,be.jsx)(Lo,{domain:n,isChecking:h,isVerifying:c,isUnlinking:p,onCheck:async()=>{x(!0);try{var e;const s=void 0!==(null===(e=n.purchase_info)||void 0===e?void 0:e.purchase_time);s||await bo.refreshStatus(n.id),i(),s&&await new Promise((e=>setTimeout(e,1e3)))}catch(a){var s,t;o({variant:"destructive",title:"Error checking status",description:(null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.detail)||"Something went wrong",duration:3e3})}x(!1)},onVerify:async()=>{d(!0);try{await bo.verify(n.id),o({title:"Verification initiated",description:"Please check back in a few minutes",duration:3e3}),i()}catch(t){var e,s;o({variant:"destructive",title:"Error verifying domain",description:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Something went wrong",duration:3e3})}d(!1)},onUnlink:()=>v(!0)})]})})})]})},$o=e=>{let{onAdd:s,loading:t,open:a,setOpen:r}=e;const[n,i]=(0,Y.useState)("");return(0,be.jsxs)(jt,{open:a,onOpenChange:r,children:[(0,be.jsx)(bt,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",className:"text-gray-700 hover:text-gray-900 hover:bg-gray-100",children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Add Domain"]})}),(0,be.jsxs)(wt,{children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Add New Domain"}),(0,be.jsx)(At,{children:"Enter your domain name below. Make sure it follows the format: app.example.com"})]}),(0,be.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,be.jsx)(is,{placeholder:"Enter domain (e.g. app.example.com)",value:n,onChange:e=>i(e.target.value)}),(0,be.jsx)("div",{className:"flex justify-end",children:(0,be.jsx)(Po,{onClick:async()=>{const e=n.toLowerCase().trim();await s(e),i(""),r(!1)},disabled:t||!n,isLoading:t,loadingText:"Adding...",children:"Add Domain"})})]})]})]})},Mo=e=>{let{onUpgrade:s}=e;return(0,be.jsx)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)] p-6",children:(0,be.jsx)(Ds,{className:"w-full max-w-lg",children:(0,be.jsxs)(Ms,{className:"p-6 text-center",children:[(0,be.jsx)(Zs.A,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),(0,be.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Want to use your own domain?"}),(0,be.jsx)("p",{className:"text-gray-600 mb-6",children:"Custom domains are a premium feature available on our Builder plan and above. Upgrade to connect your own domain to this app."}),(0,be.jsx)(Ze,{onClick:s,className:"w-full",children:"View Plans"})]})})})},Fo=()=>(0,be.jsx)(Ds,{children:(0,be.jsx)(Ms,{className:"p-4",children:(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsx)(Mr.A,{className:"h-5 w-5 text-blue-500 shrink-0 mt-0.5"}),(0,be.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,be.jsxs)("p",{className:"font-medium",children:[(0,be.jsx)("b",{children:"After adding a domain"}),", connect it via your DNS provider:"]}),(0,be.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[(0,be.jsxs)("li",{children:["Add CNAME record: ",(0,be.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded",children:"www \u2192 base44.onrender.com"})]}),(0,be.jsxs)("li",{children:["Add ANAME/ALIAS record: ",(0,be.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded",children:"empty or @ \u2192 base44.onrender.com"})]}),(0,be.jsxs)("li",{children:["If your DNS provider doesn't support ANAME/ALIAS, use A record: ",(0,be.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded",children:"@ \u2192 216.24.57.1"})]}),(0,be.jsx)("li",{children:"Remove any AAAA records from your domain while configuring DNS. AAAA records map to an IPv6 address, and Base44 uses IPv4. These records can cause unexpected behavior for your custom domain."})]}),(0,be.jsx)("p",{className:"text-gray-600",children:"Note: After adding DNS records, it may take some time for changes to fully propagate across the internet. During this time, the domain may not work properly."}),(0,be.jsxs)("p",{className:"text-xs text-gray-500",children:["Need help? Create a ticket at ",(0,be.jsx)("button",{type:"button",onClick:()=>{window.open("/support","_blank")},className:"underline text-primary hover:text-orange-500 transition-colors",children:"support system"})]})]})]})})});function zo(e){let{appId:s,appName:t}=e;const{user:a}=Ne(),[r,n]=(0,Y.useState)([]),[i,l]=(0,Y.useState)(!1),{toast:o}=qn(),c=(0,J.Zp)(),d=(0,Y.useRef)(null),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(null),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(!1),[b,v]=(0,Y.useState)(null),y=["builder","pro","elite","elite_2","elite_3","enterprise"].includes(null==a?void 0:a.subscription_tier),N=async()=>{try{const t=await bo.filter({app_id:s});if(n(t),v(Date.now()),h){const s=t.find((e=>e.domain===h));var e;if(s)x(null),null!==(e=s.purchase_info)&&void 0!==e&&e.propagation_status||m?C():w()}const a=t.some((e=>{var s,t,a;return(null===(s=e.purchase_info)||void 0===s?void 0:s.purchase_time)&&!(null!==(t=e.purchase_info)&&void 0!==t&&t.propagation_status)&&!(null!==(a=e.purchase_info)&&void 0!==a&&a.blocked)}));a&&!m?w():!a&&m&&C()}catch(r){var t,a;o({variant:"destructive",title:"Error fetching domains",description:(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Something went wrong",duration:3e3})}},w=()=>{u(!0),d.current&&clearInterval(d.current),d.current=setInterval(N,Io)},C=()=>{u(!1),d.current&&(clearInterval(d.current),d.current=null)};(0,Y.useEffect)((()=>(y&&N(),()=>{C()})),[s,y]),(0,Y.useEffect)((()=>{const e=new URLSearchParams(window.location.search),s=e.get("result"),t=e.get("domain");if(s&&t){"success"===s?(o({title:"Domain Purchased!",description:`Your domain ${t} was purchased successfully. Waiting for it to appear in your domains...`}),x(t),w(),je("Domain - Purchased Successfully",{domain:t})):o({variant:"destructive",title:"Domain Purchase Failed",description:`Purchase failed for ${t}.`});const e=new URL(window.location);e.searchParams.delete("result"),e.searchParams.delete("domain"),window.history.replaceState({},document.title,e.pathname)}}),[]);return y?(0,be.jsxs)("div",{className:"space-y-6 p-6",children:[(0,be.jsx)(Eo,{}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Custom Domains"}),(0,be.jsxs)("div",{className:"flex flex-col items-start gap-2 mb-4 w-full max-w-sm",children:[(0,be.jsx)(vo,{appId:s,appName:t}),(0,be.jsx)("button",{onClick:()=>g((e=>!e)),className:"text-blue-500 hover:underline text-sm",children:"Already have a domain? Set it up here"})]}),p&&(0,be.jsxs)("div",{className:"space-y-2 mb-4 w-full max-w-xl",children:[(0,be.jsx)($o,{onAdd:async e=>{if(e){l(!0);try{await bo.create({domain:e,app_id:s}),await N(),o({title:"Domain added successfully",description:"Please verify your domain to complete setup",duration:3e3})}catch(r){var t,a;o({variant:"destructive",title:"Error creating domain",description:(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Something went wrong",duration:3e3})}l(!1)}},loading:i,open:f,setOpen:j}),(0,be.jsx)(Fo,{})]}),(0,be.jsx)("div",{className:"grid gap-6",children:r.length>0&&(0,be.jsx)("div",{className:"space-y-4",children:r.map((e=>(0,be.jsx)(Uo,{domain:e,onUpdate:N,lastPollingTime:b},e.id)))})})]})]}):(0,be.jsx)(Mo,{onUpgrade:()=>c("/billing")})}var Bo=t(86900);function qo(e){let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("animate-pulse rounded-md bg-muted",s),...t})}const Wo=new class extends me{getBaseURL(){return"/integrations/StripeIntegration"}getOrCreateAccount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"express";return this.axios.post("/get-or-create-account",{account_type:e})}getAccount(){return this.axios.get("/get-account")}createAccountLink(e,s){if(!e)throw new Error("Account ID is required for this operation");return this.axios.post(`/${e}/create-account-link`)}checkAccountStatus(e){if(!e)throw new Error("Account ID is required for this operation");return this.axios.get(`/${e}/check-account-status`)}refreshProductCatalog(e){if(!e)throw new Error("Account ID is required for this operation");return this.axios.post(`/${e}/refresh-product-catalog`)}connectToApp(e,s){if(!e)throw new Error("Account ID is required for this operation");return this.axios.get(`/${e}/connect-to-app/${s}`)}createCheckoutSession(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)throw new Error("Account ID is required for this operation");const a=window.location.href;return this.axios.post(`/${e}/create-checkout-session`,{price_id:s,quantity:t,success_url:`${a}?checkout_status=success`,cancel_url:`${a}?checkout_status=canceled`})}deleteAccount(e){if(!e)throw new Error("Account ID is required for this operation");return this.axios.delete(`/${e}/delete-account`)}};function Yo(e){let{integrationInstance:s}=e;const[t,a]=(0,Y.useState)(null),[r,n]=(0,Y.useState)(!1),{toast:i}=or(),l=e=>{if(!e||!e.unit_amount)return"N/A";const s=e.unit_amount/100;return new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency||"USD"}).format(s)},o=async()=>{try{n(!0),await Wo.refreshProductCatalog(s.id),i({title:"Success",description:"Product catalog refreshed successfully from Stripe",variant:"success"})}catch(e){i({variant:"destructive",title:"Error",description:"Failed to refresh product catalog from Stripe"})}finally{n(!1)}};return s.product_catalog&&0!==s.product_catalog.length?(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,be.jsx)("h3",{className:"text-lg font-medium",children:"Product Catalog"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:o,disabled:r,children:r?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($l.A,{className:"mr-2 h-4 w-4"}),"Refresh Catalog"]})})]}),(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.product_catalog.map((e=>(0,be.jsx)(Ds,{className:"overflow-hidden",children:(0,be.jsxs)("div",{className:"p-4",children:[(0,be.jsx)("h4",{className:"font-semibold",children:e.name}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description||"No description"}),e.images&&e.images.length>0&&(0,be.jsx)("div",{className:"mt-2",children:(0,be.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-32 object-cover rounded-md"})}),e.prices&&e.prices.length>0?(0,be.jsxs)("div",{className:"mt-3",children:[(0,be.jsx)("h5",{className:"text-sm font-medium mb-1",children:"Prices:"}),(0,be.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:e.prices.map((e=>(0,be.jsxs)("div",{className:"bg-muted/30 p-2 rounded-md text-xs",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"font-medium",children:l(e)}),(0,be.jsx)("span",{className:"text-muted-foreground",children:e.recurring?`${e.recurring.interval_count} ${e.recurring.interval}`:"One-time"})]}),(0,be.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,be.jsxs)("div",{className:"text-muted-foreground text-xs truncate",title:e.id,children:["ID: ",e.id.substring(0,10),"..."]}),(0,be.jsxs)(Ze,{size:"sm",variant:"secondary",className:"h-6 text-xs px-2",onClick:()=>(async e=>{try{a(e);const t=await Wo.createCheckoutSession(s.id,e);t.checkout_url&&window.open(t.checkout_url,"_blank")}catch(t){}finally{a(null)}})(e.id),disabled:t===e.id,children:[t===e.id?(0,be.jsx)(Ae.A,{className:"h-3 w-3 animate-spin mr-1"}):null,"Checkout"]})]})]},e.id)))})]}):(0,be.jsx)("div",{className:"mt-2 text-xs text-muted-foreground italic",children:"No prices defined for this product"}),(0,be.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["ID: ",e.id]})]})},e.id)))})]}):(0,be.jsxs)("div",{className:"text-center py-6 bg-muted/30 rounded-lg",children:[(0,be.jsx)("p",{className:"text-muted-foreground mb-4",children:"No products available."}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:o,disabled:r,children:r?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($l.A,{className:"mr-2 h-4 w-4"}),"Refresh Products from Stripe"]})}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"This will fetch the latest products and prices from your Stripe account."})]})}function Go(){const{user:e}=Ne(),{app:s}=xa(),t=(0,J.Zp)(),[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(!0),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(null),{toast:p}=or();(0,Y.useEffect)((()=>{(async()=>{try{var e;const t=await Wo.getAccount();r(t),null!=s&&null!==(e=s.installable_integrations)&&void 0!==e&&e.StripeIntegration&&(u(!0),x(t))}catch(t){p({variant:"destructive",title:"Error",description:"Failed to load Stripe account information"})}finally{i(!1)}})()}),[p,s]);return"builder"!==e.subscription_tier&&"pro"!==e.subscription_tier&&"elite"!==e.subscription_tier&&"elite_2"!==e.subscription_tier&&"elite_3"!==e.subscription_tier&&"enterprise"!==e.subscription_tier?(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Payment Integrations"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-2",children:"Connect your app to Stripe to accept payments from your users."})]}),(0,be.jsxs)(We,{children:[(0,be.jsx)(Ye,{children:"Alpha Feature"}),(0,be.jsx)(Ge,{children:"Payment integrations are currently available only for Pro and Enterprise tier subscribers. Note: this feature is still in alpha and may not work as expected."})]})]}):(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Payment Integrations"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-2",children:"Connect your app to Stripe to accept payments from your users."})]}),(0,be.jsxs)(We,{className:"mb-6",variant:"warning",children:[(0,be.jsx)(Cl.A,{className:"h-4 w-4"}),(0,be.jsx)(Ye,{children:"Alpha Feature"}),(0,be.jsx)(Ge,{children:"Payment integrations are currently in alpha and under active development. Some features might not work as expected. If you encounter any issues, please contact our support team."})]}),n?(0,be.jsx)("div",{className:"space-y-4",children:(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(qo,{className:"h-6 w-1/3"}),(0,be.jsx)(qo,{className:"h-4 w-2/3 mt-2"})]}),(0,be.jsxs)(Ms,{className:"flex justify-between items-center",children:[(0,be.jsx)(qo,{className:"h-4 w-1/2"}),(0,be.jsx)(qo,{className:"h-10 w-24"})]})]})}):a?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)(Ds,{className:"mb-6",children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Stripe Payments"}),(0,be.jsx)($s,{children:"Connect your Stripe account to accept payments in your app"})]}),(0,be.jsxs)(Ms,{className:"flex justify-between items-center",children:[(0,be.jsx)("div",{className:"text-sm",children:a.stripe_account_id&&(0,be.jsxs)("div",{className:"flex flex-col",children:[(0,be.jsxs)("span",{className:"text-muted-foreground mb-1",children:["Account ID: ",a.stripe_account_id]}),(0,be.jsxs)("span",{className:"text-muted-foreground",children:["Created by: ",a.created_by]}),m&&(0,be.jsxs)("div",{className:"flex items-center mt-2 text-green-600",children:[(0,be.jsx)(Ll.A,{className:"h-4 w-4 mr-2"}),(0,be.jsx)("span",{children:"Connected to this app"})]})]})}),m?(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsxs)(Ze,{variant:"outline",disabled:!0,children:[(0,be.jsx)(Ll.A,{className:"mr-2 h-4 w-4"}),"Connected"]}),(0,be.jsx)(Ze,{variant:"destructive",onClick:async()=>{d(!0);try{await we.deleteIntegration(s.id,"StripeIntegration",a.id),u(!1),x(null),p({title:"Success",description:"Stripe account disconnected successfully",variant:"success"})}finally{d(!1)}},disabled:c,children:c?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Disconnecting"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Bo.A,{className:"mr-2 h-4 w-4"}),"Disconnect"]})})]}):(0,be.jsx)(Ze,{onClick:async()=>{o(!0);try{await we.installIntegration(s.id,"StripeIntegration",a.id);u(!0),x(a),p({title:"Success",description:"Stripe account connected successfully",variant:"success"})}catch(e){p({variant:"destructive",title:"Error",description:"Failed to connect Stripe account"})}finally{o(!1)}},disabled:l,children:l?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Connecting"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Da.A,{className:"mr-2 h-4 w-4"}),"Connect Payments"]})})]})]}),m&&h&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)(Ds,{className:"mb-6",children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Payment Integration Guide"}),(0,be.jsx)($s,{children:"How to implement payments in your app"})]}),(0,be.jsxs)(Ms,{className:"space-y-4",children:[(0,be.jsxs)(We,{className:"mb-4",children:[(0,be.jsx)(Oa.A,{className:"h-4 w-4"}),(0,be.jsx)(Ye,{children:"Next Steps"}),(0,be.jsxs)(Ge,{className:"space-y-2",children:[(0,be.jsx)("p",{children:"You have two options to implement payments in your app:"}),(0,be.jsxs)("ol",{className:"list-decimal pl-5 space-y-2",children:[(0,be.jsxs)("li",{children:[(0,be.jsx)("strong",{children:"Use Stripe Product Catalog:"})," Create products and prices below, then prompt the chat to implement them in your app."]}),(0,be.jsxs)("li",{children:[(0,be.jsx)("strong",{children:"Create On-Demand Pricing:"})," Guide the chat to create custom payment flows for your specific needs."]})]})]})]}),(0,be.jsxs)("div",{className:"bg-muted p-4 rounded-md",children:[(0,be.jsx)("h3",{className:"text-lg font-medium mb-2",children:"How to Implement Payments"}),(0,be.jsx)("p",{className:"mb-3",children:"To add payments to your app, prompt the chat with something like:"}),(0,be.jsx)("div",{className:"bg-card p-3 rounded border mb-3",children:(0,be.jsx)("p",{className:"text-sm italic",children:'"Add a payment page that uses the Stripe integration to let users purchase [your product]. Use [product name] from my Stripe catalog."'})}),(0,be.jsx)("p",{className:"mb-3",children:"Or for custom pricing:"}),(0,be.jsx)("div",{className:"bg-card p-3 rounded border",children:(0,be.jsx)("p",{className:"text-sm italic",children:'"Create a checkout flow that charges users $X for [your service] using the Stripe integration."'})})]})]})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Product Catalog"}),(0,be.jsx)($s,{children:"Manage your products and prices for this app"})]}),(0,be.jsx)(Ms,{children:(0,be.jsx)(Yo,{integrationInstance:h})})]})]})]}):(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Stripe Payments"}),(0,be.jsx)($s,{children:"You need to create a Stripe account to accept payments in your app"})]}),(0,be.jsxs)(Ms,{className:"space-y-4",children:[(0,be.jsxs)(We,{children:[(0,be.jsx)(_e.A,{className:"h-4 w-4"}),(0,be.jsx)(Ye,{children:"No Stripe Account Found"}),(0,be.jsx)(Ge,{children:"To start accepting payments, you'll need to set up a Stripe account through our integration wizard."})]}),(0,be.jsx)("div",{className:"flex justify-end",children:(0,be.jsxs)(Ze,{onClick:()=>{t("/integrations/stripe")},children:[(0,be.jsx)(Da.A,{className:"mr-2 h-4 w-4"}),"Set Up Stripe Integration"]})})]})]})]})}var Ho=t(81064);function Vo(e){let{rule:s}=e;if(!s)return(0,be.jsx)("span",{className:"text-muted-foreground",children:"No restrictions"});if("{{user.email}}"===s.created_by)return(0,be.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Ho.A,{className:"h-3.5 w-3.5 text-indigo-500"})," Creator only"]});if(s.user_condition&&"admin"===s.user_condition.role)return(0,be.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(In.A,{className:"h-3.5 w-3.5 text-amber-500"})," Admin only"]});if(s.$or)return(0,be.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,be.jsx)("span",{className:"bg-secondary text-secondary-foreground text-xs rounded-md px-1.5 py-0.5",children:"OR"}),(0,be.jsxs)("span",{children:[s.$or.length," conditions"]})]});if(s.$and)return(0,be.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,be.jsx)("span",{className:"bg-secondary text-secondary-foreground text-xs rounded-md px-1.5 py-0.5",children:"AND"}),(0,be.jsxs)("span",{children:[s.$and.length," conditions"]})]});const t=Object.keys(s).filter((e=>!e.startsWith("$")));if(t.length){const e=t[0],a=s[e];if("string"==typeof a&&a.startsWith("{{user."))return(0,be.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Js.A,{className:"h-3.5 w-3.5 text-emerald-500"}),(0,be.jsxs)("span",{className:"text-xs font-medium",children:[e.replace("data.","")," = user field"]})]})}return(0,be.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1.5",children:[(0,be.jsx)(ai.A,{className:"h-3.5 w-3.5 text-blue-500"}),"Custom rule"]})}function Jo(e){let{entity:s,onClick:t}=e;const a=s.rls&&Object.keys(s.rls).length>0,r=a&&s.rls.read,n=a&&s.rls.write;return(0,be.jsxs)(Ds,{className:"cursor-pointer hover:bg-muted/50 transition-all border-muted-foreground/20 hover:border-primary/30 hover:shadow-sm",onClick:t,children:[(0,be.jsx)(Ls,{className:"pb-2",children:(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsxs)(Us,{className:"text-base flex items-center gap-2",children:[(0,be.jsx)(lo.A,{className:"h-4 w-4 text-primary/70"}),s.title||s.name]}),(0,be.jsxs)(Os,{variant:a?"default":"outline",className:"ml-2 "+(a?"bg-blue-100 text-blue-800 hover:bg-blue-200":""),children:[a?(0,be.jsx)(kn.A,{className:"h-3 w-3 mr-1"}):(0,be.jsx)(to.A,{className:"h-3 w-3 mr-1"}),a?"Restricted":"Public"]})]})}),(0,be.jsx)(Ms,{className:"pt-0",children:(0,be.jsx)("div",{className:"space-y-3 text-sm",children:a?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex justify-between items-center p-2 rounded-md bg-muted/30",children:[(0,be.jsxs)("span",{className:"text-muted-foreground font-medium flex items-center",children:[(0,be.jsx)(to.A,{className:"h-3.5 w-3.5 mr-1.5 text-blue-500"}),"Read:"]}),(0,be.jsx)("div",{children:r?Array.isArray(s.rls.read.$or)?(0,be.jsx)("div",{className:"flex flex-col items-end gap-1",children:s.rls.read.$or.map(((e,s)=>(0,be.jsx)(Vo,{rule:e},s)))}):(0,be.jsx)(Vo,{rule:s.rls.read}):(0,be.jsx)("span",{className:"text-muted-foreground",children:"No restrictions"})})]}),(0,be.jsxs)("div",{className:"flex justify-between items-center p-2 rounded-md bg-muted/30",children:[(0,be.jsxs)("span",{className:"text-muted-foreground font-medium flex items-center",children:[(0,be.jsx)(ta.A,{className:"h-3.5 w-3.5 mr-1.5 text-amber-500"}),"Write/Delete:"]}),(0,be.jsx)("div",{children:n?Array.isArray(s.rls.write.$or)?(0,be.jsx)("div",{className:"flex flex-col items-end gap-1",children:s.rls.write.$or.map(((e,s)=>(0,be.jsx)(Vo,{rule:e},s)))}):(0,be.jsx)(Vo,{rule:s.rls.write}):(0,be.jsx)("span",{className:"text-muted-foreground",children:"Same as read"})})]})]}):(0,be.jsxs)("div",{className:"flex items-center text-muted-foreground bg-muted/40 p-2 rounded-md",children:[(0,be.jsx)(Ll.A,{className:"h-4 w-4 mr-2 text-green-500"}),(0,be.jsx)("span",{children:"All users have full access"})]})})})]})}var Ko=t(68301);const Zo=Ko.bL,Xo=Ko.l9,Qo=Ko.ZL,ec=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ko.hJ,{className:Be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s})}));ec.displayName=Ko.hJ.displayName;const sc=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsxs)(Qo,{children:[(0,be.jsx)(ec,{}),(0,be.jsx)(Ko.UC,{ref:s,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]})}));sc.displayName=Ko.UC.displayName;const tc=e=>{let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("flex flex-col space-y-2 text-center sm:text-left",s),...t})};tc.displayName="AlertDialogHeader";const ac=e=>{let{className:s,...t}=e;return(0,be.jsx)("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};ac.displayName="AlertDialogFooter";const rc=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ko.hE,{ref:s,className:Be("text-lg font-semibold",t),...a})}));rc.displayName=Ko.hE.displayName;const nc=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ko.VY,{ref:s,className:Be("text-sm text-muted-foreground",t),...a})}));nc.displayName=Ko.VY.displayName;const ic=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ko.rc,{ref:s,className:Be(Ke(),t),...a})}));ic.displayName=Ko.rc.displayName;const lc=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Ko.ZD,{ref:s,className:Be(Ke({variant:"outline"}),"mt-2 sm:mt-0",t),...a})}));function oc(e){var s;let{rule:t,onChange:a,onDelete:r,index:n}=e;const{app:i}=xa(),[l,o]=(0,Y.useState)((()=>t?"{{user.email}}"===t.created_by?"creatorOnly":t.user_condition?"userProperty":"fieldComparison":"none")),[c,d]=(0,Y.useState)(""),[m,u]=(0,Y.useState)(""),[h,x]=(0,Y.useState)("role"),[p,g]=(0,Y.useState)(""),f=(null==i||null===(s=i.user_entity)||void 0===s?void 0:s.properties)||{},j=Object.keys(f).filter((e=>!["role","email","full_name"].includes(e)));(0,Y.useEffect)((()=>{if(t)if(t.user_condition){const e=Object.keys(t.user_condition)[0];x(e),g(t.user_condition[e])}else{const e=Object.keys(t).filter((e=>!e.startsWith("$")));if(e.length){const s=e[0],a=t[s];"string"==typeof a&&a.startsWith("{{user.")&&(d(s.replace("data.","")),u(a.substring(7,a.length-2)))}}}),[t]);(0,Y.useEffect)((()=>{if("fieldComparison"===l&&c&&m){let e=c;["id","created_by","updated_date","created_date"].includes(c)||(e=`data.${c}`),a({[e]:`{{user.${m}}}`},n)}}),[c,m,l,n,a]),(0,Y.useEffect)((()=>{"userProperty"===l&&h&&p&&a({user_condition:{[h]:p}},n)}),[h,p,l,n,a]);return(0,be.jsxs)("div",{className:"p-5 border rounded-lg relative mb-5 bg-white shadow-sm",children:[n>0&&(0,be.jsx)(Ze,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 h-7 w-7 text-destructive hover:bg-red-50",onClick:()=>r(n),title:"Remove rule",children:(0,be.jsx)(Sl.A,{className:"h-4 w-4"})}),(0,be.jsxs)(hs,{value:l,onValueChange:e=>{o(e),"none"===e?a(null,n):"creatorOnly"===e?a({created_by:"{{user.email}}"},n):"fieldComparison"===e?(d(""),u("")):"userProperty"===e&&(x("role"),g(""))},className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-muted/30 transition-colors",children:[(0,be.jsx)(xs,{value:"none",id:`none-${n}`,className:"mt-1"}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)(ds,{htmlFor:`none-${n}`,className:"font-medium flex items-center gap-2",children:[(0,be.jsx)(to.A,{className:"h-4 w-4 text-green-500"}),"No Restrictions"]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"All users can access records"})]})]}),(0,be.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-muted/30 transition-colors",children:[(0,be.jsx)(xs,{value:"creatorOnly",id:`creatorOnly-${n}`,className:"mt-1"}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)(ds,{htmlFor:`creatorOnly-${n}`,className:"font-medium flex items-center gap-2",children:[(0,be.jsx)(Ho.A,{className:"h-4 w-4 text-indigo-500"}),"Creator Only"]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Users can only access records they created"})]})]}),(0,be.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-muted/30 transition-colors",children:[(0,be.jsx)(xs,{value:"fieldComparison",id:`fieldComparison-${n}`,className:"mt-1"}),(0,be.jsxs)("div",{className:"space-y-1 w-full",children:[(0,be.jsxs)(ds,{htmlFor:`fieldComparison-${n}`,className:"font-medium flex items-center gap-2",children:[(0,be.jsx)(Js.A,{className:"h-4 w-4 text-emerald-500"}),"Entity-User Field Comparison"]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Compare a field in this entity with a user property"}),"fieldComparison"===l&&(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 p-3 bg-muted/20 rounded-lg",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)(ds,{className:"flex items-center gap-1.5",children:[(0,be.jsx)(lo.A,{className:"h-3.5 w-3.5 text-primary/70"}),"Entity Field"]}),(0,be.jsx)(is,{placeholder:"e.g. department",value:c,onChange:e=>d(e.target.value),className:"border-muted-foreground/30 focus:border-primary"}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground",children:"Field in the entity to compare"})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)(ds,{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Ho.A,{className:"h-3.5 w-3.5 text-primary/70"}),"User Field"]}),(0,be.jsxs)(bs,{value:m,onValueChange:u,children:[(0,be.jsx)(Ns,{className:"border-muted-foreground/30 focus:border-primary",children:(0,be.jsx)(ys,{placeholder:"Select user field"})}),(0,be.jsx)(Ss,{children:(()=>{const e=j.map((e=>({value:`data.${e}`,label:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")})));return[{value:"email",label:"Email"},{value:"role",label:"Role"},{value:"id",label:"User ID"},{value:"full_name",label:"Full Name"},...e]})().map((e=>(0,be.jsx)(As,{value:e.value,children:e.label},e.value)))})]}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground",children:"Field from the user to compare"})]})]})]})]}),(0,be.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-muted/30 transition-colors",children:[(0,be.jsx)(xs,{value:"userProperty",id:`userProperty-${n}`,className:"mt-1"}),(0,be.jsxs)("div",{className:"space-y-1 w-full",children:[(0,be.jsxs)(ds,{htmlFor:`userProperty-${n}`,className:"font-medium flex items-center gap-2",children:[(0,be.jsx)(In.A,{className:"h-4 w-4 text-amber-500"}),"User Property Check"]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Check if a user property matches a specific value"}),"userProperty"===l&&(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 p-3 bg-muted/20 rounded-lg",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)(ds,{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Ho.A,{className:"h-3.5 w-3.5 text-primary/70"}),"User Property"]}),(0,be.jsxs)(bs,{value:h,onValueChange:x,children:[(0,be.jsx)(Ns,{className:"border-muted-foreground/30 focus:border-primary",children:(0,be.jsx)(ys,{placeholder:"Select user property"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"role",children:"User Role"}),(0,be.jsx)(As,{value:"email",children:"User Email"}),(0,be.jsx)(As,{value:"full_name",children:"Full Name"}),j.map((e=>(0,be.jsx)(As,{value:`data.${e}`,children:e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")},`data.${e}`)))]})]})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)(ds,{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Ll.A,{className:"h-3.5 w-3.5 text-primary/70"}),"Required Value"]}),"role"===h?(0,be.jsxs)(bs,{value:p,onValueChange:g,children:[(0,be.jsx)(Ns,{className:"border-muted-foreground/30 focus:border-primary",children:(0,be.jsx)(ys,{placeholder:"Select role"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"admin",children:"Admin"}),(0,be.jsx)(As,{value:"user",children:"User"})]})]}):(0,be.jsx)(is,{placeholder:"email"===h?"e.g. admin@example.com":"e.g. required value",value:p,onChange:e=>g(e.target.value),className:"border-muted-foreground/30 focus:border-primary"}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground",children:"role"===h?"Select the required user role":"Value that the user property must match"})]})]})]})]})]})]})}function cc(e){let{entity:s,onSave:t,onBack:a}=e;const[r,n]=(0,Y.useState)(s.rls||{}),[i,l]=(0,Y.useState)("read"),[o,c]=(0,Y.useState)(s.rls&&Object.keys(s.rls).length>0?"restricted":"public"),[d,m]=(0,Y.useState)(!(!s.rls||!s.rls.write)),[u,h]=(0,Y.useState)(!1),[x,p]=(0,Y.useState)((()=>s.rls&&s.rls.read?s.rls.read.$or?s.rls.read.$or:[s.rls.read]:[null])),[g,f]=(0,Y.useState)((()=>s.rls&&s.rls.write?s.rls.write.$or?s.rls.write.$or:[s.rls.write]:[null]));(0,Y.useEffect)((()=>{const e={...r},s=x.filter((e=>null!==e)),t=g.filter((e=>null!==e));s.length>0?1===s.length?e.read=s[0]:e.read={$or:s}:delete e.read,d&&t.length>0?1===t.length?e.write=t[0]:e.write={$or:t}:d?delete e.write:e.read?e.write=e.read:delete e.write,n(e)}),[x,g,d]);const j=(e,s)=>{if("read"===i){const t=[...x];t[s]=e,p(t)}else{const t=[...g];t[s]=e,f(t)}},b=e=>{if("read"===i){const s=[...x];s.splice(e,1),p(s)}else{const s=[...g];s.splice(e,1),f(s)}};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Zo,{open:u,onOpenChange:h,children:(0,be.jsxs)(sc,{children:[(0,be.jsxs)(tc,{children:[(0,be.jsxs)(rc,{className:"flex items-center gap-2",children:[(0,be.jsx)(Cl.A,{className:"h-5 w-5 text-amber-500"}),"Remove All Security Rules"]}),(0,be.jsx)(nc,{children:"This will remove all security rules for this entity, allowing all users to access all records. Are you sure you want to continue?"})]}),(0,be.jsxs)(ac,{children:[(0,be.jsx)(lc,{children:"Cancel"}),(0,be.jsx)(ic,{onClick:()=>{c("public"),p([null]),f([null]),m(!1),h(!1)},className:"bg-red-600 hover:bg-red-700 text-white",children:"Remove All Rules"})]})]})}),(0,be.jsxs)("div",{className:"flex items-center justify-between mb-6 space-x-4 border-b pb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:a,className:"hover:bg-muted/50",children:[(0,be.jsx)(Xr.A,{className:"h-4 w-4 mr-2"})," Back"]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,be.jsx)(ai.A,{className:"h-5 w-5 text-primary"}),"Security Rules: ",s.title||s.name]}),"restricted"===o&&(0,be.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Create rules to control who can read and write records. Multiple rules are combined with OR logic."})]})]}),"restricted"===o&&(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"border-red-300 text-red-600 hover:bg-red-50 hover:text-red-700",children:"Remove All Rules"})]}),(0,be.jsxs)(Ds,{className:"w-full border-muted-foreground/20 shadow-sm",children:[(0,be.jsx)(Ms,{className:"space-y-6 pt-6",children:"public"===o?(0,be.jsx)("div",{className:"p-6 border rounded-lg bg-muted/5 space-y-4",children:(0,be.jsxs)("div",{className:"flex items-start gap-4",children:[(0,be.jsx)("div",{className:"bg-green-50 p-2 rounded-full",children:(0,be.jsx)(An.A,{className:"h-5 w-5 text-green-600"})}),(0,be.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,be.jsx)("h3",{className:"text-lg font-medium",children:"Public Access"}),(0,be.jsx)("p",{className:"text-muted-foreground",children:"Currently all users can access all records in this entity. There are no access restrictions."})]}),(0,be.jsxs)(Ze,{onClick:()=>{c("restricted"),p([null]),l("read")},className:"gap-2 whitespace-nowrap",children:[(0,be.jsx)(kn.A,{className:"h-4 w-4"}),"Create Access Rules"]})]})}):(0,be.jsx)(be.Fragment,{children:(0,be.jsxs)(Ta,{value:i,onValueChange:l,className:"w-full",children:[(0,be.jsxs)(Ea,{className:"grid grid-cols-2 w-full mb-4",children:[(0,be.jsxs)(Ia,{value:"read",className:"flex items-center gap-2",children:[(0,be.jsx)(to.A,{className:"h-4 w-4"})," Read Access"]}),(0,be.jsxs)(Ia,{value:"write",className:"flex items-center gap-2",children:[(0,be.jsx)(ta.A,{className:"h-4 w-4"})," Write/Delete Access"]})]}),(0,be.jsxs)(Pa,{value:i,className:"space-y-6 pt-4",children:[(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsx)(ds,{className:"text-base font-medium flex items-center gap-2",children:"read"===i?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(to.A,{className:"h-4 w-4 text-blue-500"})," Read Access Rules"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ta.A,{className:"h-4 w-4 text-amber-500"})," Write/Delete Access Rules"]})}),(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{"read"===i?p([...x,null]):f([...g,null])},className:"flex items-center gap-1.5 border-primary/30 hover:bg-primary/5",children:[(0,be.jsx)(aa.A,{className:"h-3.5 w-3.5"})," Add Rule"]})]}),"read"===i?x.map(((e,s)=>(0,be.jsx)(oc,{rule:e,onChange:j,onDelete:b,index:s},s))):d?g.map(((e,s)=>(0,be.jsx)(oc,{rule:e,onChange:j,onDelete:b,index:s},s))):(0,be.jsxs)("div",{className:"p-6 border rounded-lg bg-blue-50 flex flex-col items-center justify-center space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,be.jsx)(mt.A,{className:"h-5 w-5 text-blue-600"}),(0,be.jsx)("span",{className:"font-medium",children:"Write rules inherit from Read Access rules"})]}),(0,be.jsx)("p",{className:"text-sm text-blue-700 text-center max-w-md",children:"Users who can read records will have the same permissions for writing and deleting records"}),(0,be.jsxs)(Ze,{onClick:()=>{m(!0),x.length>0&&f([...x]),l("write")},variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:[(0,be.jsx)(ta.A,{className:"h-4 w-4 mr-2"}),"Create Custom Write Rules"]})]})]}),(0,be.jsxs)("div",{className:"space-y-2 bg-muted/10 p-4 rounded-lg border",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsxs)(ds,{className:"font-medium flex items-center gap-2",children:[(0,be.jsx)(Js.A,{className:"h-4 w-4 text-primary/70"}),"Generated Rules (JSON)"]}),(0,be.jsx)(Os,{variant:"outline",className:"bg-primary/5 border-primary/20",children:"read"===i?x.filter((e=>null!==e)).length:d?g.filter((e=>null!==e)).length:"Same as read"})]}),(0,be.jsx)(Na,{rows:4,value:"read"===i?r.read?JSON.stringify(r.read,null,2):"":d?r.write?JSON.stringify(r.write,null,2):"":"Using the same rules as Read Access",readOnly:!0,className:"font-mono text-sm bg-muted/30 border-muted-foreground/20"})]})]})]})})}),(0,be.jsx)(Fs,{className:"flex justify-end pt-4 border-t bg-muted/5",children:(0,be.jsxs)(Ze,{onClick:()=>{const e={...s,rls:"public"===o?void 0:r};t(e)},size:"lg",className:"gap-2",children:[(0,be.jsx)(ai.A,{className:"h-4 w-4"}),"Save Security Rules"]})})]})]})}function dc(){const{app:e,updateApp:s}=xa(),[t,a]=(0,Y.useState)(null),[r,n]=(0,Y.useState)("list"),i=e.entities||{},l=Object.keys(i);return"list"===r?(0,be.jsxs)("div",{className:"w-full py-8 space-y-8 p-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 border-b pb-6",children:[(0,be.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,be.jsx)(ai.A,{className:"h-6 w-6 text-blue-700"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"App Security"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-1",children:"Configure row-level security policies to control who can access your app's data"})]})]}),0===l.length?(0,be.jsxs)(We,{className:"bg-amber-50 border-amber-200 text-amber-800",children:[(0,be.jsx)(Te.A,{className:"h-4 w-4 text-amber-600"}),(0,be.jsx)(Ye,{className:"text-amber-800 font-medium",children:"No entities found"}),(0,be.jsx)(Ge,{className:"text-amber-700",children:"Create entities in your app before configuring security policies."})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("h2",{className:"text-xl font-medium flex items-center gap-2",children:[(0,be.jsx)(lo.A,{className:"h-5 w-5 text-primary/70"}),"Data Entities"]}),(0,be.jsxs)(Os,{variant:"outline",className:"bg-primary/5 border-primary/20 px-3 py-1",children:[(0,be.jsx)(na.A,{className:"h-3.5 w-3.5 mr-1.5"}),l.length," entities"]})]}),(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map((e=>(0,be.jsx)(Jo,{entity:i[e],onClick:()=>(e=>{a(e),n("edit")})(e)},e)))})]})]}):(0,be.jsx)("div",{className:"max-w-full py-6 p-4",children:(0,be.jsx)(cc,{entity:i[t],onSave:s=>{oa.write(e.id,`entities/${s.name}`,JSON.stringify(s,null,2)),n("list")},onBack:()=>{n("list"),a(null)}})})}lc.displayName=Ko.ZD.displayName;var mc=t(81872);const uc=e=>{let{secretName:s,appId:t,onUpdate:a}=e;const{toast:r}=or(),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(""),[m,u]=(0,Y.useState)(!1),{updateSecrets:h}=xa();return(0,be.jsx)(Ds,{children:(0,be.jsx)(Ms,{className:"p-4",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(ba.A,{className:"h-5 w-5 text-green-500"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"font-medium",children:s}),l?(0,be.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,be.jsx)(is,{type:"password",placeholder:"New secret value",value:c,onChange:e=>d(e.target.value),className:"h-8 w-48"}),(0,be.jsx)(Ze,{size:"sm",onClick:async()=>{if(c){u(!0);try{await h({[s]:c}),r({title:"Secret updated",duration:3e3}),a(),o(!1),d("")}catch(n){var e,t;r({variant:"destructive",title:"Error updating secret",description:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Something went wrong",duration:3e3})}u(!1)}else o(!1)},disabled:m,className:"h-8",children:m?(0,be.jsx)($l.A,{className:"h-4 w-4 animate-spin"}):"Save"}),(0,be.jsx)(Ze,{size:"sm",variant:"outline",onClick:()=>{o(!1),d("")},className:"h-8",children:"Cancel"})]}):(0,be.jsx)("p",{className:"text-sm text-gray-500",children:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[!l&&(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{o(!0)},className:"text-blue-500 hover:text-blue-600 hover:bg-blue-50",children:(0,be.jsx)(mc.A,{className:"h-4 w-4"})}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:async()=>{i(!0);try{await ns.deleteSecret(t,s),r({title:"Secret deleted",duration:3e3}),a()}catch(l){var e,n;r({variant:"destructive",title:"Error deleting secret",description:(null===(e=l.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.detail)||"Something went wrong",duration:3e3})}i(!1)},className:"text-red-500 hover:text-red-600 hover:bg-red-50",disabled:n,children:(0,be.jsx)(Sl.A,{className:"h-4 w-4 "+(n?"animate-spin":"")})})]})]})})})},hc=e=>{let{onAdd:s,loading:t}=e;const[a,r]=(0,Y.useState)(""),[n,i]=(0,Y.useState)(""),[l,o]=(0,Y.useState)(!1);return(0,be.jsxs)(jt,{open:l,onOpenChange:o,children:[(0,be.jsx)(bt,{asChild:!0,children:(0,be.jsxs)(Ze,{children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Add Secret"]})}),(0,be.jsxs)(wt,{children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Add New Secret"}),(0,be.jsx)(At,{children:"Enter your secret name and value below. Secrets are encrypted and securely stored."})]}),(0,be.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("label",{className:"text-sm font-medium",children:"Secret Name"}),(0,be.jsx)(is,{placeholder:"Enter secret name (e.g. API_KEY)",value:a,onChange:e=>r(e.target.value)})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("label",{className:"text-sm font-medium",children:"Secret Value"}),(0,be.jsx)(is,{type:"password",placeholder:"Enter secret value",value:n,onChange:e=>i(e.target.value)})]}),(0,be.jsx)("div",{className:"flex justify-end",children:(0,be.jsx)(Ze,{onClick:async()=>{await s(a,n),r(""),i(""),o(!1)},disabled:t||!a||!n,children:t?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($l.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):"Add Secret"})})]})]})]})},xc=e=>{let{app:s}=e;return(0,be.jsx)(Ds,{children:(0,be.jsx)(Ms,{className:"p-4",children:(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsx)(In.A,{className:"h-5 w-5 text-blue-500 shrink-0 mt-0.5"}),(0,be.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,be.jsx)("p",{className:"font-medium",children:(0,be.jsx)("b",{children:"About Secrets Management"})}),(0,be.jsx)("p",{className:"text-gray-600",children:"Secrets are environment variables that contain sensitive information like API keys, tokens, and passwords. They are encrypted at rest and securely injected into your application at runtime."}),(0,be.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[(0,be.jsx)("li",{children:"Secrets are used by your backend functions to access external services"}),(0,be.jsx)("li",{children:"All secrets are encrypted and stored securely"}),(0,be.jsx)("li",{children:"You can add, update, or delete secrets as needed for your application"})]}),(0,be.jsxs)("p",{className:"text-xs text-gray-500",children:["Need help? Create a ticket at ",(0,be.jsx)("button",{type:"button",onClick:()=>{const e=null!=s&&s.id?`/support?appId=${s.id}`:"/support";window.open(e,"_blank")},className:"underline text-primary hover:text-orange-500 transition-colors",children:"support system"})]})]})]})})})};function pc(){const{app:e,updateSecrets:s,existingSecretNames:t}=xa(),a=null==e?void 0:e.id,[r,n]=(0,Y.useState)({}),[i,l]=(0,Y.useState)(!1),{toast:o}=or(),c=((0,J.Zp)(),async()=>{try{const e=await ns.getSecrets(a);n(e)}catch(t){var e,s;o({variant:"destructive",title:"Error fetching secrets",description:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Something went wrong",duration:3e3})}});(0,Y.useEffect)((()=>{c()}),[a]);return(0,be.jsx)("div",{className:"space-y-6 p-6",children:(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,be.jsx)("h2",{className:"text-2xl font-bold",children:"Application Secrets"}),(0,be.jsx)(hc,{onAdd:async(e,t)=>{if(e&&t){l(!0);try{await s({[e]:t}),await c(),o({title:"Secret added successfully",duration:3e3})}catch(n){var a,r;o({variant:"destructive",title:"Error creating secret",description:(null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Something went wrong",duration:3e3})}l(!1)}},loading:i})]}),(0,be.jsxs)("div",{className:"grid gap-6",children:[Object.keys(r).length>0?(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("h3",{className:"text-lg font-semibold text-green-600 flex items-center",children:[(0,be.jsx)(cr.A,{className:"h-5 w-5 mr-2"}),"Configured Secrets"]}),Object.keys(r).map((e=>(0,be.jsx)(uc,{secretName:e,appId:a,onUpdate:c},e)))]}):(0,be.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,be.jsx)("p",{children:"No secrets configured yet. Add your first secret to get started."})}),(0,be.jsx)(xc,{app:e})]})]})})}function gc(){const{app:e}=xa(),{workspaceView:s}=(0,J.g)(),t=(0,J.Zp)(),[a,r]=(0,Y.useState)(!1),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{e&&e.id&&i(!0)}),[e]),(0,Y.useEffect)((()=>{const e=()=>{o(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const c=s||"overview",d="code"===c,m=()=>{if(!n)return(0,be.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 rounded-full border-t-transparent mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-gray-500",children:"Loading app data..."})]})});if(d)return(0,be.jsx)(jo,{});let s;if("overview"===c)s=(0,be.jsx)(Dl,{appId:e.id});else if("analytics"===c)s=(0,be.jsx)(Zl,{appId:e.id});else if("domains"===c)s=(0,be.jsx)(zo,{appId:e.id,appName:e.name});else if("secrets"===c)s=(0,be.jsx)(pc,{appId:e.id});else if("payments"===c)s=(0,be.jsx)(Go,{appId:e.id});else if("security"===c)s=(0,be.jsx)(dc,{appId:e.id});else if(c.startsWith("entity-")){const t=c.split("entity-")[1],a=e.entities[t];s=a?(0,be.jsx)(bl,{entity:a}):null}else if("users"===c)s=(0,be.jsx)(Nl,{appId:e.id});else if("logo"===c)s=(0,be.jsx)(wl,{appId:e.id});else if("app-settings"===c)s=(0,be.jsx)(El,{});else if("api"===c)s=(0,be.jsx)(Pl,{appId:e.id});else{if("logs"!==c)return(0,be.jsx)("div",{className:"p-6",children:"Unknown view"});s=(0,be.jsx)(Ml,{appId:e.id})}return(0,be.jsx)("div",{className:"h-full w-full overflow-auto",children:s})},u=s=>{t(`/apps/${e.id}/editor/workspace/${s}`)};let h=[{id:"overview",label:"Overview",icon:"\u{1f4cb}"},{id:"users",label:"Users",icon:"\u{1f465}"},{id:"data",label:"Data",icon:"\u{1f5c4}\ufe0f",subitems:e&&e.entities?Object.keys(e.entities).map((e=>({id:`entity-${e}`,label:e,icon:"\u{1f4c4}"}))):[]},{id:"analytics",label:"Analytics",icon:"\u{1f4c8}"},{id:"domains",label:"Domains",icon:"\u{1f310}"},{id:"security",label:"Security",icon:"\u{1f512}"},{id:"code",label:"Code",icon:"\u{1f4bb}"},{id:"logs",label:"Logs",icon:"\u{1f50d}"},{id:"api",label:"API",icon:"\u{1f511}"},{id:"settings",label:"Settings",icon:"\u2699\ufe0f",subitems:[{id:"logo",label:"Logo"},{id:"app-settings",label:"App Settings"}]}];return e&&e.has_backend_functions_enabled&&h.push({id:"secrets",label:"Secrets",icon:"\u{1f511}"}),e&&e.installable_integrations&&Object.keys(e.installable_integrations).length>0&&h.push({id:"payments",label:"Payments",icon:"\u{1f4b0}"}),d?(0,be.jsx)("div",{className:"h-full w-full relative",children:m()}):l?(0,be.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,be.jsxs)("div",{className:"w-full bg-white border-b p-2 flex items-center",children:[(0,be.jsx)("button",{className:"p-2 rounded-md hover:bg-gray-100 transition-colors",onClick:()=>r(!0),children:(0,be.jsx)(Fl.A,{size:20})}),(0,be.jsx)("div",{className:"ml-2 font-medium",children:"App Editor"})]}),(0,be.jsx)(ui,{items:h,selected:c,onSelect:e=>{u(e),r(!1)},isOpen:a,onClose:()=>r(!1),title:"App Editor",showSearch:!1}),(0,be.jsx)("div",{className:"flex-1 overflow-auto",children:m()})]}):(0,be.jsx)("div",{className:"h-full w-full relative",children:(0,be.jsxs)(po,{direction:"horizontal",children:[(0,be.jsx)(go,{defaultSize:25,minSize:15,maxSize:30,className:"h-full overflow-hidden",children:(0,be.jsx)(ui,{items:h,selected:c,onSelect:e=>{u(e),r(!1)},isOpen:a,onClose:()=>r(!1),title:"App Editor",showSearch:!1})}),(0,be.jsx)(fo,{withHandle:!0,className:"group transition-opacity opacity-0 hover:opacity-100 focus:opacity-100"}),(0,be.jsx)(go,{defaultSize:75,className:"flex-1 overflow-auto",children:m()})]})})}var fc=t(30772),jc=t(35097),bc=t(225),vc=t(14664),yc=t(81103),Nc=t(72420),wc=t(4084),Cc=t(41186);function Sc(e){let{isOpen:s,onClose:t}=e;const{user:a}=Ne(),{app:r}=xa(),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(""),[c,d]=(0,Y.useState)("update"),[m,u]=(0,Y.useState)([]),[h,x]=(0,Y.useState)(!1),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(""),b=(0,Y.useRef)(null),v=(0,Y.useRef)(null),y=(0,Y.useRef)(null),[N,w]=(0,Y.useState)(null),[C,S]=(0,Y.useState)((null==r?void 0:r.github_repo_url)||null),[k,A]=(0,Y.useState)(""),[_,T]=(0,Y.useState)(0),[E,I]=(0,Y.useState)(!1),P=(null==a?void 0:a.subscription_tier)&&!["free","starter"].includes(a.subscription_tier);(0,Y.useEffect)((()=>{"invite"===c&&y.current&&y.current.focus()}),[c]),(0,Y.useEffect)((()=>{if(l.includes("@")||l.includes("."))return j("GitHub usernames cannot contain @ or . characters"),u([]),void g(!1);if(j(""),l.trim().length>=2){b.current&&clearTimeout(b.current);const e=Date.now()-_,s=1e3;if(l.trim()===k)return void g(m.length>0);x(!0);const t=e<s?s-e+500:500;b.current=setTimeout((()=>{R(l),A(l.trim()),T(Date.now())}),t)}else u([]),g(!1);return()=>{b.current&&clearTimeout(b.current)}}),[l,null==r?void 0:r.id,k,_,m.length]);const R=async e=>{try{x(!0);const s=await oa.searchGithubUsers(r.id,e);u(s.users||[]),g(s.users&&s.users.length>0)}catch(s){}finally{x(!1)}};return(0,be.jsx)(jt,{open:s,onOpenChange:t,children:(0,be.jsxs)(wt,{className:"sm:max-w-[500px]",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsxs)(kt,{className:"flex items-center gap-2",children:[(0,be.jsx)(wc.A,{className:"h-5 w-5"}),"GitHub Integration"]}),(0,be.jsx)(At,{children:null!=r&&r.github_repo_url?"Manage your GitHub repository and collaborators":"Export your app to GitHub to collaborate with others"})]}),(()=>{if(!N)return null;const e="success"===N.type?"bg-green-50 border-green-200":"error"===N.type?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200",s="success"===N.type?"text-green-700":"error"===N.type?"text-red-700":"text-blue-700",t="success"===N.type?Ll.A:"error"===N.type?Te.A:null;return(0,be.jsxs)("div",{className:`flex items-center gap-2 p-3 my-3 rounded-md border ${e}`,children:[t&&(0,be.jsx)(t,{className:`h-5 w-5 ${s}`}),(0,be.jsx)("p",{className:`text-sm ${s}`,children:N.text})]})})(),P?C?(0,be.jsxs)("div",{className:"space-y-4 py-2",children:[(0,be.jsxs)("div",{className:"rounded-lg bg-muted p-3 mb-4",children:[(0,be.jsx)("p",{className:"text-sm font-medium mb-1",children:"Repository URL:"}),(0,be.jsx)("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline break-all",children:C})]}),E&&(0,be.jsxs)("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4 mb-4",children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Important Next Step"}),(0,be.jsx)("p",{className:"text-sm text-blue-700",children:"To access this repository directly from your GitHub account, you need to invite yourself as a collaborator."}),(0,be.jsxs)(Ze,{variant:"outline",className:"mt-3 border-blue-300 hover:bg-blue-100 text-blue-800",onClick:()=>{o(a.github_username||""),d("invite")},children:[(0,be.jsx)(Ho.A,{className:"h-4 w-4 mr-2"}),"Invite Yourself as Collaborator",(0,be.jsx)(mt.A,{className:"h-4 w-4 ml-2"})]})]}),(0,be.jsxs)(Ta,{defaultValue:"update",value:c,onValueChange:d,children:[(0,be.jsxs)(Ea,{className:"grid w-full grid-cols-2",children:[(0,be.jsx)(Ia,{value:"update",children:"Update Repository"}),(0,be.jsx)(Ia,{value:"invite",children:"Invite Collaborator"})]}),(0,be.jsxs)(Pa,{value:"update",className:"space-y-4 pt-4",children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Push the latest changes from your app to the GitHub repository."}),(0,be.jsx)(Ze,{onClick:async()=>{try{i(!0),w({type:"loading",text:"Updating GitHub repository..."});const e=await oa.updateGithubRepo(r.id);e&&e.repository_url&&S(e.repository_url),w({type:"success",text:"Successfully updated GitHub repository"})}catch(l){var e,s,t,a,n;if(null!==(e=l.response)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&null!==(t=s.message)&&void 0!==t&&t.includes("nothing to commit, working tree clean"))w({type:"success",text:"Repository is already up to date. No changes to commit."});else w({type:"error",text:"Failed to update GitHub repository: "+((null===(a=l.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||l.message||"Unknown error")})}finally{i(!1)}},className:"w-full",disabled:n,children:n?"Updating...":"Update Repository"})]}),(0,be.jsxs)(Pa,{value:"invite",className:"space-y-4 pt-4",children:[(0,be.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Invite a collaborator to work on your GitHub repository.",!E&&(0,be.jsx)("span",{className:"block mt-1 font-medium text-blue-600",children:"Don't forget to invite yourself to access the repository directly from your GitHub account."})]}),(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsxs)("div",{className:"flex space-x-2",children:[(0,be.jsxs)("div",{className:"relative flex-1",children:[(0,be.jsx)(is,{ref:y,placeholder:"Enter GitHub username",value:l,onChange:e=>o(e.target.value),disabled:n,onFocus:()=>l.trim().length>=2&&!f&&g(!0)}),h&&(0,be.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,be.jsx)(Lt.A,{className:"h-4 w-4 animate-pulse text-muted-foreground"})})]}),(0,be.jsx)(Ze,{onClick:async()=>{if(l.trim())try{i(!0),w({type:"loading",text:`Inviting ${l}...`}),await oa.inviteCollaborator(r.id,l),w({type:"success",text:`Successfully invited ${l} as a collaborator`}),o(""),I(!1)}catch(t){var e,s;w({type:"error",text:"Failed to invite collaborator: "+((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message||"Unknown error")})}finally{i(!1)}else w({type:"error",text:"Please enter a GitHub username"})},disabled:n||!l.trim()||f,children:n?"Inviting...":"Invite"})]}),f&&(0,be.jsx)("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded-md border border-red-200",children:f}),p&&!f&&(0,be.jsx)("div",{ref:v,className:"absolute z-10 mt-1 w-full max-h-48 overflow-auto bg-background border rounded-md shadow-lg",children:0===m.length?(0,be.jsx)("div",{className:"p-2 text-sm text-muted-foreground",children:"No users found"}):(0,be.jsx)("ul",{children:m.map((e=>(0,be.jsxs)("li",{className:"flex items-center gap-2 p-2 hover:bg-accent cursor-pointer",onClick:()=>{return s=e.username,o(s),void g(!1);var s},children:[(0,be.jsx)("img",{src:e.avatar_url,alt:e.username,className:"w-8 h-8 rounded-full"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-sm font-medium",children:e.username}),e.name&&(0,be.jsx)("div",{className:"text-xs text-muted-foreground",children:e.name})]})]},e.username)))})})]})]})]})]}):(0,be.jsxs)("div",{className:"space-y-4 py-4",children:[(0,be.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Export your app to GitHub to enable version control, collaboration, and easier deployment."}),(0,be.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[(0,be.jsx)("strong",{children:"Important:"})," After exporting, you'll need to invite yourself as a collaborator to access the repository directly."]})]}),(0,be.jsx)(Ze,{onClick:async()=>{try{i(!0),w({type:"loading",text:"Exporting to GitHub..."});const e=await oa.exportToGithub(r.id);S(e.repository_url),w({type:"success",text:"Successfully exported to GitHub"}),I(!0),d("invite")}catch(t){var e,s;w({type:"error",text:"Failed to export to GitHub: "+((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message||"Unknown error")})}finally{i(!1)}},className:"w-full",disabled:n,children:n?"Exporting...":"Export to GitHub"})]}):(0,be.jsx)("div",{className:"space-y-4 py-4",children:(0,be.jsxs)("div",{className:"rounded-lg bg-amber-50 border border-amber-200 p-4",children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-amber-800 mb-1",children:"Upgrade Required"}),(0,be.jsx)("p",{className:"text-sm text-amber-700",children:"GitHub integration is only available on Builder, Pro, Elite and Enterprise plans."}),(0,be.jsx)(V.Link,{to:"/billing",children:(0,be.jsx)(Ze,{variant:"outline",className:"mt-3 border-amber-300 hover:bg-amber-100 text-amber-800",children:"Upgrade Your Plan"})})]})}),(0,be.jsx)(St,{children:(0,be.jsx)(Ze,{variant:"outline",onClick:t,children:"Close"})})]})})}function kc(e){let{isOpen:s,onClose:t}=e;const{user:a}=Ne(),{app:r}=xa(),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(null),c=(null==a?void 0:a.subscription_tier)&&!["free","starter"].includes(a.subscription_tier);return(0,be.jsx)(jt,{open:s,onOpenChange:t,children:(0,be.jsxs)(wt,{className:"sm:max-w-[500px]",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsxs)(kt,{className:"flex items-center gap-2",children:[(0,be.jsx)(Cc.A,{className:"h-5 w-5"}),"Export to ZIP"]}),(0,be.jsx)(At,{children:"Download your app code as a ZIP file"})]}),(()=>{if(!l)return null;const e="success"===l.type?"bg-green-50 border-green-200":"error"===l.type?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200",s="success"===l.type?"text-green-700":"error"===l.type?"text-red-700":"text-blue-700",t="success"===l.type?Ll.A:"error"===l.type?Te.A:null;return(0,be.jsxs)("div",{className:`flex items-center gap-2 p-3 my-3 rounded-md border ${e}`,children:[t&&(0,be.jsx)(t,{className:`h-5 w-5 ${s}`}),(0,be.jsx)("p",{className:`text-sm ${s}`,children:l.text})]})})(),c?(0,be.jsxs)("div",{className:"space-y-4 py-4",children:[(0,be.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Export your app to a ZIP file to download the code for local development or deployment."}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"This will include all your app's code and the necessary project structure to run it locally."})]}),null!=a&&a.api_key?(0,be.jsx)("a",{href:(()=>{if(null==r||!r.id||null==a||!a.api_key)return null;const e=`/apps/${r.id}/coding/export-to-zip?api_key=${a.api_key}`;return`${ee()}${e}`})(),download:`${(null==r?void 0:r.slug)||"app"}.zip`,className:"w-full inline-block",onClick:()=>(o({type:"success",text:"Download started. If it doesn't begin automatically, click the download button again."}),void i(!1)),children:(0,be.jsx)(Ze,{className:"w-full",disabled:n,onClick:()=>{i(!0),o({type:"loading",text:"Initiating download..."}),setTimeout((()=>{i(!1),o({type:"success",text:"Download initiated. Check your downloads folder."})}),1e3)},children:n?"Preparing Download...":"Download ZIP"})}):(0,be.jsx)(Ze,{className:"w-full",disabled:!0,children:"Unable to generate download link"})]}):(0,be.jsx)("div",{className:"space-y-4 py-4",children:(0,be.jsxs)("div",{className:"rounded-lg bg-amber-50 border border-amber-200 p-4",children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-amber-800 mb-1",children:"Upgrade Required"}),(0,be.jsx)("p",{className:"text-sm text-amber-700",children:"ZIP file export is only available on Builder, Pro, Elite and Enterprise plans."}),(0,be.jsx)(V.Link,{to:"/billing",children:(0,be.jsx)(Ze,{variant:"outline",className:"mt-3 border-amber-300 hover:bg-amber-100 text-amber-800",children:"Upgrade Your Plan"})})]})}),(0,be.jsx)(St,{children:(0,be.jsx)(Ze,{variant:"outline",onClick:t,children:"Close"})})]})})}function Ac(e){let{showFiles:s}=e;const{app:t,currentPage:a}=xa(),[r,n]=(0,Y.useState)(!1),[i,l]=(0,Y.useState)(null),[o,c]=(0,Y.useState)(!1),[d,m]=(0,Y.useState)(!1);let u=[];if(s&&a){const{name:e,code:s}=a;if(t.layout){u.push("layout");const e=_c(t,t.layout);u=[...u,...e.map((e=>"components/"+e))]}u.push("pages/"+e);const r=_c(t,s);u=[...u,...r.map((e=>"components/"+e))],u=[...new Set(u)]}const h=e=>{n(!1),setTimeout((()=>{l(e),n(!0)}),150)};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)(Ma,{children:[(0,be.jsx)(Fa,{asChild:!0,children:(0,be.jsx)("button",{className:"p-1.5 text-gray-500 hover:bg-gray-200 rounded-md transition-colors duration-200 flex items-center justify-center shadow-sm",title:"Github & code editing",children:(0,be.jsx)(ro.A,{size:20,className:"text-gray-600"})})}),(0,be.jsxs)(Ha,{align:"end",className:"w-64 border border-gray-200 shadow-lg rounded-lg animate-in fade-in-80",children:[s&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"px-3 py-1 text-[10px] text-gray-500 bg-gray-50 rounded mx-1",children:"FILES USED IN THIS PAGE"}),(0,be.jsx)("div",{className:"max-h-[250px] overflow-y-auto",children:u.map(((e,s)=>{const t=e.split("/"),a="layout"===e;let r=t[t.length-1],n=t.slice(0,-1).join("/");return a&&(r="layout",n="Application Layout"),(0,be.jsxs)(Va,{className:"cursor-pointer flex flex-col items-start px-3 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded-md mx-1 transition-colors",onClick:()=>h(e),children:[(0,be.jsxs)("span",{className:"font-medium",children:[r,".jsx"]}),n&&(0,be.jsx)("span",{className:"text-gray-400 text-[10px] mt-0.5",children:n})]},s)}))}),(0,be.jsx)(Xa,{className:"my-1 bg-gray-200"})]}),(0,be.jsx)(Va,{asChild:!0,children:(0,be.jsxs)(V.Link,{to:`/apps/${t.id}/editor/workspace/code`,className:"cursor-pointer flex items-center px-3 py-2 text-sm hover:bg-gray-100 rounded-md mx-1 my-1 transition-colors",children:[(0,be.jsx)(Nc.A,{className:"mr-2 h-4 w-4 text-gray-600"}),"See all files"]})}),(0,be.jsx)(Xa,{className:"my-1 bg-gray-200"}),(0,be.jsx)("div",{className:"px-3 py-1 text-[10px] text-gray-500 bg-gray-50 rounded mx-1",children:"BETA FEATURES"}),(0,be.jsxs)(Va,{className:"cursor-pointer flex items-center px-3 py-2 text-sm hover:bg-gray-100 rounded-md mx-1 my-1 transition-colors",onClick:()=>c(!0),children:[(0,be.jsx)(wc.A,{className:"mr-2 h-4 w-4 text-gray-600"}),"Export project to GitHub"]}),(0,be.jsxs)(Va,{className:"cursor-pointer flex items-center px-3 py-2 text-sm hover:bg-gray-100 rounded-md mx-1 my-1 transition-colors",onClick:()=>m(!0),children:[(0,be.jsx)(Cc.A,{className:"mr-2 h-4 w-4 text-gray-600"}),"Export project as ZIP"]})]})]}),r&&(0,be.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>n(!1)}),(0,be.jsxs)("div",{className:"absolute right-0 h-full w-3/4 bg-white dark:bg-gray-900 shadow-xl flex flex-col",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center p-4 border-b flex-shrink-0",children:[(0,be.jsxs)("h3",{className:"text-lg font-semibold",children:["Code Editor - ",i]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>n(!1),children:"\u2715"})]}),(0,be.jsx)("div",{className:"flex-1 min-h-0",children:(0,be.jsx)(Ql,{filepath:i,onSaveOrDiscard:()=>h(i)})})]})]}),(0,be.jsx)(Sc,{isOpen:o,onClose:()=>c(!1)}),(0,be.jsx)(kc,{isOpen:d,onClose:()=>m(!1)})]})}function _c(e,s){if(!e||!s)return[];const t=Object.keys(e.components||{});if(0===t.length)return[];const a=new Set;const r=function s(r){let n=[];const i=r.split("\n");for(const l of i)if(l.includes("/components/")){const r=l.split("/components/")[1];if(r){const i=r.match(/^([a-zA-Z0-9_/-]+)/);if(i&&i[1]){const r=i[1].trim();if(t.includes(r)&&!a.has(r)){n.push(r),a.add(r);const t=s(e.components[r]);n=[...n,...t]}else{const i=r.split("/").pop();if(t.includes(i)&&!a.has(i)){n.push(i),a.add(i);const t=s(e.components[i]);n=[...n,...t]}}}}}return n}(s);return[...new Set(r)]}var Tc=t(58406);const Ec=(0,Y.createContext)();function Ic(){const e=(0,Y.useContext)(Ec);if(void 0===e)throw new Error("useActivity must be used within an ActivityProvider");return e}const Pc=function(e){let{children:s}=e;const[t,a]=(0,Y.useState)({}),[r,n]=(0,Y.useState)(0);(0,Y.useEffect)((()=>{const e=e=>{const{type:s,requestId:t,logId:r,data:i}=e.data||{};if("api-request-start"===s)a((e=>({...e,[t]:{id:t,type:"request",url:i.url,method:i.method,headers:i.headers,body:i.body,startTime:new Date,status:"pending"}}))),n((e=>e+1));else if("api-request-end"===s)a((e=>{const s=e[t];return s?{...e,[t]:{...s,status:"completed",statusCode:i.statusCode,response:i.response,endTime:new Date,duration:s.startTime?new Date-s.startTime:0}}:e})),n((e=>Math.max(0,e-1)));else if("console-log"===s){const e=new Date;a((s=>({...s,[r]:{id:r,type:"log",message:i.message,severity:i.severity,component:i.component,timestamp:e}})))}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const i=Object.values(t);return(0,be.jsx)(Ec.Provider,{value:{allActivities:i,activeRequests:r,clearActivities:()=>a({})},children:s})},Rc=Ic;var Oc=t(52245);function Dc(e){let{onClose:s}=e;const{allActivities:t,clearActivities:a}=Ic(),[r,n]=(0,Y.useState)("all"),i=t.filter((e=>"all"===r||("requests"===r?"request"===e.type:"logs"===r?"log"===e.type:"success"===r?"request"===e.type&&"completed"===e.status&&e.statusCode>=200&&e.statusCode<300:"error"!==r||("request"===e.type&&"completed"===e.status&&(e.statusCode<200||e.statusCode>=300)||"log"===e.type&&"error"===e.severity)))),l=[...i].sort(((e,s)=>{const t="request"===e.type?e.startTime:e.timestamp,a="request"===s.type?s.startTime:s.timestamp;return new Date(t)-new Date(a)})),o=t.filter((e=>"request"===e.type)).length,c=t.filter((e=>"log"===e.type)).length;return(0,be.jsxs)("div",{className:"flex flex-col h-full bg-white dark:bg-slate-950 shadow-lg rounded-lg",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 border-b",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("h2",{className:"font-semibold",children:"Activity Monitor"}),(0,be.jsx)("div",{className:"text-xs text-muted-foreground",children:t.length>0&&(0,be.jsxs)(Os,{variant:"outline",className:"font-normal bg-slate-50 dark:bg-slate-900",children:[t.length," entries"]})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{const e=["all","requests","logs","success","error"],s=(e.indexOf(r)+1)%e.length;n(e[s])},className:"h-8",children:[(0,be.jsx)(Oc.A,{className:"h-3.5 w-3.5 mr-1.5"}),(()=>{switch(r){case"all":default:return"All";case"requests":return"Requests";case"logs":return"Logs";case"success":return"Success";case"error":return"Errors"}})()]}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:a,className:"h-8",children:(0,be.jsx)(Sl.A,{className:"h-3.5 w-3.5"})}),s&&(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0",children:(0,be.jsx)(He.A,{className:"h-4 w-4"})})]})]}),t.length>0&&(0,be.jsx)("div",{className:"flex text-xs border-b px-4 py-1 bg-slate-50 dark:bg-slate-900",children:(0,be.jsxs)("div",{className:"flex gap-3",children:[(0,be.jsxs)("span",{children:[o," requests"]}),(0,be.jsxs)("span",{children:[c," logs"]})]})}),(0,be.jsx)(Cn,{className:"flex-grow",children:0===l.length?(0,be.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-8",children:(0,be.jsx)("p",{className:"text-sm",children:0===t.length?"No activities logged":"No matching activities found"})}):(0,be.jsx)("div",{className:"p-2 space-y-1",children:[...l].reverse().map((e=>"request"===e.type?(0,be.jsx)(Uc,{request:e},e.id):(0,be.jsx)(Lc,{log:e},e.id)))})})]})}function Lc(e){var s,t,a;let{log:r}=e;const{icon:n,className:i}=(e=>{switch(e){case"error":return{icon:(0,be.jsx)(Vl.A,{className:"h-3.5 w-3.5"}),className:"bg-rose-50 text-rose-700 dark:bg-rose-950 dark:text-rose-300"};case"warn":return{icon:(0,be.jsx)(Cl.A,{className:"h-3.5 w-3.5"}),className:"bg-amber-50 text-amber-700 dark:bg-amber-950 dark:text-amber-300"};default:return{icon:(0,be.jsx)(Ul.A,{className:"h-3.5 w-3.5"}),className:"bg-slate-50 text-slate-700 dark:bg-slate-900 dark:text-slate-300"}}})(r.severity),l=e=>e?it()(e).fromNow():"";return(0,be.jsxs)(ni,{className:"border rounded overflow-hidden hover:shadow-sm transition-all duration-200",children:[(0,be.jsxs)(ii,{className:"flex w-full p-2 hover:bg-accent/5 text-left",children:[(0,be.jsx)("div",{className:"flex-shrink-0 w-16 flex justify-center",children:(0,be.jsxs)(Os,{variant:"outline",className:"bg-purple-50 text-purple-700 dark:bg-purple-950 dark:text-purple-300 font-mono text-xs uppercase",children:[(0,be.jsx)(ro.A,{className:"h-3 w-3 mr-1"})," Log"]})}),(0,be.jsxs)("div",{className:"flex-grow mx-3",children:[r.component&&(0,be.jsx)("div",{className:"text-xs text-muted-foreground mb-0.5 font-medium",children:r.component}),(0,be.jsxs)("div",{className:"text-sm font-normal truncate",children:[null===(s=r.message)||void 0===s?void 0:s.toString().substring(0,60),(null===(t=r.message)||void 0===t?void 0:t.toString().length)>60?"...":""]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,be.jsx)("div",{className:"text-xs text-muted-foreground text-right",children:l(r.timestamp)}),(0,be.jsx)(Os,{variant:"outline",className:Be("flex items-center",i),children:n}),(0,be.jsx)(gs.A,{className:"h-3.5 w-3.5 text-muted-foreground"})]})]}),(0,be.jsx)(li,{children:(0,be.jsx)("div",{className:"p-4 border-t bg-slate-50/50 dark:bg-slate-900/50",children:(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Message"}),(0,be.jsx)("pre",{className:"p-3 rounded bg-white dark:bg-slate-900 text-xs overflow-auto max-h-60 border whitespace-pre-wrap",children:null===(a=r.message)||void 0===a?void 0:a.toString()})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Severity"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:r.severity})]}),r.component&&(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Component"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:r.component})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Time"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:l(r.timestamp)})]})]})]})})})]})}function Uc(e){var s;let{request:t}=e;const{app:a}=xa(),r=e=>e?it()(e).fromNow():"";return(0,be.jsxs)(ni,{className:"border rounded overflow-hidden hover:shadow-sm transition-all duration-200",children:[(0,be.jsxs)(ii,{className:"flex w-full p-2 hover:bg-accent/5 text-left",children:[(0,be.jsx)("div",{className:"flex-shrink-0 w-16 flex justify-center",children:(0,be.jsx)(Os,{variant:"outline",className:Be("font-mono text-xs",(e=>{switch(e){case"GET":return"bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300";case"POST":return"bg-green-50 text-green-700 dark:bg-green-950 dark:text-green-300";case"PUT":return"bg-amber-50 text-amber-700 dark:bg-amber-950 dark:text-amber-300";case"DELETE":return"bg-rose-50 text-rose-700 dark:bg-rose-950 dark:text-rose-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}})(t.method)),children:null===(s=t.method)||void 0===s?void 0:s.toLowerCase()})}),(0,be.jsx)("div",{className:"flex-grow mx-3",children:(0,be.jsx)("div",{className:"text-sm font-normal truncate",children:(e=>{let s=e;return e.startsWith("http")&&(s=new URL(e).pathname),s.startsWith("/api/apps/"+(null==a?void 0:a.id))&&(s=s.replace("/api/apps/"+a.id,"")),null!=a&&a.id&&s.includes(a.id)&&(s=s.replace(a.id,"{app_id}")),s})(t.url)})}),(0,be.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,be.jsx)("div",{className:"text-xs text-muted-foreground text-right",children:r(t.startTime)}),(0,be.jsxs)(Os,{variant:"outline",className:Be("flex items-center",(n=t.status,i=t.statusCode,"pending"===n?"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300":i>=200&&i<300?"bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300":"bg-rose-50 text-rose-700 dark:bg-rose-950 dark:text-rose-300")),children:[((e,s)=>"pending"===e?(0,be.jsx)(Ae.A,{className:"h-3.5 w-3.5 animate-spin"}):s>=200&&s<300?(0,be.jsx)(Ll.A,{className:"h-3.5 w-3.5"}):(0,be.jsx)(Te.A,{className:"h-3.5 w-3.5"}))(t.status,t.statusCode),"completed"===t.status&&t.statusCode]}),(0,be.jsx)(gs.A,{className:"h-3.5 w-3.5 text-muted-foreground"})]})]}),(0,be.jsx)(li,{children:(0,be.jsx)("div",{className:"p-4 border-t bg-slate-50/50 dark:bg-slate-900/50",children:(0,be.jsxs)(Ta,{defaultValue:"general",children:[(0,be.jsxs)(Ea,{className:"mb-3",children:[(0,be.jsx)(Ia,{value:"general",children:"General"}),(0,be.jsx)(Ia,{value:"request",children:"Request"}),"completed"===t.status&&(0,be.jsx)(Ia,{value:"response",children:"Response"})]}),(0,be.jsxs)(Pa,{value:"general",className:"space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"URL"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground break-all",children:t.url})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Method"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:t.method})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Status"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"completed"===t.status?`${t.statusCode} (${t.duration}ms)`:(0,be.jsxs)("span",{className:"flex items-center",children:[(0,be.jsx)(Ae.A,{className:"h-3 w-3 mr-1 animate-spin"}),"Pending"]})})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Time"}),(0,be.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Started: ",r(t.startTime),t.endTime&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("br",{}),"Completed: ",r(t.endTime)]})]})]})]}),(0,be.jsx)(Pa,{value:"request",children:t.body?(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Request Data"}),(0,be.jsx)("pre",{className:"p-3 rounded bg-white dark:bg-slate-900 text-xs overflow-auto max-h-60 border",children:"object"==typeof t.body?JSON.stringify(t.body,null,2):t.body})]}):(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"No request data"})}),"completed"===t.status&&(0,be.jsx)(Pa,{value:"response",children:t.response?(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Response Data"}),(0,be.jsx)("pre",{className:"p-3 rounded bg-white dark:bg-slate-900 text-xs overflow-auto max-h-60 border",children:"object"==typeof t.response?JSON.stringify(t.response,null,2):t.response})]}):(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"No response data"})})]})})})]});var n,i}function $c(){const{activeRequests:e}=Rc(),[s,t]=(0,Y.useState)(!1);return(0,be.jsxs)(ll,{open:s,onOpenChange:t,children:[(0,be.jsx)(ol,{asChild:!0,children:(0,be.jsxs)("button",{className:"relative flex items-center justify-center w-10 h-10 rounded-full hover:bg-accent transition-colors","aria-label":"Network Activity",children:[(0,be.jsx)(Tc.A,{className:Be("h-5 w-5",e>0?"text-primary animate-pulse":"text-muted-foreground")}),e>0&&(0,be.jsx)("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-[10px] font-medium bg-primary/15 text-primary  rounded-full animate-[pulse_1.5s_ease-in-out_infinite]",children:e})]})}),(0,be.jsx)(hl,{side:"right",className:"min-w-[600px]",children:(0,be.jsx)(Dc,{onClose:()=>t(!1)})})]})}var Mc=t(99040);function Fc(e){let{isMobile:s=!1,app:t}=e;const[a,r]=(0,Y.useState)(!1),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(null),[c,d]=(0,Y.useState)([]),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)("");let p;p="localhost"===window.location.hostname?`http://app--${t.slug}.localhost:3000`:window.location.hostname.includes("base44.io")||window.location.hostname.includes("beta-base44")?`https://app--${t.slug}.base44.io`:`https://app--${t.slug}.base44.app`,(0,Y.useEffect)((()=>{(a||m)&&(async()=>{try{const e=await bo.filter({app_id:t.id});d(e)}catch(e){}})()}),[a,m,t.id]),(0,Y.useEffect)((()=>{if(h){const e=setTimeout((()=>{x("")}),2e3);return()=>clearTimeout(e)}}),[h]);const g=async()=>{try{i(!0),o(null),await we.deployApp(t.id),je("App Published",{app_id:t.id,app_name:t.name,has_custom_domains:c.length>0}),window.open(p,"_blank")}catch(e){o(e.message||"Failed to deploy app")}finally{i(!1),s&&u(!1)}},f=e=>{let{url:s,displayUrl:t}=e;const a=h===s;return(0,be.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,be.jsxs)("div",{className:"flex items-center flex-1 overflow-hidden",children:[(0,be.jsx)(Zs.A,{className:"h-4 w-4 mr-2 flex-shrink-0 text-gray-500"}),(0,be.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate",children:t})]}),(0,be.jsx)("button",{onClick:()=>(e=>{navigator.clipboard.writeText(e).then((()=>{x(e)})).catch((e=>{}))})(s),className:"ml-2 p-1 text-gray-500 hover:bg-gray-100 rounded-md transition-colors",title:"Copy to clipboard",children:a?(0,be.jsx)(js.A,{className:"h-4 w-4 text-green-500"}):(0,be.jsx)(Ot.A,{className:"h-4 w-4"})})]})};return s?"icon"===s?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ze,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>u(!0),disabled:n,children:(0,be.jsx)(Mc.A,{className:"h-5 w-5"})}),(0,be.jsx)(jt,{open:m,onOpenChange:u,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsx)(Ct,{children:(0,be.jsx)(kt,{children:"Publish Your App"})}),t.last_deployed_at?(0,be.jsxs)("div",{className:"py-3 text-sm text-gray-600",children:[(0,be.jsx)("p",{className:"mb-2",children:"Publishing will make your current version available at the public link."}),(0,be.jsxs)("p",{className:"mb-2",children:["Last published: ",it().utc(t.last_deployed_at).fromNow()]})]}):(0,be.jsxs)("div",{className:"py-3 text-sm text-gray-600",children:[(0,be.jsx)("p",{className:"mb-2",children:"This will be the first public version of your app."}),(0,be.jsx)("p",{children:"Publishing will make your app accessible to users at the public link."})]}),l&&(0,be.jsx)("div",{className:"py-2 text-sm text-red-600 bg-red-50 border-t border-b border-red-100",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Te.A,{className:"h-4 w-4 mr-2"}),(0,be.jsx)("p",{children:l})]})}),(0,be.jsxs)("div",{className:"py-3 border-t border-gray-100",children:[(0,be.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Available Domains"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(f,{url:p,displayUrl:p.replace(/(https?:\/\/)/,"")}),c.length>0?c.map(((e,s)=>(0,be.jsx)("div",{className:"px-1",children:(0,be.jsx)(f,{url:`https://${e.domain}`,displayUrl:e.domain})},s))):(0,be.jsx)("p",{className:"text-sm text-gray-500",children:"No custom domains configured"})]})]}),(0,be.jsx)(St,{children:(0,be.jsx)(Ze,{className:"w-full bg-gray-900 text-white hover:bg-gray-800",onClick:g,disabled:n,children:n?(0,be.jsxs)("span",{className:"flex items-center justify-center",children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Publishing..."]}):"Publish App"})})]})})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Va,{asChild:!0,onClick:e=>{e.preventDefault(),u(!0)},disabled:n,children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Mc.A,{className:"mr-2 h-4 w-4"}),"Publish"]})}),(0,be.jsx)(jt,{open:m,onOpenChange:u,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsx)(Ct,{children:(0,be.jsx)(kt,{children:"Publish Your App"})}),t.last_deployed_at?(0,be.jsxs)("div",{className:"py-3 text-sm text-gray-600",children:[(0,be.jsx)("p",{className:"mb-2",children:"Publishing will make your current version available at the public link."}),(0,be.jsxs)("p",{className:"mb-2",children:["Last published: ",it().utc(t.last_deployed_at).fromNow()]})]}):(0,be.jsxs)("div",{className:"py-3 text-sm text-gray-600",children:[(0,be.jsx)("p",{className:"mb-2",children:"This will be the first public version of your app."}),(0,be.jsx)("p",{children:"Publishing will make your app accessible to users at the public link."})]}),l&&(0,be.jsx)("div",{className:"py-2 text-sm text-red-600 bg-red-50 border-t border-b border-red-100",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Te.A,{className:"h-4 w-4 mr-2"}),(0,be.jsx)("p",{children:l})]})}),(0,be.jsxs)("div",{className:"py-3 border-t border-gray-100",children:[(0,be.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Available Domains"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(f,{url:p,displayUrl:p.replace(/(https?:\/\/)/,"")}),c.length>0?c.map(((e,s)=>(0,be.jsx)("div",{className:"px-1",children:(0,be.jsx)(f,{url:`https://${e.domain}`,displayUrl:e.domain})},s))):(0,be.jsx)("p",{className:"text-sm text-gray-500",children:"No custom domains configured"})]})]}),(0,be.jsx)(St,{children:(0,be.jsx)(Ze,{className:"w-full bg-gray-900 text-white hover:bg-gray-800",onClick:g,disabled:n,children:n?(0,be.jsxs)("span",{className:"flex items-center justify-center",children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Publishing..."]}):"Publish App"})})]})})]}):(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{children:[(0,be.jsxs)(Ma,{open:a,onOpenChange:r,children:[(0,be.jsx)(Fa,{asChild:!0,children:(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)(Ze,{className:"px-3 py-1 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800 transition-colors h-8",disabled:n,children:n?(0,be.jsxs)("span",{className:"flex items-center",children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-3.5 w-3.5 animate-spin"}),"Publishing..."]}):(0,be.jsx)("span",{children:"Publish"})})})}),(0,be.jsxs)(Ha,{align:"end",className:"w-72",children:[(0,be.jsx)("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,be.jsx)("h3",{className:"font-medium text-gray-900",children:"Publish Your App"})}),t.last_deployed_at?(0,be.jsxs)("div",{className:"px-4 py-3 text-sm text-gray-600",children:[(0,be.jsx)("p",{className:"mb-2",children:"Publishing will make your current version available at the public link."}),(0,be.jsxs)("p",{className:"mb-2",children:["Last published: ",it().utc(t.last_deployed_at).fromNow()]})]}):(0,be.jsxs)("div",{className:"px-4 py-3 text-sm text-gray-600",children:[(0,be.jsx)("p",{className:"mb-2",children:"This will be the first public version of your app."}),(0,be.jsx)("p",{children:"Publishing will make your app accessible to users at the public link."})]}),l&&(0,be.jsx)("div",{className:"px-4 py-2 text-sm text-red-600 bg-red-50 border-t border-b border-red-100",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(Te.A,{className:"h-4 w-4 mr-2"}),(0,be.jsx)("p",{children:l})]})}),(0,be.jsxs)("div",{className:"px-4 py-3 border-t border-gray-100",children:[(0,be.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Available Domains"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("div",{className:"px-1",children:(0,be.jsx)(f,{url:p,displayUrl:p.replace(/(https?:\/\/)/,"")})}),c.length>0?c.map(((e,s)=>(0,be.jsx)("div",{className:"px-1",children:(0,be.jsx)(f,{url:`https://${e.domain}`,displayUrl:e.domain})},s))):(0,be.jsx)("p",{className:"text-sm text-gray-500",children:"No custom domains configured"})]})]}),(0,be.jsx)(Va,{className:"justify-center mt-2 py-2",onClick:g,disabled:n,children:(0,be.jsx)("div",{className:"w-full px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800 transition-colors text-center",children:n?(0,be.jsxs)("span",{className:"flex items-center justify-center",children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Publishing..."]}):"Publish App"})}),(0,be.jsx)(Ol,{})]})]}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Publish app and open in new tab"})})]})})}const zc=e=>{let{children:s,menuControl:t,toggleControl:a,actionControl:r,isMobile:n}=e;return n?(0,be.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[(0,be.jsx)("div",{children:(0,be.jsx)(Bc,{})}),(0,be.jsx)("div",{children:a}),(0,be.jsx)("div",{children:r})]}),(0,be.jsx)("div",{className:"flex-1 overflow-auto",children:s})]}):(0,be.jsxs)("div",{className:"flex flex-col h-full overflow-hidden pr-2",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-1",children:[(0,be.jsx)("div",{children:t}),(0,be.jsx)("div",{children:r})]}),(0,be.jsx)("div",{className:"flex-1 overflow-auto border border-slate-200 rounded-[10px] mb-2",children:s})]})},Bc=()=>{const e=(0,J.Zp)();return(0,be.jsxs)(Ma,{children:[(0,be.jsx)(Fa,{asChild:!0,children:(0,be.jsx)(Ze,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,be.jsx)(fc.A,{className:"h-5 w-5"})})}),(0,be.jsxs)(Ha,{align:"end",children:[(0,be.jsxs)(Va,{onClick:()=>e("/"),children:[(0,be.jsx)(Qt.A,{className:"mr-2 h-4 w-4"}),"Home"]}),(0,be.jsxs)(Va,{onClick:()=>e("/billing"),children:[(0,be.jsx)(_e.A,{className:"mr-2 h-4 w-4"}),"Billing"]})]})]})};function qc(e){var s,t;let{view:a,selectedCheckpoint:r,setSelectedCheckpoint:n}=e;const{user:i}=Ne(),{app:l,undoMessage:o,appErrors:c,addChatMessage:d,setAppErrors:m,onAppError:u,runtimeAuthToken:h}=xa(),x=(0,Y.useRef)(null),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(!1),[b,v]=(0,Y.useState)(!1),y=(0,J.Zp)(),N=(0,Ee.Ub)({maxWidth:767}),[w,C]=(0,Y.useState)(!1),S=e=>{if(x.current){const s=e||x.current.src;x.current.src="",setTimeout((()=>{x.current&&(x.current.src=s)}),50)}};(0,Y.useEffect)((()=>{r&&"workspace"===a.toLowerCase()?y(`/apps/${l.id}/editor/preview/${l.main_page}`):S(A())}),[r,a,l.app_code_hash]);const k=async()=>{if(window.confirm("Are you sure you want to restore this checkpoint? This action is irreversible.")){v(!0);try{await ka.loadCheckpoint(l.id,r.id),n(void 0)}catch(e){}finally{v(!1)}}};function A(){const e=window.location.pathname.split("/preview")[1];let s=`preview--${l.slug}`;r&&(s=`checkpoint--${l.id}--${r.id}`);const t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,a=window.location.hostname.includes("base44.io")||window.location.hostname.includes("beta-base44"),n=new URLSearchParams({access_token:h,hide_badge:"true"});return t?`http://${s}.localhost:3000${e}?${n.toString()}`:a?`https://${s}.base44.io${e}?${n.toString()}`:`https://${s}.base44.app${e}?${n.toString()}`}(0,Y.useEffect)((()=>{if(l.slug&&x.current&&!x.current.src.includes(l.slug)){const e=A();x.current.src=e,setTimeout((()=>{x.current.src=e}),50)}return window.addEventListener("message",T),()=>{window.removeEventListener("message",T)}}),[l.slug,null==x?void 0:x.current]);const _=async()=>{g(!0);const e=`the following errors happened in the app:\n${c.map((e=>(e=>{const s=X().escape(e.title),t=X().escape(e.details||"no details");return X().escape(e.componentName),`\n\n<error title="${s}" details="${t}"></error>\n\n`})(e))).join("\n\n")}\n---\nplease help me fix these errors`;await d({role:"user",content:e}),g(!1)},T=e=>{var s,t;if("app_error"===(null===(s=e.data)||void 0===s?void 0:s.type)&&e.data.error&&u(e.data.error.title,e.data.error.details,e.data.error.componentName),"app_changed_url"===(null===(t=e.data)||void 0===t?void 0:t.type)&&e.data.url&&window.location.href.includes("/preview")){const s=new URL(e.data.url),t=s.pathname,a=new URLSearchParams(s.search);a.delete("access_token"),a.delete("hide_badge");let r=t;if(t.startsWith("/apps"))return r="/"+t.split("/").pop(),r.includes(`${l.slug}`)?void 0:void y(`/apps/${l.id}/editor/preview${r}`);"/"===t||t===`/${l.slug}`?r=`/apps/${l.id}/editor/preview/${l.main_page}`:t.startsWith("/apps")||t.includes(`${l.slug}`)||(r=`/apps/${l.id}/editor/preview${t}`);const n=a.toString();n&&(r+=`?${n}`),N||y(r)}},E=(0,be.jsx)(ei,{option1:"Workspace",option2:"Preview",selected:"preview"===a?"Preview":"Workspace",onChange:e=>{"workspace"===e.toLowerCase()?y(`/apps/${l.id}/editor/workspace/overview`):y(`/apps/${l.id}/editor/preview/${l.main_page}`)}}),I=(0,be.jsx)("div",{className:"flex items-center gap-2",children:(0,be.jsxs)(Qe,{children:[(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)($c,{})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Network requests"})})]}),(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)(Ac,{showFiles:"preview"===a})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Github & code editing"})})]}),(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("button",{onClick:()=>j(!0),className:"p-1.5 text-gray-500 hover:bg-gray-200 rounded-md transition-colors",children:(0,be.jsx)(jc.A,{size:20})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Share app"})})]}),"preview"===a&&(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("button",{onClick:()=>C(!w),className:"p-1.5 text-gray-500 hover:bg-gray-200 rounded-md transition-colors",children:w?(0,be.jsx)(bc.A,{size:20}):(0,be.jsx)(vc.A,{size:20})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:w?"Switch to desktop view":"Switch to mobile view"})})]}),(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)("button",{onClick:()=>S(),className:"p-1.5 text-gray-500 hover:bg-gray-200 rounded-md transition-colors",children:(0,be.jsx)(yc.A,{size:20})})}),(0,be.jsx)(ts,{children:(0,be.jsx)("p",{children:"Refresh preview"})})]}),(0,be.jsx)(Fc,{app:l})]})}),P=(0,be.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,be.jsx)("p",{className:"text-sm font-medium",children:"Viewing checkpoint version"}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Ze,{variant:"outline",size:"sm",className:"h-8",onClick:k,disabled:b,children:b?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(yc.A,{className:"mr-2 h-3 w-3 animate-spin"}),"Restoring..."]}):"Restore this version"}),(0,be.jsx)(Ze,{variant:"secondary",size:"sm",className:"h-8",onClick:()=>n(void 0),disabled:b,children:"Exit"})]})]}),R=(0,be.jsx)("div",{className:"flex items-center",children:(0,be.jsx)(Fc,{app:l,isMobile:"icon"})});yc.A;return(0,be.jsxs)("div",{className:"flex-grow h-full overflow-y-auto",children:[(0,be.jsx)(zc,{isMobile:N,menuControl:N||r?null:E,toggleControl:N?E:null,actionControl:N?R:r?P:I,children:"preview"===a?(0,be.jsx)("div",{className:"w-full h-full flex justify-center "+(w?"items-start pt-4":""),children:(0,be.jsx)("iframe",{title:"App Preview",allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;",ref:x,id:"preview-iframe",className:"transition-all duration-300 ease-in-out "+(w?"w-[375px] h-[667px] border border-gray-300 rounded-xl shadow-md":"w-full h-full"),style:N&&!w?{height:"100vh"}:{}})}):(0,be.jsx)(gc,{})}),(0,be.jsx)(vl,{isVisible:f,onCancel:()=>j(!1),onInviteSuccess:()=>j(!1)}),r&&!N&&(0,be.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-50",children:(0,be.jsx)("div",{className:"max-w-4xl mx-auto px-4 pt-2",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium text-slate-800",children:"Viewing Version History"}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:r.title})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Ze,{variant:"outline",size:"sm",className:"h-8 text-xs",onClick:k,disabled:b,children:b?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(yc.A,{className:"mr-2 h-3 w-3 animate-spin"}),"Restoring..."]}):"Restore This Version"}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",className:"h-8 text-xs text-slate-600",onClick:()=>n(void 0),disabled:b,children:"Exit"})]})]})})}),c.length>0&&(0,be.jsx)("div",{className:`fixed ${N?"bottom-2 right-2 left-2 z-50 max-w-full":"bottom-4 right-4 z-50 max-w-md"} bg-white rounded-lg shadow-xl p-4 border border-gray-100`,children:(0,be.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("div",{className:"font-medium text-gray-800",children:"Issues Found"}),(0,be.jsx)("button",{onClick:()=>m([]),className:"p-1 hover:bg-gray-100 rounded-md",children:(0,be.jsx)(He.A,{size:16})})]}),c.map((e=>(0,be.jsxs)("div",{className:"text-sm text-gray-600",children:[e.componentName&&(0,be.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["In ",e.componentName," component:"]}),e.title]},e.title))),(0,be.jsx)("button",{onClick:()=>_(),disabled:"processing"===(null===(s=l.status)||void 0===s?void 0:s.state)||p,className:"px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm rounded-md transition-colors mt-2 "+("processing"===(null===(t=l.status)||void 0===t?void 0:t.state)?"opacity-50 cursor-not-allowed":""),children:"Resolve with AI"}),"free"!==i.subscription_tier&&(0,be.jsx)("div",{className:"text-xs text-gray-500 mt-1 italic",children:"This action won't deduct credits from your account."})]})})]})}var Wc=t(28017);const Yc=e=>{try{const s=va(e,"action_group");if(s.length>0)for(const e of s){const s=e.openingTag.match(/title=["']([^"']*)["']/i);if(s&&s[1])return s[1]}const t=/# (.*)/,a=e.match(t);if(a)return a[1]}catch(s){}return"Untitled Version"},Gc=e=>{let{onClose:s,selectedCheckpoint:t,onSelectCheckpoint:a}=e;const{app:r}=xa(),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)([]),[c,d]=(0,Y.useState)([]),[m,u]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{!async function(){try{x(!0);const e=await ka.listCheckpoints(r.id),s=r.conversation.messages.filter((e=>e.checkpoint_id&&e.content.includes("action_group"))),t=s.map((e=>e.checkpoint_id));let a={};e.forEach((e=>{a[e.id]=e}));const n=s.map((e=>{var s,t;return{id:e.checkpoint_id,timestamp:(null===(s=e.metadata)||void 0===s?void 0:s.created_date)||(new Date).toISOString(),title:(null===(t=a[e.checkpoint_id])||void 0===t?void 0:t.name)||Yc(e.content)}})).reverse();o(n);const i=e.filter((e=>!t.includes(e.id)));d(i.map((e=>({id:e.id,timestamp:e.created_date,title:e.name}))))}catch(e){}finally{x(!1)}}()}),[]);const p=e=>{const s=it().utc(e);return{relative:s.fromNow(),absolute:s.format("MMM D, YYYY [at] h:mm A")}},g=e=>{a(e)};return h?(0,be.jsxs)("div",{className:"flex flex-col h-full p-4",children:[(0,be.jsxs)("div",{className:"flex items-center mb-4",children:[(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:s,children:(0,be.jsx)(Xr.A,{className:"h-4 w-4"})}),(0,be.jsx)("h2",{className:"text-lg font-semibold ml-2",children:"Version History"})]}),(0,be.jsx)("div",{className:"space-y-4",children:[1,2,3].map((e=>(0,be.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 animate-pulse",children:[(0,be.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),(0,be.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},e)))})]}):(0,be.jsxs)("div",{className:"flex flex-col h-full p-4",children:[(0,be.jsxs)("div",{className:"flex items-center mb-4",children:[(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:s,children:(0,be.jsx)(Xr.A,{className:"h-4 w-4"})}),(0,be.jsx)("h2",{className:"text-lg font-semibold ml-2",children:"Version History"})]}),(0,be.jsx)("div",{className:"space-y-4",children:l.map((e=>{const{relative:s,absolute:a}=p(e.timestamp);return(0,be.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 relative cursor-pointer transition-all "+((null==t?void 0:t.id)===e.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"hover:border-blue-200 dark:hover:border-blue-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"),onClick:()=>g(e),children:[(0,be.jsx)("div",{className:"mb-2 font-medium pr-8",children:e.title}),(0,be.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,be.jsx)("div",{className:"font-medium",children:s}),(0,be.jsx)("div",{className:"opacity-75",children:a})]}),(null==t?void 0:t.id)===e.id&&(0,be.jsx)("div",{className:"absolute top-2 right-2",children:(0,be.jsx)(js.A,{className:"h-4 w-4 text-blue-500"})})]},e.id)}))}),c.length>0&&(0,be.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,be.jsx)(Ze,{variant:"ghost",className:"w-full justify-start p-3 h-auto text-left hover:bg-gray-50 dark:hover:bg-gray-800/50",onClick:()=>u(!m),children:(0,be.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0 mr-3",children:[(0,be.jsx)("div",{className:"font-medium text-sm mb-1",children:"Alternative Versions"}),(0,be.jsxs)("div",{className:"text-xs text-gray-500 leading-relaxed",children:["These versions may be from alternative paths,",(0,be.jsx)("br",{}),"created when reverting to previous checkpoints"]})]}),(0,be.jsx)("div",{className:"flex-shrink-0 ml-2",children:m?(0,be.jsx)(gs.A,{className:"h-4 w-4 text-gray-400"}):(0,be.jsx)($a.A,{className:"h-4 w-4 text-gray-400"})})]})}),m&&(0,be.jsx)("div",{className:"space-y-2 mt-3",children:c.map((e=>{const{relative:s,absolute:a}=p(e.timestamp);return(0,be.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 relative cursor-pointer transition-all "+((null==t?void 0:t.id)===e.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"hover:border-blue-200 dark:hover:border-blue-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"),onClick:()=>g(e),children:[(0,be.jsx)("div",{className:"mb-2 font-medium text-sm pr-8",children:e.title}),(0,be.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,be.jsx)("div",{className:"font-medium",children:s}),(0,be.jsx)("div",{className:"opacity-75",children:a})]}),(null==t?void 0:t.id)===e.id&&(0,be.jsx)("div",{className:"absolute top-2 right-2",children:(0,be.jsx)(js.A,{className:"h-4 w-4 text-blue-500"})})]},e.id)}))})]}),(0,be.jsx)(Zo,{open:n,onOpenChange:i,children:(0,be.jsxs)(sc,{children:[(0,be.jsxs)(tc,{children:[(0,be.jsx)(rc,{children:"Are you sure?"}),(0,be.jsxs)(nc,{children:['This action is irreversible. Your app will be reverted to "',null==t?void 0:t.title,'".']})]}),(0,be.jsxs)(ac,{children:[(0,be.jsx)(lc,{children:"Cancel"}),(0,be.jsx)(ic,{onClick:()=>{alert(`Reverted to: ${t.title}`),i(!1)},children:"Revert"})]})]})})]})};var Hc=t(80903),Vc=t(86009),Jc=t(15332),Kc=t(319);const Zc=e=>{switch((null==e?void 0:e.public_settings)||"private_with_login"){case"public_without_login":return"Public";case"public_with_login":return"Public (requires login)";default:return"Private"}};const Xc=e=>{var s;let{onToggleVersions:t,showVersions:a}=e;const{app:r,currentUsage:n}=xa(),{logout:i}=Ne(),l=(0,J.Zp)(),[o,c]=(0,Y.useState)(!1),d=(null!=n&&n.monthly_limit&&(n.monthly_limit,n.monthly_usage),null!=n&&n.monthly_limit?n.monthly_usage/n.monthly_limit*100:0);return(0,be.jsxs)("div",{className:"py-2 flex items-center justify-between bg-slate-50 relative z-10",children:[(0,be.jsx)("div",{className:"flex items-center gap-3 flex-1",children:(0,be.jsxs)(Ma,{children:[(0,be.jsx)(Fa,{asChild:!0,children:(0,be.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer flex-1",children:[(0,be.jsxs)(ot,{className:"h-8 w-8 rounded-xl",children:[(0,be.jsx)(ct,{src:null==r?void 0:r.logo_url,alt:(null==r?void 0:r.name)||"App"}),(0,be.jsx)(dt,{children:(null==r||null===(s=r.name)||void 0===s?void 0:s[0])||"A"})]}),(0,be.jsx)("div",{className:"flex-1 min-w-0",children:(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium truncate",children:(null==r?void 0:r.name)||"My App"}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:Zc(r)})]}),(0,be.jsx)(gs.A,{className:"h-4 w-4 text-muted-foreground"})]})})]})}),(0,be.jsxs)(Ha,{align:"start",className:"w-56 p-1 shadow-lg border border-slate-200 rounded-lg",children:[(0,be.jsx)(Va,{asChild:!0,children:(0,be.jsxs)(V.Link,{to:"/",className:"flex items-center gap-2 cursor-pointer",children:[(0,be.jsx)(Qt.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Back to Home"})]})}),(0,be.jsx)(Va,{asChild:!0,children:(0,be.jsxs)(V.Link,{to:"https://docs.base44.com",className:"flex items-center gap-2 cursor-pointer",target:"_blank",children:[(0,be.jsx)(Hc.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Documentation"})]})}),(0,be.jsx)(Xa,{}),(0,be.jsx)(Va,{asChild:!0,children:(0,be.jsxs)(V.Link,{to:`/apps/${null==r?void 0:r.id}/editor/workspace/logo`,className:"flex items-center gap-2 cursor-pointer",children:[(0,be.jsx)(Pe.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Edit App Logo"})]})}),(0,be.jsx)(Xa,{}),n&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Za,{children:(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{children:"Credits"}),(0,be.jsxs)("span",{className:"text-xs bg-slate-100 px-2 py-0.5 rounded",children:["Plan: ",n.tier]})]})}),(0,be.jsxs)("div",{className:"px-2 py-1.5",children:[(0,be.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,be.jsx)("span",{children:"Monthly Credits"}),(0,be.jsxs)("span",{children:[(m=n.monthly_usage,m%1==0?m:m.toFixed(1)),"/",n.monthly_limit,n.extra_credits>0&&` (+${n.extra_credits})`]})]}),(0,be.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,be.jsx)("div",{className:"h-1.5 rounded-full "+(n.is_over_limit?"bg-red-500":"bg-primary"),style:{width:`${Math.min(d,100)}%`}})})]}),n.daily_limit&&(0,be.jsx)("div",{className:"px-2 py-1.5",children:(0,be.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,be.jsx)("span",{children:"Daily Credits"}),(0,be.jsxs)("span",{children:[n.daily_usage,"/",n.daily_limit]})]})}),(0,be.jsxs)("div",{className:"px-2 pb-1 text-xs text-muted-foreground",children:["Credits renew on: ",n.next_credit_period_start_date]}),(0,be.jsx)("div",{className:"px-2 pb-2.5 pt-1.5",children:(0,be.jsxs)("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-between gap-2 px-2.5 py-1.5 text-xs rounded-md border border-primary/20 bg-primary/5 text-primary hover:bg-primary/10 transition-colors",children:[(0,be.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Vc.A,{className:"h-3.5 w-3.5"}),"Win free credits"]}),(0,be.jsx)(Os,{variant:"outline",className:"bg-primary/10 text-[10px] h-4 px-1.5 border-primary/20",children:"Share"})]})})]}),(0,be.jsx)(Va,{asChild:!0,children:(0,be.jsxs)(V.Link,{to:"/billing",className:"flex items-center gap-2 cursor-pointer",children:[(0,be.jsx)(_e.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Manage Billing"})]})}),(0,be.jsx)(Xa,{}),(0,be.jsxs)(Va,{onClick:()=>{i(),l("/login")},className:"flex items-center gap-2 cursor-pointer text-gray-800 hover:text-red-900 hover:bg-gray-100",children:[(0,be.jsx)(Jc.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Sign Out"})]})]})]})}),(0,be.jsx)(Ze,{variant:a?"secondary":"ghost",size:"sm",className:"h-8 w-8 p-0 transition-colors "+(a?"text-gray-700 bg-gray-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),onClick:t,title:"Version history",children:(0,be.jsx)(Kc.A,{className:"h-4 w-4"})}),(0,be.jsx)(It,{app:r,isOpen:o,onClose:()=>c(!1)})]});var m};function Qc(e){let{app:s}=e;return(0,be.jsx)("div",{className:"h-full flex items-center justify-center pt-4",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-8 max-w-md text-center px-4",children:[(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("div",{className:"w-16 h-16 rounded-full bg-orange-500/20 backdrop-blur-sm flex items-center justify-center",children:(0,be.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-400 to-orange-500"})}),(0,be.jsx)("div",{className:"absolute top-0 left-0 w-16 h-16 rounded-full bg-orange-400/20 animate-ping"}),(0,be.jsx)("div",{className:"absolute top-2 left-2 w-12 h-12 rounded-full bg-orange-300/10 animate-ping",style:{animationDelay:"0.2s"}})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("h2",{className:"text-2xl font-medium tracking-tight text-slate-700",children:"Creating Your App"}),(0,be.jsx)("p",{className:"text-sm font-light text-teal-700/60 tracking-wide",children:"This might take a few minutes..."})]}),(0,be.jsx)("div",{className:"text-base text-teal-600/80 font-light tracking-wide",children:(0,be.jsx)(Dr,{status:s.status.details})})]})})}function ed(e){var s,t,a;let{view:r}=e;const n=(0,Ee.Ub)({maxWidth:767}),[i,l]=(0,Y.useState)(!1),{app:o}=xa(),[c,d]=(0,Y.useState)(!1),[m,u]=(0,Y.useState)(null),[h,x]=(0,Y.useState)(null),p=e=>{u(e)};(0,Y.useEffect)((()=>{if(n){var e,s,t,a,r;const n="processing"===(null===(e=o.status)||void 0===e?void 0:e.state),i=(null===(s=o.conversation)||void 0===s||null===(t=s.messages)||void 0===t?void 0:t.length)<=3;n&&i&&l(!0),"processing"===h&&"processing"!==(null===(a=o.status)||void 0===a?void 0:a.state)&&i&&l(!1),x(null===(r=o.status)||void 0===r?void 0:r.state)}}),[null===(s=o.status)||void 0===s?void 0:s.state,null===(t=o.conversation)||void 0===t||null===(a=t.messages)||void 0===a?void 0:a.length,n,h]);let g=null;var f,j,b;"pending"===o.app_stage?g="processing"===(null===(f=o.status)||void 0===f?void 0:f.state)?(0,be.jsx)(Qc,{app:o}):(0,be.jsx)("div",{className:"h-full flex items-center justify-center pt-4",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-6 max-w-md text-center px-4",children:[(0,be.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",onClick:()=>l(!0),children:(0,be.jsx)(Wc.A,{className:"w-6 h-6 text-gray-400"})}),(0,be.jsx)("h2",{className:"text-xl font-light text-gray-700",children:"Let's Build Your App"}),(0,be.jsx)("p",{className:"text-sm text-gray-500",children:"Tell me what you'd like to create using the chat"})]})}):g=(0,be.jsx)(qc,{view:r,selectedCheckpoint:m,setSelectedCheckpoint:u});return n?(0,be.jsx)("div",{className:"h-full bg-slate-50",children:(0,be.jsxs)("div",{className:"relative",children:[g,(0,be.jsx)(Ze,{className:"fixed bottom-6 right-6 rounded-full shadow-lg z-50 bg-gray-900 hover:bg-gray-800 flex items-center gap-2 px-4",onClick:()=>l(!0),children:"processing"===(null===(j=o.status)||void 0===j?void 0:j.state)?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,be.jsx)("span",{className:"text-white text-sm",children:"Processing..."})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Wc.A,{className:"h-5 w-5 text-white"}),(0,be.jsx)("span",{className:"text-white text-sm",children:"Edit App"})]})}),(0,be.jsx)(ll,{open:i,onOpenChange:l,children:(0,be.jsxs)(hl,{side:"left",className:"w-[90%] sm:w-[385px] p-0 flex flex-col",children:[(0,be.jsx)(xl,{className:"p-4 flex-shrink-0 bg-slate-50 relative z-10",children:(0,be.jsx)("div",{className:"flex justify-between items-center",children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(V.Link,{to:`/apps/${null==o?void 0:o.id}/editor/workspace/logo`,children:(0,be.jsxs)(ot,{className:"h-8 w-8 rounded-xl cursor-pointer",children:[(0,be.jsx)(ct,{src:null==o?void 0:o.logo_url,alt:(null==o?void 0:o.name)||"App"}),(0,be.jsx)(dt,{children:(null==o||null===(b=o.name)||void 0===b?void 0:b[0])||"A"})]})}),(0,be.jsxs)("div",{children:[(0,be.jsx)(gl,{className:"m-0 text-sm",children:(null==o?void 0:o.name)||"AI App Editor"}),(0,be.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:Zc(o)})]})]})})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:c?(0,be.jsx)(Gc,{onClose:()=>{u(void 0),d(!1)},selectedCheckpoint:m,onSelectCheckpoint:p}):(0,be.jsx)(Qn,{})})]})})]})}):(0,be.jsx)("div",{className:"flex flex-row h-screen bg-slate-50",children:(0,be.jsxs)(po,{direction:"horizontal",children:[(0,be.jsx)(go,{defaultSize:33,minSize:20,maxSize:40,className:"h-full overflow-hidden relative ps-2",children:(0,be.jsxs)("div",{className:"flex flex-col h-full",children:[(0,be.jsx)("div",{className:"flex-shrink-0",children:(0,be.jsx)(Xc,{onToggleVersions:()=>{d(!c)},showVersions:c})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto pb-2",children:c?(0,be.jsx)(Gc,{onClose:()=>{d(!1),u(void 0)},selectedCheckpoint:m,onSelectCheckpoint:p}):(0,be.jsx)(Qn,{})})]})}),(0,be.jsx)(fo,{withHandle:!0,className:"group transition-opacity opacity-0 hover:opacity-100 focus:opacity-100"}),(0,be.jsx)(go,{defaultSize:75,className:"flex-1 overflow-x-auto",children:g})]})})}const sd=e=>{let{view:s}=e;return(0,be.jsx)(ha,{children:(0,be.jsx)(Pc,{children:(0,be.jsx)(ed,{view:s})})})};function td(){const e=(0,J.Zp)(),s=new URLSearchParams(window.location.search).get("prompt"),[t,a]=(0,Y.useState)(null);return(0,Y.useEffect)((()=>{!async function(){if(s)try{const t=await we.create({status:{state:"processing",details:"Starting conversation..."}});we.addMessage(t.id,{content:s}),e(`/apps/${t.id}/editor/preview`)}catch(t){a(t.message||"Error creating app")}else a("No prompt provided")}()}),[s,e]),t?(0,be.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,be.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:(0,be.jsx)("span",{children:t})})}):(0,be.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-300 border-t-blue-600"})})}const ad=new class extends de{getBaseURL(){return"/billing"}createCheckoutSession(e){return this.axios.post(`/create-checkout-session/${e}`)}createPortalSession(){return this.axios.post("/create-portal-session")}updateSubscription(e){return this.axios.post(`/update-subscription/${e}`)}cancelSchedule(){return this.axios.delete("/cancel-schedule")}},rd=e=>{let{question:s,answer:t}=e;const[a,r]=(0,Y.useState)(!1);return(0,be.jsxs)("div",{className:"border-b border-gray-200 py-4",children:[(0,be.jsxs)("button",{className:"flex justify-between items-center w-full text-left",onClick:()=>r(!a),children:[(0,be.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:s}),(0,be.jsx)("span",{className:"text-teal-600 transition-transform duration-300 "+(a?"rotate-180":""),children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,be.jsx)("polyline",{points:"6 9 12 15 18 9"})})})]}),(0,be.jsx)(Rr.N,{children:a&&(0,be.jsx)(Or.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:(0,be.jsx)("div",{className:"pt-4 pb-2 text-gray-600",children:t})})})]})};function nd(){const e=[{question:"What is Base44?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{children:"Base44 is an AI-powered platform that allows you to build custom software applications without coding. It uses natural language processing to understand your requirements and generate functional software based on your descriptions."}),(0,be.jsx)("p",{children:"Our platform is designed to be user-friendly and accessible to non-technical users, enabling you to create powerful applications through simple conversations with our AI."})]})},{question:"What's included in the free plan?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{children:"The free plan gives you a daily allowance of 7 messages and a monthly cap of 25 messages total. You also get 500 integration credits to experiment with various integrations like authentication, database, and analytics."}),(0,be.jsx)("p",{children:"With the free plan, you have access to all core integration types, allowing you to build fully functional applications with user authentication, data storage, and more - all at no cost."})]})},{question:"What are integration credits?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{children:"Integration credits are used to access Base44's various integrations within your application. Each integration request costs 1 credit, regardless of which integration you're using."}),(0,be.jsx)("p",{children:"These integrations enhance your app's functionality, including LLMs, file uploading, image understanding, image generation, email sending, SMS sending, database querying, and many more. The number of integration credits in your plan determines how many of these requests you can make per month."})]})},{question:"What types of applications can I build with Base44?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{children:"Base44 is versatile and can be used to build a wide range of applications, including but not limited to: fully functional SaaS products, backoffice tools, personal productivity apps, customer portals, and business process automation tools."}),(0,be.jsx)("p",{children:"You can also use it for rapid prototyping and creating MVPs, allowing you to validate your ideas quickly without investing in expensive development resources."})]})},{question:"Who owns the applications created with Base44?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("p",{children:[(0,be.jsx)("strong",{children:"You do."})," All applications and content generated through Base44 belong entirely to you. We make no claims of ownership over anything you create using our platform."]}),(0,be.jsx)("p",{children:"Your intellectual property remains yours at all times, and you're free to use, modify, distribute, or sell the generated applications however you see fit."})]})},{question:"How are Base44 applications deployed?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{children:"With Base44, deployment is incredibly simple. Your applications are instantly usable and shareable as soon as you create them. Simply use and share the URL of your app with others."}),(0,be.jsx)("p",{children:"There's no need for separate hosting or deployment steps, making it incredibly easy to get your application up and running quickly."})]})},{question:"What happens if I reach my plan limits?",answer:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("p",{children:"When you reach your daily message limit, you'll need to wait until the next day to send more messages. If you hit your monthly limit, you won't be able to send additional messages or make integration requests until the beginning of your next billing cycle."}),(0,be.jsx)("p",{children:"To avoid interruptions in your app development and usage, you can upgrade to a higher tier plan with increased limits at any time from your billing dashboard."})]})}];return(0,be.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8 mt-12",children:[(0,be.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"Frequently Asked Questions"}),(0,be.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(((e,s)=>(0,be.jsx)(rd,{question:e.question,answer:e.answer},s)))})]})}let id=!1;const ld=[],od=e=>{id&&window.fbq?e():ld.push(e)},cd=async e=>{var s;if(!id&&e)for(await(s=e.email,new Promise((e=>{var t,a,r,n,i,l;window.fbq||(t=window,a=document,r="script",t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],(i=a.createElement(r)).async=!0,i.src="https://connect.facebook.net/en_US/fbevents.js",(l=a.getElementsByTagName(r)[0]).parentNode.insertBefore(i,l)),window.fbq("init","2102574843552117",s?{em:s}:{})),e()}))),id=!0;ld.length>0;){ld.shift()()}},dd=(e,s)=>{od((()=>{window.fbq("track","InitiateCheckout",{currency:"USD",value:e},{eventID:`${s}_initiate_checkout`})}))};function md(){const{user:e,isLoadingAuth:s}=Ne(),t=(0,J.zy)(),a="true"===new URLSearchParams(t.search).get("is_new_user");return(0,Y.useEffect)((()=>{var t;!s&&e&&(cd(e),a&&(t=e.email,od((()=>{window.fbq("track","CompleteRegistration",{},{eventID:`${t}_registration`})})),he("is_new_user")))}),[s,e,a]),(0,Y.useEffect)((()=>{!s&&e&&od((()=>window.fbq("track","PageView")))}),[t,s,e]),null}const ud=new class extends de{getBaseURL(){return"/credits"}addBonusCredits(e,s,t){return this.axios.post("/add-bonus-credits",{user_id:e,num_messages:s,reason:t})}createCouponCode(e,s,t,a){return this.axios.post("/create-coupon-code",{code:e,num_messages:s,max_number_of_people:t,domain:a})}getCouponCodes(){return this.axios.get("/coupon-codes")}getBonusCredits(e){return this.axios.get(`/${e}/bonus-credits`)}addCouponCode(e){return this.axios.post(`/add-coupon-code/${e}`)}deleteBonusCredits(e,s){return this.axios.delete(`/${e}/bonus-credits/${s}`)}};function hd(e){let{text:s,variant:t="default"}=e;const a="dark"===t?"text-slate-400":"text-slate-600",r="dark"===t?"text-gray-300":"text-gray-600";return(0,be.jsxs)("div",{className:`flex items-center text-sm ${r} py-0.5`,children:[(0,be.jsx)("svg",{className:`w-4 h-4 ${a} mr-2 flex-shrink-0`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M5 13l4 4L19 7"})}),(0,be.jsx)("span",{className:"leading-tight",children:s})]})}function xd(e){if(!e)return"0";const s=parseInt(e,10);return s>=1e3?`${(s/1e3).toFixed(s%1e3==0?0:1)}k`:s.toString()}function pd(e,s){const t=["free","starter","builder","pro","elite","elite_2","elite_3"],a=t.indexOf(null==e?void 0:e.toLowerCase()),r=t.indexOf(null==s?void 0:s.toLowerCase());return r>a&&-1!==a&&-1!==r}function gd(e,s){const t=["free","starter","builder","pro","elite","elite_2","elite_3"],a=t.indexOf(null==e?void 0:e.toLowerCase()),r=t.indexOf(null==s?void 0:s.toLowerCase());return r<a&&-1!==a&&-1!==r}function fd(e){var s,t,a,r;let{plan:n,isCurrentPlan:i,onSubscribe:l,onUpgrade:o,onManageSubscription:c,currentTier:d,upgrading:m=!1}=e;const[u,h]=(0,Y.useState)(!1),[x,p]=(0,Y.useState)(!1),g=(null==n||null===(s=n.metadata)||void 0===s?void 0:s.monthly_message_limit)||0,f=(null==n||null===(t=n.metadata)||void 0===t?void 0:t.monthly_integration_credits)||0,j=(null==n?void 0:n.nickname)||"";let b=0,v="";j.toLowerCase().includes("starter")?(b=1,v="starter"):j.toLowerCase().includes("builder")?(b=2,v="builder"):j.toLowerCase().includes("pro")?(b=3,v="pro"):j.toLowerCase().includes("elite 3")||j.toLowerCase().includes("elite3")?(b=6,v="elite_3"):j.toLowerCase().includes("elite 2")||j.toLowerCase().includes("elite2")?(b=5,v="elite_2"):j.toLowerCase().includes("elite")&&(b=4,v="elite");const y=pd(d,v),N=gd(d,v),w="free"===(null==d?void 0:d.toLowerCase()),C=m,S=m?"Processing...":i?"Manage Payments":N?`Downgrade to ${n.nickname}`:y&&!w?`Upgrade to ${n.nickname}`:`Subscribe to ${n.nickname}`;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"bg-white rounded-xl p-6 flex flex-col transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1 h-[460px] "+(i?"border-2 border-slate-700 shadow-lg":"border border-gray-200 shadow-md"),children:[(0,be.jsxs)("div",{className:"text-center mb-5",children:[(0,be.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mb-3 "+(i?"bg-slate-100 text-slate-800 border border-slate-300":"bg-white text-slate-700 border border-slate-200"),children:i?`Current: ${n.nickname}`:n.nickname}),(0,be.jsxs)("div",{className:"flex items-baseline justify-center",children:[(0,be.jsxs)("span",{className:"text-4xl font-bold text-gray-900",children:["$",(n.unit_amount/100).toFixed(0)]}),(0,be.jsx)("span",{className:"text-gray-500 font-medium ml-1",children:"/mo"})]})]}),(0,be.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-3 text-gray-700",children:"Credits"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"Monthly Messages"}),(0,be.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:xd(g)})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"Integration Credits"}),(0,be.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:xd(f)})]})]})]}),(0,be.jsxs)("div",{className:"space-y-1 mb-6 flex-grow",children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-1 text-gray-700",children:"Features"}),b>1&&(0,be.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[2===b&&"Everything in Starter, plus:",3===b&&"Everything in Builder, plus:",4===b&&"Everything in Pro, plus:"]}),null===(a=n.metadata)||void 0===a||null===(r=a.features)||void 0===r?void 0:r.split(",").map(((e,s)=>(0,be.jsx)(hd,{text:e.trim().replace(/_/g," ")},s)))]}),i?(0,be.jsx)(Ze,{className:"w-full py-2 text-sm font-medium bg-slate-800 hover:bg-slate-900 text-white",onClick:c,children:"Manage Payments"}):(0,be.jsx)(Ze,{className:"w-full py-2 text-sm font-medium transition-colors "+(N?"bg-gray-500 hover:bg-gray-600 text-white":y&&!w?"bg-teal-600 hover:bg-teal-700 text-white":"bg-slate-700 hover:bg-slate-800 text-white"),onClick:()=>{N?p(!0):y&&!w?h(!0):l(n.id)},disabled:C,children:S})]}),(0,be.jsx)(jt,{open:u,onOpenChange:h,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Confirm Subscription Upgrade"}),(0,be.jsxs)(At,{children:["You are about to upgrade to the ",n.nickname," plan for $",(n.unit_amount/100).toFixed(2),"/month. Your subscription will be updated immediately and you'll be charged a prorated amount for the remainder of your billing cycle."]})]}),(0,be.jsxs)(St,{className:"sm:justify-between",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,be.jsx)(Ze,{variant:"default",className:"bg-teal-600 hover:bg-teal-700 text-white",onClick:()=>{h(!1),o(n.id)},disabled:m,children:m?"Processing...":"Confirm Upgrade"})]})]})}),(0,be.jsx)(jt,{open:x,onOpenChange:p,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Confirm Subscription Downgrade"}),(0,be.jsxs)(At,{children:["You are about to downgrade to the ",n.nickname," plan for $",(n.unit_amount/100).toFixed(2),"/month. This change will take effect at the end of your current billing cycle. You will continue to have access to your current plan's features until then."]})]}),(0,be.jsxs)(St,{className:"sm:justify-between",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,be.jsx)(Ze,{variant:"default",className:"bg-gray-500 hover:bg-gray-600 text-white",onClick:()=>{p(!1),o(n.id)},disabled:m,children:m?"Processing...":"Confirm Downgrade"})]})]})})]})}function jd(e){var s,t,a,r;let{elitePlans:n,currentTier:i,onSubscribe:l,onUpgrade:o,onManageSubscription:c,upgrading:d=!1}=e;const m=null!=i&&i.toLowerCase().includes("elite")?null==i?void 0:i.toLowerCase():"elite",[u,h]=(0,Y.useState)(m),[x,p]=(0,Y.useState)(n.find((e=>e.nickname.toLowerCase().replace(/\s+/g,"_")===u))),[g,f]=(0,Y.useState)(!1),[j,b]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{const e=n.find((e=>e.nickname.toLowerCase().replace(/\s+/g,"_")===u));p(e)}),[u,n]);const v=(null==x||null===(s=x.metadata)||void 0===s?void 0:s.monthly_message_limit)||0,y=(null==x||null===(t=x.metadata)||void 0===t?void 0:t.monthly_integration_credits)||0,N=(null==i?void 0:i.toLowerCase())===u,w=pd(i,u),C="free"===(null==i?void 0:i.toLowerCase()),S=gd(i,u),k=d,A=d?"Processing...":N?"Manage Payments":S?`Downgrade to ${null==x?void 0:x.nickname}`:w&&!C?`Upgrade to ${null==x?void 0:x.nickname}`:`Subscribe to ${null==x?void 0:x.nickname}`;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"bg-white rounded-xl p-6 flex flex-col transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1 h-[460px] "+(N?"border-2 border-slate-700 shadow-lg":"border border-gray-200 shadow-md"),children:[(0,be.jsxs)("div",{className:"text-center mb-5",children:[(0,be.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[N&&(0,be.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-slate-100 text-slate-800 border border-slate-300 mr-2 rounded-full",children:"Current"}),(0,be.jsxs)(bs,{value:u,onValueChange:e=>{h(e)},children:[(0,be.jsx)(Ns,{className:"h-7 px-3 text-sm bg-white text-slate-700 border border-slate-200 font-medium rounded-full w-auto min-w-[120px]",children:(0,be.jsx)(ys,{placeholder:"Elite Plan"})}),(0,be.jsx)(Ss,{children:n.map((e=>(0,be.jsx)(As,{value:e.nickname.toLowerCase().replace(/\s+/g,"_"),children:e.nickname},e.id)))})]})]}),(0,be.jsxs)("div",{className:"flex items-baseline justify-center",children:[(0,be.jsxs)("span",{className:"text-4xl font-bold text-gray-900",children:["$",((null==x?void 0:x.unit_amount)/100).toFixed(0)]}),(0,be.jsx)("span",{className:"text-gray-500 font-medium ml-1",children:"/mo"})]})]}),(0,be.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-3 text-gray-700",children:"Credits"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"Monthly Messages"}),(0,be.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:xd(v)})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"Integration Credits"}),(0,be.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:xd(y)})]})]})]}),(0,be.jsxs)("div",{className:"space-y-1 mb-6 flex-grow",children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-1 text-gray-700",children:"Features"}),"elite"===u&&(0,be.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Everything in Pro, plus:"}),"elite_2"===u&&(0,be.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Everything in Elite, plus:"}),"elite_3"===u&&(0,be.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Everything in Elite 2, plus:"}),null==x||null===(a=x.metadata)||void 0===a||null===(r=a.features)||void 0===r?void 0:r.split(",").map(((e,s)=>(0,be.jsx)(hd,{text:e.trim().replace(/_/g," ")},s)))]}),N?(0,be.jsx)(Ze,{className:"w-full py-2 text-sm font-medium bg-slate-800 hover:bg-slate-900 text-white",onClick:c,children:"Manage Payments"}):(0,be.jsx)(Ze,{className:"w-full py-2 text-sm font-medium transition-colors "+(S?"bg-gray-500 hover:bg-gray-600 text-white":w&&!C?"bg-teal-600 hover:bg-teal-700 text-white":"bg-slate-700 hover:bg-slate-800 text-white"),onClick:()=>{S?b(!0):w&&!C?f(!0):l(x.id)},disabled:k,children:A})]}),(0,be.jsx)(jt,{open:g,onOpenChange:f,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Confirm Subscription Upgrade"}),(0,be.jsxs)(At,{children:["You are about to upgrade to the ",null==x?void 0:x.nickname," plan for $",((null==x?void 0:x.unit_amount)/100).toFixed(2),"/month. Your subscription will be updated immediately and you'll be charged a prorated amount for the remainder of your billing cycle."]})]}),(0,be.jsxs)(St,{className:"sm:justify-between",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,be.jsx)(Ze,{variant:"default",className:"bg-teal-600 hover:bg-teal-700 text-white",onClick:()=>{f(!1),o(x.id)},disabled:d,children:d?"Processing...":"Confirm Upgrade"})]})]})}),(0,be.jsx)(jt,{open:j,onOpenChange:b,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Confirm Subscription Downgrade"}),(0,be.jsxs)(At,{children:["You are about to downgrade to the ",null==x?void 0:x.nickname," plan for $",((null==x?void 0:x.unit_amount)/100).toFixed(2),"/month. This change will take effect at the end of your current billing cycle. You will continue to have access to your current plan's features until then."]})]}),(0,be.jsxs)(St,{className:"sm:justify-between",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,be.jsx)(Ze,{variant:"default",className:"bg-gray-500 hover:bg-gray-600 text-white",onClick:()=>{b(!1),o(x.id)},disabled:d,children:d?"Processing...":"Confirm Downgrade"})]})]})})]})}var bd=t(97202);const vd="pk_live_51QK05lD5KgnLQ3Da11GxDxTfiDHUUr9QGgmU8BY0JIRuCUkU01wxJoKJ8wP72hPAS30JxEsTdEJ4puysUKwQn2te00tAMQjxt9",yd=20,Nd=()=>{const{user:e}=Ne(),[s,t]=(0,Y.useState)(!1),a=null==e?void 0:e.subscription_schedule_tier,r=(n=a)?n.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):"";var n;return(0,be.jsxs)(We,{className:"mb-4 bg-gray-50 border-gray-200 py-3",children:[(0,be.jsx)(mo._TA,{className:"h-4 w-4 text-gray-500"}),(0,be.jsx)(Ye,{className:"text-gray-800 font-medium text-sm",children:"Pending Subscription Change"}),(0,be.jsxs)(Ge,{className:"text-gray-600 text-sm space-y-2",children:[(0,be.jsxs)("div",{children:["You have a subscription change to the ",(0,be.jsx)("span",{className:"font-semibold",children:r})," plan scheduled to take effect at the end of your current billing cycle."]}),(0,be.jsx)("div",{className:"text-xs text-gray-500",children:'Note: To cancel your subscription, first cancel this change, then use "manage payments" to cancel.'}),(0,be.jsx)("div",{className:"flex justify-end pt-1",children:(0,be.jsx)(Ze,{variant:"outline",size:"sm",className:"text-xs px-3 py-1 h-7",onClick:async()=>{try{t(!0),await ad.cancelSchedule(),lr({title:"Success",description:"Subscription schedule cancelled successfully"}),t(!1),setTimeout((()=>{window.location.reload()}),2e3)}catch(e){lr({variant:"destructive",title:"Error",description:"Failed to cancel subscription schedule. Please try again later."})}},disabled:s,children:s?"Cancelling...":"Cancel Change"})})]})]})};function wd(){const{user:e}=Ne(),[s,t]=(0,Y.useState)(!1),[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(null),[l,o]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{(async()=>{try{const[e,s]=await Promise.all([Ps.getStats(),Ps.getCurrentUsage()]);r(e),i(s)}catch(e){lr({variant:"destructive",title:"Error",description:"Failed to load billing information"})}finally{o(!1)}})()}),[]);const c=async s=>{try{je("Hit Subscribe",{}),dd(yd,e.email);const t=await ad.createCheckoutSession(s),{sessionId:a}=t,r=await(0,bd.c)(vd);await r.redirectToCheckout({sessionId:a})}catch(t){lr({variant:"destructive",title:"Error",description:"Failed to create checkout session. Please try again later."})}},d=async e=>{try{var s;t(!0);const a=await ad.updateSubscription(e);lr({title:"Subscription Updated",description:(null===(s=a.subscription)||void 0===s?void 0:s.is_downgrade)?"Your subscription has been scheduled to downgrade at the end of your billing cycle.":"Your subscription has been upgraded successfully. Changes will be reflected shortly."}),setTimeout((()=>{window.location.reload()}),2e3)}catch(n){var a,r;lr({variant:"destructive",title:"Error",description:(null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Failed to update subscription. Please try again later."})}finally{t(!1)}},m=async()=>{try{const e=await ad.createPortalSession();window.location.href=e.url}catch(e){lr({variant:"destructive",title:"Error",description:"Failed to open subscription management. Please try again later."})}},u=null==e?void 0:e.subscription_schedule_id;if(l)return(0,be.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-700"})});const h=Object.entries(a.pricing),x=h.filter((e=>{let[s,t]=e;return t.nickname.toLowerCase().includes("elite")})).map((e=>{let[s,t]=e;return t})),p=h.filter((e=>{let[s,t]=e;return!t.nickname.toLowerCase().includes("elite")})).map((e=>{let[s,t]=e;return t}));return(0,be.jsxs)("div",{children:[u&&(0,be.jsx)(Nd,{}),(0,be.jsx)("div",{className:"grid grid-cols-1 md:flex md:justify-center gap-6",children:(0,be.jsxs)(be.Fragment,{children:[p.map((e=>{var t,r;return(0,be.jsx)("div",{className:"w-full md:flex-1 md:min-w-0 md:max-w-sm",children:(0,be.jsx)(fd,{plan:e,isCurrentPlan:"active"===(null==a?void 0:a.subscription_status)&&(null==a||null===(t=a.stripe_subscription)||void 0===t||null===(r=t.plan)||void 0===r?void 0:r.id)===e.id,onSubscribe:c,onUpgrade:d,onManageSubscription:m,currentTier:null==n?void 0:n.tier,upgrading:s})},e.id)})),x.length>0&&(0,be.jsx)("div",{className:"w-full md:flex-1 md:min-w-0 md:max-w-sm",children:(0,be.jsx)(jd,{elitePlans:x,currentTier:null==n?void 0:n.tier,onSubscribe:c,onUpgrade:d,onManageSubscription:m,upgrading:s})})]})})]})}function Cd(e){let{usage:s,monthlyMessageLimit:t,dailyMessageLimit:a,integrationUsage:r,integrationLimit:n}=e;const i=((null==s?void 0:s.monthly_usage)||0)/t*100,l=a?((null==s?void 0:s.daily_usage)||0)/a*100:0,o=n?(r||0)/n*100:0,c=e=>e>90?"bg-red-500":e>75?"bg-yellow-500":"bg-slate-600",d=c(i),m=c(l),u=c(o),h=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},x=h(null==s?void 0:s.current_credit_period_start_date),p=h(null==s?void 0:s.current_credit_period_end_date);return(0,be.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,be.jsx)("h2",{className:"text-xl font-semibold mb-2 text-gray-800",children:"Current Usage"}),x&&p&&(0,be.jsxs)("div",{className:"mb-6 text-sm text-gray-500 border-b border-gray-100 pb-4",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsxs)("svg",{className:"h-4 w-4 text-gray-400 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,be.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,be.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,be.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,be.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),(0,be.jsxs)("span",{children:["Current billing period: ",x," \u2013 ",p]})]}),(0,be.jsxs)("div",{className:"mt-1 text-xs text-gray-400",children:["Credits will reset on ",p]})]}),(0,be.jsxs)("div",{className:"space-y-8",children:[(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,be.jsx)("h3",{className:"font-medium text-gray-700",children:"Monthly Messages"}),(0,be.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[(null==s?void 0:s.monthly_usage)||0," / ",t]})]}),(0,be.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,be.jsx)("div",{className:`h-full rounded-full ${d}`,style:{width:`${Math.min(i,100)}%`}})}),(0,be.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,be.jsxs)("span",{children:[Math.round(i),"% used"]}),(0,be.jsxs)("span",{children:[Math.max(0,t-((null==s?void 0:s.monthly_usage)||0))," messages remaining"]})]})]}),a&&(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,be.jsx)("h3",{className:"font-medium text-gray-700",children:"Daily Messages"}),(0,be.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[(null==s?void 0:s.daily_usage)||0," / ",a]})]}),(0,be.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,be.jsx)("div",{className:`h-full rounded-full ${m}`,style:{width:`${Math.min(l,100)}%`}})}),(0,be.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,be.jsxs)("span",{children:[Math.round(l),"% used"]}),(0,be.jsxs)("span",{children:[Math.max(0,a-((null==s?void 0:s.daily_usage)||0))," messages remaining"]})]})]}),n&&(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,be.jsx)("h3",{className:"font-medium text-gray-700",children:"Integration Credits"}),(0,be.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[r||0," / ",n]})]}),(0,be.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,be.jsx)("div",{className:`h-full rounded-full ${u}`,style:{width:`${Math.min(o,100)}%`}})}),(0,be.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,be.jsxs)("span",{children:[Math.round(o),"% used"]}),(0,be.jsxs)("span",{children:[Math.max(0,n-(r||0))," credits remaining"]})]})]})]})]})}var Sd=t(80294),kd=t(85706);function Ad(e){let{usageData:s}=e;const t=s?s.map((e=>({...e,date:_d(e._id)}))):[],a=e=>{let{active:s,payload:t,label:a}=e;return s&&t&&t.length?(0,be.jsxs)("div",{className:"bg-white p-3 border border-gray-200 shadow-lg rounded-md text-xs",children:[(0,be.jsx)("p",{className:"font-medium text-gray-900",children:t[0].payload.date}),(0,be.jsxs)("p",{className:"text-slate-700 mt-1",children:[(0,be.jsx)("span",{className:"font-medium",children:t[0].value})," messages"]})]}):null};return(0,be.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,be.jsx)("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Daily Usage (Messages)"}),(0,be.jsx)("div",{className:"h-[240px]",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Sd.E,{data:t,margin:{top:5,right:5,left:5,bottom:20},children:[(0,be.jsx)(ql.d,{strokeDasharray:"3 3",stroke:"#f0f0f0",vertical:!1}),(0,be.jsx)(Wl.W,{dataKey:"date",angle:-45,textAnchor:"end",height:60,fontSize:10,stroke:"#6b7280",tickMargin:10}),(0,be.jsx)(Yl.h,{fontSize:10,stroke:"#6b7280",axisLine:!1,tickLine:!1,tickCount:5,tickFormatter:e=>0===e?"0":e}),(0,be.jsx)(Gl.m,{content:(0,be.jsx)(a,{}),cursor:{fill:"rgba(71, 85, 105, 0.1)"}}),(0,be.jsx)(kd.y,{dataKey:"total_messages",name:"Messages",fill:"url(#colorGradient)",radius:[4,4,0,0],maxBarSize:50,animationDuration:500}),(0,be.jsx)("defs",{children:(0,be.jsxs)("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,be.jsx)("stop",{offset:"0%",stopColor:"#475569",stopOpacity:.9}),(0,be.jsx)("stop",{offset:"100%",stopColor:"#475569",stopOpacity:.5})]})})]})})}),(!s||0===s.length)&&(0,be.jsx)("div",{className:"text-center text-gray-500 mt-4 text-sm",children:"No usage data available for this period"})]})}function _d(e){try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(s){return e}}function Td(){const[e,s]=(0,Y.useState)(null),[t,a]=(0,Y.useState)(null),[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)(!0);if((0,Y.useEffect)((()=>{(async()=>{try{const[e,t,r]=await Promise.all([Ps.getStats(),Ps.getCurrentUsage(),Ps.getCurrentIntegrationUsage()]);s(e),a(t),n(r)}catch(e){lr({variant:"destructive",title:"Error",description:"Failed to load billing information"})}finally{l(!1)}})()}),[]),i)return(0,be.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-700"})});const o=null==t?void 0:t.monthly_limit,c=null==t?void 0:t.daily_limit,d=null==r?void 0:r.limit;return(0,be.jsx)("div",{className:"space-y-8",children:(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[(0,be.jsx)(Cd,{usage:t,monthlyMessageLimit:o,dailyMessageLimit:c,integrationUsage:null==r?void 0:r.usage,integrationLimit:d}),(0,be.jsx)(Ad,{usageData:null==e?void 0:e.usage_by_date})]})})}function Ed(){const{toast:e}=qn(),{user:s}=Ne(),[t,a]=(0,Y.useState)("billing"),[r,n]=(0,Y.useState)(""),[i,l]=(0,Y.useState)(!1),[o,c]=(0,Y.useState)(null);(0,Y.useEffect)((()=>{(async()=>{try{const e=await Ps.getCurrentUsage();c(e)}catch(e){}})()}),[]),(0,Y.useEffect)((()=>{if(s){"true"===new URLSearchParams(window.location.search).get("success")&&s.email&&(window.rewardful&&window.rewardful("convert",{email:s.email}),je("Billing - Purchase",{}),e=20,t=s.email,od((()=>{window.fbq("track","Purchase",{currency:"USD",value:e},{eventID:`${t}_purchase`})})))}var e,t}),[s]);return(0,be.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 min-h-screen flex flex-col max-w-6xl",children:[(null==o?void 0:o.past_due)&&(0,be.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md text-yellow-800",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(_e.A,{className:"h-5 w-5 mr-2 flex-shrink-0"}),(0,be.jsx)("span",{className:"font-medium",children:"Subscription payment overdue"})]}),(0,be.jsx)("p",{className:"text-sm mt-2",children:"Your subscription payment is past due. You're currently limited to the Free plan usage. Please update your payment method to restore full access."})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900",children:"billing"===t?"Billing":"Usage"}),(0,be.jsx)("div",{className:"absolute -bottom-2.5 left-0 w-12 h-0.5 bg-orange-500 rounded-full"})]}),"billing"===t?(0,be.jsxs)("button",{onClick:()=>a("usage"),className:"flex items-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:[(0,be.jsx)(ti.A,{size:16,className:"mr-1"}),"View Usage"]}):(0,be.jsxs)("button",{onClick:()=>a("billing"),className:"flex items-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:[(0,be.jsx)(_e.A,{size:16,className:"mr-1"}),"See Pricing"]})]}),"billing"===t?(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsx)(wd,{}),(0,be.jsx)("div",{className:"flex justify-end mt-2",children:(0,be.jsxs)("div",{className:"relative group",children:[(0,be.jsx)("button",{type:"button",className:"text-xs text-gray-400 hover:text-gray-600 underline-offset-4 hover:underline",onClick:()=>document.getElementById("coupon-form").classList.toggle("hidden"),children:"Have a coupon code?"}),(0,be.jsx)("div",{id:"coupon-form",className:"hidden absolute right-0 mt-2 bg-white shadow-lg rounded-md p-3 border border-gray-100 z-10 w-64",children:(0,be.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),r.trim()){l(!0);try{const s=await ud.addCouponCode(r.trim());e({title:"Success",description:`${s.num_messages} credits added to your account!`}),n("")}catch(i){var t,a;e({variant:"destructive",title:"Error",description:(null===(t=i.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Failed to apply coupon code. Please try again."})}finally{l(!1)}}},className:"flex gap-2 items-center",children:[(0,be.jsx)(is,{type:"text",placeholder:"Enter code",value:r,onChange:e=>n(e.target.value),className:"flex-1 text-xs h-7"}),(0,be.jsx)(Ze,{type:"submit",disabled:i||!r.trim(),variant:"ghost",size:"sm",className:"text-xs h-7 px-2",children:i?"...":"Apply"})]})})]})}),(0,be.jsx)(nd,{})]}):(0,be.jsx)("div",{className:"space-y-8",children:(0,be.jsx)(Td,{})})]})}var Id=t(85113),Pd=t(58799),Rd=t(73581),Od=t(2847),Dd=t(56473);function Ld(e){let{stats:s}=e;const[t,a]=(0,Y.useState)("30days"),[r,n]=(0,Y.useState)(!1);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,be.jsx)(Ds,{children:(0,be.jsxs)(Ms,{className:"flex items-center p-6",children:[(0,be.jsx)(na.A,{className:"w-8 h-8 text-blue-500 mr-4"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"Total Users"}),(0,be.jsx)("p",{className:"text-2xl font-bold",children:s.total_users})]})]})}),(0,be.jsx)(Ds,{children:(0,be.jsxs)(Ms,{className:"flex items-center p-6",children:[(0,be.jsx)(jc.A,{className:"w-8 h-8 text-green-500 mr-4"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"New Today"}),(0,be.jsx)("p",{className:"text-2xl font-bold",children:s.new_users_today})]})]})}),(0,be.jsx)(Ds,{children:(0,be.jsxs)(Ms,{className:"flex items-center p-6",children:[(0,be.jsx)(Rd.A,{className:"w-8 h-8 text-yellow-500 mr-4"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"Premium Users"}),(0,be.jsx)("p",{className:"text-2xl font-bold",children:s.paying_users})]})]})})]}),(0,be.jsx)(Ds,{className:"mb-8",children:(0,be.jsxs)(Ms,{className:"p-6",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold",children:"User Growth"}),(0,be.jsxs)("div",{className:"flex space-x-2",children:[(0,be.jsx)(Ze,{variant:"7days"===t?"default":"outline",size:"sm",onClick:()=>a("7days"),children:"7 Days"}),(0,be.jsx)(Ze,{variant:"30days"===t?"default":"outline",size:"sm",onClick:()=>a("30days"),children:"30 Days"}),(0,be.jsx)(Ze,{variant:"90days"===t?"default":"outline",size:"sm",onClick:()=>a("90days"),children:"90 Days"}),(0,be.jsx)(Ze,{variant:"year"===t?"default":"outline",size:"sm",onClick:()=>a("year"),children:"1 Year"}),(0,be.jsx)(Ze,{variant:"all"===t?"default":"outline",size:"sm",onClick:()=>a("all"),children:"All Time"}),(0,be.jsx)(Ze,{variant:r?"default":"outline",size:"sm",onClick:()=>n(!r),children:r?"Show Today":"Hide Today"})]})]}),(0,be.jsx)("div",{className:"h-[200px] w-full",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Od.b,{data:(()=>{if(!s.new_users_by_day)return[];it()();let e;switch(t){case"7days":e=it()().subtract(7,"days");break;case"30days":default:e=it()().subtract(30,"days");break;case"90days":e=it()().subtract(90,"days");break;case"year":e=it()().subtract(1,"year");break;case"all":return r?s.new_users_by_day.filter((e=>!it()(e.date).isSame(it()(),"day"))):s.new_users_by_day}let a=s.new_users_by_day.filter((s=>it()(s.date).isAfter(e)));return r&&(a=a.filter((e=>!it()(e.date).isSame(it()(),"day")))),a})(),children:[(0,be.jsx)(Wl.W,{dataKey:"date",tickFormatter:e=>it()(e).format("MMM DD")}),(0,be.jsx)(Yl.h,{}),(0,be.jsx)(Gl.m,{labelFormatter:e=>it()(e).format("MMMM DD, YYYY"),formatter:e=>[`${e} new users`]}),(0,be.jsx)(Dd.N,{type:"monotone",dataKey:"count",stroke:"#2563eb",strokeWidth:2})]})})})]})})]})}function Ud(e){let{selectedUser:s,onClose:t,onUpdateUser:a,userBonusCredits:r,onAddBonusCredits:n,onDeleteBonusCredit:i,loading:l,userUsageStats:o,onDateRangeChange:c,dateRange:d}=e;const[m,u]=(0,Y.useState)({numMessages:0,reason:""}),[h,x]=(0,Y.useState)("details"),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(null),[b,v]=(0,Y.useState)(d);(0,Y.useEffect)((()=>{v(d)}),[d]),(0,Y.useEffect)((()=>{if(o&&(null==d||!d.startDate)&&(null==b||!b.startDate)){const e=new Date(o.current_credit_period_start_date),s=new Date(o.current_credit_period_end_date);v({startDate:e,endDate:s})}}),[o,d,b]);const y=(e,s)=>{j({startDate:e,endDate:s})};return(0,be.jsx)(ll,{open:!!s,onOpenChange:t,className:"bg-white",children:(0,be.jsxs)(hl,{className:"sm:max-w-xl overflow-y-auto",children:[(0,be.jsx)(xl,{children:(0,be.jsx)(gl,{children:"User Details"})}),s&&(0,be.jsxs)("div",{className:"py-6",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold",children:s.full_name||s.email}),(0,be.jsx)("p",{className:"text-gray-600",children:s.email})]}),(0,be.jsxs)(Ta,{defaultValue:"details",className:"w-full",onValueChange:x,value:h,children:[(0,be.jsxs)(Ea,{className:"grid grid-cols-3 mb-6",children:[(0,be.jsxs)(Ia,{value:"details",className:"flex items-center gap-2",children:[(0,be.jsx)(Ho.A,{className:"h-4 w-4"}),"Details"]}),(0,be.jsxs)(Ia,{value:"usage",className:"flex items-center gap-2",children:[(0,be.jsx)(la.A,{className:"h-4 w-4"}),"Usage"]}),(0,be.jsxs)(Ia,{value:"credits",className:"flex items-center gap-2",children:[(0,be.jsx)(Vc.A,{className:"h-4 w-4"}),"Credits"]})]}),(0,be.jsxs)(Pa,{value:"details",className:"space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Full Name"}),(0,be.jsx)(is,{type:"text",value:s.full_name||"",onChange:e=>a(s.id,{full_name:e.target.value}),disabled:l})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Username"}),(0,be.jsx)("p",{className:"text-gray-600",children:s.username||"-"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Phone Number"}),(0,be.jsx)(is,{type:"text",value:s.phone_number||"",onChange:e=>a(s.id,{phone_number:e.target.value}),disabled:l})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Platform Role"}),(0,be.jsxs)(bs,{value:s.platform_role,onValueChange:e=>a(s.id,{platform_role:e}),disabled:l,children:[(0,be.jsx)(Ns,{children:(0,be.jsx)(ys,{})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"user",children:"User"}),(0,be.jsx)(As,{value:"platform_admin",children:"Platform Admin"})]})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Subscription Tier"}),(0,be.jsxs)(bs,{value:s.subscription_tier,onValueChange:e=>a(s.id,{subscription_tier:e}),disabled:l,children:[(0,be.jsx)(Ns,{children:(0,be.jsx)(ys,{})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"free",children:"Free"}),(0,be.jsx)(As,{value:"starter",children:"Starter"}),(0,be.jsx)(As,{value:"builder",children:"Builder"}),(0,be.jsx)(As,{value:"pro",children:"Pro"}),(0,be.jsx)(As,{value:"elite",children:"Elite"}),(0,be.jsx)(As,{value:"enterprise",children:"Enterprise"})]})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(Nn,{id:"beta-tester",checked:s.is_beta_tester||!1,onCheckedChange:e=>a(s.id,{is_beta_tester:e}),disabled:l}),(0,be.jsx)("label",{htmlFor:"beta-tester",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Beta Tester"})]}),(0,be.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Stripe Customer ID"}),(0,be.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:s.stripe_customer_id||"-"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Stripe Subscription ID"}),(0,be.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:s.stripe_subscription_id||"-"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Stripe Subscription Status"}),(0,be.jsx)("p",{className:"text-sm text-gray-600",children:s.stripe_subscription_status||"-"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"API Key"}),(0,be.jsx)("p",{className:"text-sm text-gray-600 font-mono break-all",children:s.api_key||"-"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-2 font-medium",children:"Account Status"}),(0,be.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+(s.disabled?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:s.disabled?"Disabled":"Active"})]})]})]}),(0,be.jsx)(Pa,{value:"usage",children:o?(0,be.jsxs)("div",{className:"space-y-8",children:[(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Current Usage"}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,be.jsxs)("span",{className:"text-sm font-medium",children:["Monthly Usage: ",o.monthly_usage," / ",o.monthly_limit]}),(0,be.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(o.monthly_usage/o.monthly_limit*100),"%"]})]}),(0,be.jsx)(Gn,{value:o.monthly_usage/o.monthly_limit*100,className:"h-2",indicatorClassName:o.is_over_limit?"bg-red-500":void 0})]}),o.daily_limit&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,be.jsxs)("span",{className:"text-sm font-medium",children:["Daily Usage: ",o.daily_usage," / ",o.daily_limit]}),(0,be.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(o.daily_usage/o.daily_limit*100),"%"]})]}),(0,be.jsx)(Gn,{value:o.daily_usage/o.daily_limit*100,className:"h-2",indicatorClassName:o.is_over_limit?"bg-red-500":void 0})]})]})]}),o.usage_by_date&&(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold",children:"Usage History"}),(0,be.jsx)("div",{className:"flex items-center gap-2",children:(0,be.jsxs)(Ri,{open:p,onOpenChange:g,children:[(0,be.jsx)(Oi,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",className:"flex items-center gap-2",children:[(0,be.jsx)(Hs.A,{className:"h-4 w-4"}),b.startDate&&b.endDate?`${it()(b.startDate).format("MMM D, YYYY")} - ${it()(b.endDate).format("MMM D, YYYY")}`:"Select Date Range"]})}),(0,be.jsx)(Di,{className:"w-auto p-0",align:"end",children:(0,be.jsxs)("div",{className:"p-3 border-b",children:[(0,be.jsx)("h4",{className:"font-medium mb-2",children:"Select Date Range"}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-sm text-gray-600",children:"Start Date"}),(0,be.jsx)(Ei,{mode:"single",selected:(null==f?void 0:f.startDate)||b.startDate,onSelect:e=>y(e,(null==f?void 0:f.endDate)||b.endDate),className:"rounded-md border"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-sm text-gray-600",children:"End Date"}),(0,be.jsx)(Ei,{mode:"single",selected:(null==f?void 0:f.endDate)||b.endDate,onSelect:e=>y((null==f?void 0:f.startDate)||b.startDate,e),className:"rounded-md border"})]})]}),(0,be.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>{if(o){const e=new Date(o.current_credit_period_start_date),s=new Date(o.current_credit_period_end_date);c(e,s),v({startDate:e,endDate:s})}j(null)},children:"Reset"}),(0,be.jsx)(Ze,{size:"sm",onClick:()=>{f&&(c(f.startDate,f.endDate),v(f)),g(!1)},children:"Apply"})]})]})})]})})]}),(0,be.jsx)("div",{className:"h-[300px]",children:(0,be.jsx)(Ad,{usageData:o.usage_by_date})})]}),(0,be.jsx)(Ds,{children:(0,be.jsxs)(Ms,{className:"pt-6 space-y-6",children:[(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,be.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,be.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Subscription Tier"}),(0,be.jsx)("p",{className:"text-lg font-semibold capitalize",children:o.tier})]}),(0,be.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,be.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bonus Credits"}),(0,be.jsx)("p",{className:"text-lg font-semibold",children:o.extra_credits})]})]}),(0,be.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Stripe Billing Period"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"font-medium",children:"Start:"}),(0,be.jsx)("span",{children:it()(o.current_credit_period_start_date).format("MMM DD, YYYY")})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"font-medium",children:"End:"}),(0,be.jsx)("span",{children:it()(o.current_credit_period_end_date).format("MMM DD, YYYY")})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"font-medium",children:"Next Start:"}),(0,be.jsx)("span",{children:it()(o.next_period_start_date).format("MMM DD, YYYY")})]})]})]})]})}),o.is_over_limit&&(0,be.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:[(0,be.jsx)("p",{className:"font-medium",children:"User is over their usage limit"}),(0,be.jsx)("p",{className:"text-sm",children:"Consider adding bonus credits or upgrading their subscription tier."})]}),(0,be.jsxs)(Ze,{onClick:()=>x("credits"),className:"w-full",children:[(0,be.jsx)(Vc.A,{className:"h-4 w-4 mr-2"}),"Add Bonus Credits"]})]}):(0,be.jsx)("div",{className:"text-center py-6",children:(0,be.jsx)("p",{className:"text-gray-500",children:"Loading usage data..."})})}),(0,be.jsx)(Pa,{value:"credits",children:(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold",children:"Bonus Credits"}),r.length>0?(0,be.jsx)("div",{className:"space-y-3 mb-4",children:r.map(((e,s)=>(0,be.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsxs)("span",{className:"font-medium",children:[e.num_messages," messages"]}),(0,be.jsx)("span",{className:"text-sm text-gray-600",children:it()(e.created_date).format("MMM DD, YYYY")})]}),(0,be.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.reason}),(0,be.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,be.jsxs)("p",{className:"text-xs text-gray-500",children:["Expires: ",it()(e.expires_date).format("MMM DD, YYYY")]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>i(e.id),disabled:l,children:(0,be.jsx)(Sl.A,{className:"h-4 w-4"})})]})]},s)))}):(0,be.jsx)("p",{className:"text-gray-500 mb-4",children:"No bonus credits found for this user."}),(0,be.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,be.jsx)("h4",{className:"font-medium mb-3",children:"Add Bonus Credits"}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-sm text-gray-600",children:"Number of Messages"}),(0,be.jsx)(is,{type:"number",min:"1",value:m.numMessages,onChange:e=>u({...m,numMessages:e.target.value}),disabled:l})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-sm text-gray-600",children:"Reason"}),(0,be.jsx)(is,{type:"text",value:m.reason,onChange:e=>u({...m,reason:e.target.value}),placeholder:"e.g., Promotional offer, Customer support",disabled:l})]}),(0,be.jsxs)(Ze,{onClick:()=>{s&&m.numMessages&&m.reason&&(n(s.id,parseInt(m.numMessages),m.reason),u({numMessages:0,reason:""}))},disabled:l||!m.numMessages||!m.reason,className:"w-full",children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Add Credits"]})]})]})]})})]})]})]})})}const $d=new class extends me{getBaseURL(){return"/admin/analytics"}getAdminStats(){return this.axios.get("/overall")}getTopUsers(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return this.axios.get("/top-users",{params:{start_date:e,end_date:s,limit:t}})}getUserAnalytics(){return this.axios.get("/user-analytics")}};function Md(){const[e,s]=(0,Y.useState)(!1),[t,a]=(0,Y.useState)([]),[r,n]=(0,Y.useState)({startDate:it()().subtract(7,"days").format("YYYY-MM-DD"),endDate:it()().format("YYYY-MM-DD")}),[i,l]=(0,Y.useState)(!1),[o,c]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{d()}),[r.startDate,r.endDate]);const d=async()=>{s(!0);try{const e=await $d.getTopUsers(r.startDate,r.endDate);a(e)}catch(e){}finally{s(!1)}},m=e=>{n("ever"===e?{startDate:"2020-01-01",endDate:it()().format("YYYY-MM-DD")}:{startDate:it()().subtract(e,"days").format("YYYY-MM-DD"),endDate:it()().format("YYYY-MM-DD")})};return(0,be.jsxs)(Ds,{className:"mb-8",children:[(0,be.jsx)(Ls,{children:(0,be.jsxs)(Us,{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{children:"Top Users by Message Count"}),(0,be.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>m(1),className:r.startDate===it()().subtract(1,"days").format("YYYY-MM-DD")?"bg-blue-50":"",children:"1 Day"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>m(7),className:r.startDate===it()().subtract(7,"days").format("YYYY-MM-DD")?"bg-blue-50":"",children:"7 Days"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>m(15),className:r.startDate===it()().subtract(15,"days").format("YYYY-MM-DD")?"bg-blue-50":"",children:"15 Days"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>m(30),className:r.startDate===it()().subtract(30,"days").format("YYYY-MM-DD")?"bg-blue-50":"",children:"30 Days"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:()=>m("ever"),className:"2020-01-01"===r.startDate?"bg-blue-50":"",children:"All Time"}),(0,be.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,be.jsxs)(Ri,{open:i,onOpenChange:l,children:[(0,be.jsx)(Oi,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,be.jsx)(Hs.A,{className:"h-3.5 w-3.5"}),(0,be.jsx)("span",{children:r.startDate})]})}),(0,be.jsx)(Di,{className:"w-auto p-0",children:(0,be.jsx)(Ei,{mode:"single",selected:new Date(r.startDate),onSelect:e=>{const s=it()(e).format("YYYY-MM-DD");n((e=>({...e,startDate:s}))),l(!1)},initialFocus:!0,disabled:e=>e>new Date(r.endDate)||e>new Date})})]}),(0,be.jsx)("span",{children:"to"}),(0,be.jsxs)(Ri,{open:o,onOpenChange:c,children:[(0,be.jsx)(Oi,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,be.jsx)(Hs.A,{className:"h-3.5 w-3.5"}),(0,be.jsx)("span",{children:r.endDate})]})}),(0,be.jsx)(Di,{className:"w-auto p-0",children:(0,be.jsx)(Ei,{mode:"single",selected:new Date(r.endDate),onSelect:e=>{const s=it()(e).format("YYYY-MM-DD");n((e=>({...e,endDate:s}))),c(!1)},initialFocus:!0,disabled:e=>e<new Date(r.startDate)||e>new Date})})]})]})]})]})}),(0,be.jsx)(Ms,{children:e?(0,be.jsx)("div",{className:"text-center py-8",children:"Loading top users data..."}):0===t.length?(0,be.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No data available for the selected date range"}):(0,be.jsx)("div",{className:"overflow-x-auto",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Jt,{children:"Email"}),(0,be.jsx)(Jt,{children:"Full Name"}),(0,be.jsx)(Jt,{children:"Subscription"}),(0,be.jsx)(Jt,{children:"Role"}),(0,be.jsx)(Jt,{className:"text-right",children:(0,be.jsxs)("div",{className:"flex items-center justify-end",children:[(0,be.jsx)(Oa.A,{className:"h-4 w-4 mr-2"}),"Messages"]})})]})}),(0,be.jsx)(Gt,{children:t.map(((e,s)=>(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Kt,{className:"font-medium",children:e.email}),(0,be.jsx)(Kt,{children:e.full_name||"-"}),(0,be.jsx)(Kt,{children:(0,be.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("enterprise"===e.subscription_tier?"bg-yellow-100 text-yellow-800":"pro"===e.subscription_tier?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.subscription_tier||"Free"})}),(0,be.jsx)(Kt,{children:(0,be.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("platform_admin"===e.platform_role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.platform_role})}),(0,be.jsx)(Kt,{className:"text-right font-semibold",children:e.message_count.toLocaleString()})]},s)))})]})})})]})}var Fd=t(9449);const zd=()=>{const[e,s]=(0,Y.useState)([]),[t,a]=(0,Y.useState)(!0),{register:r,handleSubmit:n,reset:i,formState:{errors:l}}=(0,Fd.useForm)({defaultValues:{code:"",numMessages:"",maxNumberOfPeople:"",domain:""}}),o=async()=>{try{a(!0);const e=await ud.getCouponCodes();s(e||[])}catch(e){lr({title:"Error",description:"Failed to fetch coupon codes",variant:"destructive"})}finally{a(!1)}};(0,Y.useEffect)((()=>{o()}),[]);return(0,be.jsxs)("div",{className:"container mx-auto py-8 space-y-6",children:[(0,be.jsx)("h1",{className:"text-3xl font-bold",children:"Coupon Code Management"}),(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Create Coupon Code"}),(0,be.jsx)($s,{children:"Create a new coupon code for users to redeem"})]}),(0,be.jsx)(Ms,{children:(0,be.jsxs)("form",{onSubmit:n((async e=>{try{a(!0),await ud.createCouponCode(e.code,parseInt(e.numMessages),parseInt(e.maxNumberOfPeople),e.domain||null),lr({title:"Success",description:"Coupon code created successfully"}),i(),o()}catch(s){lr({title:"Error",description:"Failed to create coupon code",variant:"destructive"})}finally{a(!1)}})),className:"space-y-4",children:[(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"code",children:"Code"}),(0,be.jsx)(is,{id:"code",placeholder:"SUMMER2023",...r("code",{required:"Code is required"})}),l.code&&(0,be.jsx)("span",{className:"text-sm text-red-500",children:l.code.message})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"numMessages",children:"Number of Messages"}),(0,be.jsx)(is,{id:"numMessages",type:"number",placeholder:"100",...r("numMessages",{required:"Number of messages is required",min:{value:1,message:"Must be at least 1"}})}),l.numMessages&&(0,be.jsx)("span",{className:"text-sm text-red-500",children:l.numMessages.message})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"maxNumberOfPeople",children:"Max Number of People"}),(0,be.jsx)(is,{id:"maxNumberOfPeople",type:"number",placeholder:"50",...r("maxNumberOfPeople",{required:"Max number of people is required",min:{value:1,message:"Must be at least 1"}})}),l.maxNumberOfPeople&&(0,be.jsx)("span",{className:"text-sm text-red-500",children:l.maxNumberOfPeople.message})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"domain",children:"Domain (Optional)"}),(0,be.jsx)(is,{id:"domain",placeholder:"example.com",...r("domain")}),(0,be.jsx)("p",{className:"text-xs text-gray-500",children:"Limit code to specific email domain"})]})]}),(0,be.jsx)(Ze,{type:"submit",disabled:t,children:"Create Coupon Code"})]})})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Existing Coupon Codes"}),(0,be.jsx)($s,{children:"View and manage all available coupon codes"})]}),(0,be.jsx)(Ms,{children:t?(0,be.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===e.length?(0,be.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No coupon codes found"}):(0,be.jsx)("div",{className:"rounded-md border",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Jt,{children:"Code"}),(0,be.jsx)(Jt,{children:"Messages"}),(0,be.jsx)(Jt,{children:"Max Users"}),(0,be.jsx)(Jt,{children:"Domain"}),(0,be.jsx)(Jt,{children:"Usage"})]})}),(0,be.jsx)(Gt,{children:e.map(((e,s)=>(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Kt,{className:"font-medium",children:e.code}),(0,be.jsx)(Kt,{children:e.num_messages}),(0,be.jsx)(Kt,{children:e.max_number_of_people}),(0,be.jsx)(Kt,{children:e.domain||"Any"}),(0,be.jsxs)(Kt,{children:[e.used_credits||0," / ",e.max_number_of_people]})]},s)))})]})})})]})]})};function Bd(){const{user:e}=Ne(),[s,t]=(0,V.useSearchParams)(),[a,r]=(0,Y.useState)([]),[n,i]=(0,Y.useState)(null),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(""),[m,u]=(0,Y.useState)({key:"created_date",direction:"desc"}),[h,x]=(0,Y.useState)({totalUsers:0,newUsersToday:0,premiumUsers:0}),[p,g]=(0,Y.useState)([]),[f,j]=(0,Y.useState)(null),[b,v]=(0,Y.useState)(null),[y,N]=(0,Y.useState)({startDate:null,endDate:null});(0,Y.useEffect)((()=>{S()}),[]),(0,Y.useEffect)((()=>(f&&clearTimeout(f),j(setTimeout((()=>{c.trim()?C(c):w()}),500)),()=>{f&&clearTimeout(f)})),[c]),(0,Y.useEffect)((()=>{n?(k(n.id),A(n.id),y.startDate||N({startDate:null,endDate:null})):(v(null),N({startDate:null,endDate:null}))}),[n]),(0,Y.useEffect)((()=>{const e=s.get("userId");if(e&&a.length>0){const s=a.find((s=>s.id===e));s?i(s):_(e)}}),[a,s]);const w=async()=>{o(!0);try{const e=await ue.listUsers({limit:100});r(e)}catch(e){}finally{o(!1)}},C=async e=>{o(!0);try{const s=await ue.listUsers({limit:100,q:JSON.stringify({$or:[{email:{$regex:e,$options:"i"}},{full_name:{$regex:e,$options:"i"}}]})});r(s)}catch(s){}finally{o(!1)}},S=async()=>{const e=await $d.getUserAnalytics();x(e)},k=async e=>{try{const s=await ud.getBonusCredits(e);g(s)}catch(s){g([])}},A=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const a=await Ps.getUserStats(e,s,t);v(a)}catch(a){v(null)}},_=async e=>{o(!0);try{const s=await ue.get(e);i(s)}catch(a){const e=new URLSearchParams(s);e.delete("userId"),t(e)}finally{o(!1)}},T=e=>{u({key:e,direction:m.key===e&&"asc"===m.direction?"desc":"asc"})},E=a.sort(((e,s)=>"created_date"===m.key?"asc"===m.direction?new Date(e[m.key])-new Date(s[m.key]):new Date(s[m.key])-new Date(e[m.key]):"asc"===m.direction?e[m.key]>s[m.key]?1:-1:s[m.key]>e[m.key]?1:-1));return e.platform_role.includes("admin")?(0,be.jsxs)("div",{className:"container mx-auto py-10 px-4",children:[(0,be.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Admin Portal"}),(0,be.jsxs)(Ta,{defaultValue:"users",className:"mb-8",children:[(0,be.jsxs)(Ea,{className:"grid grid-cols-3 w-[400px] mb-4",children:[(0,be.jsx)(Ia,{value:"users",children:"User Management"}),(0,be.jsx)(Ia,{value:"statistics",children:"Statistics"}),(0,be.jsx)(Ia,{value:"coupons",children:"Coupon Codes"})]}),(0,be.jsxs)(Pa,{value:"users",children:[(0,be.jsxs)("div",{className:"mb-4",children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"User Management"}),(0,be.jsx)(Ld,{stats:h}),(0,be.jsxs)("div",{className:"flex justify-between items-center mb-6 mt-6",children:[(0,be.jsxs)("div",{className:"relative w-72",children:[(0,be.jsx)(Lt.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),(0,be.jsx)(is,{placeholder:"Search users...",className:"pl-8",value:c,onChange:e=>d(e.target.value)})]}),(0,be.jsxs)(Ze,{onClick:()=>{const e=E.map((e=>[e.email,e.full_name||"",e.platform_role,it().utc(e.created_date).format("YYYY-MM-DD HH:mm:ss"),e.subscription_tier||"Free",e.stripe_customer_id||"",e.api_key||""])),s=[["Email","Full Name","Platform Role","Created Date","Subscription Tier","Stripe Customer ID","API Key"].join(","),...e.map((e=>e.map((e=>`"${e}"`)).join(",")))].join("\n"),t=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(t);a.setAttribute("href",r),a.setAttribute("download",`users_${it()().format("YYYY-MM-DD")}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"flex items-center gap-2",children:[(0,be.jsx)(xi.A,{className:"h-4 w-4"}),"Download CSV"]})]})]}),(0,be.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,be.jsxs)(Wt,{children:[(0,be.jsx)(Yt,{children:(0,be.jsxs)(Vt,{children:[(0,be.jsx)(Jt,{className:"cursor-pointer",onClick:()=>T("email"),children:(0,be.jsxs)("div",{className:"flex items-center",children:["Email",(0,be.jsx)(Pd.A,{className:"ml-2 h-4 w-4"})]})}),(0,be.jsx)(Jt,{className:"cursor-pointer",onClick:()=>T("full_name"),children:(0,be.jsxs)("div",{className:"flex items-center",children:["Full Name",(0,be.jsx)(Pd.A,{className:"ml-2 h-4 w-4"})]})}),(0,be.jsx)(Jt,{className:"cursor-pointer",onClick:()=>T("platform_role"),children:(0,be.jsxs)("div",{className:"flex items-center",children:["Platform Role",(0,be.jsx)(Pd.A,{className:"ml-2 h-4 w-4"})]})}),(0,be.jsx)(Jt,{className:"cursor-pointer",onClick:()=>T("created_date"),children:(0,be.jsxs)("div",{className:"flex items-center",children:["Created Date",(0,be.jsx)(Pd.A,{className:"ml-2 h-4 w-4"})]})}),(0,be.jsx)(Jt,{className:"cursor-pointer",onClick:()=>T("subscription_tier"),children:(0,be.jsxs)("div",{className:"flex items-center",children:["Subscription Plan",(0,be.jsx)(Pd.A,{className:"ml-2 h-4 w-4"})]})}),(0,be.jsx)(Jt,{children:"Actions"})]})}),(0,be.jsx)(Gt,{children:l?(0,be.jsx)(Vt,{children:(0,be.jsx)(Kt,{colSpan:6,className:"text-center py-8",children:"Loading users..."})}):0===E.length?(0,be.jsx)(Vt,{children:(0,be.jsx)(Kt,{colSpan:6,className:"text-center py-8",children:"No users found"})}):E.map((e=>(0,be.jsxs)(Vt,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{i(e);const a=new URLSearchParams(s);a.set("userId",e.id),t(a)},children:[(0,be.jsx)(Kt,{className:"font-medium",children:e.email}),(0,be.jsx)(Kt,{children:e.full_name||"-"}),(0,be.jsx)(Kt,{children:(0,be.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("platform_admin"===e.platform_role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.platform_role})}),(0,be.jsx)(Kt,{children:it().utc(e.created_date).fromNow()}),(0,be.jsx)(Kt,{children:(0,be.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("enterprise"===e.subscription_tier?"bg-yellow-100 text-yellow-800":"pro"===e.subscription_tier?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.subscription_tier||"Free"})}),(0,be.jsx)(Kt,{children:(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),i(e);const r=new URLSearchParams(s);r.set("userId",e.id),t(r)},children:"Edit"})})]},e.id)))})]})})]}),(0,be.jsx)(Pa,{value:"statistics",children:(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"User Statistics"}),(0,be.jsx)(Md,{})]})}),(0,be.jsx)(Pa,{value:"coupons",children:(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Coupon Code Management"}),(0,be.jsx)(zd,{})]})})]}),(0,be.jsx)(Ud,{selectedUser:n,onClose:()=>{i(null);const e=new URLSearchParams(s);e.delete("userId"),t(e)},onUpdateUser:async(e,s)=>{o(!0);try{const t=await ue.updateUser(e,s);r(a.map((s=>s.id===e?t:s))),i(t)}catch(t){}finally{o(!1)}},userBonusCredits:p,onAddBonusCredits:async(e,s,t)=>{o(!0);try{await ud.addBonusCredits(e,s,t),await k(e)}catch(a){}finally{o(!1)}},onDeleteBonusCredit:async e=>{if(n&&e){o(!0);try{await ad.deleteBonusCredits(n.id,e),await k(n.id)}catch(s){}finally{o(!1)}}},loading:l,userUsageStats:b,onDateRangeChange:(e,s)=>{N({startDate:e,endDate:s}),n&&A(n.id,e,s)},dateRange:y})]}):(0,be.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(Id.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,be.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,be.jsx)("p",{className:"text-gray-600",children:"You are not authorized to access this page"})]})})}const qd=function(){var e,s;const[t,a]=(0,Y.useState)(null),[r,n]=(0,Y.useState)([]),[i,l]=(0,Y.useState)(!0);if((0,Y.useEffect)((()=>{(async()=>{try{const[e,s]=await Promise.all([$d.getAdminStats(),pt.getTrendingApps()]);a(e),n(s.trending_apps)}catch(e){}finally{l(!1)}})()}),[]),i)return(0,be.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,be.jsx)(Ae.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})});const o=(null==t||null===(e=t.usage_by_date)||void 0===e?void 0:e.map((e=>({date:e._id,messages:e.total_messages}))))||[],c=(null==t||null===(s=t.tokens_by_user_7d)||void 0===s?void 0:s.map((e=>({user:e._id,tokens:e.total_tokens}))))||[],d=r.map((e=>({name:e.name,visits:e.total_visits,users:e.unique_users})));return(0,be.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,be.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Platform Analytics"}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{children:"Messages Per Day"})}),(0,be.jsx)(Ms,{children:(0,be.jsx)("div",{className:"h-[400px]",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Bl.Q,{data:o,children:[(0,be.jsx)(ql.d,{strokeDasharray:"3 3"}),(0,be.jsx)(Wl.W,{dataKey:"date"}),(0,be.jsx)(Yl.h,{}),(0,be.jsx)(Gl.m,{}),(0,be.jsx)(Hl.G,{type:"monotone",dataKey:"messages",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3})]})})})})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{children:"Top Users by Token Usage (Last 7 Days)"})}),(0,be.jsx)(Ms,{children:(0,be.jsx)("div",{className:"h-[400px]",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Sd.E,{data:c,children:[(0,be.jsx)(ql.d,{strokeDasharray:"3 3"}),(0,be.jsx)(Wl.W,{dataKey:"user",angle:-45,textAnchor:"end",height:100}),(0,be.jsx)(Yl.h,{}),(0,be.jsx)(Gl.m,{}),(0,be.jsx)(kd.y,{dataKey:"tokens",fill:"#82ca9d"})]})})})})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsx)(Us,{children:"Trending Apps (Last 7 Days)"})}),(0,be.jsx)(Ms,{children:(0,be.jsx)("div",{className:"h-[400px]",children:(0,be.jsx)(zl.u,{width:"100%",height:"100%",children:(0,be.jsxs)(Sd.E,{data:d,children:[(0,be.jsx)(ql.d,{strokeDasharray:"3 3"}),(0,be.jsx)(Wl.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),(0,be.jsx)(Yl.h,{}),(0,be.jsx)(Gl.m,{}),(0,be.jsx)(kd.y,{dataKey:"visits",fill:"#8884d8",name:"Total Visits"}),(0,be.jsx)(kd.y,{dataKey:"users",fill:"#82ca9d",name:"Unique Users"})]})})})})]}),(0,be.jsx)(Kl,{appId:"all"})]})};var Wd=t(3255);function Yd(e){let{}=e;const s=(0,J.zy)(),t=new URLSearchParams(s.search);(0,Y.useEffect)((()=>{const e=t.get("access_token");if(e){localStorage.setItem("token",e);const s=t.get("from_url")||"/";window.location.href=s}}),[s]);const a=(0,be.jsxs)("button",{onClick:()=>{const e=t.get("from_url")||"/";let s=`${se()}/auth/login?from_url=${e}`;window.location.href=s},className:"w-full flex items-center justify-center gap-3 bg-white text-gray-800 px-6 py-3 rounded-full border border-gray-300 hover:bg-gray-50 hover:shadow-md transition-all duration-200 font-medium text-base",children:[(0,be.jsx)("img",{height:"20",width:"20",src:"https://cdn.simpleicons.org/google",alt:"Google logo"}),(0,be.jsx)("span",{children:"Continue with Google"})]});return(0,be.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,be.jsxs)("div",{className:"max-w-4xl w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col md:flex-row",children:[(0,be.jsxs)("div",{className:"w-full md:w-1/2 p-8 md:p-12",children:[(0,be.jsx)("img",{src:Ce,alt:"base44 logo",className:"w-24 h-24 mx-auto mb-8"}),(0,be.jsx)("h1",{className:"text-3xl font-semibold text-center text-gray-800 mb-4",children:"Welcome to base44"}),(0,be.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"Sign in with your Google account to get started."}),a]}),(0,be.jsxs)("div",{className:"w-full md:w-1/2 bg-gray-100 p-8 md:p-12 flex flex-col justify-center",children:[(0,be.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Just Build Stuff."}),(0,be.jsxs)("ul",{className:"text-gray-600 space-y-4",children:[(0,be.jsxs)("li",{className:"flex items-center",children:[(0,be.jsx)(Wd.A,{className:"mr-2 text-gray-500",size:18})," AI generated apps"]}),(0,be.jsxs)("li",{className:"flex items-center",children:[(0,be.jsx)(Wd.A,{className:"mr-2 text-gray-500",size:18})," Easy to customize"]}),(0,be.jsxs)("li",{className:"flex items-center",children:[(0,be.jsx)(Wd.A,{className:"mr-2 text-gray-500",size:18})," Seamless deployment"]})]})]})]})})}function Gd(e){let{children:s}=e;return(0,be.jsx)(ga.o,{className:"base44-markdown prose",remarkPlugins:[pa.A],children:s})}function Hd(){return(0,be.jsx)("div",{className:"p-9",children:(0,be.jsx)(Gd,{children:'\n**Base44 Privacy Policy**\n\nLast Updated: March 23, 2025\n\n**Introduction & Updates**\n\nThis Privacy Policy details how Base44, Inc. and its affiliates (\u201c**Base44**\u201d, \u201c**us**\u201c, \u201c**our**\u201d or \u201d**we**\u201d) process personal information (as defined below) collected, among other things, through our website at <https://base44.com/> or our AI-powered software development platform (the \u201c**Website**\u201d and \u201c**Platform**\u201d respectively).\n\nOur details are as follows:\n\n**Base44, Inc.**\n\n[compliance@base44.com](mailto:compliance@base44.com)\n\nWe may update our privacy policy from time to time by posting the new privacy policy on this page and updating the "Last updated" date. We encourage you to visit this page regularly to check for any changes.\n\n**What information we collect**\n\nWe may collect personal information about you, being a customer or user of our Platform or Website (\u201c**you**\u201d), which means any information relating to an identified or identifiable natural person or "personal data", "personal information" or \u201cpersonally identifiable information\u201d as otherwise defined under applicable privacy laws (\u201c**Personal Information**\u201c):\n\n**For Website Users**:\n\n- We collect Personal Information that you provide to us voluntarily such as your email address, for instance when you communicate with us via the \'contact us\' option on the Website, or register for updates or mailing list. In those cases, we will use such Personal Information to contact you. Such information may also include Personal Information that is shared with Base44 by third parties, based on your consent to be contacted for marketing purposes.\n- We collect specific types of connection details and information that may identify you, such as your IP address, log and usage data and exact device type and location.\n\n**For Prospects:**\n\n- We collect Personal Information we obtain from publicly available sources (e.g., professional networking sites), third-party data providers, or business partners about individuals who have not directly used or engaged our Platform, products and services but may have been identified as potential customers or relevant contacts.\n- Such information includes basic contact details such as name, business email address, phone number, job title and other professionally relevant data.\n\n**For Platform Users**\n\n- We collect Personal Information you provide us with when using the Platform, our services and products, including information you provide us to register and log into your account such as name, username, email and payment information, contact details you shared with us when you contact our support, any Personal Information, if any, that you choose to share with the Platform as input data, such as images and video, and log and usage data.\n\n**Legal basis of Base44\u2019s Processing:**\n\nDepending on the type of use as detailed below, Base44 processes Personal Information based on the following legal basis:\n\n- Processing is necessary for the performance of a contract to which the data subject (as such term is defined under applicable law) is a party;\n- Processing is necessary in order to take steps at the request of the data subject prior to entering into a contract,\n- Processing is necessary for our legitimate interests and those of third parties for those purposes identified below;\n- Processing is necessary to comply with Base44\u2019s legal obligations;\n- Consent (with regards to marketing communications).\n\n**How Base44 uses the Information**\n\nWe use the information in the manners described in this privacy policy. In addition to those purposes listed herein, the information we collect, which may include your Personal Information, may be used by us for the following purposes:\n\n- To respond to inquiries and requests from our customers and users, or to provide you with further information about our Platform, products and services, as well as provide you with support;\n- To generate anonymized and aggregated metadata;\n- To provide our customers and users with Platform access and use, including support in connection therewith;\n- To investigate and resolve disputes in connection with use of our Platform and Website;\n- To detect and prevent fraudulent and illegal activity or any other type of activity that may jeopardize or negatively affect the Platform, including detecting, preventing and resolving security issues;\n-  To investigate violations and enforce our policies (including this policy and our Responsible Use Policy), and as required by law, regulation or other governmental authority, or to comply with a subpoena or similar legal process or respond to a government request or otherwise collaborate with law enforcement agencies;\n- To detect and prevent harm to the rights, property or safety of Base44, our affiliates, our users, yourself or any third-party;\n- To establish or exercise our rights to respond to legal claims, and to enforce and establish our intellectual property or other legal rights;\n- To improve the performance of the Website and Platform;\n- To identify, contact, and analyze prospective customers or leads for marketing, business outreach, or internal analytics. Where required by law, we will seek consent or offer individuals an opportunity to opt out of or object to such processing;\n- To develop new products and services by conducting analytics or research.\n\n**With whom we share the information and for what purpose**\n\nWe do not rent or sell any Personal Information. We may share Personal Information with the following recipients:  \n\n- Our third-party vendors engaged in providing services in connection with the Platform, Website or sending marketing communications (the latter, with your consent);\n- Our subsidiaries and affiliated companies;\n- Auditors or advisers to Base44\u2019s business; and\n- Any potential purchasers of, lenders to or investors in Base44.\n\n**How we protect your information**\n\nWe implement commercially reasonable technical, administrative, and organizational measures designed to protect your Personal Information from loss, misuse, and unauthorized access, disclosure, alteration, or destruction, including encryption and secure user management systems. However, we should note that no method of transmission over the Internet or electronic storage is 100% secure or error-free. Therefore, you should take special care in deciding what information you provide to the Platform.\n\n**Third Party Tracking Technologies**\n\nWe use cookies and other technologies in our services, including when you visit our Website or access our Platform. A "cookie" is a small piece of information that a website assigns to your device while you are viewing a website. Cookies are very helpful and can be used for various different purposes. These purposes include allowing you to navigate between pages efficiently, enable automatic activation of certain features, remembering your preferences and making the interaction between you and our Platform quicker and easier. Cookies are also used to help ensure that the advertisements you see are relevant to you and your interests and to compile statistical data on your use of the Platform.\n\nOur Website uses cookies in order to provide you with services, enable your use of the Platform, identify you for repeat visits (for example, allowing us to store your preferences for the next sign-in), and monitor and analyze your web access. We may also use cookies in order to associate your activities with other Personal Information found in third party databases, including by association with your email or home address.  We (or service providers on our behalf) may then send communications and marketing to these email or home addresses.\n\nWe also use a tool called Google Analytics to collect information about your use of the Platform and Website. This third-party service collects information such as how often users access the Platform or Website, what pages they visit when they do so, etc. We use the information we get from these tools only to improve our Website and Platform. Google Analytics collects the IP address assigned to you on the date you visit sites, rather than your name or other identifying information. We do not combine the information collected through the use of Google Analytics with personally identifiable information. Google\u2019s ability to use and share information collected by Google Analytics about your use of the Platform and Website is restricted by the [Google Analytics Terms of Service](https://marketingplatform.google.com/about/analytics/terms/us/) and the [Google Privacy Policy](https://policies.google.com/privacy).\n\nYou may remove the cookies by following the instructions of your device preferences; You can find more information about cookies at [www.allaboutcookies.org](http://www.allaboutcookies.org); however, if you choose to disable cookies, some features of our Service may not operate properly and your online experience may be limited.\n\n**International transfer**\n\nBecause Base44 operates globally, it may be necessary for us to transfer information, including Personal Information, to other countries than the country in which the information was collected. In these instances, we will transfer your data in accordance with the provisions of the applicable privacy legislation meant to safeguard the processing of your Personal Information.\n\n**For how long we retain the information**\n\nWe retain the information that we collect from you for as for as long as it is necessary based on the purpose it was collected for and taking into account compliance with our legal obligations, resolving disputes and enforcing our rights. Retention periods will be determined taking into account the type of information that is collected and the purpose for which it is collected, bearing in mind the requirements applicable to the situation and the need to destroy outdated, unused information at the earliest reasonable time. We may keep records containing your Personal Information, communications and anything else as required by applicable laws and regulations.\n\nWe may rectify, replenish or remove incomplete or inaccurate information, at any time and at our discretion.\n\n**Your privacy rights**\n\nCertain jurisdictions provide data subjects with certain statutory rights to their Personal Information. Subject to exemptions provided by law, and with proper identification, you may have the right to certain actions to your Personal Information such as:\n\n- Right to verify your Personal Information (to access, delete, change or update any Personal Information relating to you. For example, if you believe that your Personal Information is incorrect, you may ask to have it corrected or deleted);\n- Right to request that we erase Personal Information about you (subject to any other legal obligation that may require us to keep that information);\n- Right to object to the processing of your Personal Information where our lawful basis is legitimate interest or direct marketing;\n- Right to restrict us from processing Personal Information pertaining to you (for example, you may request that we will stop using or sharing your Personal Information with third party service providers); and\n- Right to export Personal Information in a portable format.\n\nIf you wish to exercise any of these rights, please contact us at: **<compliance@base44.com>**. When handling your request, we will ask for additional information to confirm your identity (which may include Personal Information). However, please note that if you choose not to allow us to process your Personal Information, we may be prevented from providing you with the right to access and use the Platform or Website.\n\nPlease note that these rights are not absolute and may be subject to our own legitimate interests and regulatory requirements.\n\nIf you wish to raise a complaint on how we have handled your Personal Information, please contact us directly at: **<compliance@base44.com>**\n\nIf you are not satisfied with our response or believe we are collecting or processing your Personal Information not in accordance with the laws, you may elect to file a complaint to the applicable data protection authority.\n'})})}function Vd(){return(0,be.jsx)("div",{className:"p-9",children:(0,be.jsx)(Gd,{children:"\n\n**Base44 Terms of Service**\n\n**Last updated March 23, 2025**\n\nThese Terms of Service, as amended from time to time, (these \u201c**Terms**\u201d) constitute a legally binding agreement between Base44, Inc., a Delaware corporation, or to the extent set out in the Order Form, its applicable affiliate (the \u201c**Company**\u201d) and the customer executing or otherwise accepting an order form which refers to these Terms (respectively, the \u201c**Customer**\u201d and the \u201c**Order Form**\u201d). These Terms govern the manner in which the Customer and its Users (as defined below) may use and access the Company\u2019s generative AI application building platform available via the Company's website at <https://base44.com/> (the \u201c**Platform**\u201d and \"**Website**\" respectively), which is provided on a Software-as-a-Service subscription based model.\n\nThe Order Form may be completed and entered-into in various ways, including online form, in-product screen or an offline form delivered by Customer to the Company, including via email or any other electronic or physical delivery mechanism. Execution of the Order Form or use of the Platform by the Customer will conclusively indicate Customer\u2019s acceptance of these Terms, and such Order Form shall constitute an integral part hereof. If a User accepts the Terms on behalf of another entity, it must have the authority to accept these Terms on its behalf.\n\nThe Website or Customer's use of the Platform may be subject to additional guidelines, terms, or rules, which will be posted on the Website or may be viewed via the Platform , including, without limitation, Company's Pricing page setting its different subscription plans at <https://base44.com/pricing>, our Privacy Policy available at <https://app.base44.com/privacy-policy> (\"**Privacy Policy**\"), our Responsible Use Policy (\"**RUP**\") available at <https://app.base44.com/responsible-use-policy> and Copyright Policy available at <https://base44.com/copyright-policy>, as the Company may amend from time to time. All such additional terms, guidelines, and rules are incorporated by reference into these Terms.\n\n# The Platform; Right to Access and Use\n\n## Right to Use. Subject to Customer's compliance these Terms and the Order Form (including any use limitations and User numbers thereunder), Company hereby grants Customer a limited, non-transferable, non-exclusive, non-assignable and non-sub-licensable, revocable right to (i) use and access the Platform for Customer\u2019s lawful personal and commercial purposes, during the applicable Subscription Term (as defined below); and (ii) to the extent Company provides Customer with any technical documentation and specifications in connection with the Platform (\"**Company Documents**\"), to use and make a reasonable number of copies solely to the extent necessary for Customer's use of the Platform during the Subscription Term. The foregoing right is subject to the restrictions set forth in Section 5.3 below, which restrictions are in addition to, and without derogating from, any other restrictions and limitations set forth in these Terms. The services hereunder are licensed, not sold\n\n## Modification or Discontinuation of the Platform. The Company may change or update the Platform and Website at any time, including, without limitation, the availability of any feature, content or database, and may impose limitations or restrictions on certain features and services or discontinue any or all parts of the Platform or Website. In case of a material change to the Platform, the Company will notify Customer by posting an announcement on the Company\u2019s Website, through the Platform or by email\n\n## Use and Credit Limits. Customer's use of the Platform may be subject to usage limits, including a maximum number of Users (as defined below) and maximum number of messages and integration credits, depending on Customer's selected Subscription plan on the Pricing page or Order Form. Company may change such limitations from time to time by notification or an update to the Pricing page. Exceeding the limitations may incur excess charges which will be added to Customer's Fees, provided that Customer may also elect to pre-purchase additional credits from the Company at the rates determined by Company from time to time\n\n# Trial Service; Pre-Released Services\n\n## Trial Services and Pre-Release Services. The Company may offer, from time to time, some or all of its services on free trial versions (\u201c**Trial Service**\u201d). The Company reserves the right to modify, cancel and/or limit each Trial Service at any time and without liability. In addition, the Company may offer, from time to time, certain services in an alpha or beta versions (the \u201c**Pre-Released Services**\u201d) and will use best endeavors to identify the Pre-Released Services as such. Pre-Released Services are services that are still under development, and as such they may be incomplete, may contain bugs, suffer disruptions and not operate as intended and designated more than usual\n\n## Governing Terms of Trial Services and Pre-released Services. The Trial Services and Pre-Released Services are governed by these Terms, provided that notwithstanding anything in these Terms or elsewhere to the contrary, in respect of Trial Services and Pre-Released Services (i) Trial Services and Pre-Released Services are made available hereunder on as \u201cAs-Is\u201d and \u201cAs Available\u201d basis, with no warranties, express or implied, of any kind; and (ii) IN NO EVENT SHALL THE TOTAL AGGREGATE LIABILITY OF COMPANY, ITS AFFILIATES OR ITS THIRD-PARTY SERVICE PROVIDERS, UNDER, OR OTHERWISE IN CONNECTION WITH, THESE TERMS, EXCEED US $100. The Company makes no promises that any Trial Service and/or Pre-Released Services will be made available to the Customer and/or generally available\n\n# Users, Accounts and Customer Obligations\n\n## Users and Accounts. In order to use the Platform, Customer must register and create an account ( an \u201c**Account**), for Customer the users authorized and designated by the Customer (each, a \u201c**User**\u201d). Users must be at least 13 years old or the minimum age required in Customer's jurisdiction to use or consent to use the Platform. Customer is responsible that each User shall provide the Company with accurate, complete, and updated registration information. Customer shall: (a) not allow anyone other than Users to access and use the Account; (b) not register an Account via automated means; (c) keep, and ensure that Users keep all Account credentials and access measures secure at all times; (d) ensure that the login details for each User may only be used by that User, and that multiple individuals may not share the same login details; and (e) promptly notify the Company in writing if Customer becomes aware of any unauthorized access or use of Customer\u2019s Account\n\n## Cooperation. Customer shall provide Company with all reasonable cooperation in relation to these Terms, and shall comply in a timely and efficient manner, and be responsible and liable for the Users\u2019 compliance with these Terms, each Order Form and all applicable laws and regulations\n\n## Customer Infrastructure. Customer is solely responsible for obtaining, maintaining and operating Customer's and its Users' devices (including, without limitation, smartphones, tablets and computers), and any related equipment, hardware, software (including cloud environment), security systems and measures and ancillary services, and internet connection necessary in order to access and use the Platform and the Generated Output\n\n## Responsibility for Users and Accounts. Customer is responsible for all acts or omissions of Users, their use of the Platform, Website and Generated Output and their compliance with these Terms. The Company shall not have any liability towards Users, and the Customer is solely responsible for responding to any claims, requests and demands by the Users or any other third party related to the Customer\n\n## SSO Registration. Customer may register an Account by logging into its account with certain third-party service accounts (\u201c**SSO**\u201d) including, but not limited to Google (each such account, an \u201c**SSO Account**\u201d), by either: (i) providing Customer's SSO Account login information to the Company through the Platform; or (ii) allowing the Company to access the SSO Account, as permitted under the applicable terms and conditions that govern Customer's use of the SSO Account. By registering an Account through an SSO, Customer represent that it is entitled to disclose Customer's SSO Account login information to the Company and/or grant the Company access to the SSO Account, without breach by Customer of any of the terms and conditions governing Customer's use of the SSO Account and without obligating the Company to pay any fees or making the Company subject to any usage limitations imposed by the SSO service provider\n\n# Customer Data\n\n## Customer Data. While using the Platform, certain data may be uploaded or transferred to the Platform to be processed by the Platform on the Customer\u2019s behalf, including Input Data (the \u201c**Customer Data**\u201d). As between the Customer and the Company, all rights in the Customer Data shall remain with Customer\n\n## License to Customer Data. Customer hereby grants the Company and Third-Party Service Providers involved in the provision of the Platform hereunder an irrevocable, non-exclusive, worldwide, royalty-free, fully paid, sub-licensable right and license to access, use, modify, translate, process, copy, download, store, distribute, display, publish and prepare derivative works of the Customer Data during the Subscription Term, solely for the purpose of maintaining and providing the Platform and the services pursuant to the Terms and Order Form (including the creation of Generated Output), to enforce Company's rights and obligations under these Terms and Order Form(s) and to satisfy any requirement under applicable law, regulation, legal process, subpoena or governmental request\n\n## Responsibility for Customer Data. Customer represents and warrants that (i) it owns or has all the necessary licenses, rights, consents, approvals, permissions, power and authority, necessary to grant the Company the right and license under Section \u200e4.2 and share the Customer Data and Input Data with the Platform, without infringing or violating any copyrights, privacy rights, publicity rights, trademarks or any other contractual, intellectual property or proprietary of any third party; (ii) any Customer Data and Customer's use of the Platform do not and will not violate any applicable laws, including those related to data privacy or data transfer and export or any policies and terms governing such Customer Data; and (iii) no sensitive data that is protected under a special legislation and requires unique treatment (such as protected health information or credit, debit or other payment card data) will be shared with the Platform, other than if expressly agreed by the Company in prior writing and the appropriate agreement in place. It is hereby clarified that the Company is not obliged to monitor and/or moderate the Customer Data, but may elect to do so in its sole discretion\n\n# Intellectual Property and Right to Use\n\n## Company Intellectual Property. As between the Company and the Customer, all right, title and interest in the Platform, Website and Company Documents, including without limitation, any content, materials, software, know-how, data files, documentation, code, SDK, API, design, text, media, methodologies, artwork, names, logos, trademarks and services marks (excluding Customer Data), any and all related or underlying technology and any updates, new versions, modifications, improvements, developments or derivatives thereof (other than Generated Output), are the sole property of the Company and its licensors\n\n## Generated Output & Input Data. As between the Company and the Customer, to the extent such rights exist under applicable law, the Customer owns all rights, title and interest in the software and applications generated by the Platform (\"**Generated Output**\") resulting from prompts or Customer Data which Customer shares with the Platform for the purposes of generating the Generated Output (\"**Input Data**\"). Company relinquishes all rights, title and interests it might have in the Generated Output, without making any representation or warranty as to the nature of such rights. Customer acknowledges and agrees that due to the nature of machine learning and artificial intelligence, Generated Output may not be unique and other users of the Platform may receive the same or similar output. The aforementioned assignment does not extend to other customers\u2019 and their users' output\n\n## Restricted Use. Customer and its Users may not, and may not permit or aid others to: (i) use the Platform, Website, Generated Output or Company Documents or in contravention with the RUP, as amended by the Company from time to time; (ii) other than as set forth in Section 5.2 above (Generated Output & Input Data) and Section \u200e1.1(ii) (solely with regard to Company Documents), copy, modify, alter, translate, emulate, create derivative works based on, or reproduce the Platform, Website and Company Documents; (iii) other than as set forth in Section 5.2 above (Generated Output & Input Data), give, publish, sell, distribute, assign, pledge or transfer (by any means), display, sublicense, rent, lease or otherwise share the rights granted under these Terms to any third party, or use the Platform in any service bureau arrangement; (iv) reverse engineer, de-compile, decrypt, revise or disassemble the Platform, or any part thereof, or extract source code from the object code of the Platform; (v) access or use the Platform, Generated Output and Company Documents in order to build, train or improve a competing product or service (vi) use the Platform for benchmarking purposes without Company's express prior written approval; (vii) bypass any measures the Company may use to prevent or restrict access to the Platform or Website, including the creation of multiple free accounts, and/or take any action intended to circumvent or disable the operation of any security feature or measure of the Platform and Website; (viii) access the Platform or Company\u2019s systems or environment via any means other than through the interface provided by the Company, or via automated means, including by crawling, scraping, caching or otherwise; (ix) use the Platform, Website or Company Documents in any manner that infringes, misappropriates or violates anyone\u2019s rights or in a manner that is not authorized by these Terms; (x) take any action that imposes or may impose an unreasonable or disproportionately large load on Company\u2019s (or Company\u2019s Third-Party Service) infrastructure; (x) interfere or attempt to interfere with the integrity or proper working of the Platform, including, without limitation, uploading malicious code or content or knowingly imposing large load on the Platform; (xi) remove, deface, obscure, or alter Company's or any third party's identification, attribution or copyright notices, trademarks, or other proprietary rights affixed to or provided as part of the Platform; (xii) use the Platform, Website or Generated Output to send unsolicited or unauthorized communications; (xiii) use the Platform or Generated Output in connection with any high-risk, hazardous environments requiring fail-safe performance or other safety component, including, without limitation (a) aviation, (b) vehicles, (c) marine equipment, (d) rail systems, (e) motor vehicles, (f) security, (g) critical infrastructure, (h) health services, (i) nuclear facilities, (j) weapon systems, or any other application in which the failure of the Platform or Generated Output could lead to severe damage to a person's body, property or to severe financial or economic damage; or (xiv) use the Platform and Generated Content to provide any service or product requiring a license or permit (such as providing legal or medical advice), without such license, permit or a valid exemption\n\n## Anonymous Information. The Company may collect, monitor and freely use Anonymous Information (as defined below), inter alia to provide, develop, maintain, improve, demonstrate and market the Platform, Website and other products and services. \u201c**Anonymous Information**\u201d means information about the use of the Platform which does not enable identification of an individual, such as aggregated data, metadata and analytic information\n\n## Feedback. Customer may notify the Company of any and all design or functional errors, anomalies, and problems associated with the Platform discovered or brought to its attention by its Users, and may provide the Company suggestions, comments or any other feedback regarding the Platform (the \u201c**Feedback**\u201d). The Company may use the Feedback at its sole discretion and for any purpose, and Customer hereby assigns to Company all right, title, and interest worldwide in the Feedback and any intellectual property rights related thereto. To the extent provided, Feedback is not considered Customer Data or Confidential Information.\n\n# Privacy\n\n## Customer acknowledges and agrees that the use of the Website and Platform by the Customer and its Users is governed by the Company's Privacy Policy as amended from time to time. If Company processes personal data (as defined under applicable law), to the extent required by law or agreed upon between Customer and the Company, the parties will enter into a Data Processing Agreement (DPA) regarding such personal data\n\n# Third-Party Software and Services\n\n## Third-Party Products and Services. The Platform, Website and any Generated Output may integrate with, and contain or link to, third-party software, products, \u201copen source\u201d or \u201cFree Software\u201d components or other services, and may enable Customer and its Users to access, engage and procure certain software, components, source code, services and products provided by third parties, including by way of API or SDK (the \u201c**Third-Party Services**\u201d). Customer acknowledges and agrees that regardless of the manner in which such Third-Party Services may be presented or offered to Customer or its Users, each such Third-Party Service shall be subject to their own licenses, policies and terms and conditions (the \u201c**Third-Party Terms**\u201d) and the Company does not endorse any such Third-Party Services, nor shall it be in any way responsible or liable with respect to any such Third-Party Services (including AI Models) or Third-Party Terms, as amended or replaced from time to time. The Company's inclusion of a Third-Party Service or website or linking to such does not in any way imply, suggest, or constitute any sponsorship, endorsement, or approval by the Company, or by such Third-Party Service provider of the Company, and nor any affiliation between them. The Company may replace Third-Party Services at its discretion\n\n## Generative AI. Without detracting from the foregoing Section \u200e\u200e7.1, the Platform enables your receipt of services powered by third-party generative artificial intelligence and large language models (\"**AI Services**\"). Customer acknowledge that the AI Services and their respective Third-Party Terms are outside the Company's control, but their operation may impact the use, quality and reliability of the Platform and Generated Output\n\n# Subscription; Payments\n\n## Fees. In consideration of the Subscription, Customer's rights and Company's obligations hereunder, Customer shall pay the Company the applicable fees set forth in the Order Form(s) (the \u201c**Fees**\u201d). Unless expressly indicated otherwise, Fees are stated in US dollars. Customer hereby authorizes the Company, either directly or through the Company's payment processing services or applicable reseller or marketplace, to charge the Fees via Customer\u2019s selected payment method, upon the due date. Unless expressly set forth herein, in an Order Form, the Fees are non-cancelable and non-refundable. For the avoidance of doubt, these Terms do not override any mandatory local laws regarding Customer's cancellation rights\n\n## Taxes. The Fees are exclusive of any and all taxes (including without limitation, value added tax, sales tax, use tax, excise, goods and services tax, etc.), levies, or duties, except for income tax imposed on the Company. Company will charge tax on top of the Fees if Company is legally required to do so\n\n## Payment Terms. Subject to any pay-per-use provisions or anything to the contrary in an Order Form, the Fees set forth in each Order Form are final. Unless otherwise set forth in the Order Form, the Fees shall be paid annually or monthly (as set forth in the Order Form), in advance, upon receipt of an invoice by charging Customer\u2019s approved payment means at the beginning of each Subscription Term. Delinquent payments may bear compounded interest, as of the payment due date and until paid in full, at a rate equal to the lower of: (i) 1.5% per month, or (ii) the highest rate permitted by law. The aforesaid shall not derogate from any other right or remedy to which the Company may be entitled. Customer will be responsible for all reasonable expenses (including reasonable attorneys\u2019 fees) incurred by the Company in collecting any payment\n\n# Confidentiality\n\n## Confidential Information. For purposes of these Terms, the term \u201c**Confidential Information**\u201d shall mean any and all non-public business, product, technology and marketing data and information, whether written, oral or in any other medium disclosed or otherwise provided by either party (the \u201c**Disclosing Party**\u201d) to the other party (the \u201c**Receiving Party**\u201d), that is either identified as such or should reasonably be understood to be confidential given the nature of the information and the circumstances of disclosure. Confidential Information shall not include any information which the Receiving Party can prove: (a) is publicly available at the time of disclosure or subsequently becomes publicly available through no act or omission of the Receiving Party in breach of these Terms; (b) is already known to the Receiving Party at the time of disclosure; (c) is disclosed to the Receiving Party free from confidentiality obligations by a third party who is not, to the knowledge of the Receiving Party, in breach of an obligation of confidentiality; or (d) was or is independently developed by the Receiving Party without use of or reliance upon the Confidential Information\n\n## Confidentiality Obligations. The Receiving Party undertakes and warrants that: (i) it shall hold the Confidential Information of Disclosing Party in confidence and shall take all reasonable steps to safeguard and protect the Confidential Information including, without limitation, those steps that it takes to protect its own Confidential Information of a similar nature; (ii) it shall not disclose or otherwise provide any Confidential Information to any third party without the prior written consent of the Disclosing Party, except to those of its employees who have a need to know such Confidential Information for the purpose of fulfilling these Terms and provided that such employees are bound by written confidentiality obligations which are at least as restrictive as those contained herein; (iii) it shall not copy or use the Confidential Information for any purpose except to the extent required to perform its obligations, or exercise its rights, hereunder, whilst maintaining the Disclosing Party\u2019s interests; and (iv) if the Receiving Party is requested or legally compelled to disclose any Confidential Information pursuant to the order or requirement of a court, administrative agency, or other governmental body, the Receiving Party shall make best efforts to provide the Disclosing Party prompt notice thereof, and, at the request and expense of the Disclosing Party, uses reasonable efforts to limit such disclosure to the extent requested\n\n## Confidentiality Survival. Receiving Party\u2019s obligations with respect to Confidential Information shall expire five (5) years from the date of termination or expiration of the last Subscription Term, unless otherwise agreed by the parties in a nondisclosure agreement between them or required under applicable law\n\n# Term & Termination\n\n## Subscription Term. The Platform is provided on a subscription basis for the term specified in the Order Form (the \u201c**Subscription**\u201d and the \u201c**Subscription Term**\u201d)\n\n## Auto-Renewal. Subject to any express provisions to the contrary in the Order Form (which will supersede this Section \u200e10.2), Customer\u2019s Subscription shall automatically renew by default without prior notice of the renewal to Customer (unless such notice is required by mandatory local law), unless canceled by either the Company or the Customer at least 30 days prior to its expiration by written notice to the other party, for a renewal period equal in time to the original Subscription Term (excluding any renewal period)\n\n## Termination for Cause. A breach of obligations by either party hereto which is not cured within 30 days from receiving notice thereof (to the extent curable), shall entitle the non-breaching party to immediately terminate these Terms and Order Form by written notice. Notwithstanding, if a party files for petition or action for relief under any bankruptcy, reorganization, insolvency or moratorium law or any other law for the relief of, or relating to, debtors, now or hereafter in effect, or makes any assignment for the benefit of creditors or takes or becomes subject to any action in furtherance of any of the foregoing, the other party will be entitled to terminate these Terms and Order Form immediately by written notice\n\n## Termination or Suspension by Company. Company may terminate or suspend Customer\u2019s use of and access to the Platform (or any part thereof) immediately, without prior notice or liability, in each of the following events: (i) the Company believes, in its sole discretion, that Customer or any third party is using the Platform in a manner that may impose a security risk, may cause harm to the Company or any third party, and/or may create any liability to the Company or any third party; (ii) if the Company believes, in its sole discretion, that Customer or any third party is using the Platform in breach of Section 5.3 (Restricted Use); or (iii) if the Company is unable to charge the Fees through Customer\u2019s approved payment means or if any payment is or is likely to become overdue, including due to Customer exceeding any usage limits. The aforementioned rights are in addition to any rights and remedies that may be available to the Company in accordance with these Terms or under any applicable law\n\n## Termination by Customer. Subject to any express provisions to the contrary in the Order Form (which will supersede this Section \u200e10.5) Customer may terminate its Subscription to the Platform by cancelling its Subscription via written notice to the Company, whereby termination will take effect at the end of the then-current Subscription Term and shall not derogate from Customer\u2019s obligation to pay the applicable Fees for the Subscription Term\n\n## Effect of Termination. The termination or expiration of these Terms shall not relieve Customer from its obligation to pay due Fees. Except as explicitly set forth herein, upon termination, all licenses and rights granted hereunder shall immediately expire and any and all use by the Customer or the Users of the Platform shall immediately cease and expire. Customer shall immediately delete and shall not maintain any copy of any component of the Platform or Company Documents installed or saved on the Customer\u2019s systems or environment\n\n## Right to Receive Customer Data. If requested by the Customer in writing, provided that Customer may exercise such right within no later than 15 days following termination, Company shall provide the Customer with the Customer Data then held by the Company, if any, in a standard format and media or delete all Customer Data in its possession. The Company may retain copies of Customer Data which are automatically created for back-up purposes and other Customer Data which is required to be maintained by Company pursuant to the Company\u2019s data retention policies, and provided that the provisions of Section \u200e9 (Confidentiality) shall continue to apply to such data. The Customer acknowledges that following the aforesaid 15-day term following termination of these Terms, the Company may delete all Customer Data without retaining any copy\n\n## Survival. All the provisions of these Terms which by their nature should survive termination, including, without limitation, Sections 5 (Intellectual Property and Right of Use), \u200e\u200e9 (Confidentiality), 11 (Warranty and Disclaimers), 12 (Limitations of Liability) 13 (Indemnification) and \u200e14 (Miscellaneous), shall remain in full force and effect following termination thereof, for any reason whatsoever. Termination of these Terms or the Order Form shall not relieve Customer from any obligation arising or accruing prior to such termination or limit any liability which Customer otherwise may have to the Company\n\n# Warranty and Disclaimer\n\n## THE COMPANY DOES NOT WARRANT, UNDERTAKE OR GUARANTEE THAT THE PLATFORM WILL SATISFY CUSTOMER'S NEEDS OR WILL BE OPTIMAL UNDER THE CIRCUMSTANCES. NO DATA PR INFORMATION, WHETHER ORAL OR WRITTEN, OBTAINED BY CUSTOMER THROUGH OR FROM THE PLATFORM SHALL CREATE ANY WARRANTY OR IMPOSE ANY LIABILITY NOT EXPRESSLY STATED IN THESE TERMS. IN ADDITION, THE COMPANY DOES NOT ASSUME ANY LIABILITY WITH RESPECT TO THE PLATFORM AND/OR THE GENERATED OUTPUT AND THE USE OF PLATFORM AND/OR THE GENERATED OUTPUT BY CUSTOMER, USERS OR CUSTOMER'S OWN END CUSTOMERS. THE PLATFORM, WEBSITE, COMPANY DOCUMENTS, ANY GUIDES PROVIDED ON THE COMPANY WEBSITE AND ANY GENERATED OUTPUT ARE SUPPLIED ON AN \u201cAS IS\u201d AND \u201cAS AVAILABLE\u201d BASIS AND WITHOUT WARRANTIES, GUARANTEES OR REPRESENTATIONS OF ANY KIND, WHETHER EXPRESS OR IMPLIED, STATUTORY, COMMON LAW OR OTHERWISE, REGARDING THE PLATFORM AND CUSTOMER\u2019S, ITS USERS AND END CUSTOMERS' USE THEREOF, INCLUDING, BUT NOT LIMITED TO, ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, ACCURACY, AVAILABILITY, SECURITY (INCLUDING THE SECURITY OF CUSTOMER'S END CLIENTS USING THE GENERATED OUTPUT), COMPATIBILITY OR NON-INFRINGEMENT. CUSTOMER FURTHER ACKNOWLEDGES AND AGREES THAT ITS, ITS USERS AND END CUSTOMERS' ACCESS AND USE OF THE PLATFORM AND/OR ANY GENERATED OUTPUT ARE AT ITS AND THEIR SOLE RESPONSIBILITY AND RISK. COMPANY DOES NOT WARRANT THAT THE USE OF THE PLATFORM WILL BE UNINTERRUPTED, ERROR-FREE OR WILL MEET CUSTOMER\u2019S SPECIFIC REQUIREMENTS OR EXPECTATIONS, OR THAT ANY GENERATED OUTPUT, PROCESS, ACTION, OR INFORMATION OBTAINED BY CUSTOMER AS A RESULT OF THE USE OF THE PLATFORM WILL BE ACCURATE, RELIABLE, EFFECTIVE, PROPER, LAWFUL, OR OTHERWISE IN ACCORDANCE WITH THE CUSTOMER\u2019S EXPECTATIONS. THE COMPANY FURTHER DISCLAIMS ALL WARRANTIES IN CONNECTION WITH THIRD-PARTY SERVICES AND AI SERVICES. CUSTOMER WILL BE SOLELY AND FULLY LIABLE FOR ANY LOSSES, DAMAGES, LIABILITY AND EXPENSES INCURRED BY COMPANY OR A THIRD PARTY DUE TO ANY UNAUTHORIZED USE OF THE PLATFORM BY THE CUSTOMER OR THE GENERATED OUTPUT BY ANY OF ITS USERS OR THIRD PARTY ON BEHALF OF THE CUSTOMER\n\n## WITHOUT DEROGATING FROM THE FOREGOING, COMPANY ASSUME NO LIABILITY OR RESPONSIBILITY FOR: (I) ANY ERRORS, MISTAKES, OR INACCURACIES OF THE PLATFORM, WEBSITE, COMPANY DOCUMENTS OR GENERATED OUTPUT, (II) ANY CODE OR SOFTWARE INCLUDED IN THE GENERATED OUTPUT, THE ORIGIN THEREOF AND THE RIGHTS THEREIN, INCLUDING THIRD PARTY LICENSES APPLYING TO SUCH CODE OR SOFTWARE (IF ANY) (III) ANY INTERRUPTION OR CESSATION OF TRANSMISSION, LOSS OR LEAK OF DATA (INCLUDING END CLIENT DATA) OR OTHER COMMUNICATIONS, AND/OR (IV) ANY DELAYS, DELIVERY FAILURES, OR ANY OTHER LOSS OR DAMAGE RESULTING FROM THE HOSTING, STORAGE OR TRANSFER OF SOFTWARE OR CUSTOMER DATA OVER COMMUNICATIONS NETWORKS AND FACILITIES, INCLUDING THE INTERNET. CUSTOMER IS SOLELY RESPONSIBLE FOR THE CUSTOMER DATA, INPUT DATA AND ANY DATA ITS END CLIENTS SHARE WITH THE GENERATED OUTPUT, AND SHOULD EVALUATE THE ACCURACY AND SECURITY OF THE GENERATED OUTPUT IN EACH CASE, INCLUDING BY CONDUCTING HUMAN REVIEW AS NECESSARY\n\n## **Limitation of Liability**\n\n## TO THE FULLEST EXTENT PERMITTED BY APPLICABLE LAW, AND OTHER THAN IN CASE OF A PARTY'S FRAUD, GROSS NEGLIGENCE, WILLFUL MISCONDUCT, INFRINGEMENT OR MISAPPROPRIATION OF THE OTHER PARTY'S INTELLECTUAL PROPERTY RIGHTS, CUSTOMER'S BREACH OF SECTION \u200e5.3 OR CUSTOMER'S PAYMENT OBLIGATIONS\n\n## IN NO EVENT SHALL EITHER PARTY BE LIABLE TO THE OTHER PARTY FOR ANY: (I) SPECIAL, INCIDENTAL, PUNITIVE, CONSEQUENTIAL OR INDIRECT DAMAGES; (II) LOSS OF OR DAMAGE TO DATA (INCLUDING END-USER INFORMATION), GOODWILL, PROFITS, SAVINGS, OR PURE ECONOMIC LOSS; AND/OR (III) THE COST OF PROCURING ANY SUBSTITUTE GOODS OR SERVICES; REGARDLESS OF (A) WHETHER SUCH PARTY HAD BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR SUCH DAMAGES WERE REASONABLY FORESEEABLE; OR (B) THE THEORY OR BASIS OF LIABILITY (SUCH AS, BUT NOT LIMITED TO, BREACH OF CONTRACT OR TORT); AND\n\n## EITHER PARTY'S AGGREGATE AND CUMULATIVE LIABILITY FOR ALL DIRECT CLAIMS, DAMAGES AND LOSSES (WHETHER IN CONTRACT, TORT OR OTHERWISE), IS LIMITED TO THE FEES PAID OR PAYABLE TO THE COMPANY BY THE CUSTOMER FOR ITS SUBSCRIPTION IN THE TWELVE (12) MONTHS PRECEDING THE LAST EVENT GIVING RISE TO THE CLAIM\n\n# Indemnification\n\n## Without derogating from Company\u2019s rights under these Terms and under applicable law, Customer hereby agrees to defend and indemnify Company, its affiliates and their respective resellers, employees and agents against any and all liabilities, damages, and costs (including reasonable attorneys\u2019 fees) arising out of any claim, demand, suit or proceeding by a third party (i) arising out of or alleging that the Customer Data, the Input Data or Generated Output and/or the use of the Platform or Generated Output by the Customer, its Users and end customers infringes on the any intellectual property rights of a third party; (ii) arising out of or alleging that the Customer Data, Input data or use of the Platform violates applicable law or the privacy rights of a third party, or (iii) arising out of the misuse of the Platform or Account by Customer, the Users or any third party; or (iv) who is an end client of the Generated Output against the Company, in relation to the Generated Output\n\n# Miscellaneous\n\n## General. The headings used in these Terms are for convenience only and shall in no case be considered in construing these Terms. The policies, agreements, notices and other documents linked hereto are incorporated herein by this reference\n\n## Amendments. Company may change the Terms from time to time, and such change will become effective upon the date on which it is posted on the Website or shared with Customer by an in-Platform notification. Customer is responsible for checking the Website and Platform regularly for such changes. By continuing to access or use the Platform, Customer agrees to be bound by the revised Terms. In addition, the Company has the right to change the Fees at any time, upon notice to Customer, provided that any increase shall only become effective upon the end of the then-applicable Subscription Term\n\n## Export Control. The Platform may be subject to U.S. or foreign export controls, laws and regulations (the \u201c**Export Controls**\u201d), and Customer agrees and confirms that: (i) Customer is not located or uses, exports, re-exports or imports the Platform (or any portion thereof) in or to, any person, entity, organization, jurisdiction or otherwise, in violation of the Export Controls; (ii) Customer is solely responsible for complying with applicable Export Controls which may impose additional restrictions, prohibitions or requirements on the use of the Platform\n\n## Customer\u2019s Reference. Customer acknowledges and agrees that for the duration of the Subscription Term, the Company has the right to use Customer\u2019s name and logo to identify Customer as a customer of Company or user of the Platform, on Company\u2019s Website, marketing materials or otherwise by public announcements. The publication of any additional content related to the Customer\u2019s use of the Platform (other than mere reference to the Customer as set forth above), such as case studies, shall require the Customer\u2019s prior written approval (which may not be unreasonably withheld or delayed)\n\n## Force Majeure. Neither Company nor Customer will be liable by reason of any failure or delay in the performance of its obligations on account of events beyond the reasonable control of a party, which may include denial-of-service attacks, interruption or failure of the Internet or any utility service, failures in third-party hosting services, strikes, shortages, riots, fires, acts of God, war, pandemic, terrorism, and governmental action, provided that the foregoing will not relive Customer of its payment obligations hereunder\n\n## Relationship of the Parties; No Third-Party Beneficiaries. The parties are independent contractors. These Terms do not create a partnership, franchise, joint venture, agency, fiduciary or employment relationship between the parties. Users or Customer's end customers are not, and there are no third-party beneficiaries to these Terms\n\n## Entire Agreement. These Terms and Order Form(s) (and the other terms, agreements and policies referenced or linked herein) constitutes the entire agreement between the parties hereto with respect to the subject matter hereof and supersedes all prior understandings of such parties with regard thereto\n\n## Order of Precedence. Any Order Form entered into between the parties simultaneously with these Terms shall be deemed to incorporate these Terms. If there is any conflict or inconsistency between these Terms and the Order Form, these Terms shall prevail unless the Order Form specifically states otherwise\n\n## Assignment. Company may assign at any time these Terms, Order Form(s) and any of its rights and/or obligations thereunder to any third party without Customer\u2019s consent or notice to Customer. Customer may not assign any of its rights or delegate any obligations hereunder, in whole or in part without the prior written consent of Company. Any assignment attempt in contravention of this Section shall be null and void\n\n## Notice. All notices in connection with these Terms and any Order Form shall be made by personal delivery, by express courier service (such as FedEx or UPS) that requires proof of delivery, certified or by registered mail, return receipt requested, or by electronic mail, and shall be deemed effective (a) if mailed, 5 business days after mailing; (b) if made by personal delivery or sent by messenger or express courier service, upon delivery; and (c) if sent via electronic mail, upon transmission and electronic confirmation of receipt or (if transmitted and received on a non-business day) on the first business day following transmission and electronic confirmation of receipt\n\n## Enforceability. If any provision of these Terms is found to be unlawful, void, or for any reason unenforceable, then that provision will be deemed severable from these Terms and will not affect the validity and enforceability of any remaining provision\n\n## No Waiver. The failure of either party to enforce any right or provision in these Terms will not constitute a waiver of such right or provision unless acknowledged and agreed by such party in writing\n\n## Governing Law; Jurisdiction. These Terms and its performance shall be governed by the laws of the State of New York, without regard to conflict of laws\u2019 provisions that would result in the application of the laws of any other jurisdiction. The parties hereto submit the exclusive personal jurisdiction and venue of the competent courts located in New York County, New York. The Customer and Company agree that the United Nations Convention on Contracts for the International Sale of Goods will not apply\n\n## Class Action Waiver. WHERE PERMITTED UNDER APPLICABLE LAWS, CUSTOMER AND COMPANY AGREE THAT EACH PARTY MAY BRING CLAIMS AGAINST THE OTHER PARTY ONLY IN ITS INDIVIDUAL CAPACITY AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS OR REPRESENTATIVE ACTION. Unless both Customer and the Company agree, no arbitrator or judge may consolidate more than one person\u2019s claims or otherwise preside over any form of a representative or class proceeding\n\nFor any questions or queries about these Terms or the Platform in general, please do not hesitate to contact us via our support system https://app.base44.com/support.\n\n\u200d\n"})})}const Jd=()=>{const e=(0,J.Zp)();return(0,be.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:(0,be.jsxs)("div",{className:"max-w-md mx-auto text-center px-6",children:[(0,be.jsxs)("div",{className:"mb-8",children:[(0,be.jsx)("h1",{className:"text-8xl font-light text-slate-300 mb-4",children:"404"}),(0,be.jsx)("h2",{className:"text-2xl font-medium text-slate-900 mb-3",children:"Page not found"}),(0,be.jsx)("p",{className:"text-slate-600 leading-relaxed",children:"The page you're looking for doesn't exist or has been moved."})]}),(0,be.jsx)("button",{onClick:()=>e("/"),className:"inline-flex items-center px-6 py-3 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:"Go home"})]})})};function Kd(e){let{onAccountCreated:s}=e;const[t,a]=(0,Y.useState)(!1),[r,n]=(0,Y.useState)("express"),{toast:i}=or();return(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Get Started with Stripe"}),(0,be.jsx)($s,{children:"Create a Stripe account to start accepting payments in your apps"})]}),(0,be.jsxs)(Ms,{children:[(0,be.jsx)("p",{className:"text-muted-foreground mb-4",children:"With Stripe, you can accept payments, manage subscriptions, and more. Your Stripe account will be created using Stripe Connect, which will allow your users to pay you directly."}),(0,be.jsxs)("div",{className:"mt-6",children:[(0,be.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Choose Account Type"}),(0,be.jsxs)(hs,{value:r,onValueChange:n,className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-start space-x-2 rounded-md border p-4",children:[(0,be.jsx)(xs,{value:"express",id:"express",className:"mt-1"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex space-x-2",children:[(0,be.jsx)(ds,{htmlFor:"express",className:"font-medium",children:"Express Account"}),(0,be.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700",children:"Recommended for new users"})]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Best for people who don't have a Stripe account yet. Express accounts offer a simplified onboarding process with a Stripe-hosted setup and dashboard. This is the quickest way to get started."})]})]}),(0,be.jsxs)("div",{className:"flex items-start space-x-2 rounded-md border p-4",children:[(0,be.jsx)(xs,{value:"standard",id:"standard",className:"mt-1"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex space-x-2",children:[(0,be.jsx)(ds,{htmlFor:"standard",className:"font-medium",children:"Standard Account"}),(0,be.jsx)("span",{className:"inline-flex items-center rounded-full bg-purple-50 px-2 py-1 text-xs font-medium text-purple-700",children:"For experienced users"})]}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Best for people who already have a Stripe account set up. Standard accounts provide more customization options and direct access to the full Stripe Dashboard. This option requires more setup steps but offers greater flexibility."})]})]})]})]})]}),(0,be.jsx)(Fs,{className:"flex justify-end",children:(0,be.jsx)(Ze,{onClick:async()=>{a(!0);try{const e=await Wo.getOrCreateAccount(r);s(e),i({title:"Success",description:"Stripe account created successfully",variant:"success"})}catch(e){i({variant:"destructive",title:"Error",description:"Failed to create Stripe account"})}finally{a(!1)}},disabled:t,children:t?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Da.A,{className:"mr-2 h-4 w-4"}),"Create Stripe Account"]})})})]})}function Zd(e){var s;let{account:t,onAccountVerified:a}=e;const[r,n]=(0,Y.useState)(!0),[i,l]=(0,Y.useState)(null),[o,c]=(0,Y.useState)(!1),{toast:d}=or();(0,Y.useEffect)((()=>{t&&m()}),[t]);const m=async()=>{n(!0);try{const e=await Wo.checkAccountStatus(t.id);l(e),e.is_complete&&a()}catch(e){d({variant:"destructive",title:"Error",description:"Failed to check Stripe account status"})}finally{n(!1)}};if(r)return(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Checking Your Stripe Account"}),(0,be.jsx)($s,{children:"Verifying your Stripe account setup..."})]}),(0,be.jsx)(Ms,{className:"flex justify-center items-center p-8",children:(0,be.jsx)(Ae.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]});if(null!=i&&i.is_complete)return(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Stripe Account Setup Complete"}),(0,be.jsx)($s,{children:"Your Stripe account is fully set up and ready to use"})]}),(0,be.jsx)(Ms,{children:(0,be.jsxs)(We,{className:"bg-green-50 border-green-200",children:[(0,be.jsx)(Ll.A,{className:"h-4 w-4 text-green-600"}),(0,be.jsx)(Ye,{className:"text-green-600",children:"Ready to accept payments"}),(0,be.jsx)(Ge,{children:"Your Stripe account is ready to process payments and receive payouts."})]})}),(0,be.jsx)(Fs,{className:"flex justify-end",children:(0,be.jsx)(Ze,{onClick:a,children:"Continue to Next Step"})})]});const u=(null==i||null===(s=i.requirements)||void 0===s?void 0:s.currently_due)||[];return(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Complete Your Stripe Account Setup"}),(0,be.jsx)($s,{children:"Your Stripe account needs additional information to start accepting payments"})]}),(0,be.jsxs)(Ms,{className:"space-y-4",children:[(0,be.jsxs)(We,{variant:"warning",className:"bg-yellow-50 border-yellow-200",children:[(0,be.jsx)(Te.A,{className:"h-4 w-4 text-yellow-600"}),(0,be.jsx)(Ye,{className:"text-yellow-600",children:"Account setup incomplete"}),(0,be.jsx)(Ge,{children:"Please continue the Stripe onboarding process to complete your account setup."})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("div",{className:"flex items-center gap-2",children:(0,be.jsxs)("div",{className:null!=i&&i.details_submitted?"text-green-600":"text-muted-foreground",children:[null!=i&&i.details_submitted?(0,be.jsx)(Ll.A,{className:"inline h-4 w-4 mr-1"}):(0,be.jsx)(Vl.A,{className:"inline h-4 w-4 mr-1"}),"Account details provided"]})}),(0,be.jsx)("div",{className:"flex items-center gap-2",children:(0,be.jsxs)("div",{className:null!=i&&i.charges_enabled?"text-green-600":"text-muted-foreground",children:[null!=i&&i.charges_enabled?(0,be.jsx)(Ll.A,{className:"inline h-4 w-4 mr-1"}):(0,be.jsx)(Vl.A,{className:"inline h-4 w-4 mr-1"}),"Charges enabled"]})}),(0,be.jsx)("div",{className:"flex items-center gap-2",children:(0,be.jsxs)("div",{className:null!=i&&i.payouts_enabled?"text-green-600":"text-muted-foreground",children:[null!=i&&i.payouts_enabled?(0,be.jsx)(Ll.A,{className:"inline h-4 w-4 mr-1"}):(0,be.jsx)(Vl.A,{className:"inline h-4 w-4 mr-1"}),"Payouts enabled"]})})]}),u.length>0&&(0,be.jsxs)("div",{className:"mt-4",children:[(0,be.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Required Information:"}),(0,be.jsx)("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc pl-5",children:u.map(((e,s)=>(0,be.jsx)("li",{children:e.split(".").join(" ").replace(/_/g," ")},s)))})]})]}),(0,be.jsxs)(Fs,{className:"flex justify-between items-center",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:m,children:"Refresh Status"}),(0,be.jsx)(Ze,{onClick:async()=>{c(!0);try{const e=`${window.location.origin}/integrations/stripe`,s=await Wo.createAccountLink(t.id,e);s.account_link_url&&(window.location.href=s.account_link_url)}catch(e){d({variant:"destructive",title:"Error",description:"Failed to create Stripe account link"}),c(!1)}},disabled:o,children:o?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Preparing Onboarding..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Da.A,{className:"mr-2 h-4 w-4"}),"Complete Stripe Onboarding"]})})]})]})}var Xd=t(37656);function Qd(e){let{account:s,onContinue:t}=e;const[a,r]=(0,Y.useState)(!1),{toast:n}=or();return(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Manage Your Product Catalog"}),(0,be.jsx)($s,{children:"Set up products and prices in Stripe to offer to your customers"})]}),(0,be.jsxs)(Ms,{className:"space-y-4",children:[(0,be.jsxs)(We,{children:[(0,be.jsx)(Xd.A,{className:"h-4 w-4"}),(0,be.jsx)(Ye,{children:"Optional Step"}),(0,be.jsx)(Ge,{children:"Create products in the Stripe dashboard to offer one-time purchases or subscriptions to your customers. This step is optional, but recommended if you want to offer paid content."})]}),(0,be.jsxs)("div",{className:"p-4 bg-muted/20 rounded-lg",children:[(0,be.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Instructions"}),(0,be.jsxs)("ol",{className:"space-y-2 text-sm text-muted-foreground list-decimal pl-5",children:[(0,be.jsx)("li",{children:"Go to the Stripe Dashboard by clicking the button below"}),(0,be.jsx)("li",{children:'Navigate to "Products" in the sidebar'}),(0,be.jsx)("li",{children:"Create new products with appropriate pricing"}),(0,be.jsx)("li",{children:"For subscriptions, set up recurring prices with the desired interval"}),(0,be.jsx)("li",{children:"Return here and refresh your product catalog when complete"})]})]})]}),(0,be.jsxs)(Fs,{className:"flex justify-between",children:[(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>window.open("https://dashboard.stripe.com/account","_blank"),children:[(0,be.jsx)(Da.A,{className:"mr-2 h-4 w-4"}),"Open Stripe Dashboard"]}),(0,be.jsx)(Ze,{onClick:async()=>{r(!0);try{await Wo.refreshProductCatalog(s.id),n({title:"Success",description:"Product catalog refreshed successfully",variant:"success"})}catch(e){n({variant:"destructive",title:"Error",description:"Failed to refresh product catalog"})}finally{r(!1)}},disabled:a,children:a?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)($l.A,{className:"mr-2 h-4 w-4"}),"Refresh Product Catalog"]})})]})]}),(0,be.jsxs)(Ds,{children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{children:"Current Product Catalog"}),(0,be.jsx)($s,{children:"Products and prices available for your apps"})]}),(0,be.jsx)(Ms,{children:(0,be.jsx)(Yo,{integrationInstance:s})}),(0,be.jsx)(Fs,{className:"flex justify-end",children:(0,be.jsx)(Ze,{onClick:t,children:"Continue to Next Step"})})]})]})}var em=t(56150),sm=t(2999);function tm(){const e=(0,J.Zp)();return(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsxs)("div",{className:"flex items-start justify-between",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)(Us,{children:"Stripe Integration Complete"}),(0,be.jsx)($s,{children:"Your Stripe integration is ready to use with your apps"})]}),(0,be.jsx)("div",{className:"p-1.5 rounded-full bg-green-100",children:(0,be.jsx)(em.A,{className:"h-5 w-5 text-green-600"})})]})}),(0,be.jsx)(Ms,{children:(0,be.jsxs)(Ta,{defaultValue:"navigation",children:[(0,be.jsxs)(Ea,{className:"grid w-full grid-cols-2",children:[(0,be.jsx)(Ia,{value:"navigation",children:"Navigation Instructions"}),(0,be.jsx)(Ia,{value:"code",children:"Code Integration"})]}),(0,be.jsxs)(Pa,{value:"navigation",className:"space-y-4 mt-4",children:[(0,be.jsxs)("div",{className:"p-4 bg-muted/20 rounded-lg space-y-4",children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"How to Use Your Stripe Integration"}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h4",{className:"text-sm font-medium",children:"1. Navigate to an App"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Go to your app dashboard and select the app you want to add payment functionality to."})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h4",{className:"text-sm font-medium",children:"2. Go to the Payments Tab"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:'Open the app editor and click on the "Payments" tab in the sidebar.'})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h4",{className:"text-sm font-medium",children:"3. Connect Your Stripe Account"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:'Click "Connect Payments" to link your Stripe account to the app.'})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h4",{className:"text-sm font-medium",children:"4. Use the Product Catalog"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Once connected, use your Stripe products and prices in the app through the Product Catalog interface."})]})]}),(0,be.jsx)("div",{className:"flex justify-end",children:(0,be.jsxs)(Ze,{onClick:()=>e("/apps"),children:["Go to My Apps ",(0,be.jsx)($a.A,{className:"ml-2 h-4 w-4"})]})})]}),(0,be.jsx)(Pa,{value:"code",className:"space-y-4 mt-4",children:(0,be.jsxs)("div",{className:"p-4 bg-muted/20 rounded-lg space-y-4",children:[(0,be.jsx)("h3",{className:"text-sm font-medium",children:"Code Integration"}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h4",{className:"text-sm font-medium",children:"Using the API"}),(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Access your Stripe integration programmatically by making API calls to create checkout sessions, access product catalogs, or check purchase history."})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("h4",{className:"text-sm font-medium",children:"Example: Create a Checkout Session"}),(0,be.jsx)("pre",{className:"p-3 bg-muted/40 rounded-md text-xs overflow-x-auto",children:(0,be.jsx)("code",{children:"// Example API call\nconst createCheckout = async (priceId) => {\n  try {\n    const response = await fetch('/api/integrations/stripe/{account_id}/create-checkout-session', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        price_id: priceId,\n        quantity: 1,\n        success_url: window.location.origin + '/success',\n        cancel_url: window.location.origin + '/cancel'\n      })\n    });\n    \n    const data = await response.json();\n    window.location.href = data.checkout_url;\n  } catch (error) {\n    console.error('Error creating checkout session:', error);\n  }\n}"})})]})]})})]})}),(0,be.jsxs)(Fs,{className:"flex justify-between",children:[(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>window.open("https://stripe.com/docs","_blank"),children:[(0,be.jsx)(sm.A,{className:"mr-2 h-4 w-4"}),"Stripe Documentation"]}),(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>window.open("https://dashboard.stripe.com","_blank"),children:[(0,be.jsx)(sa.A,{className:"mr-2 h-4 w-4"}),"Stripe Dashboard"]})]})]})}var am=t(44153);function rm(e){let{currentStep:s,totalSteps:t}=e;return(0,be.jsx)("div",{className:"flex items-center justify-center my-6",children:(0,be.jsx)("div",{className:"flex items-center",children:Array.from({length:t}).map(((e,a)=>(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsxs)("div",{className:"flex flex-col items-center",children:[(0,be.jsx)("div",{className:"rounded-full flex items-center justify-center h-8 w-8 "+(a<s?"bg-green-100 text-green-600":a===s?"bg-blue-100 text-blue-600 border border-blue-300":"bg-muted text-muted-foreground"),children:a<s?(0,be.jsx)(ba.A,{className:"h-5 w-5"}):a===s?(0,be.jsx)(us.A,{className:"h-5 w-5"}):(0,be.jsx)(am.A,{className:"h-5 w-5"})}),(0,be.jsxs)("span",{className:"text-xs mt-1 font-medium",children:["Step ",a+1]})]}),a<t-1&&(0,be.jsx)("div",{className:"h-px w-8 "+(a<s?"bg-green-400":"bg-muted-foreground/30")})]},a)))})})}function nm(e){let{account:s,onAccountDeleted:t}=e;const[a,r]=(0,Y.useState)(!1),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(null),{toast:c}=or();return(0,be.jsxs)(Ds,{className:"border-destructive/20 bg-destructive/5",children:[(0,be.jsxs)(Ls,{children:[(0,be.jsx)(Us,{className:"text-destructive",children:"Delete Stripe Integration"}),(0,be.jsx)($s,{children:"Permanently remove this Stripe integration from your account"})]}),(0,be.jsx)(Ms,{children:(0,be.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deleting this integration will remove all configuration and connection to your Stripe account. This action cannot be undone. Your Stripe account will remain intact but will no longer be connected to this platform."})}),(0,be.jsx)(Fs,{children:(0,be.jsxs)(jt,{open:n,onOpenChange:i,children:[(0,be.jsx)(bt,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"destructive",children:[(0,be.jsx)(Sl.A,{className:"mr-2 h-4 w-4"}),"Delete Integration"]})}),(0,be.jsxs)(wt,{children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Are you sure you want to delete this Stripe integration?"}),(0,be.jsx)(At,{children:"This action cannot be undone. This will permanently delete the integration and remove its data from our servers."})]}),l&&(0,be.jsxs)(We,{variant:"destructive",children:[(0,be.jsx)(Cl.A,{className:"h-4 w-4"}),(0,be.jsx)(Ge,{children:l})]}),(0,be.jsxs)(St,{children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>i(!1),disabled:a,children:"Cancel"}),(0,be.jsx)(Ze,{variant:"destructive",onClick:async()=>{r(!0),o(null);try{await Wo.deleteAccount(s.id),c({title:"Account Deleted",description:"Your Stripe integration has been successfully deleted.",variant:"success"}),i(!1),t&&t()}catch(l){var e,a;const t=(null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to delete Stripe account. Please try again.";o(t),c({variant:"destructive",title:"Error",description:"Failed to delete Stripe account"})}finally{r(!1)}},disabled:a,children:a?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete Integration"})]})]})]})})]})}function im(){const{user:e}=Ne(),[s,t]=(0,Y.useState)(!0),[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(0),[l,o]=(0,Y.useState)(null),{toast:c}=or(),d=(0,J.Zp)();(0,Y.useEffect)((()=>{(async()=>{try{t(!0);const e=await Wo.getAccount();e?(r(e),i(1)):i(0)}catch(l){o("Failed to load Stripe account information"),c({variant:"destructive",title:"Error",description:"Failed to load Stripe account information"})}finally{t(!1)}})()}),[c]);const m=e=>{r(e),i(1)},u=()=>{i(2)},h=()=>{i(3)};if("builder"!==e.subscription_tier&&"pro"!==e.subscription_tier&&"elite"!==e.subscription_tier&&"elite_2"!==e.subscription_tier&&"elite_3"!==e.subscription_tier&&"enterprise"!==e.subscription_tier)return(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Stripe Integration"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-2",children:"Set up Stripe to accept payments in your apps"})]}),(0,be.jsxs)(We,{children:[(0,be.jsx)(Ye,{children:"Subscription Required"}),(0,be.jsx)(Ge,{children:"Stripe integration is currently available only for Pro and Enterprise users. Please upgrade your subscription to access this feature."})]}),(0,be.jsx)("div",{className:"mt-4",children:(0,be.jsx)(Ze,{onClick:()=>d("/billing"),children:"Upgrade Subscription"})})]});return s?(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Stripe Integration"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-2",children:"Set up Stripe to accept payments in your apps"})]}),(0,be.jsx)("div",{className:"flex justify-center items-center p-12",children:(0,be.jsx)(Ae.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):l?(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Stripe Integration"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-2",children:"Set up Stripe to accept payments in your apps"})]}),(0,be.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4 mb-4",children:(0,be.jsxs)("div",{className:"flex items-start",children:[(0,be.jsx)(Cl.A,{className:"h-5 w-5 text-amber-500 mt-0.5 mr-3"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-amber-800",children:"Something went wrong"}),(0,be.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:[l,". Refreshing the page might help resolve this issue."]})]})]})}),(0,be.jsx)("div",{className:"mt-4",children:(0,be.jsx)(Ze,{onClick:()=>window.location.reload(),children:"Refresh Page"})})]}):(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Stripe Integration"}),(0,be.jsx)("p",{className:"text-muted-foreground mt-2",children:"Set up Stripe to accept payments in your apps"})]}),n>0&&(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>i(Math.max(0,n-1)),children:[(0,be.jsx)(Xr.A,{className:"mr-2 h-4 w-4"}),"Back"]})]}),(0,be.jsx)(rm,{currentStep:n,totalSteps:4}),(()=>{switch(n){case 0:default:return(0,be.jsx)(Kd,{onAccountCreated:m});case 1:return(0,be.jsx)(Zd,{account:a,onAccountVerified:u});case 2:return(0,be.jsx)(Qd,{account:a,onContinue:h});case 3:return(0,be.jsx)(tm,{})}})(),a&&(0,be.jsx)("div",{className:"mt-8",children:(0,be.jsx)(nm,{account:a,onAccountDeleted:()=>{r(null),i(0),c({title:"Account Deleted",description:"Your Stripe integration has been successfully removed.",variant:"success"})}})})]})}function lm(){return(0,be.jsx)("div",{className:"p-9",children:(0,be.jsx)(Gd,{children:"\n\n**Base44 Responsible Use Policy**\n\nLast Updated: March 23, 2025  \n\nThis Responsible Use Policy (\u201c**RUP**\u201d) supplements the Base44 Terms of Service, or any other agreement or order form between Base44, Inc. or its affiliates (\u201c**Base44**\u201d) and you, being any Customer or User thereof (\u201c**you**\u201d), governing the use of Base44\u2019s Platform, Website, the Generated Output or other products and services (each of the foregoing, together and separately, the \u201c**Agreement\u201d**). The RUP applies to your access and use of the Platform, Customer Data (including the Input Data you provide to the Platform and the Generated Output created on its basis), whether as part of your Platform or your use of Generated Output outside of it. Capitalized but undefined terms used in the RUP have the meanings set forth in your applicable Agreement with Base44.\n\nYou will not share with the Platform any Input Data that, nor knowingly use the Platform to generate any Generated Output or use or make available to others any Generated Output:\n\n1. That in any way violates any applicable national, federal, state, local or international law or regulation;\n2. Generating and distributing spam in violation of the CAN-SPAM Act of 2003 and other applicable laws;\n3. For the purpose of exploiting, harming or attempting to exploit or harm minors in any way;\n4. Contains pornographic, sexually explicit, or adult content;\n5. To generate or disseminate verifiably false, misleading or deceptive information and/or content (including with regard to medicine, health and science);\n6. To generate or disseminate personal identifiable information that can be used to harm an individual;\n7. To generate or disseminate information and/or content (e.g. images, code, posts, articles), and place the information and/or content in any context (e.g. bot generating tweets) without expressly and intelligibly disclaiming that the information and/or content is machine generated;\n8. To defame, disparage, cyber-bully or otherwise harass others, or encourage self-harm or harm to others;\n9. To impersonate or attempt to impersonate (e.g. deepfakes) others without their consent;\n10. For fully automated decision making that adversely impacts an individual\u2019s legal rights or otherwise creates or modifies a binding, enforceable obligation;\n11. For any use intended to or which has the effect of discriminating against or harming individuals or groups based on online or offline social behavior or known or predicted personal or personality characteristics, or in a manner that is obscene, violent, hateful, racist or discriminatory or is otherwise offensive;\n12. To exploit any of the vulnerabilities of a specific group of persons based on their age, social, physical or mental characteristics, in order to materially distort the behavior of a person pertaining to that group in a manner that causes or is likely to cause that person or another person physical or psychological harm;\n13. For any use intended to or which has the effect of discriminating against individuals or groups based on legally protected characteristics or categories;\n14. To engage in political lobbying or campaigns to actively influence the decisions of government officials, legislators, or regulatory agencies on legislative, regulatory, or policy matters;\n15. To provide medical advice and medical results interpretation, or promote pharmaceutical or medical products and services, without having the qualifications, licenses and permits required by applicable law;\n16. To engage in and promote regulated services and professions, and/or deliver any regulated products or services, including but not limited to legal and accounting services, investment advice, insurance, banking and securities, without having the qualifications, licenses and permits required by applicable law;\n17. To generate or disseminate information for the purpose to be used for administration of justice, law enforcement, immigration or asylum processes, such as predicting an individual will commit fraud/crime commitment (e.g. by text profiling, drawing causal relationships between assertions made in documents, indiscriminate and arbitrarily-targeted use);\n18. To infringe, violate or misappropriate any patent, trademark, trade secret, copyright, or other intellectual property or other proprietary rights of any other person;\n19. To transmit or otherwise makes available any malicious code, including any virus, worm, trojan horse, time bomb, web bug, spyware, or any other malicious or harmful computer code, library, file, or program;\n20. To circumvent the technical and other safeguards set out by Base44 or our Third- Party Service providers meant to ensure adherence with the RUP and such Third- Party Service providers' equivalent usage policies, as applicable.\n\nTo the extent the Platform or Generated Output generate Generated Output containing any of the above, you will notify us in writing without undue delay upon becoming aware of it.\n\nEnforcing the RUP, including the determination whether a violation occurred and determining its severity, is at Baser44\u2019s sole and complete discretion, and failure to enforce it in one instance does not constitute a waiver to enforce it in any other instances.\n\nYou will promptly cease use of any Customer Data, Input Data or Generated Output violating this RUP, and Base44 has the right to promptly remove or delete any violating Customer Data, remove violating Generated Output from the Platform and Website in its sole discretion or modify the Platform to ensure compliance with the RUP and applicable law.\n\n"})})}var om=t(95445),cm=t(97162);const dm=e=>{var s,t;let{item:a,onSelect:r,onUpvote:n}=e;const{item:i,upvotes:l,did_current_user_upvote:o,is_user_the_owner:c}=a,d=!("pending"===i.status&&!i.is_private&&!c),m=`\n        h-full overflow-hidden transition-all duration-200 \n        bg-white flex flex-col border \n        ${d?"hover:shadow-md hover:border-blue-300 cursor-pointer":"border-dashed border-slate-300 bg-slate-50 opacity-70 cursor-not-allowed"}\n    `;return(0,be.jsxs)(Ds,{className:m,onClick:d?()=>{("pending"!==i.status||i.is_private||c)&&r(i.id)}:void 0,children:[(0,be.jsx)(Ls,{className:"pb-2 px-4 pt-4",children:(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,be.jsxs)(ot,{className:"h-10 w-10 ring-1 ring-offset-1 ring-slate-100 flex-shrink-0",children:[(0,be.jsx)(ct,{src:i.image_url,alt:i.name,className:"object-contain"}),(0,be.jsx)(dt,{className:"bg-gradient-to-br from-blue-100 to-teal-100 text-teal-700 text-sm font-medium",children:(null===(s=i.name)||void 0===s||null===(t=s.charAt(0))||void 0===t?void 0:t.toUpperCase())||"I"})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)(Us,{className:"text-base font-semibold line-clamp-1 text-slate-800",children:i.name}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[i.official&&(0,be.jsxs)(Os,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 px-1.5 py-0 h-5 font-normal",children:[(0,be.jsx)(om.A,{className:"h-3 w-3 mr-0.5"}),(0,be.jsx)("span",{className:"text-xs",children:"Official"})]}),i.is_private&&(0,be.jsxs)(Os,{variant:"outline",className:"bg-slate-100 text-slate-700 border-slate-200 px-1.5 py-0 h-5 font-normal",children:[(0,be.jsx)(kn.A,{className:"h-3 w-3 mr-0.5"}),(0,be.jsx)("span",{className:"text-xs",children:"Private"})]}),"pending"===i.status&&!i.is_private&&(0,be.jsxs)(Os,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200 px-1.5 py-0 h-5 font-normal",children:[(0,be.jsx)(Ys.A,{className:"h-3 w-3 mr-0.5"}),(0,be.jsx)("span",{className:"text-xs",children:"Pending Review"})]})]})]})]})}),(0,be.jsx)(Ms,{className:"pb-3 px-4 flex-1",children:(0,be.jsx)("div",{className:"h-[60px] overflow-hidden",children:(0,be.jsx)("p",{className:"text-sm text-slate-600 line-clamp-3",children:i.description||"No description provided."})})}),(0,be.jsx)(Fs,{className:"border-t border-slate-100 px-4 py-2 flex justify-end items-center bg-slate-50/50 mt-auto",children:(0,be.jsx)(Qe,{delayDuration:100,children:(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:o?"secondary":"ghost",size:"sm",className:"flex items-center gap-1 text-xs px-2 py-0 h-6 rounded-md "+(o?"bg-teal-100 text-teal-700 hover:bg-teal-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-200"),onClick:e=>{e.stopPropagation(),n(i.id)},disabled:!d,children:[(0,be.jsx)(cm.A,{className:"h-3.5 w-3.5 "+(o?"text-teal-600 fill-current":"")}),(0,be.jsx)("span",{className:"font-medium",children:l||0})]})}),(0,be.jsx)(ts,{side:"bottom",className:"text-xs",children:d?(0,be.jsx)("p",{children:o?"You upvoted this":"Upvote this integration"}):(0,be.jsx)("p",{children:"Cannot upvote pending integrations"})})]})})})]})},mm=e=>{let{onSelectItem:s,onUpvoteItem:t}=e;const[a,r]=(0,Y.useState)([]),[n,i]=(0,Y.useState)(!0),[l,o]=(0,Y.useState)(null),[c,d]=(0,Y.useState)(""),[m,u]=(0,Y.useState)("most-upvoted");(0,Y.useEffect)((()=>{h()}),[]);const h=async()=>{try{i(!0),o(null);const e=await Is.listCatalogItems();r(e||[])}catch(e){o("Failed to load catalog items. Please try again."),r([])}finally{i(!1)}},x=async e=>{const s=a.findIndex((s=>s.item.id===e));if(-1===s||a[s].isUpvoting)return;const n=[...a];r((s=>s.map((s=>s.item.id===e?{...s,upvotes:(s.upvotes||0)+1,isUpvoting:!0}:s))));try{await Is.upvoteItem(e),t&&t(e),r((s=>s.map((s=>s.item.id===e?{...s,isUpvoting:!1}:s))))}catch(i){r(n)}},p=[...a.filter((e=>{var s;const t=c.toLowerCase();return e.item.name.toLowerCase().includes(t)||e.item.description.toLowerCase().includes(t)||((null===(s=e.user_info)||void 0===s?void 0:s.email)||e.item.owner_email||"").toLowerCase().includes(t)}))].sort(((e,s)=>{switch(m){case"newest":return new Date(s.item.created_at)-new Date(e.item.created_at);case"oldest":return new Date(e.item.created_at)-new Date(s.item.created_at);case"most-upvoted":return(s.upvotes||0)-(e.upvotes||0);default:return 0}}));return(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,be.jsxs)("div",{className:"relative flex-1",children:[(0,be.jsx)(Lt.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),(0,be.jsx)(is,{placeholder:"Search integrations by name, description, or owner...",className:"pl-10 border-slate-200 h-9",value:c,onChange:e=>d(e.target.value)})]}),(0,be.jsxs)("div",{className:"md:w-48 flex items-center gap-2",children:[(0,be.jsx)(Oc.A,{className:"text-slate-400 h-4 w-4"}),(0,be.jsxs)(bs,{value:m,onValueChange:u,children:[(0,be.jsx)(Ns,{className:"border-slate-200 h-9 text-sm",children:(0,be.jsx)(ys,{placeholder:"Sort by"})}),(0,be.jsxs)(Ss,{children:[(0,be.jsx)(As,{value:"most-upvoted",children:"Most upvoted"}),(0,be.jsx)(As,{value:"newest",children:"Newest first"}),(0,be.jsx)(As,{value:"oldest",children:"Oldest first"})]})]})]})]}),n?(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[(0,be.jsx)(Ae.A,{className:"h-10 w-10 text-teal-600 animate-spin mb-3"}),(0,be.jsx)("p",{className:"text-slate-500 text-sm",children:"Loading integrations..."})]}):l?(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-center p-4 border border-red-200 bg-red-50 rounded-lg",children:[(0,be.jsx)("div",{className:"text-red-600 text-lg font-medium mb-2",children:"\u26a0\ufe0f Error"}),(0,be.jsx)("p",{className:"text-red-500 text-sm mb-4",children:l}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:h,className:"text-red-600 border-red-300 hover:bg-red-100",children:"Try Again"})]}):p.length>0?(0,be.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:p.map((e=>(0,be.jsx)(dm,{item:e,onSelect:()=>s(e.item.id),onUpvote:x},e.item.id)))}):(0,be.jsxs)("div",{className:"text-center p-12 border rounded-lg bg-slate-50",children:[(0,be.jsx)("div",{className:"text-slate-400 mb-3",children:(0,be.jsx)(Lt.A,{className:"h-12 w-12 mx-auto"})}),(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-700 mb-1",children:"No matching integrations found"}),(0,be.jsx)("p",{className:"text-slate-500 text-sm",children:"Try adjusting your search or filter settings."})]})]})},um=()=>{const e=(0,J.Zp)(),{user:s}=Ne();s&&s.platform_role;return(0,be.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,be.jsx)("div",{className:"bg-gradient-to-r from-teal-50 to-blue-50 p-8 rounded-xl mb-8 border border-teal-100",children:(0,be.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 mb-2",children:"Integrations Catalog"}),(0,be.jsxs)("p",{className:"text-slate-600 max-w-2xl",children:["Browse and discover pre-built integrations that extend your application's capabilities. Connect to APIs, services, and tools with just a few clicks.",(0,be.jsx)("br",{}),(0,be.jsx)("span",{className:"ml-1 text-teal-700 font-medium",children:"Create and publish your own integration to earn 250 credits when approved!"})]})]}),(0,be.jsxs)(Ze,{onClick:()=>{e("/integrations-catalog/editor")},className:"bg-teal-600 hover:bg-teal-700 shadow-sm",size:"lg",children:[(0,be.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Create Integration"]})]})}),(0,be.jsx)(mm,{onSelectItem:s=>{e(`/integrations-catalog/item/${s}`)}})]})};var hm=t(32369),xm=t(11464),pm=t(68432);const gm=()=>{const{itemId:e}=(0,J.g)(),s=(0,J.Zp)(),{user:t}=Ne(),{toast:a}=qn(),[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)(!0),[o,c]=(0,Y.useState)(null),[d,m]=(0,Y.useState)("details"),[u,h]=(0,Y.useState)(!1),[x,p]=(0,Y.useState)(!1),[g,f]=(0,Y.useState)(!1),[j,b]=(0,Y.useState)(!1),[v,y]=(0,Y.useState)(!1),[N,w]=(0,Y.useState)(""),[C,S]=(0,Y.useState)(!1),k=t&&"platform_admin"===t.platform_role,A=t&&("free"===t.subscription_tier||"starter"===t.subscription_tier);(0,Y.useEffect)((()=>{_()}),[e]);const _=async()=>{try{l(!0);const s=await Is.getCatalogItem(e);n(s),l(!1)}catch(s){c("Failed to load item details"),l(!1)}};if(i)return(0,be.jsx)("div",{className:"flex items-center justify-center min-h-[500px]",children:(0,be.jsxs)("div",{className:"relative h-12 w-12",children:[(0,be.jsx)("div",{className:"absolute border-4 border-solid border-gray-200 rounded-full h-12 w-12"}),(0,be.jsx)("div",{className:"absolute border-4 border-solid border-gray-900 rounded-full h-12 w-12 border-t-transparent animate-spin"})]})});if(o)return(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center p-4",children:[(0,be.jsxs)("div",{className:"text-red-500 text-xl font-semibold mb-2",children:["\u26a0\ufe0f ",o]}),(0,be.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",onClick:_,children:"Try Again"})]});if(!r)return null;const{item:T,upvotes:E,did_current_user_upvote:I,is_user_the_owner:P}=r,R="approved"!==T.status,O=T.required_secrets&&T.required_secrets.length>0,D=T.requires_backend_functions&&A;return(0,be.jsxs)("div",{className:"max-w-6xl mx-auto p-4 mb-16",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,be.jsxs)(Ze,{variant:"ghost",onClick:()=>{s("/integrations-catalog")},className:"flex items-center gap-2 hover:bg-slate-100",children:[(0,be.jsx)(Xr.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Back to Catalog"})]}),(0,be.jsxs)("div",{className:"flex gap-2",children:[P&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{s(`/integrations-catalog/editor/${e}`)},className:"text-slate-700",children:[(0,be.jsx)(ta.A,{className:"h-4 w-4 mr-1.5"}),"Edit"]}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:async()=>{try{y(!0),await Is.update(e,{is_private:!T.is_private}),a({title:"Success",description:T.is_private?"Integration is now public":"Integration is now private"}),_()}catch(s){a({title:"Error",description:"Failed to update integration privacy setting",variant:"destructive"})}finally{y(!1)}},disabled:v,className:T.is_private?"text-blue-600 border-blue-200 hover:bg-blue-50":"text-green-600 border-green-200 hover:bg-green-50",children:v?(0,be.jsx)(be.Fragment,{children:"Loading..."}):T.is_private?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Zs.A,{className:"h-4 w-4 mr-1.5"}),"Make Public"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(kn.A,{className:"h-4 w-4 mr-1.5"}),"Make Private"]})}),(0,be.jsxs)(jt,{open:C,onOpenChange:S,children:[(0,be.jsx)(bt,{asChild:!0,children:(0,be.jsxs)(Ze,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[(0,be.jsx)(jc.A,{className:"h-4 w-4 mr-1.5"}),"Invite Admin"]})}),(0,be.jsxs)(wt,{className:"sm:max-w-[425px]",children:[(0,be.jsxs)(Ct,{children:[(0,be.jsx)(kt,{children:"Invite User"}),(0,be.jsx)(At,{children:"Invite a user to edit and administer this catalog item"})]}),(0,be.jsx)("div",{className:"grid gap-4 py-4",children:(0,be.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,be.jsx)(ds,{htmlFor:"email",className:"text-right",children:"Email"}),(0,be.jsx)(is,{id:"email",type:"email",placeholder:"user@example.com",className:"col-span-3",value:N,onChange:e=>w(e.target.value)})]})}),(0,be.jsx)(St,{children:(0,be.jsx)(Ze,{onClick:async()=>{if(N&&N.includes("@"))try{b(!0),await Is.inviteAdmin(e,N),a({title:"Success",description:`Invitation sent to ${N}`}),w(""),S(!1)}catch(s){a({title:"Error",description:"Failed to send invitation",variant:"destructive"})}finally{b(!1)}else a({title:"Invalid email",description:"Please enter a valid email address",variant:"destructive"})},disabled:j||!N,className:"bg-teal-600 hover:bg-teal-700",children:j?"Sending...":"Send Invitation"})})]})]})]}),P&&(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:async()=>{try{p(!0),await Is.archiveItem(e),a({title:"Success",description:"Integration has been archived"}),s("/integrations-catalog")}catch(t){a({title:"Error",description:"Failed to archive integration",variant:"destructive"}),p(!1)}},disabled:x,className:"text-red-600 border-red-200 hover:bg-red-50",children:[(0,be.jsx)(hm.A,{className:"h-4 w-4 mr-1.5"}),x?"Archiving...":"Archive"]})]})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,be.jsx)("div",{className:"md:col-span-2",children:(0,be.jsx)("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-teal-50 px-8 py-6 border-b",children:(0,be.jsxs)("div",{className:"flex gap-5 items-center",children:[(0,be.jsx)("div",{className:"h-20 w-20 rounded-xl border-2 border-white shadow-sm flex-shrink-0 overflow-hidden",children:T.image_url?(0,be.jsx)("img",{src:T.image_url,alt:T.name,className:"h-full w-full object-contain",onError:e=>{e.target.src="",e.target.alt=""}}):(0,be.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-blue-100 to-teal-100 flex items-center justify-center",children:(0,be.jsx)("span",{className:"text-teal-600 text-xl font-semibold",children:T.name.charAt(0).toUpperCase()})})}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[(0,be.jsx)("h1",{className:"text-3xl font-bold text-slate-800",children:T.name}),(0,be.jsxs)("div",{className:"flex gap-1.5",children:[T.official&&(0,be.jsxs)(Os,{className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:[(0,be.jsx)(om.A,{className:"h-3 w-3 mr-1"}),"Official"]}),R&&(0,be.jsx)(Os,{className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:"Pending Approval"})]})]}),(0,be.jsxs)("div",{className:"flex items-center text-sm text-slate-600 gap-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)(Ys.A,{className:"h-4 w-4 text-slate-400"}),(0,be.jsxs)("span",{children:["Added ",T.created_at?it().utc(T.created_at).fromNow():"recently"]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)(xm.A,{className:"h-4 w-4 text-slate-400"}),(0,be.jsx)("span",{children:T.requires_backend_functions?"Backend functions":"No backend functions"})]}),(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",onClick:async()=>{try{await Is.upvoteItem(e),_()}catch(s){}},className:"flex items-center gap-1 text-sm px-2.5 py-1 h-7 "+(I?"bg-teal-50 text-teal-700 hover:bg-teal-100":"text-slate-600"),children:[(0,be.jsx)(cm.A,{className:"h-3.5 w-3.5 "+(I?"text-teal-600 fill-teal-200":"")}),(0,be.jsx)("span",{children:E})]})]})]})]})}),(0,be.jsxs)("div",{className:"p-8",children:[(0,be.jsx)("p",{className:"text-slate-600 text-base leading-relaxed mb-6",children:T.description}),T.example_asks&&T.example_asks.length>0&&(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Example Prompts:"}),(0,be.jsx)("div",{className:"flex flex-wrap gap-2",children:T.example_asks.map(((e,s)=>(0,be.jsx)(Os,{variant:"outline",className:"bg-slate-50 text-slate-700 border-slate-200 px-3 py-1",children:e},s)))})]}),(0,be.jsxs)(Ta,{defaultValue:"details",className:"mt-6",children:[(0,be.jsxs)(Ea,{className:"bg-slate-100 p-0.5",children:[(0,be.jsx)(Ia,{value:"details",className:"text-sm rounded-md data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Details"}),O&&(0,be.jsx)(Ia,{value:"requirements",className:"text-sm rounded-md data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Requirements"}),(0,be.jsx)(Ia,{value:"prompt",className:"text-sm rounded-md data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Instructions Set"})]}),(0,be.jsx)(Pa,{value:"details",className:"mt-4 overflow-hidden",children:(0,be.jsx)(Ds,{className:"border-slate-200",children:(0,be.jsxs)(Ms,{className:"p-4",children:[(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-800 mb-3",children:"Integration Details"}),(0,be.jsxs)("div",{className:"space-y-3",children:[T.requires_backend_functions&&(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-50 flex items-center justify-center flex-shrink-0",children:(0,be.jsx)(xm.A,{className:"h-4 w-4 text-blue-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"font-medium text-slate-800",children:"Backend Functions"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:"This integration requires server-side functionality."})]})]}),k&&(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsx)("div",{className:"h-8 w-8 rounded-full bg-purple-50 flex items-center justify-center flex-shrink-0",children:(0,be.jsx)(ai.A,{className:"h-4 w-4 text-purple-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"font-medium text-slate-800",children:"Admin Actions"}),(0,be.jsx)("div",{className:"mt-2",children:R&&(0,be.jsxs)(Ze,{onClick:async()=>{try{h(!0),await Is.approveItem(e),a({title:"Success",description:"Integration has been approved"}),_()}catch(s){a({title:"Error",description:"Failed to approve integration",variant:"destructive"})}finally{h(!1)}},disabled:u,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,be.jsx)(Ll.A,{className:"h-4 w-4 mr-1.5"}),u?"Approving...":"Approve Integration"]})})]})]})]})]})})}),O&&(0,be.jsx)(Pa,{value:"requirements",className:"mt-4 overflow-hidden",children:(0,be.jsx)(Ds,{className:"border-slate-200",children:(0,be.jsxs)(Ms,{className:"p-4",children:[(0,be.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,be.jsx)("div",{className:"h-8 w-8 rounded-full bg-amber-50 flex items-center justify-center flex-shrink-0",children:(0,be.jsx)(cr.A,{className:"h-4 w-4 text-amber-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-800 mb-1",children:"Required API Keys"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:"You'll need these credentials to use this integration"})]})]}),(0,be.jsx)("div",{className:"space-y-3 mt-4",children:T.required_secrets.map(((e,s)=>(0,be.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,be.jsx)("h4",{className:"font-medium text-slate-800",children:e.name}),(0,be.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:e.description||"Required for this integration to work properly."})]},s)))})]})})}),(0,be.jsx)(Pa,{value:"prompt",className:"mt-4 overflow-hidden",children:(0,be.jsx)(Ds,{className:"border-slate-200",children:(0,be.jsxs)(Ms,{className:"p-4",children:[(0,be.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,be.jsx)("div",{className:"h-8 w-8 rounded-full bg-teal-50 flex items-center justify-center flex-shrink-0",children:(0,be.jsx)(pm.A,{className:"h-4 w-4 text-teal-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-800 mb-1",children:"Instructions Set"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:"These instructions will be injected into Base44's AI when this integration is used"})]})]}),(0,be.jsx)("div",{className:"bg-blue-50 border border-blue-100 rounded-md p-3 mb-4",children:(0,be.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,be.jsx)("strong",{children:"How this works:"})," When you use this integration, these instructions are automatically injected into Base44's AI system, enabling it to perform the specific tasks defined here."]})}),(0,be.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mt-4 overflow-auto max-h-[500px]",children:T.prompt?(0,be.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-slate-700 font-mono",children:T.prompt}):(0,be.jsx)("p",{className:"text-slate-500 italic",children:"No instructions set available for this integration."})})]})})})]})]})]})})}),(0,be.jsx)("div",{className:"md:col-span-1",children:(0,be.jsxs)("div",{className:"bg-white rounded-xl border shadow-sm p-6 sticky top-4",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Get Started"}),D?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)(Ze,{size:"lg",className:"w-full bg-slate-200 text-slate-500 cursor-not-allowed mb-3",disabled:!0,children:[(0,be.jsx)(rt.A,{className:"h-5 w-5 mr-2"}),"Use this integration"]}),(0,be.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-3",children:(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsx)(Te.A,{className:"h-5 w-5 text-amber-600 flex-shrink-0"}),(0,be.jsx)("p",{className:"text-sm text-amber-800",children:"This integration requires backend functions, a feature available only on Builder tier and above."})]})})]}):(0,be.jsxs)(Ze,{onClick:()=>{s(`/?integrations=${e}`)},size:"lg",className:"w-full bg-teal-600 hover:bg-teal-700 text-white mb-3",children:[(0,be.jsx)(rt.A,{className:"h-5 w-5 mr-2"}),"Use this integration"]}),(0,be.jsx)("p",{className:"text-sm text-slate-600 mb-6",children:"Add this integration to your project or create a new one."}),(0,be.jsx)(Bs,{className:"bg-slate-200 my-6"}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm text-slate-600",children:"Integration Status"}),"approved"===T.status?(0,be.jsxs)(Os,{className:"bg-green-100 text-green-800",children:[(0,be.jsx)(Ll.A,{className:"h-3 w-3 mr-1"}),"Approved"]}):(0,be.jsx)(Os,{className:"bg-amber-100 text-amber-800",children:"Pending Approval"})]}),P&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm text-slate-600",children:"Ownership"}),(0,be.jsx)(Os,{className:"bg-blue-100 text-blue-800",children:"You"})]}),(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm text-slate-600",children:"Visibility"}),(0,be.jsx)(Os,{className:T.is_private?"bg-slate-100 text-slate-800":"bg-green-100 text-green-800",children:T.is_private?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(kn.A,{className:"h-3 w-3 mr-1"}),"Private"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Zs.A,{className:"h-3 w-3 mr-1"}),"Public"]})})]})]}),(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm text-slate-600",children:"Share"}),(0,be.jsx)(Ze,{variant:"outline",size:"sm",className:"h-8",onClick:async()=>{try{f(!0);const e=window.location.href;await navigator.clipboard.writeText(e),a({title:"Link copied",description:"Integration link has been copied to clipboard"}),setTimeout((()=>f(!1)),1e3)}catch(e){a({title:"Error",description:"Failed to copy link to clipboard",variant:"destructive"}),f(!1)}},disabled:g,children:g?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(js.A,{className:"h-4 w-4 mr-1.5 text-green-600"}),"Copied!"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ot.A,{className:"h-4 w-4 mr-1.5"}),"Copy Link"]})})]})]})]})})]})]})},fm=e=>{let{children:s}=e;return(0,be.jsx)(Qe,{children:(0,be.jsxs)(es,{delayDuration:300,children:[(0,be.jsx)(ss,{asChild:!0,children:(0,be.jsx)(Mr.A,{className:"h-4 w-4 text-slate-400 ml-1.5 cursor-help"})}),(0,be.jsx)(ts,{className:"max-w-xs p-3 text-xs",children:s})]})})},jm=()=>{const{itemId:e}=(0,J.g)(),s=(0,J.Zp)(),{toast:t}=qn(),a=!!e,[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)(!!e),[o,c]=(0,Y.useState)(!1),[d,m]=(0,Y.useState)(!1),[u,h]=(0,Y.useState)(null),[x,p]=(0,Y.useState)({name:"",description:"",prompt:"",image_url:"",example_asks:[],required_secrets:[],requires_backend_functions:!0,is_private:!1}),[g,f]=(0,Y.useState)("metadata"),[j,b]=(0,Y.useState)(""),[v,y]=(0,Y.useState)(""),[N,w]=(0,Y.useState)("");(0,Y.useEffect)((()=>{e?(async()=>{if(e)try{l(!0);const s=await Is.getCatalogItem(e);n(s);const t=s.item;p({name:t.name||"",description:t.description||"",prompt:t.prompt||"",image_url:t.image_url||"",example_asks:t.example_asks||[],required_secrets:t.required_secrets||[],requires_backend_functions:!1!==t.requires_backend_functions,is_private:t.is_private||!1})}catch(s){h("Failed to load integration. It may have been deleted or you may not have permission to view it.")}finally{l(!1)}})():l(!1)}),[e]);const C=e=>{const{name:s,value:t}=e.target;p((e=>({...e,[s]:t})))},S=(e,s)=>{p((t=>({...t,[e]:s})))},k=async r=>{if(r&&r.preventDefault(),x.name.trim()?x.description.trim()?!(x.prompt.trim().length<50&&(t({title:"Validation Error",description:"Integration prompt must be at least 50 characters",variant:"destructive"}),f("content"),1)):(t({title:"Validation Error",description:"Integration description is required",variant:"destructive"}),f("metadata"),0):(t({title:"Validation Error",description:"Integration name is required",variant:"destructive"}),f("metadata"),0)){c(!0),h(null);try{let r;if(a)await Is.update(e,x),r=e;else{r=(await Is.create(x)).id}t({title:"Success",description:a?"Integration updated successfully":"Integration created successfully"}),s(`/integrations-catalog/item/${r}`)}catch(n){h("Failed to save integration. Please try again."),t({title:"Error",description:"Failed to save integration. Please try again.",variant:"destructive"}),c(!1)}}},A=()=>{s("/integrations-catalog")};return i?(0,be.jsxs)("div",{className:"flex items-center justify-center h-[80vh]",children:[(0,be.jsx)(Ae.A,{className:"h-8 w-8 text-teal-600 animate-spin"}),(0,be.jsx)("span",{className:"ml-2 text-lg text-slate-700",children:"Loading integration..."})]}):u&&e&&!x.name?(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center h-[80vh]",children:[(0,be.jsx)("div",{className:"text-red-500 text-lg mb-4",children:u}),(0,be.jsx)(Ze,{onClick:A,className:"px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Return to Catalog"})]}):(0,be.jsxs)("div",{className:"max-w-screen-xl mx-auto px-4 py-8",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(Ze,{variant:"ghost",size:"icon",onClick:A,className:"h-10 w-10 rounded-full",children:(0,be.jsx)(Xr.A,{className:"h-5 w-5"})}),(0,be.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:a?"Edit Integration":"Create New Integration"})]}),(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:A,className:"px-4",children:"Cancel"}),(0,be.jsxs)(Ze,{onClick:k,disabled:o,className:"bg-teal-600 hover:bg-teal-700 px-4",children:[o?(0,be.jsx)(Ae.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,be.jsx)(Br.A,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Integration"]})]})]}),(0,be.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-lg p-4 mb-6 flex items-center",children:[(0,be.jsx)(Gs.A,{className:"h-5 w-5 text-amber-500 mr-3 flex-shrink-0"}),(0,be.jsxs)("p",{className:"text-amber-800",children:[(0,be.jsx)("span",{className:"font-semibold",children:"Earn 250 credits!"})," Create a public integration that gets approved and we'll reward you with 250 credits to your account."]})]}),u&&(0,be.jsx)(We,{variant:"destructive",className:"mb-6",children:(0,be.jsx)(Ge,{children:u})}),(0,be.jsx)("div",{className:"bg-white rounded-xl border shadow-sm overflow-hidden",children:(0,be.jsxs)(Ta,{value:g,onValueChange:f,className:"w-full",children:[(0,be.jsx)("div",{className:"px-6 pt-6 border-b",children:(0,be.jsxs)(Ea,{className:"grid w-full grid-cols-2 max-w-md",children:[(0,be.jsxs)(Ia,{value:"metadata",className:"flex items-center gap-2",children:[(0,be.jsx)(ra.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Integration Metadata"})]}),(0,be.jsxs)(Ia,{value:"content",className:"flex items-center gap-2",children:[(0,be.jsx)(sa.A,{className:"h-4 w-4"}),(0,be.jsx)("span",{children:"Integration Content"})]})]})}),(0,be.jsx)(Pa,{value:"metadata",className:"p-6 space-y-8",children:(0,be.jsxs)("div",{className:"grid gap-8 max-w-3xl mx-auto",children:[(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Integration Name"}),(0,be.jsx)(fm,{children:"A descriptive name for your integration that will be displayed in the catalog."})]}),(0,be.jsx)(is,{id:"name",name:"name",value:x.name,onChange:C,placeholder:"E.g., OpenAI Text-To-Speech",required:!0,className:"text-lg"})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Description"}),(0,be.jsx)(fm,{children:"A brief explanation of what this integration does and how it helps users."})]}),(0,be.jsx)(Na,{id:"description",name:"description",value:x.description,onChange:C,placeholder:"Describe what this integration does and how it can be useful...",rows:3,required:!0})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Integration Logo"}),(0,be.jsx)(fm,{children:"An image that represents your integration. Square images work best."})]}),(0,be.jsxs)("div",{className:"flex items-center gap-8",children:[x.image_url?(0,be.jsx)("div",{className:"w-32 h-32 rounded-lg overflow-hidden border shadow-sm flex-shrink-0",children:(0,be.jsx)("img",{src:x.image_url,alt:"Integration Logo",className:"h-full w-full object-cover",onError:e=>{e.target.src="",e.target.alt=""}})}):(0,be.jsxs)("div",{className:"w-32 h-32 rounded-lg border border-dashed flex-shrink-0 bg-slate-50 flex flex-col items-center justify-center",children:[(0,be.jsx)(Pe.A,{className:"h-8 w-8 text-slate-400 mb-2"}),(0,be.jsx)("p",{className:"text-xs text-slate-500 text-center px-2",children:"No logo uploaded"})]}),(0,be.jsxs)("div",{className:"flex-1 max-w-sm",children:[(0,be.jsx)("input",{type:"file",id:"logo-upload",className:"hidden",accept:"image/*",onChange:async e=>{const s=e.target.files[0];if(s)try{m(!0);const e=(await Ie.uploadFile(s)).url;p((s=>({...s,image_url:e})))}catch(t){h("Failed to upload logo. Please try again.")}finally{m(!1)}}}),(0,be.jsxs)(Ze,{type:"button",variant:x.image_url?"outline":"default",disabled:d,className:"w-full mb-3",onClick:()=>document.getElementById("logo-upload").click(),children:[(0,be.jsx)(Ui.A,{className:"h-4 w-4 mr-2"}),d?"Uploading...":x.image_url?"Change Logo":"Upload Logo"]}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"Upload a square image in PNG or JPG format (recommended size: 256\xd7256px)"})]})]})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[(0,be.jsx)(Oa.A,{className:"h-4 w-4 mr-2 text-teal-600"}),"Example Prompts"]}),(0,be.jsx)(fm,{children:"Add examples of how users can ask for this integration in plain language"})]}),(0,be.jsxs)("div",{className:"grid gap-4",children:[(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsx)(is,{placeholder:"E.g., Convert text to speech",value:j,onChange:e=>b(e.target.value)}),(0,be.jsxs)(Ze,{type:"button",onClick:()=>{j.trim()&&(p((e=>({...e,example_asks:[...e.example_asks,j.trim()]}))),b(""))},className:"bg-teal-600 hover:bg-teal-700 flex-shrink-0",children:[(0,be.jsx)(rt.A,{className:"h-4 w-4 mr-1"})," Add"]})]}),x.example_asks.length>0?(0,be.jsx)("div",{className:"flex flex-wrap gap-2",children:x.example_asks.map(((e,s)=>(0,be.jsxs)(Os,{variant:"outline",className:"bg-teal-50 text-teal-700 border-teal-200 px-3 py-1 flex items-center gap-1",children:[e,(0,be.jsx)("button",{type:"button",onClick:()=>(e=>{p((s=>({...s,example_asks:s.example_asks.filter(((s,t)=>t!==e))})))})(s),className:"ml-1 text-teal-700 hover:text-teal-900",children:(0,be.jsx)(He.A,{className:"h-3 w-3"})})]},s)))}):(0,be.jsx)("div",{className:"text-sm text-slate-500 p-4 bg-slate-50 rounded-md border text-center",children:"No example prompts added yet. Add 3-5 examples to help users understand how to use this integration."})]})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Integration Visibility"}),(0,be.jsx)(fm,{children:"Control whether your integration is private or public"})]}),(0,be.jsxs)("div",{className:"bg-white rounded-lg p-4 border flex items-center gap-4",children:[(0,be.jsx)("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:x.is_private?(0,be.jsx)(kn.A,{className:"h-5 w-5 text-slate-700"}):(0,be.jsx)(Zs.A,{className:"h-5 w-5 text-teal-600"})}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("h3",{className:"font-medium text-slate-900",children:x.is_private?"Private Integration":"Public Integration"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:x.is_private?"Only visible to you and invited collaborators":"Visible to all users and eligible for 250 credits when approved"})]}),(0,be.jsx)(_l,{id:"is_private",checked:!x.is_private,onCheckedChange:e=>S("is_private",!e)})]})]}),(0,be.jsx)("div",{className:"flex justify-end",children:(0,be.jsx)(Ze,{onClick:()=>f("content"),className:"bg-teal-600 hover:bg-teal-700",children:"Continue to Integration Content"})})]})}),(0,be.jsx)(Pa,{value:"content",className:"p-6",children:(0,be.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-8 bg-blue-50 rounded-lg p-4 border border-blue-100",children:[(0,be.jsxs)("h3",{className:"text-lg font-medium text-blue-800 mb-2 flex items-center",children:[(0,be.jsx)(Ul.A,{className:"h-5 w-5 mr-2"}),"About Integration Content"]}),(0,be.jsx)("p",{className:"text-blue-700 text-sm",children:"This section contains the core functionality of your integration. The prompt provides implementation instructions, and you can specify any API keys needed to make it work."})]}),(0,be.jsxs)("div",{className:"mb-8",children:[(0,be.jsxs)("div",{className:"flex items-center mb-2",children:[(0,be.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Integration Settings"}),(0,be.jsx)(fm,{children:"Configure how your integration should behave and what capabilities it needs."})]}),(0,be.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"These settings determine how your integration functions and what features it can access."}),(0,be.jsx)(Ds,{className:"border-slate-200",children:(0,be.jsx)(Ms,{className:"pt-6 space-y-6",children:(0,be.jsxs)("div",{className:"flex items-center gap-4",children:[(0,be.jsx)("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,be.jsx)(xm.A,{className:"h-5 w-5 text-slate-700"})}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("h3",{className:"font-medium text-slate-900",children:"Backend Functions"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:"Most integrations with external APIs require backend functions"})]}),(0,be.jsx)(_l,{id:"requires_backend_functions",checked:x.requires_backend_functions,onCheckedChange:e=>S("requires_backend_functions",e)})]})})})]}),x.requires_backend_functions&&(0,be.jsxs)("div",{className:"mb-8",children:[(0,be.jsxs)("div",{className:"flex items-center mb-2",children:[(0,be.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Required API Keys"}),(0,be.jsx)(fm,{children:"API keys that users will need to configure to use this integration."})]}),(0,be.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Define the credentials needed to connect to external services and how users can obtain them."}),(0,be.jsxs)(Ds,{className:"border-slate-200 shadow-sm mb-4",children:[(0,be.jsxs)(Ls,{className:"pb-0",children:[(0,be.jsx)(Us,{className:"text-base font-medium",children:"Add API Keys"}),(0,be.jsx)($s,{children:"Specify the API keys users will need to configure to use your integration"})]}),(0,be.jsx)(Ms,{className:"pt-4",children:(0,be.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)(ds,{htmlFor:"newSecretName",className:"mb-1 block",children:"Secret Name"}),(0,be.jsx)(is,{id:"newSecretName",placeholder:"E.g., OPENAI_API_KEY",value:v,onChange:e=>y(e.target.value)}),(0,be.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This is the environment variable name used in code"})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)(ds,{htmlFor:"newSecretDescription",className:"mb-1 block",children:"Instructions for obtaining"}),(0,be.jsx)(is,{id:"newSecretDescription",placeholder:"E.g., Get from platform.openai.com/api-keys",value:N,onChange:e=>w(e.target.value)}),(0,be.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Help users understand where to find this key"})]})]})}),(0,be.jsx)(Fs,{className:"border-t pt-4 bg-slate-50",children:(0,be.jsxs)(Ze,{type:"button",onClick:()=>{if(v.trim()){const e={name:v.trim(),description:N.trim()};p((s=>({...s,required_secrets:[...s.required_secrets,e]}))),y(""),w("")}},className:"w-full bg-teal-600 hover:bg-teal-700",children:[(0,be.jsx)(rt.A,{className:"h-4 w-4 mr-2"})," Add API Key"]})})]}),x.required_secrets.length>0?(0,be.jsx)("div",{className:"space-y-3",children:x.required_secrets.map(((e,s)=>(0,be.jsxs)("div",{className:"bg-white rounded-lg p-4 border flex justify-between items-start",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(ls.A,{className:"h-4 w-4 text-slate-600 mr-2"}),(0,be.jsx)("h4",{className:"font-medium text-slate-900",children:e.name})]}),(0,be.jsx)("p",{className:"text-sm text-slate-600 mt-1 ml-6",children:e.description||"Required for this integration"})]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>(e=>{p((s=>({...s,required_secrets:s.required_secrets.filter(((s,t)=>t!==e))})))})(s),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,be.jsx)(Sl.A,{className:"h-4 w-4"})})]},s)))}):(0,be.jsxs)("div",{className:"bg-slate-50 p-5 rounded-lg border text-center",children:[(0,be.jsx)(ls.A,{className:"h-10 w-10 text-slate-400 mx-auto mb-2"}),(0,be.jsx)("p",{className:"text-slate-600 mb-1",children:"No API keys added yet"}),(0,be.jsx)("p",{className:"text-sm text-slate-500",children:"Add keys if your integration requires external API access"})]})]}),(0,be.jsxs)("div",{className:"mb-8",children:[(0,be.jsxs)("div",{className:"flex items-center mb-2",children:[(0,be.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Integration Prompt"}),(0,be.jsx)(fm,{children:"The implementation guide for your integration."})]}),(0,be.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Write detailed instructions on how to use this integration, including code examples and configuration guidance."}),(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,be.jsx)("div",{className:"lg:col-span-2",children:(0,be.jsxs)(Ds,{className:"h-full",children:[(0,be.jsxs)(Ls,{className:"pb-2",children:[(0,be.jsx)(Us,{className:"text-base font-medium",children:"Implementation Guide"}),(0,be.jsx)($s,{children:"Provide detailed instructions on how to use this integration"})]}),(0,be.jsxs)(Ms,{children:[(0,be.jsx)(Na,{id:"prompt",name:"prompt",value:x.prompt,onChange:C,placeholder:"# Integration Name This integration allows you to... ## Example Code ```javascript\n// Code example\n``` ## Configuration Options - Option 1: Description\n- Option 2: Description ## Usage Tips ...",className:"font-mono min-h-[400px] bg-slate-50 border-slate-200"}),(0,be.jsxs)("div",{className:"flex justify-between items-center mt-2 text-xs",children:[(0,be.jsx)("div",{className:"text-slate-500",children:(0,be.jsx)("span",{children:"Supports Markdown formatting"})}),(0,be.jsx)("div",{children:(0,be.jsx)("span",{className:`font-medium ${x.prompt.length<50?"text-red-500":"text-green-600"} flex items-center`,children:x.prompt.length<50?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(He.A,{className:"h-3 w-3 mr-1"}),x.prompt.length,"/50 characters (minimum)"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(js.A,{className:"h-3 w-3 mr-1"}),x.prompt.length," characters"]})})})]})]})]})}),(0,be.jsx)("div",{className:"lg:col-span-1",children:(0,be.jsxs)(Ds,{className:"bg-slate-50 border border-slate-200 h-full",children:[(0,be.jsxs)(Ls,{className:"pb-2",children:[(0,be.jsxs)(Us,{className:"text-base font-medium flex items-center text-slate-700",children:[(0,be.jsx)(Ul.A,{className:"h-4 w-4 mr-2 text-teal-600"}),"Tips for writing effective prompts"]}),(0,be.jsx)($s,{children:"Guidelines to help users implement your integration"})]}),(0,be.jsxs)(Ms,{className:"space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"font-medium text-slate-800 mb-1",children:"Structure your guide clearly"}),(0,be.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600 list-disc pl-5",children:[(0,be.jsx)("li",{children:"Start with an introduction explaining what the integration does"}),(0,be.jsx)("li",{children:"Include complete code examples with explanations"}),(0,be.jsx)("li",{children:"Provide configuration and setup instructions"})]})]}),x.requires_backend_functions&&(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"font-medium text-slate-800 mb-1",children:"Backend Function Tips"}),(0,be.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600 list-disc pl-5",children:[(0,be.jsxs)("li",{children:["Show how to implement with ",(0,be.jsx)("strong",{children:"Deno serve"})," (this is how backend functions run)"]}),(0,be.jsx)("li",{children:"Document the output schema for each function"}),(0,be.jsx)("li",{children:"Include examples of how to call these functions from frontend components"}),(0,be.jsx)("li",{children:"Provide error handling guidance"})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"font-medium text-slate-800 mb-1",children:"Recommended sections"}),(0,be.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600 list-disc pl-5",children:[(0,be.jsxs)("li",{children:[(0,be.jsx)("strong",{children:"Introduction:"})," What the integration does"]}),(0,be.jsxs)("li",{children:[(0,be.jsx)("strong",{children:"API Reference:"})," Available functions and parameters"]}),(0,be.jsxs)("li",{children:[(0,be.jsx)("strong",{children:"Example Usage:"})," Practical implementation examples"]}),(0,be.jsxs)("li",{children:[(0,be.jsx)("strong",{children:"Troubleshooting:"})," Common issues and solutions"]})]})]}),(0,be.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md text-sm text-blue-700 border border-blue-100",children:[(0,be.jsx)("p",{className:"font-medium mb-1",children:"Pro Tip"}),(0,be.jsx)("p",{children:"The better your documentation, the more likely users will successfully implement your integration!"})]})]})]})})]})]}),(0,be.jsxs)("div",{className:"flex justify-between pt-4 border-t",children:[(0,be.jsxs)(Ze,{onClick:()=>f("metadata"),variant:"outline",children:[(0,be.jsx)(Xr.A,{className:"h-4 w-4 mr-2"}),"Back to Metadata"]}),(0,be.jsx)(Ze,{onClick:k,disabled:o,className:"bg-teal-600 hover:bg-teal-700",children:o?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Br.A,{className:"h-4 w-4 mr-2"}),"Save Integration"]})})]})]})})]})})]})};function bm(){const{user:e}=Ne(),{appId:s}=(0,J.g)(),t=(0,J.Zp)(),[a,r]=(0,Y.useState)(!0),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(null),[c,d]=(0,Y.useState)(null),[m,u]=(0,Y.useState)({}),[h,x]=(0,Y.useState)(!1),p=new URLSearchParams(window.location.search).get("clone_history"),g=(0,Y.useCallback)((()=>{i(!0),o(null),we.remixApp(s,{with_chat_history:"true"===p,secret_values:m}).then((e=>{t(`/apps/${e.id}`)})).catch((e=>{o(e.message||"An error occurred while remixing the app"),i(!1)}))}),[s,m,t]);(0,Y.useEffect)((()=>{r(!0),we.remixAppRequirements(s).then((s=>{d(s);s&&(!s.app_secret_names||0===s.app_secret_names.length)&&!(s.requires_backend_functions&&("free"===e.subscription_tier||"starter"===e.subscription_tier))?g():s&&s.app_secret_names&&s.app_secret_names.length>0&&(!s.requires_backend_functions||"free"!==e.subscription_tier&&"starter"!==e.subscription_tier)&&x(!0),r(!1)})).catch((e=>{o(e.message||"An error occurred while fetching remix requirements"),r(!1)}))}),[s,e.subscription_tier]);return a?(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,be.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"}),(0,be.jsx)("p",{className:"text-gray-600",children:"Loading app details..."})]})}):n?(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,be.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"}),(0,be.jsxs)("p",{className:"text-gray-600",children:["Remixing ",(null==c?void 0:c.name)||"app","..."]})]})}):l?(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-4 p-8 bg-white rounded-lg shadow-xl max-w-md mx-auto",children:[(0,be.jsx)(Te.A,{className:"h-12 w-12 text-red-500"}),(0,be.jsx)("div",{className:"text-red-600 text-lg font-medium",children:"Error"}),(0,be.jsx)("p",{className:"text-gray-600 text-center",children:l}),(0,be.jsx)(Ze,{onClick:()=>t(-1),variant:"outline",children:"Go Back"})]})}):c&&c.requires_backend_functions&&("free"===e.subscription_tier||"starter"===e.subscription_tier)?(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-4 p-8 bg-white rounded-lg shadow-xl max-w-md mx-auto",children:[(0,be.jsx)(Te.A,{className:"h-12 w-12 text-red-500"}),(0,be.jsx)("div",{className:"text-red-600 text-lg font-medium",children:"Remix Not Allowed"}),(0,be.jsx)("p",{className:"text-gray-600 text-center",children:"This app requires backend functions. You need to be on the Builder tier or above to remix it."}),(0,be.jsx)(Ze,{onClick:()=>t(-1),variant:"outline",children:"Go Back"})]})}):(0,be.jsx)("div",{className:"container mx-auto p-4 pt-10 max-w-2xl",children:h?(0,be.jsxs)("div",{className:"mb-6 p-6 border rounded-lg bg-slate-50",children:[(0,be.jsxs)("h1",{className:"text-2xl font-semibold mb-6",children:["Remix ",(null==c?void 0:c.name)||"App"]}),(0,be.jsx)("h2",{className:"text-lg font-medium mb-4 text-slate-700",children:"Configure Secrets"}),(0,be.jsx)(Es,{secretNames:c.app_secret_names.map((e=>({name:e}))),value:m,onChange:e=>{u(e)}}),(0,be.jsx)(Ze,{onClick:g,disabled:n,className:"w-full mt-4",children:n?`Remixing ${(null==c?void 0:c.name)||"App"}...`:`Remix ${(null==c?void 0:c.name)||"App"}`})]}):(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,be.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"}),(0,be.jsx)("p",{className:"text-gray-600",children:"Preparing..."})]})})})}var vm=t(35219),ym=t(97104);const Nm=e=>{let{className:s}=e;return(0,be.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,be.jsx)("path",{d:"M18.8943 4.34399C17.5183 3.71467 16.057 3.256 14.5317 3C14.3396 3.33067 14.1263 3.77866 13.977 4.13067C12.3546 3.89599 10.7439 3.89599 9.14391 4.13067C8.99457 3.77866 8.77056 3.33067 8.58922 3C7.05325 3.256 5.59191 3.71467 4.22552 4.34399C1.46286 8.41865 0.716188 12.3973 1.08952 16.3226C2.92418 17.6559 4.69486 18.4666 6.4346 19C6.86126 18.424 7.24527 17.8053 7.57594 17.1546C6.9466 16.92 6.34927 16.632 5.77327 16.2906C5.9226 16.184 6.07194 16.0667 6.21061 15.9493C9.68793 17.5387 13.4543 17.5387 16.889 15.9493C17.0383 16.0667 17.177 16.184 17.3263 16.2906C16.7503 16.632 16.153 16.92 15.5236 17.1546C15.8543 17.8053 16.2383 18.424 16.665 19C18.4036 18.4666 20.185 17.6559 22.01 16.3226C22.4687 11.7787 21.2836 7.83202 18.8943 4.34399ZM8.05593 13.9013C7.01058 13.9013 6.15725 12.952 6.15725 11.7893C6.15725 10.6267 6.98925 9.67731 8.05593 9.67731C9.11191 9.67731 9.97588 10.6267 9.95454 11.7893C9.95454 12.952 9.11191 13.9013 8.05593 13.9013ZM15.065 13.9013C14.0196 13.9013 13.1652 12.952 13.1652 11.7893C13.1652 10.6267 13.9983 9.67731 15.065 9.67731C16.121 9.67731 16.985 10.6267 16.9636 11.7893C16.9636 12.952 16.1317 13.9013 15.065 13.9013Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})},wm=e=>{let{icon:s,title:t,description:a,action:r,variant:n="default",external:i=!1}=e;return(0,be.jsxs)("div",{className:"group cursor-pointer relative overflow-hidden rounded-2xl transition-all duration-500 hover:scale-[1.02] hover:-translate-y-1",onClick:r,children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-all duration-500 "+("primary"===n?"bg-gradient-to-br from-orange-500 to-orange-600 group-hover:from-orange-600 group-hover:to-orange-700":"secondary"===n?"bg-gradient-to-br from-teal-500 to-teal-600 group-hover:from-teal-600 group-hover:to-teal-700":"bg-gradient-to-br from-slate-700 to-slate-800 group-hover:from-slate-800 group-hover:to-slate-900")}),(0,be.jsxs)("div",{className:"relative z-10 p-8 text-white",children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,be.jsx)("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:(0,be.jsx)(s,{className:"w-7 h-7"})}),i&&(0,be.jsx)(Da.A,{className:"w-5 h-5 opacity-60 group-hover:opacity-100 transition-opacity"})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)("h3",{className:"text-xl font-bold leading-tight",children:t}),(0,be.jsx)("p",{className:"text-white/80 text-sm leading-relaxed",children:a})]}),(0,be.jsxs)("div",{className:"mt-6 inline-flex items-center text-sm font-semibold group-hover:translate-x-1 transition-transform duration-300",children:[(0,be.jsx)("span",{children:"Get Started"}),(0,be.jsx)(mt.A,{className:"w-4 h-4 ml-2"})]})]})]})},Cm=e=>{let{icon:s,title:t,description:a,action:r,count:n}=e;return(0,be.jsx)("div",{className:"group cursor-pointer p-6 bg-white rounded-xl border border-slate-200 hover:border-slate-300 hover:shadow-lg transition-all duration-300",onClick:r,children:(0,be.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,be.jsx)("div",{className:"w-12 h-12 bg-slate-100 text-slate-600 rounded-lg flex items-center justify-center group-hover:bg-orange-100 group-hover:text-orange-600 transition-colors",children:(0,be.jsx)(s,{className:"w-6 h-6"})}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,be.jsx)("h4",{className:"font-semibold text-slate-900",children:t}),void 0!==n&&(0,be.jsx)("span",{className:"text-sm font-medium text-slate-500",children:n})]}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:a})]}),(0,be.jsx)(mt.A,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-600 group-hover:translate-x-1 transition-all"})]})})};function Sm(e){let{appId:s}=e;const[t]=(0,V.useSearchParams)(),a=(0,J.Zp)(),[r,n]=(0,Y.useState)(s);(0,Y.useEffect)((()=>{const e=t.get("appId");n(e||s)}),[t,s]);return(0,be.jsx)(be.Fragment,{children:(0,be.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-6 py-12",children:[(0,be.jsx)("div",{className:"text-center mb-16",children:(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsx)("h1",{className:"text-5xl font-bold text-slate-900 tracking-tight",children:"Help & Support"}),(0,be.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-orange-500 to-teal-500 mx-auto rounded-full"}),(0,be.jsx)("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed",children:"Get the help you need to build amazing applications with BASE44"})]})}),r&&(0,be.jsx)("div",{className:"mb-12 p-6 bg-slate-50 border border-slate-200 rounded-xl",children:(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)("div",{className:"w-10 h-10 bg-slate-100 text-slate-600 rounded-lg flex items-center justify-center",children:(0,be.jsx)(vm.A,{className:"w-5 h-5"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"font-semibold text-slate-900",children:"App-Specific Support"}),(0,be.jsxs)("p",{className:"text-sm text-slate-600",children:["Support requests will be associated with app: ",(0,be.jsx)("span",{className:"font-mono bg-slate-100 px-2 py-1 rounded text-slate-800",children:r})]})]})]})}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:[(0,be.jsx)(wm,{icon:Hc.A,title:"Documentation",description:"Explore comprehensive guides, tutorials, FAQs,and best practices for building with Base44.",action:()=>{window.open("https://docs.base44.com","_blank")},variant:"primary",external:!0}),(0,be.jsx)(wm,{icon:Nm,title:"Discord Community",description:"Connect with fellow builders and get instant help from our active community.",action:()=>{window.open("https://discord.com/invite/ThpYPZpVts","_blank")},variant:"secondary",external:!0}),(0,be.jsx)(wm,{icon:ym.A,title:"Open Support Ticket",description:"Submit a detailed support ticket and get personalized assistance.",action:()=>{const e=new URLSearchParams({openNew:"true"});r&&e.set("appId",r),a(`/support/conversations?${e.toString()}`)},variant:"default"})]}),(0,be.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-8",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Quick Actions"}),(0,be.jsx)("p",{className:"text-slate-600",children:"Manage your support experience"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,be.jsx)(Cm,{icon:Oa.A,title:"My Support Tickets",description:"View and manage your existing support tickets",action:()=>{const e=new URLSearchParams;r&&e.set("appId",r),a("/support/conversations"+(e.toString()?`?${e.toString()}`:""))}}),(0,be.jsx)(Cm,{icon:na.A,title:"Community Forum",description:"Our brand-new reddit community",action:()=>{window.open("https://www.reddit.com/r/Base44","_blank")}})]})]})]})})}var km=t(82981),Am=t(21449),_m=t(83655);const Tm=new class extends me{getBaseURL(){return"/support/conversations"}async addMessage(e,s){return await this.axios.post(`/${e}/messages`,s)}async updateConversationNotifications(e,s){return await this.axios.put(`/${e}/notifications`,s)}};const Em=new class extends de{getBaseURL(){return"/support/admin"}async getTickets(e){const s=Object.fromEntries(Object.entries(e||{}).filter((e=>{let[s,t]=e;return null!==t})));return await this.axios.get("",{params:s})}async getTicketDetail(e){return await this.axios.get(`/${e}`)}async updateTicketStatus(e,s){return await this.axios.patch(`/${e}/status`,{status:s})}async polishResponse(e,s){return await this.axios.post(`/${e}/messages/polish`,{text:s})}async changeTicketStatus(e,s){return await this.axios.patch(`/${e}/change_ticket_status`,{status:s})}async assignTicket(e,s){return await this.axios.patch(`/${e}/assign`,{user_email:s})}async updateInternalCategories(e,s){return await this.axios.patch(`/${e}/internal_categories`,{internal_categories:s})}};const Im=new class extends de{getBaseURL(){return"/docs"}async getArticles(){return await this.axios.get("/articles")}async createArticle(e){return await this.axios.post("/articles",e)}async updateArticle(e,s){return await this.axios.put(`/articles/${e}`,s)}async deleteArticle(e){return await this.axios.delete(`/articles/${e}`)}async getAgentProperties(){return await this.axios.get("/agent")}async updateAgentProperties(e){return await this.axios.put("/agent",e)}};var Pm=t(59027),Rm=t(62702);const Om=e=>{let{imageUrl:s,isOpen:t,onClose:a}=e;return t?(0,be.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:a}),(0,be.jsxs)("div",{className:"relative z-10 max-w-7xl max-h-[90vh] mx-4",children:[(0,be.jsx)("button",{onClick:a,className:"absolute -top-12 right-0 w-10 h-10 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-all duration-200 hover:scale-110",children:(0,be.jsx)(He.A,{size:20})}),(0,be.jsx)("img",{src:s,alt:"Full size image",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"})]})]}):null},Dm=e=>{var s,t,a;let{message:r,onImageClick:n}=e;const i="user"===r.role,l=null===(s=r.additional_message_params)||void 0===s?void 0:s.is_admin_message,o=null===(t=r.metadata)||void 0===t?void 0:t.created_by_full_name;return(0,be.jsx)("div",{className:`flex ${i?"justify-end":"justify-start"} mb-4`,children:(0,be.jsxs)("div",{className:`flex max-w-[80%] ${i?"flex-row-reverse":"flex-row"} items-start space-x-3`,children:[(0,be.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+(i?"bg-slate-200 text-slate-600 ml-3":l?"bg-slate-700 text-white mr-3":"bg-teal-100 text-teal-600 mr-3"),children:i?(0,be.jsx)(Ho.A,{size:16}):l?(0,be.jsx)(In.A,{size:16}):(0,be.jsx)(En.A,{size:16})}),(0,be.jsxs)("div",{className:"flex flex-col "+(i?"items-end":"items-start"),children:[l&&o&&(0,be.jsxs)("div",{className:"mb-2 flex items-center space-x-2",children:[(0,be.jsx)("div",{className:"text-xs font-medium text-slate-700",children:o.split(" ")[0]}),(0,be.jsx)("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),(0,be.jsx)("div",{className:"text-xs text-slate-500",children:"Support Team"})]}),(0,be.jsxs)("div",{className:"rounded-2xl px-4 py-3 max-w-full "+(i?"bg-slate-700 text-white":"bg-white text-slate-900 border border-slate-200 shadow-sm"),children:[r.file_urls&&r.file_urls.length>0&&(0,be.jsx)("div",{className:"mb-3 flex flex-wrap gap-3",children:r.file_urls.map(((e,s)=>(0,be.jsx)("div",{className:"relative",children:e.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,be.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>n(e),children:[(0,be.jsx)("img",{src:e,alt:"Attached content",className:"max-w-[250px] max-h-[250px] rounded-lg border border-slate-200 shadow-sm object-cover transition-all duration-200 group-hover:shadow-lg group-hover:scale-[1.02]"}),(0,be.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 rounded-lg transition-all duration-200 flex items-center justify-center",children:(0,be.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-2 opacity-0 group-hover:opacity-100 transition-all duration-200 transform scale-75 group-hover:scale-100",children:(0,be.jsx)(Rm.A,{size:16,className:"text-slate-700"})})})]}):(0,be.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg border "+(i?"bg-slate-600 border-slate-500 text-slate-200":"bg-slate-50 border-slate-200 text-slate-700"),children:[(0,be.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[(0,be.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,be.jsx)("polyline",{points:"14 2 14 8 20 8"})]}),(0,be.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:underline "+(i?"text-slate-200":"text-blue-600"),children:"Attached file"})]})},s)))}),(0,be.jsx)("div",{className:"text-sm leading-relaxed prose prose-sm max-w-[550px]",children:(0,be.jsx)(ga.o,{components:{p:e=>{let{children:s}=e;return(0,be.jsx)("p",{className:"mb-2 last:mb-0",children:s})},ul:e=>{let{children:s}=e;return(0,be.jsx)("ul",{className:"list-disc list-inside mb-2 last:mb-0",children:s})},ol:e=>{let{children:s}=e;return(0,be.jsx)("ol",{className:"list-decimal list-inside mb-2 last:mb-0",children:s})},li:e=>{let{children:s}=e;return(0,be.jsx)("li",{className:"mb-1",children:s})},code:e=>{let{children:s,inline:t}=e;return t?(0,be.jsx)("code",{className:"px-1 py-0.5 rounded text-xs font-mono "+(i?"bg-slate-600 text-slate-200":"bg-slate-100 text-slate-800"),children:s}):(0,be.jsx)("pre",{className:"p-2 rounded text-xs font-mono overflow-x-auto "+(i?"bg-slate-600 text-slate-200":"bg-slate-100 text-slate-800"),children:(0,be.jsx)("code",{children:s})})},blockquote:e=>{let{children:s}=e;return(0,be.jsx)("blockquote",{className:"border-l-4 pl-3 italic "+(i?"border-slate-400":"border-slate-300"),children:s})},strong:e=>{let{children:s}=e;return(0,be.jsx)("strong",{className:"font-semibold",children:s})},em:e=>{let{children:s}=e;return(0,be.jsx)("em",{className:"italic",children:s})},h1:e=>{let{children:s}=e;return(0,be.jsx)("h1",{className:"text-lg font-bold mb-2",children:s})},h2:e=>{let{children:s}=e;return(0,be.jsx)("h2",{className:"text-base font-bold mb-2",children:s})},h3:e=>{let{children:s}=e;return(0,be.jsx)("h3",{className:"text-sm font-bold mb-1",children:s})}},children:r.content})})]}),(null===(a=r.metadata)||void 0===a?void 0:a.created_date)&&(0,be.jsx)("div",{className:"text-xs text-slate-500 mt-1 "+(i?"text-right":"text-left"),children:(c=r.metadata.created_date,it().utc(c).fromNow())})]})]})});var c},Lm=()=>(0,be.jsx)("div",{className:"flex justify-start mb-4",children:(0,be.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,be.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-teal-100 text-teal-600 mr-3",children:(0,be.jsx)(En.A,{size:16})}),(0,be.jsx)("div",{className:"bg-white text-slate-900 border border-slate-200 shadow-sm rounded-2xl px-4 py-3",children:(0,be.jsxs)("div",{className:"flex space-x-1",children:[(0,be.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),(0,be.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,be.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})});function Um(e){let{messages:s,isTyping:t}=e;const a=(0,Y.useRef)(null),[r,n]=(0,Y.useState)(null);(0,Y.useEffect)((()=>{var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[s,t]);const i=e=>{n(e)};return(0,be.jsxs)("div",{className:"h-full overflow-y-auto px-4 py-4",children:[0===s.length?(0,be.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"w-16 h-16 bg-slate-100 text-slate-400 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,be.jsx)(En.A,{size:24})}),(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Start the conversation"}),(0,be.jsx)("p",{className:"text-slate-600",children:"Send a message to begin your support conversation"})]})}):(0,be.jsxs)("div",{className:"space-y-4",children:[s.map(((e,s)=>(0,be.jsx)(Dm,{message:e,onImageClick:i},e.id||s))),t&&(0,be.jsx)(Lm,{}),(0,be.jsx)("div",{ref:a})]}),r&&(0,be.jsx)(Om,{imageUrl:r,isOpen:!!r,onClose:()=>n(null)})]})}function $m(e){let{conversationId:s,isAdmin:t=!1}=e;const{user:a}=Ne(),[r,n]=(0,Y.useState)(null),[i,l]=(0,Y.useState)(!1),[o,c]=(0,Y.useState)(null),[d,m]=(0,Y.useState)(!1),[u,h]=(0,Y.useState)(!1),[x,p]=(0,Y.useState)(""),[g,f]=(0,Y.useState)(!1),[j,b]=(0,Y.useState)(""),[v,y]=(0,Y.useState)([]),[N,w]=(0,Y.useState)(!1),[C,S]=(0,Y.useState)(!1),[k,A]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{s&&_()}),[s]),(0,Y.useEffect)((()=>{t&&null!=r&&r.draft&&!u&&(h(!0),p(r.draft),f(!1))}),[null==r?void 0:r.draft,t]),(0,Y.useEffect)((()=>{void 0!==(null==r?void 0:r.notify_via_email_on_admin_response)&&S(r.notify_via_email_on_admin_response)}),[null==r?void 0:r.notify_via_email_on_admin_response]),(0,Y.useEffect)((()=>{if(!t)return;const e=e=>{(navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey&&"k"===e.key:e.ctrlKey&&"k"===e.key)&&(e.preventDefault(),j.trim()&&!N&&T())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[t,j,N]);const _=async()=>{try{l(!0),c(null);return await Tm.fetchAndSubscribe(s,(e=>{n(e),l(!1)}))}catch(e){c("Failed to load conversation. Please try again."),l(!1)}},T=async()=>{if(j.trim())try{w(!0);const e=await Em.polishResponse(s,j);b(e)}catch(o){}finally{w(!1)}};if(i)return(0,be.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-400 mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-slate-600",children:"Loading conversation..."})]})});if(o)return(0,be.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,be.jsx)(Oa.A,{className:"w-8 h-8"})}),(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Error Loading Conversation"}),(0,be.jsx)("p",{className:"text-slate-600 mb-4",children:o}),(0,be.jsx)(Ze,{onClick:_,variant:"outline",size:"sm",children:"Try Again"})]})});if(!r)return(0,be.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"w-16 h-16 bg-slate-100 text-slate-400 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,be.jsx)(Oa.A,{className:"w-8 h-8"})}),(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No Conversation Found"}),(0,be.jsx)("p",{className:"text-slate-600",children:"This conversation doesn't exist or you don't have access to it."})]})});const E="premium"==(((null==a?void 0:a.subscription_tier)||"free").toLowerCase().includes("elite")?"premium":"standard")?{tier:"Premium Support",message:"Priority support with faster response times",color:"text-slate-700 bg-slate-100 border-slate-200"}:{tier:"Standard Support",message:"Responses on standard support could take up to 48 hours, typically less",color:"text-slate-600 bg-slate-50 border-slate-200"},I="pending_admin_response"===(null==r?void 0:r.status),P=t?(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:T,disabled:!j.trim()||N,className:"text-slate-600 hover:text-slate-900 hover:bg-slate-100",title:"Improve Grammar",children:N?(0,be.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-400"}):(0,be.jsx)(Gs.A,{className:"w-4 h-4"})}):null;return(0,be.jsxs)("div",{className:"flex flex-col h-full max-h-full overflow-hidden",children:[(0,be.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,be.jsx)(Um,{messages:r.messages||[],isTyping:r.is_bot_writing})}),(0,be.jsx)("div",{className:"flex-shrink-0",children:t&&u&&x?(0,be.jsx)("div",{className:"px-4 py-2 border-t border-slate-200 bg-teal-50",children:(0,be.jsx)(Ds,{className:"border-teal-200 bg-white",children:(0,be.jsxs)(Ms,{className:"p-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(pm.A,{className:"w-4 h-4 text-teal-600"}),(0,be.jsx)("span",{className:"text-sm font-medium text-teal-800",children:"AI Suggested Response"})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{f(!g)},className:"h-6 px-2 text-xs text-teal-700 hover:bg-teal-100",children:g?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(fs.A,{className:"w-3 h-3 mr-1"}),"Collapse"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(gs.A,{className:"w-3 h-3 mr-1"}),"View All"]})}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{h(!1),p(""),f(!1)},className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",children:(0,be.jsx)(He.A,{className:"w-3 h-3"})})]})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"text-sm text-slate-700 bg-slate-50 p-3 rounded border transition-all duration-200 relative "+(g?"max-h-none":"max-h-20 overflow-hidden"),children:[(0,be.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-xs leading-relaxed",children:x}),!g&&x.length>150&&(0,be.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-slate-50 to-transparent pointer-events-none"})]}),(0,be.jsx)("div",{className:"flex items-center",children:(0,be.jsxs)(Ze,{size:"sm",onClick:async()=>{b(x),h(!1),p(""),f(!1)},className:"bg-teal-600 hover:bg-teal-700 h-7 px-3 text-xs",children:[(0,be.jsx)(Pm.A,{className:"w-3 h-3 mr-1"}),"Use"]})})]})]})})}):!t&&(0,be.jsx)("div",{className:"px-4 py-3 border-t border-slate-200 bg-slate-50",children:(0,be.jsxs)("div",{className:`p-3 rounded-lg border ${E.color}`,children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,be.jsx)("div",{className:"w-2 h-2 rounded-full bg-current"}),(0,be.jsx)("span",{className:"text-sm font-medium",children:E.tier})]}),(0,be.jsx)("p",{className:"text-xs opacity-80",children:E.message}),I&&(0,be.jsx)("div",{className:"flex items-start space-x-2 mt-2 pt-2 border-t border-current/20",children:(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(Nn,{id:"email-notifications",checked:C,onCheckedChange:async e=>{try{A(!0),await Tm.updateConversationNotifications(s,{notify_via_email_on_admin_response:e}),S(e)}catch(o){S(!e)}finally{A(!1)}},disabled:k,className:"h-3 w-3 data-[state=checked]:bg-slate-600 data-[state=checked]:border-slate-600 border-slate-400 rounded-sm"}),(0,be.jsxs)("label",{htmlFor:"email-notifications",className:"text-xs opacity-80 cursor-pointer flex items-center space-x-1",children:[(0,be.jsx)(Qi.A,{className:"w-3 h-3 flex-shrink-0"}),(0,be.jsx)("span",{children:"Notify me when a Base44 representative responds"})]})]})})]})})}),(0,be.jsx)("div",{className:"flex-shrink-0 p-2",children:"closed"===r.status?(0,be.jsx)("div",{className:"flex items-center justify-center py-4 text-slate-500 bg-slate-50 rounded-lg border",children:(0,be.jsx)("span",{className:"text-sm",children:"This conversation is closed"})}):(0,be.jsx)(Ve,{value:j,files:v,onSend:async e=>{let{text:a,files:r}=e;m(!0);try{await Tm.addMessage(s,{role:t?"assistant":"user",content:a,file_urls:r||[],additional_message_params:t?{is_admin_message:!0}:{}})}catch(o){throw o}finally{m(!1)}},placeholder:t?"Type your response...":"Type your message...",disabled:d,isProcessing:d,onValueChange:b,onFilesChange:y,variant:"default",customButtomRight:P})})]})}const Mm={authentication:"\u{1f510}",billing:"\u{1f4b3}",bug_report:"\u{1f41b}",integrations_and_backend_functions:"\u26a1",chat_issues:"\u{1f4ac}",security:"\u{1f6e1}\ufe0f",other:"\u2753"};function Fm(e){let{conversationId:s,isOpen:t,onClose:a,ticketTitle:r,ticket:n}=e;const{user:i}=Ne();return t?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:a}),(0,be.jsxs)("div",{className:"fixed right-0 top-0 h-screen w-full max-w-2xl bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-out flex flex-col "+(t?"translate-x-0":"translate-x-full"),children:[(0,be.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-slate-200 bg-white",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:a,className:"p-1.5 hover:bg-slate-100",children:(0,be.jsx)(Xr.A,{className:"w-4 h-4"})}),(0,be.jsx)("div",{className:"flex-1 min-w-0",children:(0,be.jsx)("h2",{className:"text-base font-semibold text-slate-900 leading-tight truncate",children:r||"Support Conversation"})})]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:a,className:"p-1.5 hover:bg-slate-100",children:(0,be.jsx)(He.A,{className:"w-4 h-4"})})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-600",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsxs)("span",{className:"font-mono bg-slate-100 px-2 py-1 rounded text-xs",children:["#",null==s?void 0:s.slice(0,8)]}),(null==n?void 0:n.created_date)&&(0,be.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,be.jsx)(Hs.A,{className:"w-3 h-3"}),(0,be.jsx)("span",{children:it().utc(n.created_date).fromNow()})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==n?void 0:n.category)&&(0,be.jsxs)("span",{className:"flex items-center space-x-1 text-xs",children:[(0,be.jsx)("span",{children:Mm[n.category]||"\u{1f4cb}"}),(0,be.jsx)("span",{className:"hidden sm:inline",children:n.category.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))})]}),(null==n?void 0:n.app_id)&&(0,be.jsxs)("a",{href:`/apps/${n.app_id}`,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 hover:underline",children:[(0,be.jsx)(_m.A,{className:"w-3 h-3"}),(0,be.jsx)("span",{className:"hidden sm:inline",children:"App"}),(0,be.jsx)(Da.A,{className:"w-3 h-3"})]})]})]})]}),(0,be.jsx)($m,{conversationId:s,isAdmin:!1})]})]}):null}const zm=[{value:"authentication",label:"Authentication",icon:kn.A},{value:"billing",label:"Billing",icon:_e.A},{value:"bug_report",label:"Bug Report",icon:km.A},{value:"integrations_and_backend_functions",label:"Integrations & Backend",icon:so.A},{value:"chat_issues",label:"Chat Issues",icon:Am.A},{value:"security",label:"Security",icon:In.A},{value:"other",label:"Other",icon:Mr.A}];function Bm(e){let{value:s,onChange:t}=e;return(0,be.jsxs)(bs,{value:s,onValueChange:t,children:[(0,be.jsx)(Ns,{className:"w-full",children:(0,be.jsx)(ys,{placeholder:"Select a category"})}),(0,be.jsx)(Ss,{children:zm.map((e=>{const s=e.icon;return(0,be.jsx)(As,{value:e.value,children:(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(s,{className:"w-4 h-4"}),(0,be.jsx)("span",{children:e.label})]})},e.value)}))})]})}function qm(e){let{appId:s,onSubmit:t,onCancel:a}=e;const{user:r}=Ne(),[n,i]=(0,Y.useState)(""),[l,o]=(0,Y.useState)(""),[c,d]=(0,Y.useState)([]),[m,u]=(0,Y.useState)(""),[h,x]=(0,Y.useState)(""),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)({}),b=async e=>{if(e.preventDefault(),(()=>{const e={};return(!n.trim()||n.length<5)&&(e.title="Title must be at least 5 characters"),n.length>100&&(e.title="Title must be less than 100 characters"),(!l.trim()||l.length<20)&&(e.content="Please provide more details (at least 20 characters)"),l.length>500&&(e.content="Description must be less than 500 characters"),m||(e.category="Please select a category"),h.trim()&&!h.match(/^https?:\/\/.+/)&&(e.appLink="Please enter a valid URL (starting with http:// or https://)"),j(e),0===Object.keys(e).length})()){g(!0);try{const e={title:n.trim(),content:l.trim(),category:m,app_id:s||null,app_link:h.trim()||null,file_urls:c||[]},a=await Tm.create(e);i(""),o(""),d([]),u(""),x(""),j({}),null==t||t(a)}catch(a){j({submit:"Failed to submit your support ticket. Please try again."})}finally{g(!1)}}};return(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 p-6",children:[(0,be.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,be.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{className:"text-sm font-medium text-gray-700",children:"Category"}),(0,be.jsx)(Bm,{value:m,onChange:u}),f.category&&(0,be.jsx)("p",{className:"text-sm text-red-600",children:f.category})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"title",className:"text-sm font-medium text-gray-700",children:"Subject"}),(0,be.jsx)(is,{id:"title",value:n,onChange:e=>i(e.target.value),placeholder:"Brief description of your issue",className:"w-full "+(f.title?"border-red-500":"")}),f.title&&(0,be.jsx)("p",{className:"text-sm text-red-600",children:f.title})]}),!s&&(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)(ds,{htmlFor:"appLink",className:"text-sm font-medium text-gray-700",children:["App Link ",(0,be.jsx)("span",{className:"text-gray-400",children:"(optional)"})]}),(0,be.jsx)(is,{id:"appLink",value:h,onChange:e=>x(e.target.value),placeholder:"https://your-app-url.com",className:"w-full "+(f.appLink?"border-red-500":"")}),(0,be.jsx)("p",{className:"text-xs text-gray-500",children:"Provide a link to your app to help us better understand the context of your issue."}),f.appLink&&(0,be.jsx)("p",{className:"text-sm text-red-600",children:f.appLink})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{className:"text-sm font-medium text-gray-700",children:"Steps to Reproduce / Description"}),(0,be.jsx)("div",{className:""+(f.content?"border border-red-500 rounded-lg":""),children:(0,be.jsx)(Ve,{value:l,files:c,placeholder:"Please provide detailed information about your issue, including any error messages, steps to reproduce, or relevant context...",disabled:p,isProcessing:!1,onValueChange:o,onFilesChange:d,variant:"default",customButtomRight:()=>null})}),(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("p",{className:"text-xs text-gray-500",children:"The more details you provide, the faster we can help you. You can also attach screenshots or files."}),(0,be.jsxs)("p",{className:"text-xs "+(l.length>500?"text-red-500":l.length>450?"text-orange-500":"text-gray-400"),children:[l.length,"/500"]})]}),f.content&&(0,be.jsx)("p",{className:"text-sm text-red-600",children:f.content})]}),f.submit&&(0,be.jsx)(We,{variant:"destructive",children:(0,be.jsx)(Ge,{children:f.submit})})]})}),(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Ticket Information"}),s&&(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("p",{className:"text-xs text-gray-500",children:"App ID"}),(0,be.jsx)("p",{className:"text-sm font-mono text-gray-900 bg-white px-2 py-1 rounded border",children:s})]}),!s&&h&&(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("p",{className:"text-xs text-gray-500",children:"App Link"}),(0,be.jsx)("p",{className:"text-sm text-gray-900 bg-white px-2 py-1 rounded border break-all",children:h})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("p",{className:"text-xs text-gray-500",children:"Support Tier"}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("elite"===(null==r?void 0:r.subscription_tier)?"bg-purple-100 text-purple-800":"pro"===(null==r?void 0:r.subscription_tier)?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:(null==r?void 0:r.subscription_tier)||"free"}),"elite"===(null==r?void 0:r.subscription_tier)&&(0,be.jsx)("span",{className:"text-xs text-purple-600",children:"Priority Support"})]})]})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)(Ze,{onClick:b,disabled:p,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:p?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ue.A,{className:"w-4 h-4 mr-2"}),"Submit Ticket"]})}),(0,be.jsxs)(Ze,{variant:"outline",onClick:a,className:"w-full",children:[(0,be.jsx)(He.A,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}),(0,be.jsx)("div",{className:"text-xs text-gray-500 space-y-2",children:(0,be.jsxs)("p",{children:[(0,be.jsx)("strong",{children:"Need immediate help?"})," Check our"," ",(0,be.jsx)("a",{href:"https://docs.base44.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"documentation"})," ","or join our"," ",(0,be.jsx)("a",{href:"https://discord.gg/ThpYPZpVts",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Discord community"}),"."]})})]})]})}const Wm={authentication:kn.A,billing:_e.A,bug_report:km.A,integrations_and_backend_functions:so.A,chat_issues:Am.A,security:In.A,other:Mr.A},Ym={open:{label:"Open",color:"bg-orange-100 text-orange-800 border-orange-200",icon:Ys.A},resolved:{label:"Resolved",color:"bg-green-100 text-green-800 border-green-200",icon:Ll.A}},Gm=e=>{var s,t,a;let{ticket:r,onClick:n,isSelected:i}=e;const l=(null===(s=Ym[r.ticket_status])||void 0===s?void 0:s.icon)||Te.A,o=Wm[r.category]||Mr.A;return(0,be.jsxs)(Ds,{className:"group hover:shadow-lg transition-all duration-300 cursor-pointer "+(i?"border-orange-500 bg-orange-50 shadow-lg":"border-slate-200 hover:border-slate-300"),onClick:()=>n(r),children:[(0,be.jsx)(Ls,{className:"pb-3",children:(0,be.jsxs)("div",{className:"flex items-start justify-between",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)(Us,{className:"text-lg font-semibold truncate transition-colors "+(i?"text-orange-900":"text-slate-900 group-hover:text-slate-700"),children:r.title}),(0,be.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[(0,be.jsxs)(Os,{variant:"secondary",className:`${null===(t=Ym[r.ticket_status])||void 0===t?void 0:t.color} border text-xs font-medium`,children:[(0,be.jsx)(l,{className:"w-3 h-3 mr-1"}),null===(a=Ym[r.ticket_status])||void 0===a?void 0:a.label]}),r.category&&(0,be.jsxs)(Os,{variant:"outline",className:"text-xs",children:[(0,be.jsx)(o,{className:"w-3 h-3 mr-1"}),r.category.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))]})]})]}),(0,be.jsxs)("div",{className:"ml-4 flex items-center",children:[(0,be.jsx)(Hs.A,{className:"w-3 h-3 mr-2 text-slate-400"}),(e=>{if(!e)return"Not available";const s=it().utc(e);return(0,be.jsxs)("div",{className:"text-right text-xs text-slate-500",children:[(0,be.jsx)("div",{className:"font-medium",children:s.format("MMM DD, YYYY")}),(0,be.jsx)("div",{className:"text-slate-400 mt-0.5",children:s.fromNow()})]})})(r.created_date)]})]})}),(0,be.jsxs)(Ms,{className:"pt-0",children:[(0,be.jsx)("p",{className:"text-slate-600 text-sm leading-relaxed line-clamp-2 mb-3",children:r.content}),(0,be.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,be.jsx)("div",{className:"flex items-center space-x-4",children:r.app_id&&(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(_m.A,{className:"w-3 h-3 mr-1"}),(0,be.jsxs)("span",{children:["App: ",r.app_id]})]})}),(0,be.jsx)(Os,{variant:"outline",className:"text-xs "+("elite"===r.user_subscription_tier?"border-purple-200 text-purple-700":"pro"===r.user_subscription_tier?"border-blue-200 text-blue-700":"border-gray-200 text-gray-700"),children:r.user_subscription_tier||"free"})]})]})]})},Hm=e=>{let{filter:s,onCreateTicket:t}=e;return(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)("div",{className:"mx-auto w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-6",children:(0,be.jsx)(vm.A,{className:"w-12 h-12 text-slate-400"})}),(0,be.jsxs)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:["No ","open"===s?"Open":"closed"===s?"Closed":""," Tickets"]}),(0,be.jsx)("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:"open"===s?"You don't have any open support tickets at the moment.":"closed"===s?"No closed tickets found.":"You haven't submitted any support tickets yet."}),(0,be.jsxs)(Ze,{className:"bg-orange-500 hover:bg-orange-600",onClick:t,children:[(0,be.jsx)(aa.A,{className:"w-4 h-4 mr-2"}),"Create New Ticket"]})]})};function Vm(){const[e,s]=(0,V.useSearchParams)(),t=(0,J.Zp)(),a=e.get("appId"),r="true"===e.get("openNew"),[n,i]=(0,Y.useState)([]),[l,o]=(0,Y.useState)(!0),[c,d]=(0,Y.useState)(null),[m,u]=(0,Y.useState)("open"),[h,x]=(0,Y.useState)(null),[p,g]=(0,Y.useState)(!1),[f,j]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{b()}),[a]),(0,Y.useEffect)((()=>{if(r){j(!0);const t=new URLSearchParams(e);t.delete("openNew"),s(t,{replace:!0})}}),[r,e,s]);const b=async()=>{try{o(!0),d(null);let e=await Tm.list("-updated_date")||[];a&&(e=e.filter((e=>e.app_id===a))),i(e)}catch(e){d("Failed to load support tickets. Please try again.")}finally{o(!1)}},v=e=>{x(e),g(!0)},y=()=>{j(!0)},N=(()=>{switch(m){case"open":return n.filter((e=>"open"===e.ticket_status));case"closed":return n.filter((e=>"resolved"===e.ticket_status));default:return n}})(),w=n.filter((e=>"open"===e.ticket_status)).length,C=n.filter((e=>"resolved"===e.ticket_status)).length;return l?(0,be.jsx)("div",{className:"w-full max-w-6xl mx-auto px-6 py-12",children:(0,be.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,be.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/3"}),(0,be.jsx)("div",{className:"space-y-4",children:[1,2,3].map((e=>(0,be.jsx)("div",{className:"h-32 bg-slate-200 rounded-lg"},e)))})]})}):c?(0,be.jsx)("div",{className:"w-full max-w-6xl mx-auto px-6 py-12",children:(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)("div",{className:"mx-auto w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,be.jsx)(Te.A,{className:"w-12 h-12 text-red-500"})}),(0,be.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Error Loading Tickets"}),(0,be.jsx)("p",{className:"text-slate-600 mb-6",children:c}),(0,be.jsx)(Ze,{onClick:b,variant:"outline",children:"Try Again"})]})}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"w-full max-w-6xl mx-auto px-6 py-12",children:[(0,be.jsxs)("div",{className:"mb-8",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,be.jsxs)(Ze,{variant:"ghost",size:"sm",onClick:()=>{t("/support")},className:"text-slate-600 hover:text-slate-900 hover:bg-slate-100",children:[(0,be.jsx)(Xr.A,{className:"w-4 h-4 mr-2"}),"Back to Support"]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"My Support Tickets"}),a&&(0,be.jsxs)("p",{className:"text-slate-600 mt-1",children:["Showing tickets for App: ",(0,be.jsx)("span",{className:"font-mono text-sm",children:a})]})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsxs)(Ze,{onClick:b,variant:"outline",size:"sm",children:[(0,be.jsx)(Oc.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,be.jsxs)(Ze,{className:"bg-orange-500 hover:bg-orange-600",size:"sm",onClick:y,children:[(0,be.jsx)(aa.A,{className:"w-4 h-4 mr-2"}),"New Ticket"]})]})]}),a&&(0,be.jsx)("div",{className:"mb-6",children:(0,be.jsxs)("div",{className:"inline-flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[(0,be.jsx)(Oc.A,{className:"w-4 h-4 text-blue-600"}),(0,be.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:["Filtered by App: ",(0,be.jsx)("span",{className:"font-mono",children:a})]}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{window.location.href="/support/conversations"},className:"h-auto p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100",children:(0,be.jsx)(He.A,{className:"w-4 h-4"})})]})})]}),(0,be.jsxs)(Ta,{value:m,onValueChange:u,className:"mb-6",children:[(0,be.jsxs)(Ea,{className:"grid w-full grid-cols-3 lg:w-96",children:[(0,be.jsxs)(Ia,{value:"open",className:"flex items-center space-x-2",children:[(0,be.jsx)(Ys.A,{className:"w-4 h-4"}),(0,be.jsxs)("span",{children:["Open (",w,")"]})]}),(0,be.jsxs)(Ia,{value:"closed",className:"flex items-center space-x-2",children:[(0,be.jsx)(Ll.A,{className:"w-4 h-4"}),(0,be.jsxs)("span",{children:["Closed (",C,")"]})]}),(0,be.jsxs)(Ia,{value:"all",className:"flex items-center space-x-2",children:[(0,be.jsx)(vm.A,{className:"w-4 h-4"}),(0,be.jsxs)("span",{children:["All (",n.length,")"]})]})]}),(0,be.jsx)(Pa,{value:m,className:"mt-6",children:0===N.length?(0,be.jsx)(Hm,{filter:m,onCreateTicket:y}):(0,be.jsx)("div",{className:"grid grid-cols-1 gap-4",children:N.map((e=>(0,be.jsx)(Gm,{ticket:e,onClick:v,isSelected:(null==h?void 0:h.id)===e.id},e.id)))})})]})]}),(0,be.jsx)(jt,{open:f,onOpenChange:j,children:(0,be.jsxs)(wt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,be.jsx)(Ct,{children:(0,be.jsx)(kt,{className:"text-2xl font-bold",children:"Submit Support Ticket"})}),(0,be.jsx)(qm,{appId:a,onSubmit:async e=>{j(!1),await b();let s=await Tm.list()||[];a&&(s=s.filter((e=>e.app_id===a)));const t=s.find((s=>s.title===e.title&&s.content===e.content));t&&(x(t),g(!0),i(s))},onCancel:()=>{j(!1)}})]})}),(0,be.jsx)(Fm,{conversationId:null==h?void 0:h.id,isOpen:p,onClose:()=>{g(!1),x(null)},ticketTitle:null==h?void 0:h.title,ticket:h})]})}function Jm(e){let{error:s,onRetry:t}=e;return(0,be.jsx)("div",{className:"w-full max-w-7xl mx-auto px-6 py-12",children:(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)("div",{className:"mx-auto w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,be.jsx)(Te.A,{className:"w-12 h-12 text-red-500"})}),(0,be.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Error Loading Tickets"}),(0,be.jsx)("p",{className:"text-slate-600 mb-6",children:s}),(0,be.jsx)(Ze,{onClick:t,variant:"outline",children:"Try Again"})]})})}var Km=t(34799),Zm=t(45536),Xm=t(91412);const Qm={authentication:kn.A,billing:_e.A,bug_report:km.A,integrations_and_backend_functions:so.A,chat_issues:Am.A,security:In.A,other:Mr.A},eu=(Ys.A,Ll.A,Wd.A,Km.A,Ut.A,Zm.A,Xm.A,Gs.A,na.A,function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"Not available";const t=it().utc(e);return s?`${t.format("MMM DD, YYYY [at] HH:mm [UTC]")} (${t.fromNow()})`:`${t.format("MMM DD, YYYY")} (${t.fromNow()})`}),su=[{value:"open",label:"Open",icon:Ys.A,color:"text-orange-600"},{value:"resolved",label:"Resolved",icon:Ll.A,color:"text-green-600"}],tu=e=>{let{category:s}=e;const t=Qm[s]||Te.A,a=s?s.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())):"Uncategorized";return(0,be.jsxs)(Os,{variant:"outline",className:"text-xs",children:[(0,be.jsx)(t,{className:"w-3 h-3 mr-1"}),a]})},au=e=>{let{title:s,icon:t,children:a,isCollapsible:r=!1,defaultExpanded:n=!0}=e;const[i,l]=(0,Y.useState)(n);return(0,be.jsxs)(Ds,{className:"border-slate-200",children:[(0,be.jsx)("div",{className:"p-3 "+(r?"cursor-pointer":""),onClick:r?()=>l(!i):void 0,children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(t,{className:"w-4 h-4 text-slate-600"}),(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:s})]}),r&&(0,be.jsx)("div",{className:"text-slate-400",children:i?(0,be.jsx)(fs.A,{className:"w-4 h-4"}):(0,be.jsx)(gs.A,{className:"w-4 h-4"})})]})}),i&&(0,be.jsx)(Ms,{className:"pt-0 pb-3 px-3",children:a})]})},ru=e=>{let{label:s,value:t,className:a=""}=e;return(0,be.jsxs)("div",{className:`flex justify-between items-start py-1.5 ${a}`,children:[(0,be.jsx)("span",{className:"text-xs text-slate-600 flex-shrink-0 w-20",children:s}),(0,be.jsx)("span",{className:"text-xs text-slate-900 text-right flex-1",children:t})]})};function nu(e){var s,t,a,r,n,i;let{conversationId:l,onTicketUpdated:o}=e;const{conversationId:c}=(0,J.g)(),d=l||c,[m,u]=(0,Y.useState)(null),[h,x]=(0,Y.useState)(!0),[p,g]=(0,Y.useState)(null),[f,j]=(0,Y.useState)(!1),[b,v]=(0,Y.useState)([]),[y,N]=(0,Y.useState)([]),[w,C]=(0,Y.useState)(!1),[S,k]=(0,Y.useState)([]),[A,_]=(0,Y.useState)(!1),[T,E]=(0,Y.useState)(""),[I,P]=(0,Y.useState)(""),[R,O]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{d&&D()}),[d]);const D=async()=>{try{var e;x(!0),g(null);const[s,t]=await Promise.all([Em.getTicketDetail(d),Im.getAgentProperties()]);u(s),v((null==t?void 0:t.internal_category_options)||[]),N((null==s||null===(e=s.ticket)||void 0===e?void 0:e.internal_categories)||[])}catch(s){g("Failed to load ticket details. Please try again.")}finally{x(!1)}},L=async()=>{const e=(s=T).trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?s.endsWith("@base44.com")?"":"Email must be from @base44.com domain":"Please enter a valid email address":"Email is required";var s;if(e)P(e);else try{O(!0),P(""),await Em.assignTicket(d,T.trim()),await D(),o&&o(),_(!1),E("")}catch(t){P("Failed to assign ticket. Please try again.")}finally{O(!1)}};if(h)return(0,be.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-slate-400 mx-auto mb-3"}),(0,be.jsx)("p",{className:"text-sm text-slate-600",children:"Loading conversation..."})]})});if(p)return(0,be.jsx)("div",{className:"h-full flex items-center justify-center p-6",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,be.jsx)(Te.A,{className:"w-6 h-6 text-red-500"})}),(0,be.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Error Loading Ticket"}),(0,be.jsx)("p",{className:"text-xs text-slate-600 mb-4",children:p}),(0,be.jsx)(Ze,{onClick:D,variant:"outline",size:"sm",children:"Try Again"})]})});const U=(null==m?void 0:m.ticket)||{id:d,title:"Loading...",content:"Loading ticket content...",status:"pending_admin_response",category:"other",app_id:null,created_by:"unknown@example.com",user_subscription_tier:"free",created_date:(new Date).toISOString(),updated_date:(new Date).toISOString()},$=(null==m?void 0:m.user)||{id:"unknown",email:U.created_by||"unknown@example.com",name:"Unknown User",stripe_customer_id:null,created_date:(new Date).toISOString()},M=(null==m?void 0:m.subscriptions)||[];return(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[(0,be.jsx)("div",{className:"border-b border-slate-200 p-4 bg-slate-50",children:(0,be.jsx)("div",{className:"space-y-3",children:(0,be.jsxs)("div",{className:"flex items-start justify-between",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold text-slate-900 truncate",children:U.title}),(0,be.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)(tu,{category:U.category}),(0,be.jsx)("div",{className:"text-xs text-slate-600",children:(0,be.jsx)("span",{className:"font-medium capitalize",children:U.ticket_status})}),U.assigned_to&&(0,be.jsxs)("div",{className:"text-xs text-slate-600",children:[(0,be.jsx)(Rd.A,{className:"w-3 h-3 inline mr-1"}),(0,be.jsx)("span",{className:"font-medium",children:U.assigned_to})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:["resolved"!==U.ticket_status&&(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>{E(""),P(""),_(!0)},className:"text-slate-600 hover:text-slate-900 hover:bg-slate-100 h-7 px-2 text-xs",children:[(0,be.jsx)(jc.A,{className:"w-3 h-3 mr-1"}),U.assigned_to?"Reassign":"Assign"]}),(0,be.jsxs)(bs,{value:U.ticket_status,onValueChange:async e=>{try{j(!0),await Em.changeTicketStatus(d,e),await D(),o&&o()}catch(s){g("Failed to change ticket status. Please try again.")}finally{j(!1)}},disabled:f,children:[(0,be.jsx)(Ns,{className:"h-7 w-auto text-xs border-slate-300 hover:border-slate-400",children:(0,be.jsxs)("div",{className:"flex items-center",children:[f?(0,be.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-slate-400 mr-1"}):(()=>{const e=su.find((e=>e.value===U.ticket_status)),s=(null==e?void 0:e.icon)||Ys.A;return(0,be.jsx)(s,{className:"w-3 h-3 mr-1"})})(),(0,be.jsx)(ys,{})]})}),(0,be.jsx)(Ss,{children:su.map((e=>{const s=e.icon;return(0,be.jsx)(As,{value:e.value,children:(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(s,{className:`w-4 h-4 ${e.color}`}),(0,be.jsx)("span",{children:e.label})]})},e.value)}))})]})]})]})]}),(0,be.jsxs)("div",{className:"flex flex-col items-end space-y-1 text-xs text-slate-600 ml-4",children:[(0,be.jsxs)("span",{className:"font-mono bg-white px-2 py-1 rounded",children:["id: ",U.id]}),(0,be.jsx)("span",{children:eu(U.created_date)})]})]})})}),(0,be.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,be.jsx)("div",{className:"flex-1 flex flex-col",children:(0,be.jsx)($m,{conversationId:d,isAdmin:!0})}),(0,be.jsx)("div",{className:"w-80 border-l border-slate-200 bg-slate-50 overflow-y-auto",children:(0,be.jsxs)("div",{className:"p-3 space-y-3",children:[(0,be.jsx)(au,{title:"User",icon:Ho.A,isCollapsible:!0,defaultExpanded:!0,children:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ru,{label:"Email",value:$.email}),(0,be.jsx)(ru,{label:"Name",value:$.full_name||"Not provided"}),(0,be.jsx)(ru,{label:"Subscription Status",value:$.stripe_subscription_status||"Not provided"}),(0,be.jsx)(ru,{label:"Manage",value:(0,be.jsxs)(V.Link,{to:`/user-management?userId=${$.id}`,target:"_blank",className:"inline-flex items-center text-slate-600 hover:text-slate-900 text-xs transition-colors",children:["View Profile",(0,be.jsx)(Da.A,{className:"w-2 h-2 ml-1"})]})}),$.stripe_customer_id&&(0,be.jsx)(ru,{label:"Stripe",value:(0,be.jsxs)("a",{href:`https://dashboard.stripe.com/customers/${$.stripe_customer_id}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-xs",children:["View",(0,be.jsx)(Da.A,{className:"w-2 h-2 ml-1"})]})})]})}),(0,be.jsx)(au,{title:"Subscription",icon:_e.A,isCollapsible:!0,defaultExpanded:!0,children:M&&M.length>0?(0,be.jsx)("div",{className:"space-y-2",children:M.map(((e,s)=>{var t,a,r;return(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)(ru,{label:"Plan",value:(null===(t=e.plan)||void 0===t?void 0:t.nickname)||"Unknown"}),(0,be.jsx)(ru,{label:"Status",value:e.status}),(0,be.jsx)(ru,{label:"Amount",value:`$${((null===(a=e.plan)||void 0===a?void 0:a.amount)/100).toFixed(2)}/${null===(r=e.plan)||void 0===r?void 0:r.interval}`})]},s)}))}):(0,be.jsx)("p",{className:"text-xs text-slate-600",children:"No active subscriptions"})}),(0,be.jsx)(au,{title:"App",icon:vm.A,isCollapsible:!0,defaultExpanded:!0,children:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ru,{label:"Name",value:(null===(s=m.app)||void 0===s?void 0:s.name)||"None"}),(0,be.jsx)(ru,{label:"Link",value:m.app&&(0,be.jsxs)(V.Link,{to:`/apps/${null===(t=m.app)||void 0===t?void 0:t.id}`,target:"_blank",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-xs",rel:"noopener noreferrer",children:["View",(0,be.jsx)(Da.A,{className:"w-2 h-2 ml-1"})]})}),(0,be.jsx)(ru,{label:"App Visiblity",value:null===(a=m.app)||void 0===a?void 0:a.public_settings}),(0,be.jsx)(ru,{label:"Created",value:eu(null===(r=m.app)||void 0===r?void 0:r.created_date)}),(0,be.jsx)(ru,{label:"Updated",value:eu(null===(n=m.app)||void 0===n?void 0:n.updated_date)}),(0,be.jsx)(ru,{label:"App ID",value:(null===(i=m.app)||void 0===i?void 0:i.id)||"None"})]})}),b.length>0&&(0,be.jsx)(au,{title:"Internal Categories",icon:_m.A,isCollapsible:!0,defaultExpanded:!0,children:(0,be.jsx)("div",{className:"space-y-3",children:w?(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:b.map((e=>(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(Nn,{id:e,checked:S.includes(e),onCheckedChange:()=>(e=>{k((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))})(e)}),(0,be.jsx)("label",{htmlFor:e,className:"text-sm text-slate-700 cursor-pointer",children:e})]},e)))}),(0,be.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,be.jsxs)(Ze,{size:"sm",onClick:async()=>{try{await Em.updateInternalCategories(d,S),N([...S]),C(!1),k([]),o&&o()}catch(e){g("Failed to update internal categories. Please try again.")}},className:"flex-1",children:[(0,be.jsx)(Br.A,{className:"w-3 h-3 mr-1"}),"Save"]}),(0,be.jsxs)(Ze,{size:"sm",variant:"outline",onClick:()=>{k([]),C(!1)},className:"flex-1",children:[(0,be.jsx)(He.A,{className:"w-3 h-3 mr-1"}),"Cancel"]})]})]}):(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("div",{className:"flex flex-wrap gap-1",children:y.length>0?y.map((e=>(0,be.jsxs)(Os,{variant:"outline",className:"text-xs",children:[(0,be.jsx)(_m.A,{className:"w-2 h-2 mr-1"}),e]},e))):(0,be.jsx)("span",{className:"text-xs text-slate-500",children:"No categories assigned"})}),(0,be.jsx)(Ze,{size:"sm",variant:"ghost",onClick:()=>{k([...y]),C(!0)},className:"h-6 w-6 p-0",children:(0,be.jsx)(ta.A,{className:"w-3 h-3"})})]}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"Internal categories for admin organization and tracking."})]})})})]})})]}),(0,be.jsx)(jt,{open:A,onOpenChange:_,children:(0,be.jsxs)(wt,{className:"sm:max-w-md",children:[(0,be.jsx)(Ct,{children:(0,be.jsxs)(kt,{className:"flex items-center",children:[(0,be.jsx)(jc.A,{className:"w-5 h-5 mr-2"}),U.assigned_to?"Reassign Ticket":"Assign Ticket"]})}),(0,be.jsxs)("div",{className:"space-y-4 py-4",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"assignEmail",children:"Agent Email"}),(0,be.jsx)(is,{id:"assignEmail",type:"email",value:T,onChange:e=>{E(e.target.value),I&&P("")},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),L())},placeholder:"agent@base44.com",className:"w-full "+(I?"border-red-500":""),disabled:R}),I&&(0,be.jsx)("p",{className:"text-sm text-red-600",children:I}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"Email must be from @base44.com domain"})]}),U.assigned_to&&(0,be.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,be.jsx)("p",{className:"text-xs text-slate-600 mb-1",children:"Currently assigned to:"}),(0,be.jsx)("p",{className:"text-sm font-medium text-slate-900",children:U.assigned_to})]})]}),(0,be.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>{E(""),P(""),_(!1)},disabled:R,children:"Cancel"}),(0,be.jsx)(Ze,{onClick:L,disabled:R||!T.trim(),children:R?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Assigning..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Rd.A,{className:"w-4 h-4 mr-2"}),U.assigned_to?"Reassign":"Assign"," Ticket"]})})]})]})})]})}const iu=e=>{var s;let{filters:t,onFilterChange:a,onClearFilters:r,ticketCounts:n,searchQuery:i,onSearchChange:l}=e;const o=[{value:"",label:"All",count:n.total},{value:"admin",label:"Pending Admin",count:n.pending_admin},{value:"user",label:"Pending User",count:n.pending_user},{value:"resolved",label:"Resolved",count:n.resolved}],c=[{value:"",label:"All Assigned",count:n.total},{value:"unassigned",label:"Unassigned",count:(null===(s=n.assigned_to)||void 0===s?void 0:s.unassigned)||0},...Object.entries(n.assigned_to||{}).filter((e=>{let[s]=e;return"unassigned"!==s})).map((e=>{let[s,t]=e;return{value:s,label:s.split("@")[0],count:t}}))];return(0,be.jsxs)("div",{className:"w-full h-full bg-white border-r border-slate-200 p-3 space-y-4 text-xs",children:[(0,be.jsx)("div",{className:"space-y-2",children:(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(Lt.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-slate-400 w-3 h-3"}),(0,be.jsx)(is,{placeholder:"Search...",value:i,onChange:e=>l(e.target.value),className:"pl-7 text-xs h-8"})]})}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h3",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Pending Response"}),(0,be.jsx)("div",{className:"space-y-0.5",children:o.map((e=>(0,be.jsx)("button",{onClick:()=>a("status",t.status===e.value?"":e.value),className:"w-full text-left px-2 py-1 rounded text-xs transition-colors "+(t.status===e.value?"bg-teal-100 text-teal-800 font-medium":"text-slate-600 hover:bg-slate-50"),children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("span",{className:"truncate",children:e.label}),void 0!==e.count&&(0,be.jsx)(Os,{variant:"secondary",className:"text-xs h-4 px-1",children:e.count})]})},e.value)))})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h3",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Assigned"}),(0,be.jsx)("div",{className:"space-y-0.5 max-h-32 overflow-y-auto",children:c.map((e=>(0,be.jsx)("button",{onClick:()=>a("assigned_to",t.assigned_to===e.value?"":e.value),className:"w-full text-left px-2 py-1 rounded text-xs transition-colors "+(t.assigned_to===e.value?"bg-blue-100 text-blue-800 font-medium":"text-slate-600 hover:bg-slate-50"),children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("span",{className:"truncate",children:e.label}),void 0!==e.count&&(0,be.jsx)(Os,{variant:"secondary",className:"text-xs h-4 px-1",children:e.count})]})},e.value)))})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h3",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Category"}),(0,be.jsx)("div",{className:"space-y-0.5",children:[{value:"",label:"All"},{value:"authentication",label:"Auth"},{value:"billing",label:"Billing"},{value:"bug_report",label:"Bugs"},{value:"integrations_and_backend_functions",label:"Integrations"},{value:"chat_issues",label:"Chat"},{value:"security",label:"Security"},{value:"other",label:"Other"}].map((e=>(0,be.jsx)("button",{onClick:()=>a("category",t.category===e.value?"":e.value),className:"w-full text-left px-2 py-1 rounded text-xs transition-colors "+(t.category===e.value?"bg-orange-100 text-orange-800 font-medium":"text-slate-600 hover:bg-slate-50"),children:(0,be.jsx)("span",{className:"truncate",children:e.label})},e.value)))})]}),n.internal_categories&&Object.keys(n.internal_categories).length>0&&(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsx)("h3",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Internal Categories"}),(0,be.jsx)("div",{className:"space-y-0.5 max-h-32 overflow-y-auto",children:Object.entries(n.internal_categories).map((e=>{let[s,r]=e;return(0,be.jsx)("button",{onClick:()=>a("internal_category",t.internal_category===s?"":s),className:"w-full text-left px-2 py-1 rounded text-xs transition-colors "+(t.internal_category===s?"bg-purple-100 text-purple-800 font-medium":"text-slate-600 hover:bg-slate-50"),children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsx)("span",{className:"truncate",children:s}),(0,be.jsx)(Os,{variant:"secondary",className:"text-xs h-4 px-1",children:r})]})},s)}))})]}),(t.status||t.category||t.assigned_to||t.internal_category||i)&&(0,be.jsx)(Ze,{variant:"outline",size:"sm",onClick:r,className:"w-full text-xs h-7",children:"Clear Filters"})]})},lu=e=>{let{ticket:s,isSelected:t,onClick:a}=e;const r=Qm[s.category];return(0,be.jsx)("div",{onClick:()=>a(s),className:"p-3 border-b border-slate-100 cursor-pointer transition-colors "+(t?"bg-teal-50 border-l-4 border-l-teal-500":"hover:bg-slate-50"),children:(0,be.jsxs)("div",{className:"space-y-1.5",children:[(0,be.jsx)("h4",{className:"font-medium text-slate-900 text-sm line-clamp-2 leading-tight",children:s.title}),(0,be.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,be.jsx)("span",{className:"truncate",children:s.created_by}),s.category&&(0,be.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0 ml-2",children:[r&&(0,be.jsx)(r,{className:"w-3 h-3 text-slate-500"}),(0,be.jsx)("span",{className:"capitalize",children:"integrations_and_backend_functions"===s.category?"Integrations":s.category.replace("_"," ")})]})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,be.jsxs)("span",{children:[(0,be.jsx)("span",{className:"text-slate-400",children:"created:"})," ",it().utc(s.created_date).fromNow()]}),s.updated_date&&(0,be.jsxs)("span",{children:[(0,be.jsx)("span",{className:"text-slate-400",children:"last update:"})," ",it().utc(s.updated_date).fromNow()]})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[s.pending_response_from?(0,be.jsx)(Os,{variant:"secondary",className:"text-xs "+("admin"===s.pending_response_from?"bg-orange-100 text-orange-800 border-orange-200":"user"===s.pending_response_from?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-800 border-gray-200"),children:"admin"===s.pending_response_from?"Pending Admin":"user"===s.pending_response_from?"Pending User":s.pending_response_from}):(0,be.jsx)(Os,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 border-green-200",children:"Resolved"}),(0,be.jsx)("span",{className:"text-xs text-slate-500 ml-2",children:s.assigned_to?(0,be.jsxs)("span",{children:[(0,be.jsx)("span",{className:"text-slate-400",children:"assigned:"})," ",s.assigned_to.split("@")[0]]}):(0,be.jsx)("span",{className:"text-slate-400 italic",children:"Unassigned"})})]})]})})};function ou(){const e=(0,J.Zp)(),{conversationId:s}=(0,J.g)(),[t,a]=(0,Y.useState)([]),[r,n]=(0,Y.useState)(!0),[i,l]=(0,Y.useState)(!1),[o,c]=(0,Y.useState)(null),[d,m]=(0,Y.useState)(""),[u,h]=(0,Y.useState)(null),[x,p]=(0,Y.useState)(!0),[g,f]=(0,Y.useState)({status:"",category:"",user_subscription_tier:"",app_id:"",created_by:"",assigned_to:"",internal_category:""});(0,Y.useEffect)((()=>{j()}),[]),(0,Y.useEffect)((()=>{if(s&&t.length>0){const e=t.find((e=>e.id===s));e&&h(e)}else s||h(null)}),[s,t]),(0,Y.useEffect)((()=>{const e=()=>{const e=window.location.pathname,s=e.match(/\/support\/admin\/conversations\/(.+)/);if(s){const e=s[1],a=t.find((s=>s.id===e));a&&h(a)}else"/support/admin/conversations"===e&&h(null)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[t]);const j=async()=>{try{n(!0),c(null);const e=await Em.getTickets({});a(e||[])}catch(e){c("Failed to load support tickets. Please try again.")}finally{n(!1)}},b=e=>{h(e),window.history.pushState(null,"",`/support/admin/conversations?conversationId=${e.id}`)},v=((e,s)=>{if(!s)return e;const t=s.toLowerCase();return e.filter((e=>{var s,a,r,n;return(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(a=e.content)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.app_id)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(n=e.created_by)||void 0===n?void 0:n.toLowerCase().includes(t))}))})((()=>{let e=t;return x&&(e=e.filter((e=>"open"===e.ticket_status))),g.status&&(e="resolved"===g.status?e.filter((e=>"resolved"===e.ticket_status)):e.filter((e=>e.pending_response_from===g.status))),g.category&&(e=e.filter((e=>e.category===g.category))),g.assigned_to&&(e="unassigned"===g.assigned_to?e.filter((e=>!e.assigned_to)):e.filter((e=>e.assigned_to===g.assigned_to))),g.internal_category&&(e=e.filter((e=>e.internal_categories&&e.internal_categories.includes(g.internal_category)))),e})(),d),y=(e=>{const s={status:{},tier:{},category:{},assigned_to:{},internal_categories:{}};return e.forEach((e=>{if("resolved"===e.ticket_status)return void(s.status.resolved=(s.status.resolved||0)+1);const t=e.pending_response_from;t&&(s.status[t]=(s.status[t]||0)+1);const a=e.user_subscription_tier||"free";s.tier[a]=(s.tier[a]||0)+1;const r=e.category;r&&(s.category[r]=(s.category[r]||0)+1);const n=e.assigned_to||"unassigned";s.assigned_to[n]=(s.assigned_to[n]||0)+1,e.internal_categories&&Array.isArray(e.internal_categories)&&e.internal_categories.forEach((e=>{s.internal_categories[e]=(s.internal_categories[e]||0)+1}))})),s.total=e.length,s.pending_admin=s.status.admin||0,s.pending_user=s.status.user||0,s.resolved=s.status.resolved||0,s})(t);return r?(0,be.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-400 mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-slate-600",children:"Loading conversations..."})]})}):o?(0,be.jsx)(Jm,{error:o,onRetry:j}):(0,be.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,be.jsx)("div",{className:"border-b border-slate-200 px-6 py-3",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,be.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:"Support Admin"}),(0,be.jsxs)("span",{className:"text-sm text-slate-500",children:[v.length," conversations"]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(Nn,{id:"show-only-open",checked:x,onCheckedChange:p,className:"h-4 w-4"}),(0,be.jsx)("label",{htmlFor:"show-only-open",className:"text-sm text-slate-600 cursor-pointer",children:"Show only open tickets"})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsxs)(Ze,{onClick:()=>e("/support/admin/agent-backoffice"),variant:"outline",size:"sm",children:[(0,be.jsx)(ra.A,{className:"w-4 h-4 mr-2"}),"AI Settings"]}),(0,be.jsxs)(Ze,{onClick:j,variant:"outline",size:"sm",children:[(0,be.jsx)($l.A,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),(0,be.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,be.jsx)("div",{className:"w-48 flex-shrink-0",children:(0,be.jsx)(iu,{filters:g,onFilterChange:(e,s)=>{f((t=>({...t,[e]:"all"===s?"":s})))},onClearFilters:()=>{f({status:"",category:"",user_subscription_tier:"",app_id:"",created_by:"",assigned_to:"",internal_category:""}),m("")},ticketCounts:y,searchQuery:d,onSearchChange:m})}),(0,be.jsx)("div",{className:"w-80 flex-shrink-0 bg-white border-r border-slate-200 overflow-y-auto",children:0===v.length?(0,be.jsx)("div",{className:"p-8 text-center text-slate-500",children:(0,be.jsx)("p",{children:"No conversations found"})}):(0,be.jsx)("div",{children:v.map((e=>(0,be.jsx)(lu,{ticket:e,isSelected:(null==u?void 0:u.id)===e.id,onClick:b},e.id)))})}),(0,be.jsx)("div",{className:"flex-1 bg-white",children:u?(0,be.jsx)(nu,{conversationId:u.id,isEmbedded:!0,onTicketUpdated:j}):(0,be.jsx)("div",{className:"h-full flex items-center justify-center text-slate-500",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,be.jsx)(ra.A,{className:"w-8 h-8"})}),(0,be.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Select a conversation"}),(0,be.jsx)("p",{className:"text-slate-600",children:"Choose a support ticket from the list to view details and respond"})]})})})]})]})}const cu=e=>{if(!e)return"Not available";const s=it().utc(e);return`${s.format("MMM DD, YYYY")} (${s.fromNow()})`},du=e=>{let{article:s,onEdit:t,onDelete:a}=e;return(0,be.jsxs)(Ds,{className:"group hover:shadow-lg transition-all duration-300 border-slate-200 hover:border-slate-300",children:[(0,be.jsx)(Ls,{className:"pb-3",children:(0,be.jsxs)("div",{className:"flex items-start justify-between",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)(Us,{className:"text-lg font-semibold text-slate-900 truncate group-hover:text-slate-700 transition-colors",children:s.title}),(0,be.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,be.jsxs)(Os,{variant:"outline",className:"text-xs",children:[(0,be.jsx)(Js.A,{className:"w-3 h-3 mr-1"}),"Article"]}),s.created_date&&(0,be.jsxs)("span",{className:"text-xs text-slate-500",children:["Created ",cu(s.created_date)]})]})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>t(s),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,be.jsx)(ta.A,{className:"w-4 h-4"})}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>a(s),className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-600 hover:text-red-800",children:(0,be.jsx)(Sl.A,{className:"w-4 h-4"})})]})]})}),(0,be.jsx)(Ms,{className:"pt-0",children:(0,be.jsx)("p",{className:"text-slate-600 text-sm leading-relaxed line-clamp-3",children:s.content||"No content available"})})]})},mu=e=>{let{article:s,isOpen:t,onClose:a,onSave:r,isCreating:n}=e;const[i,l]=(0,Y.useState)(""),[o,c]=(0,Y.useState)(""),[d,m]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{s?(l(s.title||""),c(s.content||"")):(l(""),c(""))}),[s,t]);return(0,be.jsx)(jt,{open:t,onOpenChange:a,children:(0,be.jsxs)(wt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,be.jsx)(Ct,{children:(0,be.jsxs)(kt,{className:"flex items-center",children:[(0,be.jsx)(Js.A,{className:"w-5 h-5 mr-2"}),n?"Create New Article":"Edit Article"]})}),(0,be.jsxs)("div",{className:"space-y-6 py-4",children:[(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"title",children:"Title"}),(0,be.jsx)(is,{id:"title",value:i,onChange:e=>l(e.target.value),placeholder:"Enter article title...",className:"w-full"})]}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)(ds,{htmlFor:"content",children:"Content"}),(0,be.jsx)(Na,{id:"content",value:o,onChange:e=>c(e.target.value),placeholder:"Enter article content...",className:"min-h-[400px] resize-none"}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"You can use markdown formatting for better presentation."})]}),(0,be.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:a,children:"Cancel"}),(0,be.jsx)(Ze,{onClick:async()=>{if(i.trim()&&o.trim()){m(!0);try{await r({id:null==s?void 0:s.id,title:i.trim(),content:o.trim()}),a()}catch(e){}finally{m(!1)}}},disabled:d||!i.trim()||!o.trim(),children:d?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Br.A,{className:"w-4 h-4 mr-2"}),n?"Create Article":"Save Changes"]})})]})]})]})})},uu=e=>{let{categories:s,onSave:t}=e;const[a,r]=(0,Y.useState)([]),[n,i]=(0,Y.useState)(""),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{r(s||[])}),[s]);const m=()=>{const e=n.trim();e&&!a.includes(e)&&(r([...a,e]),i(""))};return(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)(Us,{className:"flex items-center",children:[(0,be.jsx)(_m.A,{className:"w-5 h-5 mr-2"}),"Internal Category Options"]}),!l&&(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>o(!0),children:[(0,be.jsx)(ta.A,{className:"w-4 h-4 mr-2"}),"Edit"]})]})}),(0,be.jsx)(Ms,{children:l?(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex space-x-2",children:[(0,be.jsx)(is,{value:n,onChange:e=>i(e.target.value),placeholder:"Add new internal category...",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),m())},className:"flex-1"}),(0,be.jsx)(Ze,{onClick:m,disabled:!n.trim(),children:(0,be.jsx)(aa.A,{className:"w-4 h-4"})})]}),(0,be.jsxs)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[a.map(((e,s)=>(0,be.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-lg",children:[(0,be.jsx)("span",{className:"text-sm text-slate-700",children:e}),(0,be.jsx)(Ze,{variant:"ghost",size:"sm",onClick:()=>{return s=e,void r(a.filter((e=>e!==s)));var s},className:"text-red-600 hover:text-red-800 h-6 w-6 p-0",children:(0,be.jsx)(He.A,{className:"w-3 h-3"})})]},s))),0===a.length&&(0,be.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"No internal categories defined yet"})]})]}),(0,be.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>{r(s||[]),i(""),o(!1)},children:[(0,be.jsx)(He.A,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,be.jsx)(Ze,{onClick:async()=>{d(!0);try{await t(a),o(!1)}catch(e){}finally{d(!1)}},disabled:c,children:c?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Br.A,{className:"w-4 h-4 mr-2"}),"Save Categories"]})})]})]}):(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)("div",{className:"flex flex-wrap gap-2",children:a.length>0?a.map(((e,s)=>(0,be.jsxs)(Os,{variant:"outline",className:"text-xs",children:[(0,be.jsx)(_m.A,{className:"w-3 h-3 mr-1"}),e]},s))):(0,be.jsx)("div",{className:"text-sm text-slate-500 bg-slate-50 rounded-lg p-4 text-center w-full",children:"No internal categories defined yet"})}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"These categories can be assigned to support tickets for internal organization and tracking."})]})})]})},hu=e=>{let{title:s,systemPrompt:t,onSave:a,promptKey:r}=e;const[n,i]=(0,Y.useState)(""),[l,o]=(0,Y.useState)(!1),[c,d]=(0,Y.useState)(!1);(0,Y.useEffect)((()=>{i(t||"")}),[t]);return(0,be.jsxs)(Ds,{children:[(0,be.jsx)(Ls,{children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)(Us,{className:"flex items-center",children:[(0,be.jsx)(so.A,{className:"w-5 h-5 mr-2"}),s]}),!l&&(0,be.jsxs)(Ze,{variant:"outline",size:"sm",onClick:()=>o(!0),children:[(0,be.jsx)(ta.A,{className:"w-4 h-4 mr-2"}),"Edit"]})]})}),(0,be.jsx)(Ms,{children:l?(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsx)(Na,{value:n,onChange:e=>i(e.target.value),placeholder:`Enter ${s.toLowerCase()} for AI assistance...`,className:"min-h-[200px] resize-none"}),(0,be.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,be.jsxs)(Ze,{variant:"outline",onClick:()=>{i(t||""),o(!1)},children:[(0,be.jsx)(He.A,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,be.jsx)(Ze,{onClick:async()=>{d(!0);try{await a(r,n),o(!1)}catch(e){}finally{d(!1)}},disabled:c,children:c?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Br.A,{className:"w-4 h-4 mr-2"}),"Save Prompt"]})})]})]}):(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 border",children:(0,be.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-slate-700 font-sans leading-relaxed",children:n||`No ${s.toLowerCase()} configured`})}),(0,be.jsx)("p",{className:"text-xs text-slate-500",children:"response_system_prompt"===r?"This prompt guides the AI when responding to support questions.":"This prompt guides the AI when polishing and improving message grammar."})]})})]})};function xu(){const[e,s]=(0,Y.useState)([]),[t,a]=(0,Y.useState)(""),[r,n]=(0,Y.useState)(""),[i,l]=(0,Y.useState)([]),[o,c]=(0,Y.useState)(!0),[d,m]=(0,Y.useState)(null),[u,h]=(0,Y.useState)(""),[x,p]=(0,Y.useState)(null),[g,f]=(0,Y.useState)(!1),[j,b]=(0,Y.useState)(!1),[v,y]=(0,Y.useState)(null);(0,Y.useEffect)((()=>{N()}),[]);const N=async()=>{try{c(!0),m(null);const[e,t]=await Promise.all([Im.getArticles(),Im.getAgentProperties()]);s((null==e?void 0:e.articles)||e||[]),a((null==t?void 0:t.response_system_prompt)||""),n((null==t?void 0:t.polish_system_prompt)||""),l((null==t?void 0:t.internal_category_options)||[])}catch(e){m("Failed to load documentation data. Please try again.")}finally{c(!1)}},w=()=>{p(null),b(!0),f(!0)},C=e=>{p(e),b(!1),f(!0)},S=e=>{y(e)},k=async(e,s)=>{const t={};t[e]=s,await Im.updateAgentProperties(t),"response_system_prompt"===e?a(s):"polish_system_prompt"===e&&n(s)},A=e.filter((e=>{var s,t;return(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().includes(u.toLowerCase()))||(null===(t=e.content)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))}));return o?(0,be.jsx)("div",{className:"w-full max-w-7xl mx-auto px-6 py-12",children:(0,be.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,be.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/3"}),(0,be.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,be.jsx)("div",{className:"h-48 bg-slate-200 rounded-lg"}),(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map((e=>(0,be.jsx)("div",{className:"h-32 bg-slate-200 rounded-lg"},e)))})]})]})}):d?(0,be.jsx)("div",{className:"w-full max-w-7xl mx-auto px-6 py-12",children:(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)("div",{className:"mx-auto w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,be.jsx)(Te.A,{className:"w-12 h-12 text-red-500"})}),(0,be.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Error Loading Documentation"}),(0,be.jsx)("p",{className:"text-slate-600 mb-6",children:d}),(0,be.jsx)(Ze,{onClick:N,variant:"outline",children:"Try Again"})]})}):(0,be.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-6 py-12",children:[(0,be.jsx)("div",{className:"mb-8",children:(0,be.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Documentation Manager"}),(0,be.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage support articles and AI system prompts"})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsxs)(Ze,{onClick:N,variant:"outline",size:"sm",children:[(0,be.jsx)($l.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,be.jsxs)(Ze,{onClick:w,children:[(0,be.jsx)(aa.A,{className:"w-4 h-4 mr-2"}),"New Article"]})]})]})}),(0,be.jsxs)(Ta,{defaultValue:"articles",className:"space-y-6",children:[(0,be.jsxs)(Ea,{className:"grid w-full grid-cols-3 lg:w-[600px]",children:[(0,be.jsxs)(Ia,{value:"articles",className:"flex items-center space-x-2",children:[(0,be.jsx)(Hc.A,{className:"w-4 h-4"}),(0,be.jsxs)("span",{children:["Articles (",e.length,")"]})]}),(0,be.jsxs)(Ia,{value:"system-prompts",className:"flex items-center space-x-2",children:[(0,be.jsx)(ra.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{children:"System Prompts"})]}),(0,be.jsxs)(Ia,{value:"internal-categories",className:"flex items-center space-x-2",children:[(0,be.jsx)(_m.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{children:"Internal Categories"})]})]}),(0,be.jsxs)(Pa,{value:"articles",className:"space-y-6",children:[(0,be.jsx)("div",{className:"flex items-center space-x-4",children:(0,be.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,be.jsx)(Lt.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),(0,be.jsx)(is,{placeholder:"Search articles...",value:u,onChange:e=>h(e.target.value),className:"pl-10"})]})}),0===A.length?(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)("div",{className:"mx-auto w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-6",children:(0,be.jsx)(Js.A,{className:"w-12 h-12 text-slate-400"})}),(0,be.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:u?"No Articles Found":"No Articles Yet"}),(0,be.jsx)("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:u?"No articles match your search criteria. Try adjusting your search terms.":"Get started by creating your first support article."}),!u&&(0,be.jsxs)(Ze,{onClick:w,children:[(0,be.jsx)(aa.A,{className:"w-4 h-4 mr-2"}),"Create First Article"]})]}):(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((e=>(0,be.jsx)(du,{article:e,onEdit:C,onDelete:S},e.id)))})]}),(0,be.jsxs)(Pa,{value:"system-prompts",className:"space-y-6",children:[(0,be.jsx)(hu,{title:"Response System Prompt",systemPrompt:t,onSave:k,promptKey:"response_system_prompt"}),(0,be.jsx)(hu,{title:"Polish System Prompt",systemPrompt:r,onSave:k,promptKey:"polish_system_prompt"})]}),(0,be.jsx)(Pa,{value:"internal-categories",className:"space-y-6",children:(0,be.jsx)(uu,{categories:i,onSave:async e=>{await Im.updateAgentProperties({internal_category_options:e}),l(e)}})})]}),(0,be.jsx)(mu,{article:x,isOpen:g,onClose:()=>f(!1),onSave:async e=>{j?await Im.createArticle(e):await Im.updateArticle(e.id,e),await N()},isCreating:j}),(0,be.jsx)(jt,{open:!!v,onOpenChange:()=>y(null),children:(0,be.jsxs)(wt,{children:[(0,be.jsx)(Ct,{children:(0,be.jsxs)(kt,{className:"flex items-center text-red-600",children:[(0,be.jsx)(Te.A,{className:"w-5 h-5 mr-2"}),"Delete Article"]})}),(0,be.jsx)("div",{className:"py-4",children:(0,be.jsxs)("p",{className:"text-slate-600",children:['Are you sure you want to delete "',null==v?void 0:v.title,'"? This action cannot be undone.']})}),(0,be.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,be.jsx)(Ze,{variant:"outline",onClick:()=>y(null),children:"Cancel"}),(0,be.jsxs)(Ze,{variant:"destructive",onClick:async()=>{if(v)try{await Im.deleteArticle(v.id),await N(),y(null)}catch(d){}},children:[(0,be.jsx)(Sl.A,{className:"w-4 h-4 mr-2"}),"Delete Article"]})]})]})})]})}function pu(){const{fileId:e}=(0,J.g)();window.location.href=`${Q()}/api/files/${e}`}function gu(e){let{urlChangeHandler:s}=e;const t=(0,J.g)(),a=window.location.pathname,r=s(a,t);return r!==a&&(window.location.href=r),(0,be.jsx)("div",{children:"Loading..."})}const fu=[{name:"Home",url:"/",component:(0,be.jsx)(Pt,{}),icon:(0,be.jsx)(Qt.A,{})},{name:"Login",url:"/login",component:(0,be.jsx)(Yd,{}),requiresAuth:!1,usesLayout:!1,hide:!0},{name:"PrivacyPolicy",url:"/privacy-policy",component:(0,be.jsx)(Hd,{}),requiresAuth:!1,hide:!0},{name:"TermsOfService",url:"/terms-of-service",component:(0,be.jsx)(Vd,{}),requiresAuth:!1,hide:!0},{name:"ResponsibleUse",url:"/responsible-use-policy",component:(0,be.jsx)(lm,{}),requiresAuth:!1,hide:!0},{name:"File",url:"/api/files/:fileId",component:(0,be.jsx)(pu,{}),requiresAuth:!1,usesLayout:!1,hide:!0},{name:"User Apps",url:"/user-apps/:appId/show/:pageName?",component:(0,be.jsx)(gu,{urlChangeHandler:e=>e.replace("/user-apps/","/apps/")}),icon:(0,be.jsx)(ea.A,{}),showInMenu:!1,requiresAuth:!1},{name:"User Apps",url:"/apps",component:(0,be.jsx)(Xt,{}),icon:(0,be.jsx)(ea.A,{}),children:[{name:"User App Dashboard",url:"/apps/:appId",component:(0,be.jsx)(sd,{}),icon:(0,be.jsx)(ea.A,{}),usesLayout:!1},{name:"App Show",url:"/apps-show/:appSlug/:pageName?",component:(0,be.jsx)(gu,{urlChangeHandler:(e,s)=>{const t=s.appSlug,a=s.pageName;return`https://app--${t}.${window.location.host}/${a||""}`}}),icon:(0,be.jsx)(sa.A,{}),usesLayout:!1,requiresAuth:!1},{name:"Edit User App",url:"/apps/:appId/editor/preview/:pageName",component:(0,be.jsx)(sd,{view:"preview"}),icon:(0,be.jsx)(ta.A,{}),usesLayout:!1},{name:"Remix User App",url:"/remix-app/:appId",component:(0,be.jsx)(bm,{}),icon:(0,be.jsx)(ta.A,{})},{name:"Edit User App",url:"/apps/:appId/dashboard",component:(0,be.jsx)(sd,{view:"workspace"}),icon:(0,be.jsx)(ta.A,{}),usesLayout:!1},{name:"Edit User App",url:"/apps/:appId/editor/preview",component:(0,be.jsx)(sd,{view:"preview"}),icon:(0,be.jsx)(ta.A,{}),usesLayout:!1},{name:"Edit User App",url:"/apps/:appId/editor/workspace/:workspaceView",component:(0,be.jsx)(sd,{view:"workspace"}),icon:(0,be.jsx)(ta.A,{}),usesLayout:!1},{name:"Create App",url:"/create-app",component:(0,be.jsx)(td,{}),icon:(0,be.jsx)(aa.A,{})}]},{name:"Billing",url:"/billing",component:(0,be.jsx)(Ed,{}),icon:(0,be.jsx)(_e.A,{}),hide:!0},{name:"Support",url:"/support",component:(0,be.jsx)(Sm,{})},{name:"My Tickets",url:"/support/conversations",component:(0,be.jsx)(Vm,{})},{name:"Admin Support Tickets",url:"/support/admin/conversations",component:(0,be.jsx)(ou,{}),usesLayout:!1},{name:"Admin Support Docs",url:"/support/admin/agent-backoffice",component:(0,be.jsx)(xu,{})},{name:"User Settings",url:"/user-settings",hide:!0,component:(0,be.jsx)(Dt,{}),icon:(0,be.jsx)(ra.A,{})},{name:"User Management",url:"/user-management",component:(0,be.jsx)(Bd,{}),icon:(0,be.jsx)(na.A,{}),hide:!0},{name:"Integrations Catalog",url:"/integrations-catalog",component:(0,be.jsx)(um,{}),icon:(0,be.jsx)(ia.A,{}),children:[{name:"Integrations Catalog Item",url:"/integrations-catalog/item/:itemId",component:(0,be.jsx)(gm,{})},{name:"Integration Editor",url:"/integrations-catalog/editor/:itemId?",component:(0,be.jsx)(jm,{})}]},{name:"Analytics",url:"/admin/analytics",component:(0,be.jsx)(qd,{}),icon:(0,be.jsx)(la.A,{}),hide:!0},{name:"Stripe",url:"/integrations/stripe",component:(0,be.jsx)(im,{}),icon:(0,be.jsx)(_e.A,{}),hide:!0},{name:"NotFound",url:"*",component:(0,be.jsx)(Jd,{}),hide:!0,usesLayout:!1,requiresAuth:!1}];function ju(e){let{userEmail:s,userFullName:t}=e;return(0,be.jsx)("div",{className:"flex-shrink-0",children:(0,be.jsx)("div",{className:"w-8 h-8 rounded-full bg-transparent text-cyan-700 border-2 border-cyan-700 flex items-center justify-center",title:`${t||"Unknown"} (${s||"No email"})`,children:(0,be.jsx)("span",{className:"text-sm font-medium",children:t?t.charAt(0).toUpperCase():"U"})})})}function bu(){const{user:e}=Ne();return e?(0,be.jsx)(ju,{userEmail:null==e?void 0:e.email,userFullName:null==e?void 0:e.full_name}):null}const vu={textOrange:"text-orange-500 hover:text-orange-600",accentTealMuted:"text-cyan-700 hover:text-cyan-800",textShadow:"drop-shadow-[0_1px_1px_rgba(0,0,0,0.15)]"};function yu(){const{logout:e,user:s}=Ne(),t=(0,J.Zp)(),a=[{key:"profile",icon:(0,be.jsx)(Ho.A,{size:18,className:"mr-2"}),label:"My Profile",onClick:()=>t("/user-settings")},{key:"billing",icon:(0,be.jsx)(_e.A,{size:18,className:"mr-2"}),label:"Billing",onClick:()=>t("/billing")},{key:"affiliates",icon:(0,be.jsx)(Vc.A,{size:18,className:"mr-2"}),label:"Become an Affiliate!",onClick:()=>window.open("https://base44.com/affiliates","_blank"),className:"text-slate-500"},{key:"logout",icon:(0,be.jsx)(Jc.A,{size:18,className:"mr-2"}),label:"Sign Out",onClick:()=>{e(),t("/login")}}],r=[{href:"https://app.base44.com/support",external:!0,label:"Docs & Support",icon:(0,be.jsx)(Hc.A,{size:16,className:"mr-1.5 opacity-70"})},{href:"/integrations-catalog",external:!1,label:"Integrations",icon:(0,be.jsx)(ea.A,{size:16,className:"mr-1.5 opacity-70"})},{href:"https://base44.com/affiliates",external:!0,label:"Affiliates",icon:(0,be.jsx)(Vc.A,{size:16,className:"mr-1.5 opacity-70"})}],n=[{href:"https://discord.gg/ThpYPZpVts",title:"Join our Discord",icon:(0,be.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,be.jsx)("path",{d:"M18.8943 4.34399C17.5183 3.71467 16.057 3.256 14.5317 3C14.3396 3.33067 14.1263 3.77866 13.977 4.13067C12.3546 3.89599 10.7439 3.89599 9.14391 4.13067C8.99457 3.77866 8.77056 3.33067 8.58922 3C7.05325 3.256 5.59191 3.71467 4.22552 4.34399C1.46286 8.41865 0.716188 12.3973 1.08952 16.3226C2.92418 17.6559 4.69486 18.4666 6.4346 19C6.86126 18.424 7.24527 17.8053 7.57594 17.1546C6.9466 16.92 6.34927 16.632 5.77327 16.2906C5.9226 16.184 6.07194 16.0667 6.21061 15.9493C9.68793 17.5387 13.4543 17.5387 16.889 15.9493C17.0383 16.0667 17.177 16.184 17.3263 16.2906C16.7503 16.632 16.153 16.92 15.5236 17.1546C15.8543 17.8053 16.2383 18.424 16.665 19C18.4036 18.4666 20.185 17.6559 22.01 16.3226C22.4687 11.7787 21.2836 7.83202 18.8943 4.34399ZM8.05593 13.9013C7.01058 13.9013 6.15725 12.952 6.15725 11.7893C6.15725 10.6267 6.98925 9.67731 8.05593 9.67731C9.11191 9.67731 9.97588 10.6267 9.95454 11.7893C9.95454 12.952 9.11191 13.9013 8.05593 13.9013ZM15.065 13.9013C14.0196 13.9013 13.1652 12.952 13.1652 11.7893C13.1652 10.6267 13.9983 9.67731 15.065 9.67731C16.121 9.67731 16.985 10.6267 16.9636 11.7893C16.9636 12.952 16.1317 13.9013 15.065 13.9013Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})},{href:"https://x.com/base_44",title:"Follow on X",icon:(0,be.jsx)(Et.A,{size:20})},{href:"https://www.linkedin.com/company/106589953",title:"Follow on LinkedIn",icon:(0,be.jsx)(Tt.A,{size:20})}];return(0,be.jsx)("header",{className:"sticky top-0 z-50",children:(0,be.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:(0,be.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(V.Link,{to:"/",className:`text-lg font-semibold ${vu.brandText} ${vu.textShadow}`,children:"base44"}),(0,be.jsx)("nav",{className:"hidden md:flex items-center ml-6 sm:ml-8 space-x-4 sm:space-x-6",children:r.map(((e,s)=>e.external?(0,be.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:`flex items-center text-sm font-medium text-slate-600 hover:${vu.textOrange} transition-colors ${vu.textShadow}`,children:[e.icon,e.label]},s):(0,be.jsxs)(V.Link,{to:e.href,className:`flex items-center text-sm font-medium text-slate-600 hover:${vu.textOrange} transition-colors ${vu.textShadow}`,children:[e.icon,e.label]},s)))})]}),(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("div",{className:"hidden md:flex items-center space-x-4 mr-4",children:n.map(((e,s)=>(0,be.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:`${vu.accentTealMuted} ${vu.textShadow}`,title:e.title,children:e.icon},s)))}),(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsxs)(Ma,{children:[(0,be.jsx)(Fa,{className:"outline-none",children:(0,be.jsx)("div",{className:`${vu.accentTealMuted} ${vu.textShadow} cursor-pointer`,children:(0,be.jsx)(bu,{})})}),(0,be.jsxs)(Ha,{align:"end",className:"w-64 p-0 shadow-lg border border-slate-200 rounded-lg",children:[s&&(0,be.jsxs)("div",{className:"px-4 py-3 border-b border-slate-100",children:[(0,be.jsx)("div",{className:"font-medium",children:s.full_name}),(0,be.jsx)("div",{className:"text-xs text-muted-foreground truncate mt-0.5",children:s.email})]}),(0,be.jsx)("div",{className:"p-1",children:a.map((e=>(0,be.jsxs)(Va,{onClick:e.onClick,className:`cursor-pointer flex items-center px-4 py-2 hover:bg-slate-50 ${"logout"===e.key?"text-gray-800 hover:text-red-900":e.className||""}`,children:[e.icon,(0,be.jsx)("span",{children:e.label})]},e.key)))})]})]}),(0,be.jsx)("div",{className:"md:hidden ml-4 flex items-center",children:(0,be.jsxs)(ll,{children:[(0,be.jsx)(ol,{asChild:!0,children:(0,be.jsx)("button",{className:`${vu.accentTealMuted} ${vu.textShadow} flex items-center justify-center`,children:(0,be.jsx)(fc.A,{size:24})})}),(0,be.jsx)(hl,{side:"right",className:"w-[80%] sm:w-[350px]",children:(0,be.jsxs)("div",{className:"flex flex-col h-full py-6",children:[(0,be.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Navigation"}),(0,be.jsx)("nav",{className:"flex flex-col space-y-4",children:r.map(((e,s)=>e.external?(0,be.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-base font-medium",children:[e.icon,e.label]},s):(0,be.jsxs)(V.Link,{to:e.href,className:"flex items-center text-base font-medium",children:[e.icon,e.label]},s)))})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Connect"}),(0,be.jsx)("div",{className:"flex space-x-5",children:n.map(((e,s)=>(0,be.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",title:e.title,children:e.icon},s)))})]}),(0,be.jsxs)("div",{className:"mt-auto space-y-4",children:[(0,be.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Account"}),(0,be.jsx)("nav",{className:"flex flex-col space-y-4",children:a.map((e=>(0,be.jsxs)("button",{onClick:e.onClick,className:"flex items-center text-base font-medium",children:[e.icon,(0,be.jsx)("span",{children:e.label})]},e.key)))})]})]})})]})})]})]})]})})})}const Nu=e=>{let{children:s}=e;return(0,be.jsxs)(Qe,{children:[(0,be.jsx)(Eo,{}),(0,be.jsxs)("div",{className:"flex flex-col h-screen bg-slate-50 relative overflow-hidden",children:[(0,be.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-0",children:[(0,be.jsx)("div",{className:"absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-orange-200/30 rounded-full filter blur-3xl opacity-50 animate-pulse-slow",style:{animationDuration:"8s"}}),(0,be.jsx)("div",{className:"absolute top-1/3 -right-1/4 w-2/5 h-2/5 bg-cyan-200/30 rounded-full filter blur-3xl opacity-40 animate-pulse-slow",style:{animationDelay:"2s",animationDuration:"10s"}}),(0,be.jsx)("div",{className:"absolute bottom-0 left-1/4 w-1/3 h-1/3 bg-orange-200/20 rounded-full filter blur-3xl opacity-30 animate-pulse-slow",style:{animationDelay:"4s",animationDuration:"9s"}})]}),(0,be.jsxs)("div",{className:"flex flex-col h-full w-full relative z-10",children:[(0,be.jsx)(yu,{}),(0,be.jsx)("div",{className:"flex-1 overflow-auto",children:(0,be.jsx)("main",{className:"w-full h-full",children:s})})]})]})]})},wu=(0,Y.createContext)();const Cu=new class extends me{getBaseURL(){return"/apps"}getCurrentUser(e){return this.axios.get(`/${e}/entities/User/me`)}},Su=e=>{let{children:s,appId:t}=e;const[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(!1),[l,o]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{const e=xe(!0);e?(localStorage.setItem("token",e),ie("Authorization",`Bearer ${e}`),d()):o(!1)}),[]);const c=()=>{localStorage.removeItem("token"),le("Authorization"),r(null),i(!1),o(!1)},d=async()=>{try{o(!0);const e=await Cu.getCurrentUser(t);return window.FS&&window.FS("setIdentity",{uid:e.id,properties:{displayName:e.full_name||e.email,email:e.email}}),r(e),i(!0),o(!1),e}catch(e){o(!1),c()}};return(0,be.jsx)(wu.Provider,{value:{user:a,isAuthenticated:n,logout:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(c(),i(!1),r(null),e){const e=encodeURIComponent(window.location.href);window.location.href="/login?from_url="+e}},isLoadingAuth:l,updateUser:e=>{r(e)}},children:s})},ku=()=>(0,Y.useContext)(wu);async function Au(e,s){const t=ce(ca()+`/apps/${e}/integration-endpoints`,{"X-App-Id":e},!0,!0),a=await t.get("/schema");let r={};return(a.installed_packages||a).forEach((e=>{r[e.package_name]=function(e,s,t){const a={};return s.endpoints.forEach((r=>{a[r.name]=async a=>{if("create_checkout_session"===r.name&&window.parent!==window&&alert("Note - you're creating a stripe checkout session, but stripe does not allow this to be done inside an iframe. Please use the publish button to test the checkout flow."),"string"==typeof a)throw new Error(`Integration ${r.name} must receive an object with named parameters, received: ${a}`);try{let t,n;a instanceof FormData||a&&Object.values(a).some((e=>e instanceof File))?(t=new FormData,Object.keys(a).forEach((e=>{a[e]instanceof File?t.append(e,a[e],a[e].name):"object"==typeof a[e]&&null!==a[e]?t.append(e,JSON.stringify(a[e])):t.append(e,a[e])})),n="multipart/form-data"):(t=a,n="application/json");const i="Core"===s.package_name?`/Core/${r.name}`:`/${s.package_name}/${r.name}`,l=e.post(i,t||a,{headers:{"Content-Type":n}});return await l}catch(l){var n,i;throw t(`Error calling integration ${r.name}: ${(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.detail)||l.message}`,`When using the app, the following integration call failed:\ninput parameters:\n${JSON.stringify(a,null,2)}`,null,l),l}}})),a}(t,e,s)})),r.getMissingPackages=()=>a.missing_packages||[],r}const _u=(e,s,t)=>{const a=window.location.hostname;return!["localhost","base44.com","base44.app","app.base44.com","base44.onrender.com","apper-test.onrender.com","beta-base44.onrender.com","base44.io"].includes(a)||a.startsWith("app--")||a.startsWith("preview--")?t&&"object"==typeof t?`/${s}?${Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}`:t&&"string"==typeof t?t.startsWith("?")?`/${s}${t}`:`/${s}?${t}`:`/${s}`:t&&"object"==typeof t?`/apps-show/${e.slug}/${s}?${Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}`:t&&"string"==typeof t?t.startsWith("?")?`/apps-show/${e.slug}/${s}${t}`:`/apps-show/${e.slug}/${s}?${t}`:`/apps-show/${e.slug}/${s}`};async function Tu(e){const s=ce(ca()+"/apps/public",{"X-App-Id":e.id,"X-App-Slug":e.slug});if(!e.id&&!e.slug)throw new Error("Either id or slug must be provided");let t;t=e.slug?await s.get(`/prod/by-slug/${e.slug}`):await s.get(`/prod/by-id/${e.id}`);const a=(s,a,r,n)=>{let i=r;if(a&&"string"==typeof a){const e=a.match(/at\s+(\w+)\s+/);if(e&&e[1]){const s=e[1];if(t.components&&t.components[s])i=s;else if(t.pages&&t.pages[s])i=s;else{for(const e in t.components||{})if(t.components[e].includes(`function ${s}`)){i=e;break}for(const e in t.pages||{})if(t.pages[e].includes(`function ${s}`)){i=e;break}}}}e.onError(s,a,i,n)},r=function(e,s,t){return new class extends me{getBaseURL(){return ca()+`/apps/${e.id}`}inviteUser(e,s){return this.axios.post("/users/invite-user",{user_email:e,role:s})}getMyUserInfo(){return this.axios.get("/entities/User/me")}updateMyUserData(e){return this.axios.put("/entities/User/me",e)}async logout(){t.logout(!1),window.location.reload()}async login(){const s=window.location.href,t=`${se()}/apps/auth/login?from_url=${s}&app_id=${e.id}`;window.location.href=t}isUserAuthenticated(){return t.isUserAuthenticated()}}(s)}(t,a,e.authProps),n=ma(t,a,r),i=await Au(t.id,a),l=eo(t,a);return{appId:t.id,files:t,entities:n,integrations:i,functions:l,users:r,getCurrentPage:()=>function(e){let s=window.location.pathname;s.endsWith("/")&&(s=s.slice(0,-1));let t=s.split("/").pop();return t.includes("?")&&(t=t.split("?")[0]),Object.keys(e.pages).map((e=>e.toLowerCase())).includes(t.toLowerCase())?{name:t,code:e.pages[t]}:t===e.slug||t===e.id||"preview"===t||""===t?{name:e.main_page,code:e.pages[e.main_page]}:null}(t),createPageUrl:(e,s)=>_u(t,e,s),options:{...e,onError:a}}}var Eu=t(52021);function Iu(){const e="preview_";return{getItem:s=>localStorage.getItem(e+s),setItem:(s,t)=>localStorage.setItem(e+s,t),removeItem:s=>localStorage.removeItem(e+s)}}function Pu(e){(e.startsWith("./")||e.startsWith("@/"))&&(e=e.substring(2));const s=e.split("/"),t=[];for(const r of s)".."===r?t.pop():"."!==r&&t.push(r);let a=t.join("/");return/\.\w+$/.test(a)||(a+=".js"),a}function Ru(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={get(s,a){if(!s.hasOwnProperty(a)&&"PropTypes"!==a&&"__esModule"!==a&&a.charAt(0)===a.charAt(0).toUpperCase()){if("function"==typeof s&&a.charAt(0)===a.charAt(0).toUpperCase())return s;if(!t&&a===e.split("/").pop().split(".")[0]&&s.default)return s.default;throw new Error(`'${a}' does not exist in module: ${e}`)}return s[a]}};return new Proxy(s,a)}function Ou(e,s,t){try{const a=crypto.randomUUID?crypto.randomUUID():Date.now().toString();window.parent.postMessage({type:"console-log",logId:a,data:{message:"object"==typeof e?JSON.stringify(e):e,severity:s,component:t}},"*")}catch(a){}}function Du(e,s){const t=`[${e}]`;return{log:function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];window.console.log(t,...a);Ou(a.map((e=>"object"==typeof e?JSON.stringify(e):String(e))).join(" "),"log",e)},error:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];window.console.error(t,...r);const i=r.find((e=>e instanceof Error)),l=r.map((e=>(null==e?void 0:e.message)||(null==e?void 0:e.toString()))).join(" - "),o={title:l,details:l,originalError:i,componentName:e};s(o.title,o.details,o.componentName,o.originalError),Ou(l,"error",e)},warn:function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];window.console.warn(t,...a);Ou(a.map((e=>"object"==typeof e?JSON.stringify(e):String(e))).join(" "),"warn",e)}}}var Lu=t(84079),Uu=t(94048),$u=t(93204),Mu=t(86991),Fu=t(2739),zu=t(59903),Bu=t(35254),qu=t(59019),Wu=t(2527),Yu=t(99603),Gu=t(32033),Hu=(t(55392),t(47810)),Vu=(t(17687),t(94969));const Ju=Vu.bL,Ku=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Vu.q7,{ref:s,className:Be("border-b",t),...a})}));Ku.displayName="AccordionItem";const Zu=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsx)(Vu.Y9,{className:"flex",children:(0,be.jsxs)(Vu.l9,{ref:s,className:Be("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[a,(0,be.jsx)(gs.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})}));Zu.displayName=Vu.l9.displayName;const Xu=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsx)(Vu.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,be.jsx)("div",{className:Be("pb-4 pt-0",t),children:a})})}));Xu.displayName=Vu.UC.displayName;const Qu=t(61980).b;var eh=t(21984);const sh=eh.bL,th=eh.l9,ah=eh.YJ,rh=eh.ZL,nh=eh.Pb,ih=eh.z6,lh=Y.forwardRef(((e,s)=>{let{className:t,inset:a,children:r,...n}=e;return(0,be.jsxs)(eh.ZP,{ref:s,className:Be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a&&"pl-8",t),...n,children:[r,(0,be.jsx)($a.A,{className:"ml-auto h-4 w-4"})]})}));lh.displayName=eh.ZP.displayName;const oh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(eh.G5,{ref:s,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));oh.displayName=eh.G5.displayName;const ch=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(eh.ZL,{children:(0,be.jsx)(eh.UC,{ref:s,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})})}));ch.displayName=eh.UC.displayName;const dh=Y.forwardRef(((e,s)=>{let{className:t,inset:a,...r}=e;return(0,be.jsx)(eh.q7,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...r})}));dh.displayName=eh.q7.displayName;const mh=Y.forwardRef(((e,s)=>{let{className:t,children:a,checked:r,...n}=e;return(0,be.jsxs)(eh.H_,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(eh.VF,{children:(0,be.jsx)(js.A,{className:"h-4 w-4"})})}),a]})}));mh.displayName=eh.H_.displayName;const uh=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(eh.hN,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(eh.VF,{children:(0,be.jsx)(us.A,{className:"h-2 w-2 fill-current"})})}),a]})}));uh.displayName=eh.hN.displayName;const hh=Y.forwardRef(((e,s)=>{let{className:t,inset:a,...r}=e;return(0,be.jsx)(eh.JU,{ref:s,className:Be("px-2 py-1.5 text-sm font-semibold text-foreground",a&&"pl-8",t),...r})}));hh.displayName=eh.JU.displayName;const xh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(eh.wv,{ref:s,className:Be("-mx-1 my-1 h-px bg-border",t),...a})}));xh.displayName=eh.wv.displayName;const ph=e=>{let{className:s,...t}=e;return(0,be.jsx)("span",{className:Be("ml-auto text-xs tracking-widest text-muted-foreground",s),...t})};ph.displayName="ContextMenuShortcut";const gh=Fd.FormProvider,fh=Y.createContext({}),jh=e=>{let{...s}=e;return(0,be.jsx)(fh.Provider,{value:{name:s.name},children:(0,be.jsx)(Fd.Controller,{...s})})},bh=()=>{const e=Y.useContext(fh),s=Y.useContext(vh),{getFieldState:t,formState:a}=(0,Fd.useFormContext)(),r=t(e.name,a);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:n}=s;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...r}},vh=Y.createContext({}),yh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;const r=Y.useId();return(0,be.jsx)(vh.Provider,{value:{id:r},children:(0,be.jsx)("div",{ref:s,className:Be("space-y-2",t),...a})})}));yh.displayName="FormItem";const Nh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;const{error:r,formItemId:n}=bh();return(0,be.jsx)(ds,{ref:s,className:Be(r&&"text-destructive",t),htmlFor:n,...a})}));Nh.displayName="FormLabel";const wh=Y.forwardRef(((e,s)=>{let{...t}=e;const{error:a,formItemId:r,formDescriptionId:n,formMessageId:i}=bh();return(0,be.jsx)(Je.DX,{ref:s,id:r,"aria-describedby":a?`${n} ${i}`:`${n}`,"aria-invalid":!!a,...t})}));wh.displayName="FormControl";const Ch=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;const{formDescriptionId:r}=bh();return(0,be.jsx)("p",{ref:s,id:r,className:Be("text-sm text-muted-foreground",t),...a})}));Ch.displayName="FormDescription";const Sh=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;const{error:n,formMessageId:i}=bh(),l=n?String(null==n?void 0:n.message):a;return l?(0,be.jsx)("p",{ref:s,id:i,className:Be("text-sm font-medium text-destructive",t),...r,children:l}):null}));Sh.displayName="FormMessage";var kh=t(55102);const Ah=kh.W1,_h=kh.YJ,Th=kh.ZL,Eh=kh.Pb,Ih=kh.z6,Ph=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(kh.bL,{ref:s,className:Be("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",t),...a})}));Ph.displayName=kh.bL.displayName;const Rh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(kh.l9,{ref:s,className:Be("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t),...a})}));Rh.displayName=kh.l9.displayName;const Oh=Y.forwardRef(((e,s)=>{let{className:t,inset:a,children:r,...n}=e;return(0,be.jsxs)(kh.ZP,{ref:s,className:Be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a&&"pl-8",t),...n,children:[r,(0,be.jsx)($a.A,{className:"ml-auto h-4 w-4"})]})}));Oh.displayName=kh.ZP.displayName;const Dh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(kh.G5,{ref:s,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));Dh.displayName=kh.G5.displayName;const Lh=Y.forwardRef(((e,s)=>{let{className:t,align:a="start",alignOffset:r=-4,sideOffset:n=8,...i}=e;return(0,be.jsx)(kh.ZL,{children:(0,be.jsx)(kh.UC,{ref:s,align:a,alignOffset:r,sideOffset:n,className:Be("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})}));Lh.displayName=kh.UC.displayName;const Uh=Y.forwardRef(((e,s)=>{let{className:t,inset:a,...r}=e;return(0,be.jsx)(kh.q7,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...r})}));Uh.displayName=kh.q7.displayName;const $h=Y.forwardRef(((e,s)=>{let{className:t,children:a,checked:r,...n}=e;return(0,be.jsxs)(kh.H_,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(kh.VF,{children:(0,be.jsx)(js.A,{className:"h-4 w-4"})})}),a]})}));$h.displayName=kh.H_.displayName;const Mh=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(kh.hN,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,be.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,be.jsx)(kh.VF,{children:(0,be.jsx)(us.A,{className:"h-2 w-2 fill-current"})})}),a]})}));Mh.displayName=kh.hN.displayName;const Fh=Y.forwardRef(((e,s)=>{let{className:t,inset:a,...r}=e;return(0,be.jsx)(kh.JU,{ref:s,className:Be("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...r})}));Fh.displayName=kh.JU.displayName;const zh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(kh.wv,{ref:s,className:Be("-mx-1 my-1 h-px bg-muted",t),...a})}));zh.displayName=kh.wv.displayName;const Bh=e=>{let{className:s,...t}=e;return(0,be.jsx)("span",{className:Be("ml-auto text-xs tracking-widest text-muted-foreground",s),...t})};Bh.displayname="MenubarShortcut";var qh=t(47624);const Wh=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(qh.bL,{ref:s,className:Be("relative z-10 flex max-w-max flex-1 items-center justify-center",t),...r,children:[a,(0,be.jsx)(Zh,{})]})}));Wh.displayName=qh.bL.displayName;const Yh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(qh.B8,{ref:s,className:Be("group flex flex-1 list-none items-center justify-center space-x-1",t),...a})}));Yh.displayName=qh.B8.displayName;const Gh=qh.q7,Hh=(0,Me.cva)("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Vh=Y.forwardRef(((e,s)=>{let{className:t,children:a,...r}=e;return(0,be.jsxs)(qh.l9,{ref:s,className:Be(Hh(),"group",t),...r,children:[a," ",(0,be.jsx)(gs.A,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]})}));Vh.displayName=qh.l9.displayName;const Jh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(qh.UC,{ref:s,className:Be("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",t),...a})}));Jh.displayName=qh.UC.displayName;const Kh=qh.N_,Zh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{className:Be("absolute left-0 top-full flex justify-center"),children:(0,be.jsx)(qh.LM,{className:Be("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",t),ref:s,...a})})}));Zh.displayName=qh.LM.displayName;const Xh=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(qh.C1,{ref:s,className:Be("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",t),...a,children:(0,be.jsx)("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})})}));Xh.displayName=qh.C1.displayName;var Qh=t(23379);const ex=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsxs)(Qh.bL,{ref:s,className:Be("relative flex w-full touch-none select-none items-center",t),...a,children:[(0,be.jsx)(Qh.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,be.jsx)(Qh.Q6,{className:"absolute h-full bg-primary"})}),(0,be.jsx)(Qh.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})}));ex.displayName=Qh.bL.displayName;var sx=t(52982);const tx=(0,Me.cva)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),ax=Y.forwardRef(((e,s)=>{let{className:t,variant:a,size:r,...n}=e;return(0,be.jsx)(sx.b,{ref:s,className:Be(tx({variant:a,size:r,className:t})),...n})}));ax.displayName=sx.b.displayName;var rx=t(85162);const nx=e=>{let{...s}=e;const{theme:t="system"}=(0,rx.D)();return(0,be.jsx)(Gu.Toaster,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};function ix(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,ze.QP)((0,Fe.$)(s))}const lx=Y.createContext(null);function ox(){const e=Y.useContext(lx);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const cx=Y.forwardRef(((e,s)=>{let{defaultOpen:t=!0,open:a,onOpenChange:r,className:n,style:i,children:l,...o}=e;const c=function(){const[e,s]=Y.useState(void 0);return Y.useEffect((()=>{const e=window.matchMedia("(max-width: 767px)"),t=()=>{s(window.innerWidth<768)};return e.addEventListener("change",t),s(window.innerWidth<768),()=>e.removeEventListener("change",t)}),[]),!!e}(),[d,m]=Y.useState(!1),[u,h]=Y.useState(t),x=null!=a?a:u,p=Y.useCallback((e=>{const s="function"==typeof e?e(x):e;r?r(s):h(s),document.cookie=`sidebar_state=${s}; path=/; max-age=604800`}),[r,x]),g=Y.useCallback((()=>c?m((e=>!e)):p((e=>!e))),[c,p,m]);Y.useEffect((()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),g())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[g]);const f=x?"expanded":"collapsed",j=Y.useMemo((()=>({state:f,open:x,setOpen:p,isMobile:c,openMobile:d,setOpenMobile:m,toggleSidebar:g})),[f,x,p,c,d,m,g]);return(0,be.jsx)(lx.Provider,{value:j,children:(0,be.jsx)(Qe,{delayDuration:0,children:(0,be.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...i},className:ix("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:s,...o,children:l})})})}));cx.displayName="SidebarProvider";const dx=Y.forwardRef(((e,s)=>{let{side:t="left",variant:a="sidebar",collapsible:r="offcanvas",className:n,children:i,...l}=e;const{isMobile:o,state:c,openMobile:d,setOpenMobile:m}=ox();return"none"===r?(0,be.jsx)("div",{className:ix("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:s,...l,children:i}):o?(0,be.jsx)(ll,{open:d,onOpenChange:m,...l,children:(0,be.jsxs)(hl,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:t,children:[(0,be.jsxs)(xl,{className:"sr-only",children:[(0,be.jsx)(gl,{children:"Sidebar"}),(0,be.jsx)(fl,{children:"Displays the mobile sidebar."})]}),(0,be.jsx)("div",{className:"flex h-full w-full flex-col",children:i})]})}):(0,be.jsxs)("div",{ref:s,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":"collapsed"===c?r:"","data-variant":a,"data-side":t,children:[(0,be.jsx)("div",{className:ix("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===a||"inset"===a?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,be.jsx)("div",{className:ix("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===a||"inset"===a?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...l,children:(0,be.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})}));dx.displayName="Sidebar";const mx=Y.forwardRef(((e,s)=>{let{className:t,onClick:a,...r}=e;const{toggleSidebar:n}=ox();return(0,be.jsxs)(Ze,{ref:s,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ix("h-7 w-7",t),onClick:e=>{null==a||a(e),n()},...r,children:[(0,be.jsx)(Fl.A,{}),(0,be.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})}));mx.displayName="SidebarTrigger";const ux=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;const{toggleSidebar:r}=ox();return(0,be.jsx)("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ix("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...a})}));ux.displayName="SidebarRail";const hx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("main",{ref:s,className:ix("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...a})}));hx.displayName="SidebarInset";const xx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(is,{ref:s,"data-sidebar":"input",className:ix("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...a})}));xx.displayName="SidebarInput";const px=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,"data-sidebar":"header",className:ix("flex flex-col gap-2 p-2",t),...a})}));px.displayName="SidebarHeader";const gx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,"data-sidebar":"footer",className:ix("flex flex-col gap-2 p-2",t),...a})}));gx.displayName="SidebarFooter";const fx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)(Bs,{ref:s,"data-sidebar":"separator",className:ix("mx-2 w-auto bg-sidebar-border",t),...a})}));fx.displayName="SidebarSeparator";const jx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,"data-sidebar":"content",className:ix("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...a})}));jx.displayName="SidebarContent";const bx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,"data-sidebar":"group",className:ix("relative flex w-full min-w-0 flex-col p-2",t),...a})}));bx.displayName="SidebarGroup";const vx=Y.forwardRef(((e,s)=>{let{className:t,asChild:a=!1,...r}=e;const n=a?Je.DX:"div";return(0,be.jsx)(n,{ref:s,"data-sidebar":"group-label",className:ix("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...r})}));vx.displayName="SidebarGroupLabel";const yx=Y.forwardRef(((e,s)=>{let{className:t,asChild:a=!1,...r}=e;const n=a?Je.DX:"button";return(0,be.jsx)(n,{ref:s,"data-sidebar":"group-action",className:ix("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...r})}));yx.displayName="SidebarGroupAction";const Nx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,"data-sidebar":"group-content",className:ix("w-full text-sm",t),...a})}));Nx.displayName="SidebarGroupContent";const wx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("ul",{ref:s,"data-sidebar":"menu",className:ix("flex w-full min-w-0 flex-col gap-1",t),...a})}));wx.displayName="SidebarMenu";const Cx=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("li",{ref:s,"data-sidebar":"menu-item",className:ix("group/menu-item relative",t),...a})}));Cx.displayName="SidebarMenuItem";const Sx=(0,Me.cva)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),kx=Y.forwardRef(((e,s)=>{let{asChild:t=!1,isActive:a=!1,variant:r="default",size:n="default",tooltip:i,className:l,...o}=e;const c=t?Je.DX:"button",{isMobile:d,state:m}=ox(),u=(0,be.jsx)(c,{ref:s,"data-sidebar":"menu-button","data-size":n,"data-active":a,className:ix(Sx({variant:r,size:n}),l),...o});return i?("string"==typeof i&&(i={children:i}),(0,be.jsxs)(es,{children:[(0,be.jsx)(ss,{asChild:!0,children:u}),(0,be.jsx)(ts,{side:"right",align:"center",hidden:"collapsed"!==m||d,...i})]})):u}));kx.displayName="SidebarMenuButton";const Ax=Y.forwardRef(((e,s)=>{let{className:t,asChild:a=!1,showOnHover:r=!1,...n}=e;const i=a?Je.DX:"button";return(0,be.jsx)(i,{ref:s,"data-sidebar":"menu-action",className:ix("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...n})}));Ax.displayName="SidebarMenuAction";const _x=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("div",{ref:s,"data-sidebar":"menu-badge",className:ix("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...a})}));_x.displayName="SidebarMenuBadge";const Tx=Y.forwardRef(((e,s)=>{let{className:t,showIcon:a=!1,...r}=e;const n=Y.useMemo((()=>`${Math.floor(40*Math.random())+50}%`),[]);return(0,be.jsxs)("div",{ref:s,"data-sidebar":"menu-skeleton",className:ix("flex h-8 items-center gap-2 rounded-md px-2",t),...r,children:[a&&(0,be.jsx)(qo,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,be.jsx)(qo,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":n}})]})}));Tx.displayName="SidebarMenuSkeleton";const Ex=Y.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,be.jsx)("ul",{ref:s,"data-sidebar":"menu-sub",className:ix("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...a})}));Ex.displayName="SidebarMenuSub";const Ix=Y.forwardRef(((e,s)=>{let{...t}=e;return(0,be.jsx)("li",{ref:s,...t})}));Ix.displayName="SidebarMenuSubItem";const Px=Y.forwardRef(((e,s)=>{let{asChild:t=!1,size:a="md",isActive:r,className:n,...i}=e;const l=t?Je.DX:"a";return(0,be.jsx)(l,{ref:s,"data-sidebar":"menu-sub-button","data-size":a,"data-active":r,className:ix("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===a&&"text-xs","md"===a&&"text-sm","group-data-[collapsible=icon]:hidden",n),...i})}));Px.displayName="SidebarMenuSubButton";var Rx=t(68803),Ox=t(22164),Dx=t(31815),Lx=t(13437),Ux=t(11728),$x=t(15061),Mx=t(76131),Fx=t(88141),zx=t(81052);it().locale("en-US");class Bx{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};this.appSDK=e;let G={};for(const a in e.files.pages)G["pages/"+a+".js"]=e.files.pages[a];for(const a in e.files.components)G["components/"+a+".js"]=e.files.components[a];e.files.layout&&(G["layout.js"]=e.files.layout),this.appFiles=G,this.packages={recharts:Fu,"react-hot-toast":Rt,moment:it(),"moment/locale/he":Mu,"moment/locale/ar":Lu,"moment/locale/fr":Uu,"moment/locale/es":$u,react:Y,"lucide-react":zu,"react-quill":Bu,"@hello-pangea/dnd":Hu,"date-fns":Rx,"date-fns/locale":Ox,three:Lx,"three/addons/controls/OrbitControls.js":Ux,"three/addons/loaders/GLTFLoader.js":$x,sonner:Gu,"@radix-ui/react-toast":yo,"@radix-ui/react-dialog":ft,"class-variance-authority":Me,"@/components/ui/sidebar":W,"react-dom":Wr,"react-dom/client":H,"react-markdown":Dx,lodash:Z,jspdf:qu,"framer-motion":Mx,"react-router-dom":V,"react-hook-form":Fd,"react-quill/dist/quill.snow.css":{},"react-leaflet":Yu,leaflet:Wu,"leaflet/dist/leaflet.css":{},"canvas-confetti":Fx,html2canvas:zx,"@/lib/utils":a,"@/components/lib/utils":a,"./components/lib/utils":a,"@/components/ui/accordion":D,"@/components/ui/alert":r,"@/components/ui/alert-dialog":O,"@/components/ui/aspect-ratio":L,"@/components/ui/avatar":x,"@/components/ui/badge":m,"@/components/ui/button":n,"@/components/ui/calendar":A,"@/components/ui/card":u,"@/components/ui/checkbox":v,"@/components/ui/collapsible":S,"@/components/ui/command":k,"@/components/ui/context-menu":U,"@/components/ui/dialog":p,"@/components/ui/dropdown-menu":b,"@/components/ui/form":$,"@/components/ui/hover-card":C,"@/components/ui/input":l,"@/components/ui/label":o,"@/components/ui/menubar":M,"@/components/ui/navigation-menu":F,"@/components/ui/popover":_,"@/components/ui/progress":w,"@/components/ui/radio-group":c,"@/components/ui/scroll-area":y,"@/components/ui/select":d,"@/components/ui/separator":h,"@/components/ui/sheet":T,"@/components/ui/skeleton":R,"@/components/ui/slider":z,"@/components/ui/switch":E,"@/components/ui/table":g,"@/components/ui/tabs":j,"@/components/ui/textarea":f,"@/components/ui/toast":I,"@/hooks/use-toast":N,"@/components/ui/use-toast":N,"@/components/ui/toaster":P,"@/components/ui/toggle":B,"@/components/ui/tooltip":i,"@/components/ui/sonner":q},this.globals=s,this.moduleCache={},this.compilingModules=new Set,this.importFile=this.importFile.bind(this),this.onError=t}_importAppSDK(e){let s=e;if(e.split("/").length>2&&(s=e.split("/").pop()),e.includes("/entities"))return s?{...this.appSDK.entities,default:this.appSDK.entities[s]}:this.appSDK.entities;if(e.includes("/functions"))return s?{...this.appSDK.functions,default:()=>alert="ok!!!"}:this.appSDK.functions;if(e.includes("/integrations")){if(s)return this.appSDK.integrations[s];let e={};return Object.keys(this.appSDK.integrations).forEach((s=>{e[`@/integrations/${s}`]=this.appSDK.integrations[s],e[`./integrations/${s}`]=this.appSDK.integrations[s]})),e}return"./utils"==e||"@/utils"==e?{createPageUrl:this.appSDK.createPageUrl}:void 0}importAppSDK(e){return this._importAppSDK(e)}importFile(e,s){if(e.endsWith(".css"))return this.handleCSSImport(e);const t=Pu(e);if(this.appFiles[t]&&!t.includes("use-toast"))return this.importAppFile(e,s);if(e.includes("components/ui/")||e.includes("@/components/ui/")){let s=e;if(e.startsWith("./")||e.startsWith("../")){const t=e.split("/");s=`@/components/ui/${t[t.length-1]}`}return this.importPackage(s)}return"@/lib/utils"===e?this.importPackage(e):e.startsWith("./")||e.startsWith("@/")||e.startsWith("../")?e.includes("/entities/")||e.includes("/functions/")||e.includes("/integrations/")||"./utils"==e||"@/utils"==e?this.importAppSDK(e):this.importAppFile(e,s):this.importPackage(e)}importPackage(e){if(!this.packages.hasOwnProperty(e)){const s=e.split("/");if(this.packages.hasOwnProperty(s[0])){let t=this.packages[s[0]];for(let a=1;a<s.length;a++){if(!t||!Object.prototype.hasOwnProperty.call(t,s[a]))throw new Error(`Module not found: '${e}'`);t=t[s[a]]}return Ru(e,t,!0)}throw new Error(`Module not found: '${e}'`)}return Ru(e,this.packages[e],!0)}importAppFile(e,s){const t=function(e,s,t){const a=Pu(e);if(t[a])return a;if(e.startsWith("./")||e.startsWith("../")){const a=s.split("/").slice(0,-1).join("/"),r=e.split("/");let n=a?a.split("/"):[];for(const e of r)"."!==e&&(".."===e?n.length>0&&n.pop():e&&n.push(e));let i=n.join("/");if(i.startsWith("./")&&(i=i.substring(2)),i.startsWith("../")&&(i=i.substring(3)),i.startsWith("@/")&&(i=i.substring(2)),t[i])return i;if(t[i+".js"])return i+".js";const l=Object.keys(t).find((s=>s.endsWith(e)));if(l)return l}return a}(e,s,this.appFiles);if(this.moduleCache[t])return this.moduleCache[t];if(this.compilingModules.has(t))return{};this.compilingModules.add(t);const a=this.appFiles[t];if(!a)throw new Error(`Error in ${s}: can't import file ${e}, it doesn't exist.`);const r=function(e,s){e.includes(".")&&(e=e.split(".")[0]);const t=s.split("\n"),a=/(<[A-Z][a-zA-Z]*|<[a-z]+)(\s|>|\/>)/g;return t.map(((s,t)=>{const r=t+1;return a.test(s)?(a.lastIndex=0,s.replace(a,((t,a,n)=>{const i=s.substring(0,s.indexOf(a)).includes('"')?"'":'"';return n.includes(">")?(n.indexOf(">"),`${a} data-filename=${i}${e}${i} data-linenumber=${i}${r}${i} data-visual-selector-id=${i}${e}${r}${i}${n}`):`${a}${n}data-filename=${i}${e}${i} data-linenumber=${i}${r}${i} data-visual-selector-id=${i}${e}${r}${i} `}))):s})).join("\n")}(t,a);let n;try{n=this.compileJSXToJavascript(t,r,!1)}catch(l){n=this.compileJSXToJavascript(t,a,!0)}const i=this.evaluateJavascriptCode(t,n);return this.moduleCache[t]=i,this.compilingModules.delete(t),i}compileJSXToJavascript(e,s){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!s||"string"!=typeof s)throw new Error(`Invalid code content for "${e}"`);const a=s.trim();let r;try{r=(0,Eu.pd)(a,{transforms:["jsx","imports"],production:!1,filePath:e})}catch(i){throw t&&this.onError(null==i?void 0:i.message,null==i?void 0:i.toString(),e,i),i}let n=r.code;n.startsWith('"use strict";')&&(n=n.substring(13));return`\n            // Initialize module objects\n            const module = { exports: {} };\n            const exports = module.exports;\n            \n            ${n}\n            \n            // No need for regex transforms - module.exports will naturally capture all exports\n        `}evaluateJavascriptCode(e,s){const t={React:Y,require:s=>this.importFile(s,e),console:Du(e,this.onError),...this.globals},a=Object.keys(t),r=a.map((e=>t[e]));try{const t=new Function(...a,s+"; return { moduleExports: module.exports, exportsObj: exports };")(...r),n=t.moduleExports&&Object.keys(t.moduleExports).length>0?t.moduleExports:t.exportsObj;return Ru(e,n)}catch(n){return this.onError(`Error evaluating module ${e}: ${n.message}`,n.toString(),e,n),Ru(e,{})}}render(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=this.importAppFile(e);if(!a)throw new Error(`[AppProjectCompiler] No exports found in "${e}"`);let r=null;if("function"==typeof a)r=a;else if(a.default&&"function"==typeof a.default)r=a.default;else for(const n of Object.keys(a))if("function"==typeof a[n]&&(n.includes("Component")||n.endsWith("Provider")||n.startsWith("App")||"Main"===n||n.charAt(0)===n.charAt(0).toUpperCase())){r=a[n];break}if(!r)throw new Error(`No component found in "${e}"`);return Y.createElement(r,s,t)}handleCSSImport(e){const s=Pu(e);if(this.constructor.injectedCSS||(this.constructor.injectedCSS=new Set),this.constructor.injectedCSS.has(s))return{};let t="";if(!this.appFiles[s])return this.packages[e],{};if(t=this.appFiles[s],t){const e=document.createElement("style");e.textContent=t,e.setAttribute("data-source",s),document.head.appendChild(e),this.constructor.injectedCSS.add(s)}return{}}}function qx(){const[e,s]=(0,Y.useState)(!1),t=(0,Y.useRef)(!1),[a,r]=(0,Y.useState)(null),n=(0,Y.useRef)([]),i=(0,Y.useRef)([]),l=(0,Y.useRef)([]),o=(0,Y.useRef)(null),c=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=document.createElement("div");return s.style.position="absolute",s.style.pointerEvents="none",s.style.transition="all 0.1s ease-in-out",s.style.zIndex="9999",e?(s.style.border="2px dotted #111827",s.style.backgroundColor="rgba(17, 24, 39, 0.03)"):(s.style.border="1px dotted #6366F1",s.style.backgroundColor="rgba(99, 102, 241, 0.05)"),s},d=(e,s)=>{if(!s||!t.current)return;s.offsetWidth;const a=s.getBoundingClientRect();e.style.top=`${a.top+window.scrollY}px`,e.style.left=`${a.left+window.scrollX+9}px`,e.style.width=`${a.width}px`,e.style.height=`${a.height}px`},m=e=>e?[...document.querySelectorAll(`[data-visual-selector-id="${e}"]`)]:[],u=()=>{n.current.forEach((e=>{e&&e.parentNode&&e.remove()})),n.current=[],l.current=[]},h=e=>{if(!t.current)return;const s=e.target.closest("[data-visual-selector-id]");if(!s)return void u();if(o.current===s.dataset.visualSelectorId)return void u();const a=s.dataset.visualSelectorId,r=m(a);u(),r.forEach((e=>{const s=c(!1);document.body.appendChild(s),n.current.push(s),d(s,e)})),l.current=r},x=()=>{u()},p=e=>{if(!t.current)return;const s=e.target.closest("[data-visual-selector-id]");if(!s)return;const a=s.dataset.visualSelectorId;i.current.forEach((e=>{e&&e.parentNode&&e.remove()})),i.current=[];m(a).forEach((e=>{const s=c(!0);document.body.appendChild(s),i.current.push(s),d(s,e)})),r(s),o.current=a,u();const n={type:"element-selected",tagName:s.tagName,classes:s.className,visualSelectorId:a,linenumber:s.dataset.linenumber,filename:s.dataset.filename};window.parent.postMessage(n,"*")};return(0,Y.useEffect)((()=>{document.querySelectorAll("[data-visual-selector-id]");document.querySelectorAll("[data-linenumber]:not([data-visual-selector-id])").forEach(((e,s)=>{const t=`visual-id-${e.dataset.filename}-${e.dataset.linenumber}-${s}`;e.dataset.visualSelectorId=t}));const e=e=>{const a=e.data;switch(a.type){case"toggle-visual-edit-mode":c=a.data.enabled,s(c),t.current=c,c?(document.body.style.cursor="crosshair",document.addEventListener("mouseover",h),document.addEventListener("mouseout",x),document.addEventListener("click",p)):(u(),i.current.forEach((e=>{e&&e.parentNode&&e.remove()})),i.current=[],l.current=[],r(null),o.current=null,document.body.style.cursor="default",document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",x),document.removeEventListener("click",p));break;case"update-classes":a.data&&void 0!==a.data.classes&&((e,s)=>{const t=m(e);0!==t.length&&(t.forEach((e=>{e.className=s})),setTimeout((()=>{var s,a;(o.current===e&&i.current.forEach(((e,s)=>{s<t.length&&d(e,t[s])})),l.current.length>0)&&((null===(s=l.current[0])||void 0===s||null===(a=s.dataset)||void 0===a?void 0:a.visualSelectorId)===e&&n.current.forEach(((e,s)=>{s<l.current.length&&d(e,l.current[s])})))}),50))})(a.data.visualSelectorId,a.data.classes);break;case"unselect-element":i.current.forEach((e=>{e&&e.parentNode&&e.remove()})),i.current=[],r(null),o.current=null;break;case"refresh-page":window.location.reload()}var c};return window.addEventListener("message",e),window.parent.postMessage({type:"visual-edit-agent-ready"},"*"),()=>{window.removeEventListener("message",e),document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",x),document.removeEventListener("click",p),u(),i.current.forEach((e=>{e&&e.parentNode&&e.remove()}))}}),[]),(0,Y.useEffect)((()=>{t.current=e}),[e]),(0,Y.useEffect)((()=>{const e=()=>{if(o.current){const e=m(o.current);i.current.forEach(((s,t)=>{t<e.length&&d(s,e[t])}))}l.current.length>0&&n.current.forEach(((e,s)=>{s<l.current.length&&d(e,l.current[s])}))},s=new MutationObserver((s=>{s.some((e=>{const s=e=>{if(e.nodeType===Node.ELEMENT_NODE){if(e.dataset&&e.dataset.visualSelectorId)return!0;for(let t=0;t<e.children.length;t++)if(s(e.children[t]))return!0}return!1};return"attributes"===e.type&&("style"===e.attributeName||"class"===e.attributeName||"width"===e.attributeName||"height"===e.attributeName)&&s(e.target)}))&&setTimeout(e,50)}));return s.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class","width","height"]}),window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e),s.disconnect()}}),[]),null}function Wx(e){let{appId:s}=e;const[t,a]=(0,Y.useState)(!1),[r,n]=(0,Y.useState)(!0);(0,Y.useEffect)((()=>{"true"===new URLSearchParams(window.location.search).get("hide_badge")&&n(!1)}),[]);return r?(0,be.jsxs)("div",{dir:"ltr",className:"fixed z-50 bottom-4 right-4 flex items-center gap-2 bg-black p-2.5 rounded-md shadow-lg cursor-pointer transition-all hover:shadow-xl border border-neutral-800",onClick:async()=>{a(!0);const e=window.location.hostname;let t;t=e.includes("localhost")?"http://localhost:3000":e.includes("base44.io")?"https://base44.io":e.includes("beta-base44.onrender.com")?"https://beta-base44.onrender.com":"https://app.base44.com",window.open(`${t}/remix-app/${s}`,"_blank"),a(!1)},children:[(0,be.jsx)("img",{src:"https://base44.com/logo_v3.png",alt:"base44",className:"w-5 h-5"}),(0,be.jsx)("span",{className:"whitespace-nowrap text-xs text-neutral-200",children:t?(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Ae.A,{className:"w-3 h-3 animate-spin text-neutral-400"}),(0,be.jsx)("span",{className:"text-neutral-400",children:"Cloning..."})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("span",{className:"text-neutral-400 font-medium",children:"Edit with "}),(0,be.jsx)("span",{className:"text-white font-bold",children:"base44"})]})}),(0,be.jsx)("button",{className:"p-0.5 rounded-full hover:bg-neutral-700 transition-colors","aria-label":"Close badge",onClick:e=>{e.stopPropagation(),n(!1)},children:(0,be.jsx)(He.A,{className:"w-3.5 h-3.5 text-neutral-400"})})]}):null}const Yx=()=>(0,be.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-white to-gray-50",children:(0,be.jsx)("div",{className:"max-w-md w-full p-8 bg-white rounded-lg shadow-lg border border-gray-100",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-6 rounded-full bg-red-100",children:(0,be.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,be.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Access Restricted"}),(0,be.jsx)("p",{className:"text-gray-600 mb-8",children:"You are not registered to use this application. Please contact the app administrator to request access."}),(0,be.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md text-sm text-gray-600",children:[(0,be.jsx)("p",{children:"If you believe this is an error, you can:"}),(0,be.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,be.jsx)("li",{children:"Verify you are logged in with the correct account"}),(0,be.jsx)("li",{children:"Contact the app administrator for access"}),(0,be.jsx)("li",{children:"Try logging out and back in again"})]})]})]})})});function Gx(e){var s,t,a,r;let{appId:n}=e;const{isAuthenticated:i,isLoadingAuth:l,logout:o}=ku(),c=(0,J.zy)(),d=(0,J.Zp)(),{appId:m,appSlug:u,pageName:h}=(0,J.g)(),[x,p]=(0,Y.useState)(null),[g,f]=(0,Y.useState)(null),[j,b]=(0,Y.useState)(!0),v=e=>{const s=new Bx(e,{cn:Be,localStorage:Iu()},((s,t,a,r)=>{e.options.onError(s,t,a,r)})),t=e.getCurrentPage();if(!t)return void f((0,be.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 space-y-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,be.jsx)("div",{className:"text-2xl font-medium text-gray-700",children:"Page Not Found"}),(0,be.jsxs)("div",{className:"text-gray-600",children:['The page "',h,'" could not be found in this application.']})]}));const a=s.render("pages/"+t.name);if(e.files.layout){const e=s.render("layout",{currentPageName:null==t?void 0:t.name},[a]);f(e)}else f(a)};(0,Y.useEffect)((()=>{Tu({id:n||m,slug:u,onError:y,authProps:{isLoadingAuth:l,logout:o,isUserAuthenticated:()=>i}}).then((e=>{p(e)})).catch((e=>{var s,t,a,r,n,i,l,o;e.response&&403===e.response.status&&null!==(s=e.response.data)&&void 0!==s&&null!==(t=s.extra_data)&&void 0!==t&&t.reason?"auth_required"===(null===(a=e.response.data)||void 0===a||null===(r=a.extra_data)||void 0===r?void 0:r.reason)?C(null===(l=e.response.data)||void 0===l||null===(o=l.extra_data)||void 0===o?void 0:o.app_id):"user_not_registered"===(null===(n=e.response.data)||void 0===n||null===(i=n.extra_data)||void 0===i?void 0:i.reason)&&b(!1):y("Failed to load app "+e.message,"none","general",e)}))}),[]);const y=(e,s,t,a)=>{var r,n;402!==(null==a||null===(r=a.response)||void 0===r?void 0:r.status)&&(null===(n=window.parent)||void 0===n||n.postMessage({type:"app_error",error:{title:e.toString(),details:null==s?void 0:s.toString(),componentName:null==t?void 0:t.toString()}},"*"))};(0,Y.useEffect)((()=>{window.parent.postMessage({type:"app_changed_url",url:window.location.href},"*"),x&&v(x)}),[c,h,x]);const N=e=>{var s;const t=null===(s=e.reason.stack.match(/at\s+(\w+)\s+\(eval/))||void 0===s?void 0:s[1],a=t?`Error in ${t}: ${e.reason.toString()}`:e.reason.toString();y(a,e.reason.toString(),t,e.reason)},w=e=>{var s,t;let a=null===(t=(null===(s=e.error)||void 0===s?void 0:s.stack).match(/at\s+(\w+)\s+\(eval/))||void 0===t?void 0:t[1];"eval"===a&&(a=null);const r=a?`in ${a}: ${e.error.toString()}`:e.error.toString();y(r,e.error.toString(),a,e.error)};(0,Y.useEffect)((()=>(window.addEventListener("unhandledrejection",N),window.addEventListener("error",w),()=>{window.removeEventListener("unhandledrejection",N),window.removeEventListener("error",w)})),[]);const C=e=>{d(`/login?from_url=${window.location.href}&app_id=${e}`)};return(0,Y.useEffect)((()=>{let e=null==x?void 0:x.getCurrentPage();i&&null!=x&&x.appId&&null!=e&&e.name&&pt.logUserInApp(x.appId,e.name)}),[i,null==x?void 0:x.appId,null==x||null===(s=x.getCurrentPage())||void 0===s?void 0:s.name]),j?x?l?(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsx)("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-black rounded-full animate-spin"})}):(0,be.jsxs)("div",{className:"min-h-screen w-full relative app-preview",children:[(0,be.jsx)(qx,{}),(null==x||null===(t=x.files)||void 0===t?void 0:t.is_remixable)&&(null==x||null===(a=x.files)||void 0===a||null===(r=a.public_settings)||void 0===r?void 0:r.includes("public"))&&(0,be.jsx)(Wx,{appId:n}),(0,be.jsx)("div",{className:"flex flex-col w-full h-full",id:"app-demo",children:(0,be.jsx)("div",{className:"bg-white w-full min-h-full overflow-auto",children:(0,be.jsx)("div",{id:"component-preview-container",children:g})})})]}):(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsx)("div",{className:"flex flex-col items-center space-y-4",children:(0,be.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"})})}):(0,be.jsx)(Yx,{})}function Hx(e){var s;let{appId:t}=e;const a=(0,J.zy)(),[r,n]=(0,Y.useState)(!0),[i,l]=(0,Y.useState)(null),[o,c]=(0,Y.useState)(null),d=new URLSearchParams(a.search),m=(0,be.jsxs)("button",{onClick:()=>{const e=d.get("from_url")||"/",s=d.get("app_id")||t;let a=`${se()}/apps/auth/login?from_url=${e}`;s&&(a+=`&app_id=${s}`),window.location.href=a},className:"w-full flex items-center justify-center gap-3 bg-white text-gray-800 px-6 py-3 rounded-full border border-gray-300 hover:bg-gray-50 hover:shadow-md transition-all duration-200 font-medium text-base",children:[(0,be.jsx)("img",{height:"20",width:"20",src:"https://cdn.simpleicons.org/google",alt:"Google logo"}),(0,be.jsx)("span",{children:"Continue with Google"})]});return(0,Y.useEffect)((()=>{(async()=>{try{const e=await we.getLoginInfoById(t);c(e),n(!1)}catch(i){l(i),n(!1)}})()}),[t]),r?(0,be.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:(0,be.jsx)("div",{className:"p-8 rounded-full bg-white/30 backdrop-blur-sm",children:(0,be.jsx)(Ae.A,{className:"h-10 w-10 animate-spin text-indigo-600"})})}):i?(0,be.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 via-white to-orange-50",children:(0,be.jsx)("div",{className:"p-8 text-lg font-medium text-rose-600 bg-white/80 backdrop-blur-sm rounded-lg shadow-sm",children:"An error occurred while loading the app"})}):(0,be.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-purple-50 p-4",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),(0,be.jsx)("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-[1px]"}),(0,be.jsxs)(Ds,{className:"relative max-w-md w-full overflow-hidden border-0 shadow-[0_0_1px_rgba(0,0,0,0.1),0_8px_32px_-8px_rgba(0,0,0,0.1)] bg-white/70 backdrop-blur-xl",children:[(0,be.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),(0,be.jsxs)(Ms,{className:"pt-16 pb-14 px-12 flex flex-col items-center text-center space-y-10",children:[(null==o?void 0:o.logo_url)&&(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("div",{className:"absolute -inset-4 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full blur-2xl opacity-50 group-hover:opacity-75 transition-opacity"}),(0,be.jsxs)(ot,{className:"relative h-32 w-32 shadow-xl ring-4 ring-white/90 transition-all duration-300 hover:scale-105",children:[(0,be.jsx)(ct,{src:o.logo_url,alt:`${o.name} logo`,className:"object-cover"}),(0,be.jsx)(dt,{className:"bg-gradient-to-br from-indigo-50 to-purple-50 text-3xl font-semibold text-indigo-600",children:null===(s=o.name)||void 0===s?void 0:s[0]})]})]}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-br from-gray-900 to-gray-600 bg-clip-text text-transparent",children:["Welcome to ",null==o?void 0:o.name]}),(0,be.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Sign in to continue your journey"})]}),(0,be.jsx)("div",{className:"w-full",children:m})]})]})]})}function Vx(e){let{}=e;const[s,t]=(0,Y.useState)(null),[a,r]=(0,Y.useState)(null),[n,i]=(0,Y.useState)(!0),l=window.location.host.includes("localhost")?window.location.host:window.location.hostname;return(0,Y.useEffect)((()=>{we.getDomainAppId(l).then((e=>{t(e),window.appId=e,i(!1)})).catch((e=>{r(!0),i(!1)}))}),[]),n?(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,be.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-black rounded-full animate-spin"})}):a?(0,be.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Domain Not Recognized"}),(0,be.jsx)("p",{className:"mb-2",children:"This domain is not associated with any Base44 app."}),(0,be.jsxs)("p",{children:["Please contact support at ",(0,be.jsx)("button",{type:"button",onClick:()=>window.open("/support","_blank"),className:"underline text-primary hover:text-orange-500 transition-colors",children:"support system"})," for assistance."]})]})}):(0,be.jsxs)(V.BrowserRouter,{children:[(0,be.jsx)("div",{children:(0,be.jsx)(Rt.Toaster,{})}),(0,be.jsx)("div",{children:(0,be.jsx)(nx,{})}),(0,be.jsx)("div",{children:(0,be.jsx)(Rt.Toaster,{})}),(0,be.jsx)(Su,{appId:s,children:(0,be.jsxs)(J.BV,{children:[(0,be.jsx)(J.qh,{path:"/login",element:(0,be.jsx)(Hx,{appId:s})}),(0,be.jsx)(J.qh,{path:"/:pageName?",element:(0,be.jsx)(Gx,{appId:s})})]})})]})}function Jx(e){let{page:s}=e;const t=!(!1===s.requiresAuth),a=!(!1===s.usesLayout),r=fu.filter((e=>!1!==e.showInMenu));let n=a?(0,be.jsx)(Nu,{pages:r,children:s.component}):s.component;return t&&(n=(0,be.jsx)(Kx,{children:n})),n}const Kx=e=>{let{children:s}=e;const{isAuthenticated:t,isLoadingAuth:a}=Ne();if(a)return(0,be.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,be.jsx)(Ae.A,{className:"h-8 w-8 animate-spin"})});if(!t){const e=encodeURIComponent(window.location.href),s=window.location.hostname;return"app.base44.com"!==s&&"localhost"!==s&&"base44.com"!==s&&(window.location.href=`https://app.base44.com/login?from_url=${e}`),(0,be.jsx)(J.C5,{to:`/login?from_url=${e}`,replace:!0})}return s},Zx=()=>{const e=X().flatMapDeep(fu,(e=>[e,...e.children||[]]));return(0,be.jsx)(V.BrowserRouter,{children:(0,be.jsxs)(ye,{children:[(0,be.jsx)(J.BV,{children:e.map((e=>(0,be.jsx)(J.qh,{path:e.url,element:(0,be.jsx)(Jx,{page:e})},e.url)))}),(0,be.jsx)(md,{})]})})},Xx=()=>{const e=window.location.hostname;let s=(0,be.jsx)(Zx,{});return"docs.base44.com"!==e&&(["localhost","base44.com","base44.app","base44.io","app.base44.com","base44.onrender.com","apper-test.onrender.com","beta-base44.onrender.com"].includes(e)||e.includes("onrender.com"))||(s=(0,be.jsx)(Vx,{})),(0,be.jsxs)("div",{className:"font-sans",children:[(0,be.jsx)("div",{children:(0,be.jsx)(Eo,{})}),(0,be.jsx)("div",{children:(0,be.jsx)(nx,{})}),(0,be.jsx)("div",{children:(0,be.jsx)(Rt.Toaster,{})}),(0,be.jsx)(Qe,{children:s})]})},Qx=e=>{e&&e instanceof Function&&t.e(96).then(t.bind(t,88206)).then((s=>{let{getCLS:t,getFID:a,getFCP:r,getLCP:n,getTTFB:i}=s;t(e),a(e),r(e),n(e),i(e)}))};G.createRoot(document.getElementById("root")).render((0,be.jsx)(Xx,{})),Qx()}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var t=r[e]={id:e,loaded:!1,exports:{}};return a[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}n.m=a,e=[],n.O=(s,t,a,r)=>{if(!t){var i=1/0;for(d=0;d<e.length;d++){t=e[d][0],a=e[d][1],r=e[d][2];for(var l=!0,o=0;o<t.length;o++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](t[o])))?t.splice(o--,1):(l=!1,r<i&&(i=r));if(l){e.splice(d--,1);var c=a();void 0!==c&&(s=c)}}return s}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,a,r]},n.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return n.d(s,{a:s}),s},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var r=Object.create(null);n.r(r);var i={};s=s||[null,t({}),t([]),t(t)];for(var l=2&a&&e;"object"==typeof l&&!~s.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((s=>i[s]=()=>e[s]));return i.default=()=>e,n.d(r,i),r},n.d=(e,s)=>{for(var t in s)n.o(s,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.O.j=s=>0===e[s];var s=(s,t)=>{var a,r,i=t[0],l=t[1],o=t[2],c=0;if(i.some((s=>0!==e[s]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(o)var d=o(n)}for(s&&s(t);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},t=self.webpackChunkfrontend=self.webpackChunkfrontend||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})(),n.nc=void 0;var i=n.O(void 0,[96],(()=>n(3423)));i=n.O(i)})();